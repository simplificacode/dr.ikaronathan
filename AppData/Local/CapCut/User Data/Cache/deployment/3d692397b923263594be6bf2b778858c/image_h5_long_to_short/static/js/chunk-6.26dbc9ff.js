/*!
* @ies/filter-xss v3.1.4
* (c) 2024
*/var e,t;e=this,t=function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var n=/[^a-zA-Z0-9\\_:.-]/gim,i=/</g,o=/>/g,a=/&#([a-zA-Z0-9]*);?/gim,s=/&quot;/g,c=/&colon;?/gim,l=/&newline;?/gim,u=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,d=/u\s*r\s*l\s*\(.*/gi,h=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,p=/"/g,f=function(e){return e.replace(i,"&lt;").replace(o,"&gt;")},v={indexOf:function(e,t){var r,n;for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1},forEach:function(e,t,r){var n,i;for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},some:function(e,t,r){var n,i;for(n=0,i=e.length;n<i;n++)if(t.call(r,e[n],n,e))return!0;return!1},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},includes:function(e,t){if("string"==typeof e)return -1!==e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},uniq:function(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(r.push(e[n]),t[e[n]]=!0);return r},from:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},keys:function(e){var t=[];for(var r in e)t.push(r);return t}};function g(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]?e.substr(1,e.length-2):e}function m(e){var t,r,n,i,o,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u=0;for(e=function(e){e=e.replace(/rn/g,"n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?t+=String.fromCharCode(n>>6|192)+String.fromCharCode(63&n|128):t+=String.fromCharCode(n>>12|224)+String.fromCharCode(n>>6&63|128)+String.fromCharCode(63&n|128)}return t}(e);u<e.length;)i=(t=e.charCodeAt(u++))>>2,o=(3&t)<<4|(r=e.charCodeAt(u++))>>4,a=(15&r)<<2|(n=e.charCodeAt(u++))>>6,s=63&n,isNaN(r)?a=s=64:isNaN(n)&&(s=64),l=l+c.charAt(i)+c.charAt(o)+c.charAt(a)+c.charAt(s);return l}function _(e){var t,r,n,i,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");l<e.length;)t=s.indexOf(e.charAt(l++))<<2|(i=s.indexOf(e.charAt(l++)))>>4,r=(15&i)<<4|(o=s.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(a=s.indexOf(e.charAt(l++))),c+=String.fromCharCode(t),64!==o&&(c+=String.fromCharCode(r)),64!==a&&(c+=String.fromCharCode(n));return function(e){for(var t="",r=0,n=0,i=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(t+=String.fromCharCode((31&n)<<6|63&e.charCodeAt(r+1)),r+=2):(t+=String.fromCharCode((15&n)<<12|(63&e.charCodeAt(r+1))<<6|63&e.charCodeAt(r+2)),r+=3);return t}(c)}function y(e,t,r){var n="",i=0,o=!1,a=!1,s=0,c=e.length,l="",u="";e:for(s=0;s<c;s++){var d=e.charAt(s);if(!1===o){if("<"===d){o=s;continue}}else if(!1===a){if("<"===d){n+=r(e.slice(i,s)),o=s,i=s;continue}if(">"===d||s===c-1){n+=r(e.slice(i,o)),l=function(e){var t,r=v.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=v.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}(u=e.slice(o,s+1)),n+=t(o,n.length,l,u,"</"===u.slice(0,2)),i=s+1,o=!1;continue}if('"'===d||"'"===d)for(var h=1,p=e.charAt(s-h);""===p.trim()||"="===p;){if("="===p){a=d;continue e}p=e.charAt(s-++h)}}else if(d===a){a=!1;continue}}return i<c&&(n+=r(e.substr(i))),n}function b(e,t){var r=0,i=0,o=[],a=!1,s=e.length;function c(e,r){if(!((e=(e=v.trim(e)).replace(n,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&o.push(i)}}for(var l=0;l<s;l++){var u=e.charAt(l),d=void 0;if(!1!==a||"="!==u){if(!1===a||l!==i){if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===a){if(-1===(d=function(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}return -1}(e,l))){c(v.trim(e.slice(r,l))),a=!1,r=l+1;continue}l=d-1;continue}if(-1===(d=function(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}return -1}(e,l-1))){c(a,g(v.trim(e.slice(r,l)))),a=!1,r=l+1;continue}}}else{if(-1===(d=e.indexOf(u,l+1)))break;c(a,v.trim(e.slice(i+1,d))),a=!1,r=(l=d)+1}}else a=e.slice(r,l),r=l+1,i='"'===e.charAt(r)||"'"===e.charAt(r)?r:function(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}return -1}(e,l+1)}return r<e.length&&(!1===a?c(e.slice(r)):c(a,g(v.trim(e.slice(r))))),v.trim(o.join(" "))}function w(e,t,r){var n,i;if(r=function(e){for(var t="",r=0,n=e.length;r<n;r++)t+=32>e.charCodeAt(r)?" ":e.charAt(r);return v.trim(t)}(r.replace(s,'"').replace(a,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}).replace(c,":").replace(l," ")),"href"===t||"src"===t){if("#"===(r=v.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(u.lastIndex=0,u.test(r))return""}else if("style"===t&&(h.lastIndex=0,h.test(r)||(d.lastIndex=0,d.test(r)&&(u.lastIndex=0,u.test(r)))))return"";return r=f(r.replace(p,"&quot;"))}var k=function(e){return"string"==typeof e?e.replace(/'/g,'"').replace('=""',"").replace(/\s+/g,"").toLowerCase():""},x=function(){function e(e){var t=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{});t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=function(){return""}),t.whiteList={},t.onTag=function(){},t.onTagAttr=function(){},t.onIgnoreTag=function(){},t.onIgnoreTagAttr=function(){},t.safeAttrValue=w,t.escapeHtml=f,this.options=Object.assign(t,e)}return e.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t,r,n,i,o,a=this.options,s=a.whiteList,c=a.onTag,l=a.onIgnoreTag,u=a.onTagAttr,d=a.onIgnoreTagAttr,h=a.safeAttrValue,p=a.escapeHtml;a.stripBlankChar&&(e=e.split("").filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}).join("")),a.allowCommentTag||(e=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("<!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var i=e.indexOf("-->",n);if(-1===i)break;r=i+3}return t}(e));var f=!1;a.stripIgnoreTagBody&&(t=a.stripIgnoreTagBody,"function"!=typeof(r=l)&&(r=function(){}),n=!Array.isArray(t),i=[],o=!1,l=(f={onIgnoreTag:function(e,a,s){if(n||-1!==v.indexOf(t,e)){if(s.isClosing){var c=s.position+10;return i.push([!1!==o?o:s.position,c]),o=!1,"[/removed]"}return o||(o=s.position),"[removed]"}return r(e,a,s)},remove:function(e){var t="",r=0;return v.forEach(i,function(n){t+=e.slice(r,n[0]),r=n[1]}),t+=e.slice(r)}}).onIgnoreTag);var g=y(e,function(e,t,r,n,i){var o={sourcePosition:e,position:t,isClosing:i,isWhite:Object.prototype.hasOwnProperty.call(s,r)},a=c(r,n,o);if(null!=a)return a;if(o.isWhite){if(o.isClosing)return"</".concat(r,">");var f=function(e){var t=v.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=v.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=v.trim(e.slice(0,-1))),{html:e,closing:r}}(n),g=s[r],m=b(f.html,function(e,t){var n=-1!==v.indexOf(g,e),i=u(r,e,t,n);return null==i?n?(t=h(r,e,t,null))?"".concat(e,'="').concat(t,'"'):e:null==(i=d(r,e,t,n))?void 0:i:i});return n="<".concat(r),m&&(n+=" ".concat(m)),f.closing&&(n+=" /"),n+=">"}return null==(a=l(r,n,o))?p(n):a},p);return f&&(g=f.remove(g)),g},e}(),S=!0,E=function(e){return e&&e.Math==Math&&e},T=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof global&&global)||Function("return this")();try{!0!==(S=!!(S=String(S)).startsWith("<%=")||JSON.parse(S))&&"true"!==S||(T=Function("\nvar _checkXSS = function (it) {\n  return it && it.Math == Math && it;\n};\nreturn _checkXSS(typeof globalThis === 'object' && globalThis) ||\n_checkXSS(typeof window === 'object' && window) ||\n_checkXSS(typeof self === 'object' && self) ||\n_checkXSS(typeof global === 'object' && global) ||\nFunction('return this')();\n")())}catch(e){console.log(e)}var C=new(function(){function e(){var e=this;this.batchData=[],this.uniqKeys=new Set,this.timeout=2e3,this.lock=!1,this.isSetedConfig=!1,this.getSlardarBid=function(){var t,r,n="cc_web_smart_tools";if(!v.includes(n,"bid"))return n;if(e.config&&e.config.bid)return e.config.bid;var i=T;if(i&&i._xssBid)return i._xssBid;if(i&&i.slardar&&"function"==typeof i.slardar.config){var o=(i.slardar.config()||{}).bid;if(o)return o}if(i&&i.Slardar&&"function"==typeof i.Slardar.config){var a=(i.Slardar.config()||{}).bid;if(a)return a}return(null===(r=null===(t=null==i?void 0:i.Slardar)||void 0===t?void 0:t._baseParams)||void 0===r?void 0:r.bid)||"argus"},this.getConfigRegion=function(){var t,r="maliva";return v.includes(r,"region")?e.config&&e.config.region?e.config.region:((null===(t=null==T?void 0:T.gfdatav1)||void 0===t?void 0:t.region)||"cn").toLowerCase():r},this.gerReportUrl=function(){var t={cn:_("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:_("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:_("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:_("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:_("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:_("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:_("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9")}[e.getConfigRegion()];if(t)return t+e.getSlardarBid()}}return e.prototype.setConfig=function(e){this.isSetedConfig||(this.config=e)},e.prototype.upload=function(){var e=this;if(!this.config||!this.config.isCloseSSRReport||(null==T?void 0:T.document)){var t=!1;t=String(!1);try{if((!0===(t=!t.startsWith("<%=")&&JSON.parse(t))||"true"===t)&&!(null==T?void 0:T.document))return}catch(e){console.log(e)}var r=this.gerReportUrl();!this.lock&&r&&0!==this.batchData.length&&(this.lock=!0,setTimeout(function(){var t=e.batchData.slice(0,100);e.batchData=e.batchData.slice(100),T.fetch(r,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).catch(function(e){console.warn("xss defense report error",e)}),e.lock=!1,e.upload()},this.timeout))}},e.prototype.generateKey=function(e){return e.collectKey?[e.collectMode,e.collectKey].join("___"):""},e.prototype.push=function(e){this.batchData.push(e),this.upload()},e.prototype.report=function(e){var t=this.generateKey(e);if(T.fetch&&e.collectKey){var r="SSR";void 0!==T&&void 0!==T.location&&void 0!==T.location.href&&(r=T.location.href),e.documentUrl=r;var n={age:Math.floor(Date.now()),type:"xss",url:r,body:e,"user-agent":""};n.url="".concat(t,"___").concat(e.documentUrl),"SSR"===r&&(n.url="SSR___".concat(n.url),n.body.ssr=!0),this.push(n)}},e}());function A(e,t){return C.setConfig(t),new x(t).process(e)}var I=function(e){return -1===(e=(e=(e=(e=e.replace(/&colon;/gi,":")).replace(/&tab;/gi,"")).replace(/&newline;/gi,"")).replace(/(\t|\n|\r)/g,"")).indexOf("&#")?e.trim().toLowerCase():e.trim().replace(/&#(?:(x)([0-9a-f]+)|([0-9]+));?/gi,function(e,t,r,n){return String.fromCharCode(t?parseInt(r,16):parseInt(n))}).replace(/(\t|\n|\r)/g,"").toLowerCase()};function R(e,t){if(void 0===e&&(e=""),"string"!=typeof e)return!0;if(e=I(e),v.includes(e,"base64")&&!function(e){if(""===e||""===e.trim())return!0;try{return!v.includes(e,"data:text/html;base64")}catch(e){return!0}}(e))return t&&t("data:text/html;base64"),!1;var r=["expression(","behavior:","view-source:"];if(v.some(r,function(t){return -1!==e.indexOf(t)}))return v.forEach(r,function(r){-1!==e.indexOf(r)&&t&&t(r)}),!1;var n=["data:application","data:javascript","data:text/html","data:texthtml"];if(v.some(n,function(t){return -1!==e.indexOf(t)}))return v.forEach(n,function(r){-1!==e.indexOf(r)&&t&&t(r)}),!1;if(e.indexOf("javascript:")>0)return t&&t("javascript:"),!1;if(/^javascript:/i.test(e)){var i=e.slice(11).replace(/\s/g,"").trim();return!!v.some(["void","void(0)","void0","false","undefined",";"],function(e){return e===i})||(t&&t("javascript:"),!1)}return!0}var P=function(e,t){var r,n,i=!1;if(i=String(!1),"string"!=typeof e||(n=Number(1e4),void 0!==r&&(n=r),"NaN"!==n.toString()&&-1!==n&&e.length>=n)||R(e,t))return e;try{if(!0===(i=!i.startsWith("<%=")&&JSON.parse(i))||"true"===i){var o=new URL(e);return o.origin+o.pathname}}catch(e){return console.log(e),"#"}return"#"};function O(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=[]),"string"!=typeof e)return!0;if(!R(e=I(e)))return!1;var i,o={url:(i=e.match(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/)||[])[0],scheme:i[1],slash:i[2],host:i[3],port:i[4],path:i[5],query:i[6],hash:i[7]},a=o.scheme,s=o.host;return n?!!n(e):!(!a||!s)&&(!v.includes(["http","https","file"],a)||("object"==typeof window&&window&&(t=r(r([],t,!0),[location.host],!1)),v.some(t,function(e){return!!(e instanceof RegExp&&e.test(s))||e===s})))}var D=function(e,t){for(var r={},n=0,i=v.keys(e);n<i.length;n++){var o=i[n];Array.isArray(e[o])?r[o]=v.from(e[o]):r[o]=D({},e[o])}for(var a=0,s=v.keys(t);a<s.length;a++)(o=s[a])in e?Array.isArray(e[o])?r[o]=e[o].concat(t[o]):r[o]=D(e[o],t[o]):Array.isArray(t[o])?r[o]=v.from(t[o]):r[o]=D({},t[o]);return r},M={blackList:{a:["folder"],meta:["content"],iframe:["srcdoc"],input:["pattern"],vmlframe:["xmlns"]},blackTags:["script","xml","embed","isindex","object","base","set","handler","animate","payload","import"],blackAttrs:["charset","ns","namespace","formaction","xlink:href","xmlns:xlink","handler","repeat","repeat-start","repeat-end"],blackAttrRegExps:[/^on/],filterList:{param:["value"],video:["poster"],form:["action"]},filterAttrs:["href","src","background","style","dynsrc","lowsrc","content"],specialContentClosure:["title","style","noscript","textarea","xmp","iframe","noembed","noframes"]};try{var L={};L.blackAttrRegExps&&(L.blackAttrRegExps=L.blackAttrRegExps.map(function(e){return new RegExp(e.toString().slice(1,e.toString().length-1))}));var N="merge";v.includes(N,"override")&&(M=L),v.includes(N,"merge")&&(M=D(M,L))}catch(e){console.log(e)}var j={mode:"black",whiteList:{},blackConfig:M,collect:null,initCollect:function(){j.collect={blackList:{},blackTags:[],blackAttrs:[],blackAttrRegExps:[],filterAttrs:[],filterList:{},filterProtocol:[]}},removeCollect:function(){var e=function(e){for(var t=0,r=function(r){Array.isArray(e[r])?0===e[r].length?delete e[r]:(e[r]=v.from(v.uniq(e[r])),t+=e[r].length):0===v.keys(e[r]).length?delete e[r]:v.keys(e[r]).forEach(function(n){e[r][n]=v.from(v.uniq(e[r][n])),t+=e[r][n].length})},n=0,i=v.keys(e);n<i.length;n++)r(i[n]);return{count:t,ret:e}}(j.collect),t=e.count,r=e.ret;return j.collect=null,{collectKey:0===t?null:JSON.stringify(r),collectMode:"black"}},onIgnoreTag:function(e,t){var r;if(!v.includes(M.blackTags,e))return y(t,function(e,t,r,n,i){if(-1!==r.indexOf("/"))return f(n);if(i)return"</".concat(r,">");var o=function(e){var t,r=(t=/\s|\n|\t/.exec(e))?t.index:-1;if(-1===r)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=e.slice(r+1,-1).trim())[e.length-1];return n&&(e=e.slice(0,-1).trim()),{html:e,closing:n}}(n),a=b(o.html,function(e,t){var n,i,o=0;if(M.blackList[r]&&v.includes(M.blackList[r],e)&&(j.collect.blackList[r]=j.collect.blackList[r]||[],j.collect.blackList[r].push(e),o++),M.blackAttrRegExps.length&&M.blackAttrRegExps.some(function(t){return t.test(e)})&&v.forEach(M.blackAttrRegExps,function(t){t.test(e)&&(j.collect.blackAttrRegExps.push("".concat(t.toString(),"->").concat(e)),o++)}),M.blackAttrs.length&&v.includes(M.blackAttrs,e)&&(M.blackAttrs.push(e),o++),!o){if(Array.isArray(M.specialContentClosure)&&"string"==typeof t&&M.specialContentClosure.find(function(e){return t.includes("</".concat(e,">"))})){null===(n=j.collect)||void 0===n||n.filterAttrs.push(e);var a="#";return t?"".concat(e,"='").concat(a,"'"):e}return M.filterList&&M.filterList[r]&&v.includes(M.filterList[r],e)?((a=P(t,function(e){var t;null===(t=j.collect)||void 0===t||t.filterProtocol.push(e)}))!==t&&(j.collect.filterList[r]=j.collect.filterList[r]||[],j.collect.filterList[r].push(e)),t?"".concat(e,"='").concat(a,"'"):e):M.filterAttrs&&v.includes(M.filterAttrs,e)?((a=P(t,function(e){var t;null===(t=j.collect)||void 0===t||t.filterProtocol.push(e)}))!==t&&(null===(i=j.collect)||void 0===i||i.filterAttrs.push(e)),t?"".concat(e,"='").concat(a,"'"):e):t?"".concat(e,"='").concat(t,"'"):e}});return n="<".concat(r),a&&(n+=" ".concat(a)),o.closing&&(n+=" /"),n+=">"},f);null===(r=j.collect)||void 0===r||r.blackTags.push(e)}},F=function(e){var t=e.reportOnly,r=void 0===t||t,n=e.block;return r&&"all"===r?"report":("string"==typeof r&&("true"===r&&(r=!0),"false"===r&&(r=!1)),n?"enforce":r?"report":"enforce")},U=function(e){return function(r,n,i){if(!r||"string"!=typeof r)return r;var o=n;e===A&&(o=j).initCollect();var a=e(r,o);if(k(a)===k(r))return r;if(!i)return a;var s=i.logType,c=F(i),l=o.removeCollect();return C.report(t(t({type:s,disposition:c},l),{sourceText:m(r.replace(/'/g,'"')),filterText:m(a.replace(/'/g,'"'))})),"enforce"===c?a:r}},Z=U(function(e,t){return void 0===t&&(t={}),t&&t.whiteList||(t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}),new x(t).process(e)}),B=U(A),V=function(e,t,r){var n=[],i=P(e,function(e){n.push(e)});if(i===e)return e;n=v.from(v.uniq(n));var o=t||r||{};if(!o)return i;var a=o.logType,s=F(r);return C.report({type:a,disposition:s,collectKey:n.join("___"),collectData:JSON.stringify(n),collectMode:"black",sourceText:m(e),filterText:m(i)}),"enforce"===s?i:e},W=T._xssProject||{},z=T.xssNamespace||{},G="3.1.4",Y={FilterXSS:x,version:G,webpackPluginVersion:"3.1.9",reportOnly:"all",filterXSS:Z,_filterXSS:B,filterUrl:V,BlackConfig:j,project:W,setProjectName:function(e){W[e]=this,T._xssProjectName=e}};z["lvweb/smart-tools"]=Y,T.xssNamespace=z,T.Math&&!T.Math.xssNamespace&&(T.Math.xssNamespace=z),W[G]=Y,T.globalThis=T,T.getFilterXss=function(){return void 0!==this._xssProjectName?this._xssProject[this._xssProjectName]:Y},T.xss=Y,T.isSafeUrl=O,T.isSafeDomain=O,T.isSafeProtocol=R,T._xssProject=W,T._xssProjectName&&(W[T._xssProjectName]=Y);var H=Y.setProjectName.bind(Y);e.BlackConfig=j,e.FilterXSS=x,e._filterXSS=B,e.filterUrl=V,e.filterXSS=Z,e.isSafeDomain=O,e.isSafeProtocol=R,e.isSafeUrl=O,e.project=W,e.setProjectName=H,e.setXssNamespace=function(e){var t=e.appId,r=e.bid,n=e.region,i=e.isCloseSSRReport;z[t]=Y,j.bid=r,j.region=n,j.enabled=!0,j.isCloseSSRReport=i},e.xssNamespace=z,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xss={}),(self.webpackChunksmart_tools=self.webpackChunksmart_tools||[]).push([["8851"],{255364:function(e,t,r){"use strict";r.d(t,{Z:function(){return S}});var n=r(218571),i=r(656002),o=r.n(i),a=r(76257),s=r(903739),c=r(650261),l=r(594200),u=r(795754),d=r(33049),h=r(648182),p=r(574349),f=r(657152),v=r(652328),g=r(642981),m=r(224617),_=function(){return(_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},b=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},w=["small","default","large"],k={split:!0,bordered:!0,defaultCurrent:1,offsetBottom:0,throttleDelay:500},x=n.forwardRef(function(e,t){var r=(0,n.useContext)(h.E_),i=r.getPrefixCls,c=r.loadingElement,x=r.size,S=r.renderEmpty,E=r.componentConfig,T=r.rtl,C=(0,g.Z)(e,k,null==E?void 0:E.List),A=C.style,I=C.wrapperStyle,R=C.className,P=C.wrapperClassName,O=C.children,D=void 0===O?[]:O,M=C.dataSource,L=void 0===M?[]:M,N=C.size,j=C.footer,F=C.header,U=C.pagination,Z=C.bordered,B=C.split,V=C.render,W=C.grid,z=C.loading,G=C.hoverable,Y=C.scrollLoading,H=C.paginationInFooter,K=C.offsetBottom,J=C.throttleDelay,q=C.defaultCurrent,X=C.noDataElement,Q=C.listRef,$=C.onReachBottom,ee=C.onListScroll,et=N||(w.indexOf(x)>-1?x:"default"),er=i("list"),en=(0,n.useRef)(null),ei=(0,n.useRef)(null),eo=(0,n.useRef)(null),ea=(0,n.useRef)(null),es=(0,n.useRef)(!0),ec=b((0,n.useState)(U&&"object"==typeof U&&(U.pageSize||U.defaultPageSize)||10),2),el=ec[0],eu=ec[1],ed=b((0,n.useState)(U&&"object"==typeof U&&(U.current||U.defaultCurrent)||1),2),eh=ed[0],ep=ed[1],ef=b((0,n.useState)(q),2),ev=ef[0],eg=ef[1],em=n.Children.count(D);(0,n.useImperativeHandle)(Q,function(){return{dom:en.current,scrollIntoView:function(e,t){if(ei.current)ei.current.scrollTo({index:e,options:t});else if(ea.current){var r=ea.current.children[e];r&&(0,v.Z)(r,_({boundary:eo.current},t))}}}});var e_=C.virtualListProps?C.virtualListProps:C.height?{height:C.height}:void 0,ey=_(_({pageSize:el,current:eh,total:L.length>0?L.length:em},"object"==typeof U?U:{}),{onPageSizeChange:function(e,t){eu(e),U&&"object"==typeof U&&U.onPageSizeChange&&U.onPageSizeChange(e,t)},onChange:function(e,t){ep(e),U&&"object"==typeof U&&U.onChange&&U.onChange(e,t)}});ey.current=Math.min(ey.current,Math.ceil(ey.total/ey.pageSize));var eb=!!(ee||$),ew=(0,n.useCallback)(o()(function(){if(ee){ee(eo.current);return}var e=eo.current,t=e.scrollTop;Math.abs(e.scrollHeight-(t+e.clientHeight))<K+1?es.current&&(eg(ev+1),$&&$(ev+1),es.current=!1):es.current=!0},J),[J,ev,ee,$]),ek=function(){var e=function(e){var t=ey.current,r=ey.pageSize,n=(t-1)*r;return U&&e.length>n?e.slice(n,n+r):e},t=function(t,r){var n=e(t);return r?n.map(r):n},r=function(t,r){var i=e(t);if(W.column||W.span){for(var o=[],a=W.gutter,s=W.justify,c=W.align,l=W.column,h=y(W,["gutter","justify","align","column"]),f=l||Math.floor(24/W.span),v=h.span||Math.floor(24/f),g=0;g<i.length;)!function(){var e=g+f,t=~~(g/f);o.push(n.createElement(u.Z,{key:t,className:er+"-row",gutter:a,justify:s,align:c},i.slice(g,e).map(function(e,i){return n.createElement(d.Z,_({key:t+"_"+i,className:er+"-row-col"},h,{span:v}),r?r(e,g+i):e)}))),g=e}();return o}return n.createElement(u.Z,{className:er+"-row",gutter:W.gutter},i.map(function(e,t){return n.createElement(d.Z,_({className:er+"-row-col"},(0,p.Z)(W,["gutter"]),{key:t}),r?r(e,t):e)}))};return L.length>0&&V?W?r(L,V):t(L,V):em>0?W?r(D):t(D):Y?null:X||S("List")},ex=function(){var e,r,i=ek(),o=e_&&null!==e_.threshold&&Array.isArray(i),s=U?n.createElement(a.Z,_({},ey,{className:(0,l.Z)(er+"-pagination",ey&&ey.className)})):null,c=H?s:null,u=H?null:s,d=null!=Y?n.createElement("div",{className:er+"-item "+er+"-scroll-loading"},Y):null;return n.createElement("div",{ref:function(e){t=e,en.current=t},style:I,className:(0,l.Z)(er+"-wrapper",((e={})[er+"-wrapper-rtl"]=T,e),P)},n.createElement("div",_({},(0,m.m)(C),{style:A,className:(0,l.Z)(er,er+"-"+et,((r={})[er+"-no-border"]=!Z,r[er+"-no-split"]=!B,r[er+"-hoverable"]=G,r[er+"-rtl"]=T,r),R),ref:function(e){o||(eo.current=e)},onScroll:!o&&eb?ew:void 0}),F?n.createElement("div",{className:er+"-header"},F):null,o?n.createElement(n.Fragment,null,n.createElement(f.Z,_({role:"list",ref:function(e){e&&(ei.current=e,eo.current=e.dom)},className:er+"-content "+er+"-virtual",data:d?i.concat(d):i,isStaticItemHeight:!1,onScroll:eb?ew:void 0},e_),function(e){return e})):n.createElement("div",{role:"list",className:er+"-content",ref:ea},i,d),j||c?n.createElement("div",{className:er+"-footer"},j,c):null),u)};return"loading"in C?n.createElement(s.Z,{style:{display:"block"},loading:z,element:c||n.createElement(s.Z,null)},ex()):ex()});x.displayName="List",x.Item=c.Z;let S=x},141513:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0});var o=r(269001),a=r(471664);t.default=function(e){var t=this;this.mobileInvite=function(e){var r=e.extra_params,s=i(e,["extra_params"]),c=(0,o.encryptParams)(n(n({},s),void 0===r?{}:r),["mobile"]);return t.request({url:a.WEB_AFF_URL.MOBILE_INVITE,method:"POST",data:c})},this.emailInvite=function(e){var r=e.extra_params,s=i(e,["extra_params"]),c=(0,o.encryptParams)(n(n({},s),void 0===r?{}:r),["email"]);return t.request({url:a.WEB_AFF_URL.EMAIL_INVITE,method:"POST",data:c})},this.larkInvite=function(e){var r=e.extra_params,s=i(e,["extra_params"]),c=(0,o.encryptParams)(n(n({},s),void 0===r?{}:r),["email"]);return t.request({url:a.WEB_AFF_URL.LARK_INVITE,method:"POST",data:c})},this.getInvitationList=function(e){var r=e.page,i=void 0===r?1:r,o=e.page_size,s=void 0===o?10:o,c=e.extra_params,l=void 0===c?{}:c;return new Promise(function(e,r){t.request({url:"".concat(a.WEB_AFF_URL.INVITE_LIST).concat(i,"/"),method:"GET",data:n({page_size:s},l)}).then(function(t){e(t)}).catch(function(e){r(e)})})},this.cancelInvitation=function(e){var r=e.invite_id,i=void 0===r?0:r,o=e.extra_params,s=void 0===o?{}:o;return new Promise(function(e,r){t.request({url:a.WEB_AFF_URL.CANCEL_INVITE,method:"POST",data:n({invite_id:i},s)}).then(function(t){e(t)}).catch(function(e){r(e)})})},this.resendInvitation=function(e){var r=e.invite_id,i=void 0===r?0:r,o=e.next_url,s=void 0===o?"":o,c=e.link,l=void 0===c?"":c,u=e.extra_params,d=void 0===u?{}:u;return new Promise(function(e,r){t.request({url:a.WEB_AFF_URL.RESEND_INVITE,method:"POST",data:n({invite_id:i,next_url:s,link:l},d)}).then(function(t){e(t)}).catch(function(e){r(e)})})},this.updateInvitation=function(e){var r=e.invite_id,i=e.deputy_identity_id,s=e.deputy_name,c=e.extra_params,l=(0,o.encryptParams)(n({invite_id:void 0===r?0:r,deputy_identity_id:i,deputy_name:s},void 0===c?{}:c),["deputy_name"]);return new Promise(function(e,r){t.request({url:a.WEB_AFF_URL.UPDATE_INVITE,method:"POST",data:l}).then(function(t){e(t)}).catch(function(e){r(e)})})},this.checkRegisterStatus=function(e){var r=e.invite_ticket,i=e.extra_params,o=void 0===i?{}:i;return new Promise(function(e,i){t.request({url:a.WEB_AFF_URL.CHECK_INVITE_VALID,method:"POST",data:n({invite_ticket:r},o)}).then(function(t){e(t)}).catch(function(e){i(e)})})},this.acceptInvitation=function(e){var r=e.invite_ticket,i=e.password,s=e.extra,c=e.extra_params,l=(0,o.encryptParams)(n({invite_ticket:r,password:i,extra:s},void 0===c?{}:c),["password","extra"]);return t.request({url:a.WEB_AFF_URL.ACCEPT_INVITE,method:"POST",data:l})};var r=e.request;this.request=r}},76697:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(571456),i=r(733730),o=r(683132),a=r(552712),s=r(795007),c=r(634466),l=r(737032),u=r(859933),d=r(700141),h=r(227478),p=function(e){(0,n.XW)(r,e);var t=(0,n.WY)(r);function r(e,i){var o;return(0,n.PA)(this,r),(o=t.call(this)).TAG="TimeLine",o._parent=i,o._seeking=!1,o.audioRender=s.Z.isSupported()?new s.Z(e,(0,n.Lc)(o)):new a.Z(e,(0,n.Lc)(o)),o.videoRender=new l.Z(e,(0,n.Lc)(o)),o._readyStatus={audio:!1,video:!1},o._paused=!0,o._switchToMultiWorker=!1,o._lowdecodeEmited=!1,o._startPlayed=!1,o._emitReady=!1,o._lastSeekTime=1e-4,o._singleTrack=-1,o._bindEvent(),o._decodeVideo=e.video,o}return(0,n.qH)(r,[{key:"analyse",get:function(){return this._parent.analyse}},{key:"ready",get:function(){return this._readyStatus.video&&this._readyStatus.audio}},{key:"played",get:function(){var e=this;return{length:this.currentTime?1:0,start:function(){return 0},end:function(){return e.currentTime}}}},{key:"noAudio",get:function(){return 1===this._singleTrack||2===this._singleTrack}},{key:"isLive",get:function(){return this._parent.live}},{key:"seeking",get:function(){return this._seeking}},{key:"decodeFps",get:function(){return this.videoRender.decodeFps}},{key:"decodeCost",get:function(){return this.videoRender.decodeCost}},{key:"renderCost",get:function(){return this.videoRender.renderCost}},{key:"wasmInitCost",get:function(){return this.videoRender.wasmInitCost}},{key:"fps",get:function(){return this.videoRender.fps}},{key:"totalSize",get:function(){return this.videoRender.totalSize}},{key:"bitrate",get:function(){return this.videoRender.bitrate}},{key:"gopLength",get:function(){return this.videoRender.gopLength}},{key:"currentTime",get:function(){return this.noAudio?this.paused?this.videoRender.nextFrameTime:this.videoRender.currentTime:this.audioRender.currentTime}},{key:"timelinePosition",get:function(){return this.noAudio?performance.now()/1e3:this.audioRender.currentTime}},{key:"canvas",get:function(){return this.videoRender.canvas}},{key:"readyState",get:function(){return this.videoRender.readyState}},{key:"buffered",get:function(){var e=this;return this.noAudio||this.isLive?this.videoRender.buffered:{length:this.audioRender.buffered.length,start:function(t){return Math.max(e.audioRender.buffered.start(t),e.videoRender.buffered.start(t))},end:function(t){return Math.min(e.audioRender.buffered.end(t),e.videoRender.buffered.end(t))}}}},{key:"duration",get:function(){return this.noAudio?this.videoRender.duration:this.isLive?this.audioRender.duration:Math.min(this.audioRender.duration,this.videoRender.duration)}},{key:"paused",get:function(){return this._paused},set:function(e){this._paused=e}},{key:"lowlatency",get:function(){return this._parent.lowlatency}},{key:"decoderMode",get:function(){return this.videoRender.decoderMode}},{key:"currentAudioCanAutoplay",get:function(){return this.audioRender.audioCanAutoplay}},{key:"_getController",value:function(e,t){return e?new c.Z(t,this):new l.Z(t,this)}},{key:"_checkInBuffer",value:function(){for(var e=this.buffered,t=0,r=e.length;t<r;t++)if(e.start(t)<=this.currentTime+.1&&e.end(t)>=this.currentTime)return!0;return!1}},{key:"_resetReadyStatus",value:function(){this._readyStatus.audio=!1,this._readyStatus.video=!1}},{key:"_bindEvent",value:function(){var e=this;this.on(u.ZP.DECODE_EVENTS.REMUX,function(t){e.videoRender.setRemux(t)}),this.on(u.ZP.DECODE_EVENTS.CHASE_VIDEO_FRAME_END,function(t){e.emit(u.ZP.DECODE_EVENTS.CHASE_AUDIO_FRAME,t)}),this.audioRender.on(u.ZP.AUDIO.AUDIO_READY,function(){o.kg.log(e.TAG,"audio ready! seeking=",e._seeking),e._seeking&&setTimeout(function(){try{var t=e.videoRender.getSeekStartPosition(e.currentTime,1/0);if(e.audioRender.isMse&&t){if((0,h.tT)().preciseSeek>e.duration&&e.currentTime>.1){e.audioRender.seekNoSideEffect({position:e.currentTime+.1}),e.videoRender.ajustSeekTime(e.currentTime,!0);return}e.audioRender.seekNoSideEffect({position:t.position+.1}),e.videoRender.ajustSeekTime(t.position);return}e.videoRender.ajustSeekTime(e.currentTime)}catch(e){}},10),e._readyStatus.video&&e._startRender(),e._readyStatus.audio=!0,e._startPlayed||e.analyse.addAudioReady()}),this.audioRender.on(u.ZP.AUDIO.AUDIO_NOT_ALLOWED_AUTOPLAY,function(){e._emitReady&&e.pause()}),this.audioRender.on(u.ZP.AUDIO.AUDIO_WAITING,function(){!e.noAudio&&e.currentTime&&(o.kg.warn(e.TAG,"lack data, audio waiting,currentTime:",e.currentTime),e.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.TIMEUPDATE),e.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.WAITING),e.emit(u.ZP.TIMELINE.DO_PAUSE),e._readyStatus.audio=!1)}),this.videoRender.on(u.ZP.VIDEO.VIDEO_WAITING,function(){o.kg.warn(e.TAG,"lack data, video waiting"),e.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.WAITING),e.emit(u.ZP.TIMELINE.DO_PAUSE),e._readyStatus.video=!1}),this.videoRender.on(u.ZP.VIDEO.VIDEO_READY,function(){o.kg.log(e.TAG,"video ready!"),e._startPlayed||e.analyse.addVideoReady(),e._readyStatus.audio&&e._startRender("video"),e._readyStatus.video=!0}),this.videoRender.on(u.ZP.VIDEO.DECODE_LOW_FPS,function(){e.currentTime<2||(e.analyse.increaseLowDecodeCount(),e._lowdecodeEmited||((0,d.u$)(),e._lowdecodeEmited=!0,e.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.LOW_DECODE)))}),this.on(u.ZP.TIMELINE.SINGLE_TRACK,function(t){e._singleTrack=t,(1===t||2===t)&&(e._readyStatus.audio=!0),3===t&&(e._readyStatus.video=!0),e.emit(u.ZP.TIMELINE.SYNC_DTS,0)}),this.on(u.ZP.TIMELINE.DESTROY,function(){e.removeAllListeners(),e.videoRender=null,e.audioRender=null}),this.on(u.ZP.TIMELINE.DO_PLAY,function(){e.emit(u.ZP.TIMELINE.START_RENDER),e._paused=!1,e._lastSeekTime=1e-4,e.noAudio&&e.emit(u.ZP.TIMELINE.SYNC_DTS,0)})}},{key:"_startRender",value:function(e){if(!this._parent.error&&this.videoRender){if(this.noAudio&&this.emit(u.ZP.TIMELINE.SYNC_DTS,0),this.videoRender.forceRender(),!this.isLive&&this._paused&&this.seeking&&this._checkInBuffer()){o.kg.log(this.TAG,"set seeking = false"),this._seeking=!1,this.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.SEEKED),o.kg.groupEnd();return}this._startPlayed||(this.analyse.addFirstframe(),this.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.LOADEDDATA),this.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.FIRST_FRAME),this._startPlayed=!0),o.kg.log(this.TAG,"emit canplay"),this.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.CANPLAY),this._parent.autoplay?(o.kg.warn(this.TAG,"startRender: time=",this.currentTime,"paused:",this.paused,"seeking:",this.seeking),this.emit(u.ZP.TIMELINE.START_RENDER,e)):(this._parent.autoplay=!0,this.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.PAUSE)),this.emit(u.ZP.TIMELINE.READY),this._emitReady=!0,this._seeking&&this._checkInBuffer()&&(o.kg.log(this.TAG,"set seeking = false"),this._seeking=!1,this.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.SEEKED),o.kg.groupEnd())}}},{key:"_checkHlsTracks",value:function(e){if(!(null==e?void 0:e.samples[0])){if(!this.buffered.length){var t=Error("lack video sample");t.code=3,this.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.ERROR,t)}return!1}return!0}},{key:"appendBuffer",value:function(e,t){this.emit(u.ZP.TIMELINE.APPEND_CHUNKS,e,t),this.noAudio&&this._seeking&&this.videoRender.ajustSeekTime(this.currentTime)}},{key:"play",value:function(){var e=this;return new Promise(function(t,r){var n=e.currentAudioCanAutoplay;e.noAudio?n=!0:e.audioRender&&e.audioRender.resume().then(function(){if(o.kg.log(e.TAG,"audio render resumed, pause status: ".concat(e._paused,", audioCanAutoplay:").concat(e.currentAudioCanAutoplay)),e._paused||!e.currentAudioCanAutoplay){n=!1,e.emit(u.ZP.TIMELINE.DO_PAUSE);return}n=!0}).catch(function(){}),setTimeout(function(){if(o.kg.log(e.TAG,"play() timer done, resumed=".concat(n,", paused=").concat(e.paused)),!n){e.paused||(o.kg.log(e.TAG,"audioCtx can't autoplay"),e.pause(),r({name:"NotAllowedError"}));return}if(e.videoRender&&!e.videoRender.canAutoPlay){console.warn("video render an't autoplay"),e.pause(),t();return}e._paused=!1,t()},e.audioRender.isMse?10:60)})}},{key:"pause",value:function(){!this._paused&&(this.ready||this._seeking)&&(this.emit(u.ZP.TIMELINE.DO_PAUSE),this._paused=!0,this.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.PAUSE))}},{key:"seek",value:function(e){var t=this;if(this._seeking&&o.kg.groupEnd(),this.isLive){if(this.currentTime<.1||!this.currentAudioCanAutoplay||this.paused)return;var r=this.videoRender.getSeekStartPosition(e,this._parent.preloadTime+1);if(r){if(r.position<this.currentTime)return;var n=this.audioRender.canSeek(r.position),i=this.videoRender.canSeek(r);if(!n||!i){o.kg.log(this.TAG,"seek, !!!!!!!!!can not seek, audioCanSeek:",n,"videoCanSeek:",i);return}o.kg.warn(this.TAG,"seek, chase frame to time: ",r.position,"currentTime:",this.currentTime,"duration:",this.duration),this.videoRender.videoDecode?(this.audioRender.doPause(),r.position=r.position-1.5,this.emit(u.ZP.DECODE_EVENTS.CHASE_VIDEO_FRAME,r)):this.emit(u.ZP.TIMELINE.CHASE_FRAME,r)}return}this._lastSeekTime!==e&&(e&&.2>=Math.abs(this._lastSeekTime-e)||(this._lastSeekTime=e,e>=this.duration&&(e=this.duration-1),e<0&&(e=0),o.kg.group(this.TAG,"start seek to:".concat(e,", set seeking status=true")),this._seeking=!0,this.videoRender.setSeekingStatus(!0),this.noAudio?(this.emit(u.ZP.TIMELINE.SYNC_DTS,this.videoRender.getDtsOfTime(e)),this.videoRender.ajustSeekTime(e)):this._resetReadyStatus(),this.emit(u.ZP.TIMELINE.DO_SEEK,e),new Promise(function(e){t.emit(u.ZP.TIMELINE.PLAY_EVENT,u.NW.SEEKING),e()})))}}]),r}(i.Z)},227478:function(e,t,r){"use strict";r.d(t,{Bo:function(){return f},HX:function(){return l},MP:function(){return m},P_:function(){return h},lF:function(){return g},mv:function(){return c},rM:function(){return u},tT:function(){return d},yJ:function(){return p}});var n,i,o="xg-video",a=!1;try{a=WebAssembly&&WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))}catch(e){}var s={preloadDecoder:"",reuseWasmDecoder:!0,reuseMseForAudio:!1,preciseSeek:0,h264WithWebcodec:!1,lowDecodeThreshold:100,lowDecodeFpsDelta:10,wasmFallbackToAsm:!1,audioWithMse:!0,canUseThreadMode:!1,disabledWhenErrorOccur:!0,disabledDuration:43200,evaluateVVCount:0,disabledByLowdecodePrecent:.5,maxDecodeOnceWasm:a?6:8,maxDecodeOnceFirstTime:8,maxDecodeOnceWebcodec:20};function c(){return o}function l(e){o=e}function u(e){s=Object.assign({},s,e)}function d(){return s}function h(){var e="undefined"!=typeof customElements&&customElements.get(o);return e?{H264_DECODER_URL:e.h264Url,ASM_H264_DECODER_URL:e.h264AsmUrl,H265_DECODER_URL:e.h265Url,H265_THREAD_DECODER_URL:e.h265ThreadUrl,H265_SIMD_DECODER_URL:e.h265SimdUrl,ASM_H265_DECODER_URL:e.h265AsmUrl,HEVC_WORKER_URL:e.hevcWorkerUrl,AVC_WORKER_URL:e.avcWorkerUrl,TIMER_WORKER_URL:e.timerWorkerUrl}:{}}function p(){if("undefined"==typeof customElements)return!1;var e=customElements.get(o);return a&&!!(null!=e&&e.h265SimdUrl)}function f(){if("undefined"==typeof customElements)return!1;var e=customElements.get(o);return!!window.SharedArrayBuffer&&!!(null!=e&&e.h265ThreadUrl)}var v=!1;try{v=(null===(n=localStorage)||void 0===n?void 0:null===(i=n.getItem)||void 0===i?void 0:i.call(n,"_sds"))==="1"}catch(e){}function g(){if("undefined"==typeof customElements)return!1;if(v)return!0;var e=!1,t=!1;try{var r=new(window.AudioContext||window.webkitAudioContext);r.close(),r=null,e=!0}catch(e){}try{for(var n=document.createElement("canvas"),i=["webgl","experimental-webgl","moz-webgl","webkit-3d"],o=0;o<i.length;o++){var a=n.getContext(i[o]);if(a){a=null,n=null,t=!0;break}}v=e&&t&&!!WebAssembly,localStorage.setItem("_sds",v?1:0)}catch(e){}return v}function m(){return{simd:a,thread:f(),nbCpu:navigator.hardwareConcurrency}}},156045:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(571456),i=r(733730),o=r(793777),a=r(859933),s=r(683132),c=r(23468),l=[{base:720,level:1},{base:540,level:2},{base:360,level:3},{base:280,level:4}],u=function(e){(0,n.XW)(r,e);var t=(0,n.WY)(r);function r(e,i){var a;return(0,n.PA)(this,r),(a=t.call(this)).TAG="VideoDecoderController",a._decoder=new c.Z(e),a._remux=new o.A,a._bindEvents(),a._isInit=!1,a._isDataReady=!1,a._ready=!1,a._blobURLList=[],a._isInDecoding=!1,a._mediaSegmentReady=!1,a._parent=i,a._isDecodePause=!1,a._playSuccess=!0,a._isVideoOnRun=!0,a._startDts=0,a._fDuration=0,a._minFPSTime=0,a._lastPts=0,a._frameLengthPerFragment=0,a._gopBufferLength=0,a._maxGopDuration=0,a._minGopDuration=0,a._currentLevel=-1,a._endLevel=e.endLevel||2,a.currentFragmentDuration=0,a._handleKeyFrameVideo=a._handleKeyFrameVideo.bind((0,n.Lc)(a)),a}return(0,n.qH)(r,[{key:"_bindEvents",value:function(){var e=this;document.addEventListener("visibilitychange",this._onVisibilityChange.bind(this)),this._decoder.on(a.ZP.DECODE_EVENTS.APPEND_VIDEO,this._onAppendVideo.bind(this)),this._decoder.on(a.ZP.DECODE_EVENTS.PLAY_FAILED,this._onPlayFailed.bind(this)),this._decoder.on("error",this._onError.bind(this)),this._decoder.on(a.ZP.DECODE_EVENTS.DECODED,this._onDecoded.bind(this)),this._decoder.on(a.ZP.DECODE_EVENTS.FIRST_FRAME,this._onFirstFrame.bind(this)),this._decoder.on(a.ZP.DECODE_EVENTS.FRAGMENT_END,this._onFragmentEnd.bind(this)),this._decoder.on("fps",function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=[e._metaFPS].concat(r,[e._frameLengthPerFragment]);e.emit.apply(e,["fps"].concat((0,n.u)(o)))}),this.on("keyFrame",this._handleKeyFrameVideo)}},{key:"_onRemuxed",value:function(e){var t={blobUrl:this._createBlobURL(e),dts:this.currentFragmentDts,duration:this.currentFragmentDuration,frameDuration:Math.floor(1e3/this._metaFPS)};this._recordGopDuration(this.currentFragmentDuration),this._pushBlob(t),s.kg.log(this.TAG,"_onRemuxed","maxgopduration:",this._maxGopDuration,"_gopBufferLength:",this._gopBufferLength),!this._isDataReady&&this._gopBufferLength>=this._maxGopDuration&&this._checkDataReady()}},{key:"_onPlayFailed",value:function(e){this._isInDecoding=!1,this._parent.emit(a.ZP.DECODE_EVENTS.PLAY_FAILED,e)}},{key:"_onAppendVideo",value:function(e){this._parent.emit(a.ZP.DECODE_EVENTS.APPEND_VIDEO,e)}},{key:"_onVisibilityChange",value:function(){this._isVideoOnRun="visible"===document.visibilityState}},{key:"_onDecoded",value:function(e,t){this._frameLengthPerFragment++;var r=this._buildFrameInfo(e,t);this._parent.emit(a.ZP.DECODE_EVENTS.DECODED,r),this._lastPts=t}},{key:"_onFirstFrame",value:function(e,t){var r=this._buildFrameInfo(e,t);this._parent.emit(a.ZP.DECODE_EVENTS.FIRST_FRAME,r)}},{key:"_onFragmentEnd",value:function(e,t){var r=this;s.kg.log(this.TAG,"_onFragmentEnd ,_isDecodePause:",this._isDecodePause,"decodeFPS:",e),e&&this._reduceResolution(e),this._isInDecoding=!1,this._inDecodeId=-1,this._currentInfo=null,this._frameLengthPerFragment=0,this._getBlobLength()&&!this._isDecodePause?this.startDecode():this.loadNextHandle=setInterval(function(){r._getBlobLength()&&!r._isDecodePause&&r._isVideoOnRun&&!r._isInDecoding&&(s.kg.log(r.TAG,"_onFragmentEnd, setInterval start next mp4 decode"),r.startDecode(),clearInterval(r.loadNextHandle))})}},{key:"_onError",value:function(e,t){this._isInDecoding=!1,this._parent.emit("error",e,t)}},{key:"_checkReady",value:function(){this._isDataReady&&this._isInit&&(this.ready=!0,s.kg.log(this.TAG,"checkReady trigger ready"),this._parent.emit(a.ZP.DECODE_EVENTS.READY))}},{key:"_checkDataReady",value:function(){this._isDataReady=!0,this._checkReady()}},{key:"_reduceResolution",value:function(e){if(s.kg.log(this.TAG,"_reduceResolution","currentLevel:",this._currentLevel,"endLevel:",this._endLevel),this._videoHeight>720&&(s.kg.log(this.TAG,"_reduceResolution","trigger DECODE_LOW_FPS"),this._parent.emit(a.ZP.VIDEO.DECODE_LOW_FPS)),e&&e<20?(this._minFPSTime++,this._decoder.emit("fpsreduce",e)):this._minFPSTime=0,this._currentLevel>=this._endLevel){s.kg.log(this.TAG,"_reduceResolution","trigger DECODE_LOW_FPS",this._currentLevel,this._endLevel),this._parent.emit(a.ZP.VIDEO.DECODE_LOW_FPS);return}if(this._minFPSTime>2){var t=this._videoWidth,r=this._videoHeight,n=null;if(n=this._findLevel(r,this._currentLevel)){if(this._currentLevel=n.level,4===this._currentLevel){s.kg.log(this.TAG,"_reduceResolution","trigger DECODE_LOW_FPS, _currentLevel: ",this._currentLevel),this._parent.emit(a.ZP.VIDEO.DECODE_LOW_FPS);return}this.width=n.base*(t/r),this.height=n.base,this._decoder.emit("outputresolutionchange",this.width,this.height)}this._minFPSTime=0}}},{key:"_findLevel",value:function(e,t){return l.find(function(r){return r.base<e&&r.level>t})}},{key:"_buildFrameInfo",value:function(e,t){try{var r=e.width,n=e.height;return{msg:"DECODED",width:r,height:n,buffer:e,yLinesize:r,uvLinesize:r/2,info:{baseDts:void 0,dts:t,gopId:0,isGop:void 0,key:!1,pts:t},type:"rgb"}}catch(e){s.kg.log(this.TAG,e)}}},{key:"_pushBlob",value:function(e){s.kg.log("push blob",e.dts,e.duration),e&&e.duration&&(this._gopBufferLength+=e.duration),this._blobURLList.push(e)}},{key:"_shiftBlob",value:function(){var e=this._blobURLList.shift();return e&&e.duration&&(this._gopBufferLength-=e.duration),e}},{key:"_filterBlob",value:function(e){var t=this;this._blobURLList=this._blobURLList.filter(function(r){return r.dts<e&&(URL.revokeObjectURL(r.blobUrl),r.duration&&(t._gopBufferLength-=r.duration)),r.dts>=e})}},{key:"_emptyBlobList",value:function(){this._blobURLList=[],this._gopBufferLength=0}},{key:"_getBlobLength",value:function(){return this._blobURLList.length}},{key:"_handleKeyFrameVideo",value:function(e){try{var t=this._parent._timeRange.frames||[];if(this._parent._timeRange.clean(),!t.length)return;var r=t[0].dts,n=t[t.length-1].dts,i=r-this.endDts;s.kg.log(this.TAG,"_handleKeyFrameVideo","startDts:",r,"endDts:",n,"samples length:",t.length),this.endDts&&i>Math.floor(1e3/this._metaFPS)+1&&s.kg.log(this.TAG,"_handleKeyFrame, keyFrame dts:",r,"sample length:",t.length,"endDts:",n,"delay:",i);var o=n-r;if(this._fDuration||(this._fDuration=o),o<1500){s.kg.log(this.TAG,"_handleKeyFrame gopDuration :",o,"sample length:",t.length,"gopStartDts:",r,"gopEndDts:",n);return}if(this.firstDts||(this.firstDts=t[0].dts),this.currentFragmentDts=t[0].dts,this.currentFragmentDuration=this._getFragmentDuration(t),this.endDts=n,this.currentFragmentDts<this._startDts){console.warn(this.TAG,"_handleKeyFrameVideo","currentFragmentDts < this._startDts",this.currentFragmentDts,this._startDts),t=[];return}this.startRemux(t),t=[]}catch(e){console.error(this.TAG,"_handleKeyFrameVideo",e)}}},{key:"_getFragmentDuration",value:function(e){var t=0,r=0;return e[0].keyframe||console.error(this.TAG,"_getFragmentDuration","gop firstFrame is not keyframe"),e.forEach(function(n,i){n.keyframe&&i&&(t+=e[i-1].dts-e[r].dts,r=i)}),t+=e[e.length-1].dts-e[r].dts}},{key:"_createBlobURL",value:function(e){if(e){var t=new window.Blob([e.buffer],{type:"video/mp4"});return window.URL.createObjectURL(t)}}},{key:"_recordGopDuration",value:function(e){this._minGopDuration||(this._minGopDuration=e),e>this._maxGopDuration&&(this._maxGopDuration=e),e<this._minGopDuration&&(this._minGopDuration=e)}},{key:"checkMaxFrames",value:function(e){"number"==typeof e&&(this._isDecodePause=e>40,this._playSuccess&&this._isDecodePause&&this._decoder.pause())}},{key:"checkMinFrames",value:function(e){var t=this;if("number"==typeof e&&(this._isDecodePause=!(e<25),!this._isDecodePause)){var r=this._decoder.play();void 0!==r?r.then(function(){t._playSuccess=!0}).catch(function(){t._playSuccess=!1}):setTimeout(function(){t._playSuccess=!0},20)}}},{key:"frameRendend",value:function(e){e.dom?(e.dom.width=0,e.dom.height=0,this._decoder._canvasList.length>40||this._decoder._canvasList.push(e)):s.kg.error(this.TAG,"_onRendend","imageObj. is error",e)}},{key:"checkValidBlob",value:function(e){this._filterBlob(e)}},{key:"chaseVideoFrame",value:function(e){s.kg.log(this.TAG,e,e.frame.dts,this.currentFragmentDts);var t=e.frame.dts;if(this._startDts=t,t===this.currentFragmentDts){if(s.kg.log(this.TAG,"_onChaseFrame","_inDecodeId:",this._inDecodeId,"currentFragmentDts:",this.currentFragmentDts),this._inDecodeId>0&&this._inDecodeId<t){s.kg.log(this.TAG,"_onChaseFrame, _inDecodeId > 0 && _inDecodeId < startDts, _inDecodeId:",this._inDecodeId,"startDts:",t),this.stopDecode(),this._filterBlob(t),this.startDecode();return}if(this._inDecodeId===t){s.kg.log(this.TAG,"_onChaseFrame, _inDecodeId === startDts, startDts:",t),this.stopDecode(),this.reStrartDecode(this._currentInfo);return}-1===this._inDecodeId&&(s.kg.log(this.TAG,"_onChaseFrame","_inDecodeId==-1"),this.startDecode())}t>this.currentFragmentDts&&(s.kg.log(this.TAG,"_onChaseFrame, startDts > currentFragmentDts, startDts:",t,"currentFragmentDts:",this.currentFragmentDts),this.stopDecode(),this._emptyBlobList()),t<this.currentFragmentDts&&(s.kg.log(this.TAG,"_onChaseFrame, startDts < currentFragmentDts, startDts:",t,"currentFragmentDts:",this.currentFragmentDts),t>this._inDecodeId&&(this._filterBlob(t),this.stopDecode(),this.startDecode()))}},{key:"init",value:function(e){this._isInit||(this._metaFPS=e.fpsNum/e.fpsDen||25,this._videoWidth=e.width,this._videoHeight=e.height,this._width=this._videoWidth,this._height=this._videoHeight,this._frameDuration=parseInt(1e3/this._metaFPS),this._isInit=!0,s.kg.log("".concat(this.TAG," has inited")),this._isInit=!0,this._checkReady())}},{key:"reStrartDecode",value:function(e){if(e)try{s.kg.log(this.TAG,"reStrartDecode"),this._isInDecoding=!0,this._inDecodeId=e.dts,this._currentInfo=e,this._decoder.startDecode(e,this._metaFPS,this._startTime),this._startTime=0}catch(e){console.error("load error",e)}}},{key:"stopDecode",value:function(){this._isInDecoding=!1,this._inDecodeId=-1,this._currentInfo=null,this._frameLengthPerFragment=0,this._decoder.stopDecode()}},{key:"startDecode",value:function(){if(this._isInDecoding){s.kg.log(this.TAG,"startDecode","this decoder is in decoding");return}var e=this._getBlobLength();if(this._decoder&&e){s.kg.log(this.TAG,"startDecode","blob url length:",e);var t=this._shiftBlob()||{};try{s.kg.log(this.TAG,"startDecode",t.dts,t.duration),this._isInDecoding=!0,this._inDecodeId=t.dts,this._currentInfo=t,this._decoder.startDecode(t,this._metaFPS)}catch(e){console.error(this.TAG,"startDecode","load error",e)}}}},{key:"canSeek",value:function(e){var t=e.frame.dts;if(this.currentFragmentDts>=t&&this._isInDecoding){if(this._inDecodeId===t)return!1;if(this._inDecodeId<t)return!0}return!1}},{key:"startRemux",value:function(e){if(s.kg.log("startRemux samples length:",e.length),e.length){var t=this._parent._meta;t.samples=e;var r=this._remux.remux(t).videoSegment;this._onRemuxed(r)}else console.error("frame length is 0")}},{key:"canPlayType",value:function(e){if(this._decoder)try{return this._decoder.canPlayType('video/mp4;codecs="'+e.codec+'"')}catch(e){console.error(e)}}},{key:"destroy",value:function(){this._blobURLList=[],this._decoder.destroy()}},{key:"empty",value:function(){if(s.kg.log("empty"),this._decoder){var e=this._decoder._canvasList;return s.kg.log(this.TAG,"empty >>>>>>>>>>>>>>>>>>length:",e.length),e.forEach(function(e){e.dom&&(s.kg.log("clear >>>>>>>>>>>>>>>>>>"),e.dom.width=0,e.dom.height=0,e.dom=null)}),e.length}}},{key:"isIDLE",get:function(){return s.kg.log(this.TAG,"isIDEL","blob length:",this._getBlobLength(),"_isInDecoding:",this._isInDecoding,"isVideoOnRun:",this._isVideoOnRun,"_isDecodePause",this._isDecodePause),!this._getBlobLength()&&!this._isInDecoding&&this._isVideoOnRun}},{key:"ready",get:function(){return this._ready},set:function(e){this._ready=e}},{key:"remux",get:function(){return this._remux}},{key:"isInit",get:function(){return this._isInit}}]),r}(i.Z)},647386:function(e,t,r){"use strict";r.d(t,{Cn:function(){return a},PF:function(){return o},Rg:function(){return n},U_:function(){return i}});var n=2,i=1,o={click:"_handleClickEvent",keydown:"_handleKeyEvent",keypress:"_handleKeyEvent",keyup:"_handleKeyEvent",input:"_handleInputEvent",beforeinput:"_handleBeforeInput",compositionstart:"_handleCompositionEvent",compositionupdate:"_handleCompositionEvent",compositionend:"_handleCompositionEvent",copy:"_handleCopy",cut:"_handleCut",paste:"_handlePaste",drop:"_handleDrag",dragenter:"_handleDrag",dragover:"_handleDrag",dragleave:"_handleDrag",focus:"_handleFocusEvent",blur:"_handleFocusEvent"},a=["copy","cut","paste","keydown","keypress","keyup","beforeinput","input","drop","dragenter","dragover","dragleave","resize","compositionstart","compositionupdate","compositionend","focus","blur"]},22216:function(e,t,r){"use strict";r.d(t,{p:function(){return n}});var n=function(){}},880924:function(e,t,r){"use strict";r.d(t,{Q$:function(){return l},iI:function(){return a}});var n=r(386859),i=r(881287),o="priority";function a(e,t){return(0,n.e)(e).sort(function(e,r){return s(e,t)-s(r,t)})}function s(e,t){return"number"==typeof e[t+"_"+o]?e[t+"_"+o]:1e3}var c=function(){return[]},l=function(){function e(e,t){var r=this;this.t=[],this.i=new Map,this.r=new Map,this.n=new Map,this.s=new Set,this.o=new Map,this._init=function(){var e=r.u;return r._registerPlugin(e).forEach(function(e){r.register(e)}),r.n.clear(),r.t},this._registerPlugin=null!=t?t:c,this.u=e}var t=e.prototype;return t.a=function(e,t){var r=null!==(r=this.o.get(t=void 0===t?"all":t))&&void 0!==r?r:new Set;r.add(e),this.o.set(t,r)},t.resetPluginToZoneMap=function(e){e?this.o.delete(e):this.o=new Map},t.isPluginInZone=function(e,t){return(null===(t=this.o.get(t))||void 0===t?void 0:t.has(e.constructor))||(null===(t=this.o.get("all"))||void 0===t?void 0:t.has(e.constructor))},t.register=function(e,t){if(Array.isArray(e)){var r=(0,n._)(e,2),i=r[0],r=r[1];if(this.a(i,t),this.s.has(i))return;e=new i(r)}else if(i=e.constructor,this.a(i,t),this.s.has(i))return;this.h(e,this.t.length)},t.h=function(e,t){this.n.clear(),this.t.push(e),this.r.set(e,t),this.s.add(e.constructor)},t.call=function(e,t,r,n){var o=this;return void 0===r&&(r=function(e,t){return e}),this.l(e,n).reduce(function(t,n){var a=n[e];if(a&&"function"==typeof a)try{return r(t,a.call(n,t))}catch(t){n="Warning: call hook failed. hook: "+e+". plugin: "+n.name,o.u.error({e:t,level:i.WV.ERROR,message:n})}return t},t)},t.l=function(e,t){var r=this,n=[];return this.n.has(e)?n=this.n.get(e):(n=a(this.t,e),this.n.set(e,n)),t?n.filter(function(e){return r.isPluginInZone(e,t)}):n},t.getPlugins=function(e){var t=this;return e?this.t.filter(function(r){return t.isPluginInZone(r,e)}):this.t},t._matchPlugin=function(e){var t,r,o,a=e.attributeKey,s=e.value,c=e.zoneId,l=e.attributes,u=a+s,d=this.i.get(u);if(!d)try{for(var h=(0,n.c)(this.t),p=h.next();!p.done;p=h.next()){var f=p.value;try{if(null!==(o=f.match)&&void 0!==o&&o.call(f,a,s,l)){this.i.set(u,f),d=f;break}}catch(e){var v="Warning: call hook failed. hook: match. plugin: "+f.name;this.u.error({e:e,level:i.WV.ERROR,message:v})}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return d&&(!c||this.isPluginInZone(d,c))?d:null},t.getPlugin=function(e,t){var r,i;try{for(var o=(0,n.c)(this.t),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.name===e)return!t||this.isPluginInZone(s,t)?s:null}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return null},t._indexOf=function(e){return null!==(e=this.r.get(e))&&void 0!==e?e:-1},t.destroy=function(){this.call("destroy",{}),this.t=[],this._registerPlugin=null,this.i.clear(),this.r.clear(),this.n.clear(),this.s.clear(),this.o.clear()},e}()},835212:function(e,t,r){"use strict";r.d(t,{D:function(){return o}});var n=r(41792),i=r(26105);r(15490);var o=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;r.ops=[];var n=t.zoneId,o=t.ops;return r.zoneId=n||"0",r.zoneType=i.Ak.Content,o&&o.length>0&&(r.ops=o),r}(0,n.d)(t,e);var r=t.prototype;return r.create=function(e){return e.zoneType=e.zoneType||this.zoneType,new t(e)},r.insertEnter=function(e){return void 0===e&&(e={}),this.insert(i.K5,e),this},r.insertEnterAndLineMarker=function(e){return this},r.insertLineMarker=function(e){return this},t}(r(312745).w)},749914:function(e,t,r){"use strict";r.d(t,{Q7:function(){return c},rh:function(){return s}});var n=r(41792),i=r(26105);r(15490);var o=r(312745),a=function(e){function t(t){var r=e.call(this)||this;r.ops=[];var n=t.zoneId,i=t.ops,o=t.zoneType;return r.zoneId=n,r.zoneType=o,i&&i.length>0&&(r.ops=i),r}(0,n.d)(t,e);var r=t.prototype;return r.insert=function(t,r){return t?e.prototype.insert.call(this,{id:t},r,!1):this},r.create=function(e){return e.zoneType=e.zoneType||this.zoneType,new t(e)},t}(o.w),s=function(e){function t(t){return e.call(this,(0,n._)({zoneType:i.Ak.Row},t))||this}return(0,n.d)(t,e),t}(a),c=function(e){function t(t){return e.call(this,(0,n._)({zoneType:i.Ak.Column},t))||this}return(0,n.d)(t,e),t}(a);o.w.registerCreator(i.Ak.Row,s),o.w.registerCreator(i.Ak.Column,c)},86021:function(e,t,r){"use strict";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function n(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function o(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}r.d(t,{_:function(){return n},a:function(){return i},b:function(){return o}})},372022:function(e,t,r){"use strict";r.d(t,{a:function(){return h}});var n=r(69984),i=r(764112),o=r(772322),a=r(108180),s=r(215820),c=r(218571),l=r(173931),u=r(943805),d=function(){return!0};function h(e,t,r,h){var p,f,v,g,m,_=(0,i._)((0,n._)({},t),{get routes(){return t.routes},_hydration:!0}),y=_.ssrContext,b=(0,a._)(window.location.pathname),w=(null==y?void 0:null===(p=y.request)||void 0===p?void 0:p.pathname)&&(0,a._)(y.request.pathname);w&&w!==b&&t.router&&(console.error("The initial URL ".concat(w," and the URL ").concat(b," to be hydrated do not match, reload.")),window.location.reload());var k=function(){delete _._hydration},x=(null===(v=window)||void 0===v?void 0:null===(f=v._SSR_DATA)||void 0===f?void 0:f.renderLevel)||l.N.CLIENT_RENDER,S=(null===(m=window)||void 0===m?void 0:null===(g=m._SSR_DATA)||void 0===g?void 0:g.mode)||"string";return d()&&"stream"===S?x===l.N.SERVER_RENDER?h((0,o.jsx)(function(){return(0,o.jsx)(u.r,{callback:k,children:c.cloneElement(e,{_internal_context:_})})},{})):r(e):x===l.N.CLIENT_RENDER||x===l.N.SERVER_PREFETCH?r(e):x===l.N.SERVER_RENDER?new Promise(function(t){d()?(0,s.TA)(function(){h((0,o.jsx)(function(){return(0,o.jsx)(u.r,{callback:k,children:c.cloneElement(e,{_internal_context:_})})},{})).then(function(e){t(e)})}):(0,s.TA)(function(){h(e,k).then(function(e){t(e)})})}):(console.warn("unknow render level: ".concat(x,", execute render()")),r(e))}},44447:function(e,t,r){"use strict";r.d(t,{G:function(){return o}});var n=r(940604),i={hoc:(0,n.Jy)(),init:(0,n.DJ)(),pickContext:(0,n.Jy)()},o=(0,n.m_)(i)},203037:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(50906),i=r.n(n),o=r(56052),a=r(981043),s=r(877006),c=r(953860),l=r(698698),u=r(909749),d=Object.defineProperty,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))f.call(t,r)&&v(e,r,t[r]);return e},m=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))0>t.indexOf(n)&&f.call(e,n)&&(r[n]=e[n]);return r},_=(e,t,r)=>new Promise((n,i)=>{var o=e=>{try{s(r.next(e))}catch(e){i(e)}},a=e=>{try{s(r.throw(e))}catch(e){i(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,a);s((r=r.apply(e,t)).next())});class y{constructor(){return this._thirdPartyMap={},this._cleanUpPlugins=()=>{this._pluginsMap&&Object.keys(this._pluginsMap).forEach(e=>{let t=this._pluginsMap[e];(null==t?void 0:t.length)&&(t.forEach(e=>{var t;null==(t=null==e?void 0:e.destruct)||t.call(e)}),delete this._pluginsMap[e])}),this._defaultPlugin=null},this.dispatch=(e,t)=>_(this,null,function*(){var r;if(l.Z.info("[LifeCycleModule]: dispatch start"),this._currentEvent.has(e)){l.Z.error("[LifeCycleModule]: Dispatch is already in process",{currentEvent:[...this._currentEvent],upcomingEvent:e});return}this._currentEvent.add(e);let n=null==(r=this._pluginsMap)?void 0:r[e],o=[];n.forEach(r=>{var n;(null==r?void 0:r[e])&&"function"==typeof r[e]&&o.push(null==(n=null==r?void 0:r[e])?void 0:n.call(r,{name:e,data:i()(t),plugin:r}))});try{yield Promise.all(o)}catch(e){l.Z.warn("[LifeCycleModule]: plugin callback error",e)}this._currentEvent.delete(e),l.Z.info("[LifeCycleModule]: dispatch finish")}),this._dispatchAfterEvent=(e,t)=>{l.Z.info("[LifeCycleModule]: dispatchAfterEvent"),t instanceof Promise?t.then(t=>{this.dispatch(e,t)}).catch(t=>{this.dispatch(e,t)}):this.dispatch(e,t)},this.addEventListener=(e,t,r)=>{var n;null==(n=this._defaultPlugin)||n.addEventListener(e,t,r)},this.removeEventListener=(e,t)=>{var r;null==(r=this._defaultPlugin)||r.removeEventListener(e,t)},y._instance||(y._instance=this),y._instance}init(e){this._entityKeys=e.entityKeys,this._currentEvent=new Set,l.Z.info("[LifeCycleModule]: init"),this._initPlugins(e),this._initModules(e),this._registerThirdParties(e)}_initModules(e){var t,r;l.Z.info("[LifeCycleModule]: initModules"),this._consentModule=new s.Z,this._consentModule.init(e),(null==(t=null==e?void 0:e.modules)?void 0:t.notification)&&(e.modules.notification instanceof u.Z?(this._notificationModule=e.modules.notification,this._notificationModule.init(e)):l.Z.warn("[LifeCycleModule]: initModules - incorrect implementation of NotificationModule, will skip")),(null==(r=null==e?void 0:e.modules)?void 0:r.info)?e.modules.info instanceof c.k?(this._infoModule=e.modules.info,this._infoModule.init(e)):l.Z.error("[LifeCycleModule]: initModules - incorrect implementation of InfoModule"):l.Z.error("[LifeCycleModule]: initModules - info module is required")}_initPlugins(e){var t;l.Z.info("[LifeCycleModule]: initPlugins"),this._cleanUpPlugins(),this._pluginsMap=Object.values(o.tR).reduce((e,t)=>(e[t]=[],e),{}),this._defaultPlugin=new a.N;let r=[this._defaultPlugin];(null==(t=e.plugins)?void 0:t.length)&&(r=r.concat(e.plugins));let n=new Set;r.forEach((e,t)=>{var r;null==(r=e.init)||r.call(e),this._registerPlugin(e,t,n)})}_registerPlugin(e,t,r){var n,i,s;let c=null==(n=null==e?void 0:e.getName)?void 0:n.call(e);if(!c){l.Z.error(`[LifeCycleModule]: registerPlugin - Plugin on index ${t} is an invalid Plugin. Plugin should always have a unique name`,{index:t,plugin:e});return}if(r.has(c)){l.Z.error(`[LifeCycleModule]: registerPlugin - Duplicate Plugin ${c}.`,{index:t,pluginName:c,plugin:e});return}if(!(e instanceof a.v)){l.Z.error(`[LifeCycleModule]: registerPlugin - ${c} incorrectly implements of Plugin.`,{index:t,pluginName:c,plugin:e});return}l.Z.info(`[LifeCycleModule]: registerPlugin ${c} start`);let u=null==(s=null==(i=e.getLifeCycleEvents)?void 0:i.call(e))?void 0:s.filter(e=>e in o.tR);(null==u?void 0:u.length)&&u.forEach(t=>{this._pluginsMap[t].push(e)}),l.Z.info(`[LifeCycleModule]: registerPlugin ${c} finish`,{plugin:c,events:u})}_registerThirdParties(e){var t,r,n;l.Z.info("[LifeCycleModule]: registerThirdParties");let{thirdParties:i}=null!=(t=null==e?void 0:e.modules)?t:{};this._thirdPartyMap=null!=(n=null==(r=null==i?void 0:i.reduce)?void 0:r.call(i,(e,t)=>{for(let r of t.getRelatedEntities())e[r]?e[r].push(t):e[r]=[t];return e},{}))?n:{}}_initThirdParties(e){var t,r;if(l.Z.info("[LifeCycleModule]: initThirdParties"),e&&(null==(t=Object.values(e))?void 0:t.length)){let t=new Set,n=new Set;if(Object.values(e).forEach(e=>{var r;let i=null==(r=this._thirdPartyMap)?void 0:r[null==e?void 0:e.key];(null==i?void 0:i.length)&&i.forEach(e=>{if(e){let r=e.getRelatedEntities();(null==r?void 0:r.length)&&(r.forEach(e=>{t.add(e)}),n.add(e))}})}),n.size){let e=this._getUserInfo(),i=(null!=(r=this._consentModule.getEntitiesWithApprovedRecord([...t],e))?r:[]).reduce((e,t)=>(e[t.key]=t,e),{});for(let e of n)e.initThirdPartyModule(i,this.dispatch,this._dispatchAfterEvent)}}}fetch(e){return l.Z.info("[LifeCycleModule]: fetch"),this.fetchUserInfo().then(()=>Promise.all([this.shouldFetchConsentData()?this.fetchConsentData(this._entityKeys):Promise.resolve({}),this.shouldFetchNotificationData()?this.fetchNotificationData(null==e?void 0:e.notificationParam):Promise.resolve({})]).then(e=>{var t;let[r,n]=e;return r&&(null==(t=Object.keys(r))?void 0:t.length)&&this._initThirdParties(r),n&&this._triggerNotification({notificationData:n,relatedConsentEntityMap:r}),{consentData:r,notificationData:n}})).catch(e=>{l.Z.error("[LifeCycleModule]: fetch failure",e)})}fetchUserInfo(){return _(this,null,function*(){var e,t;l.Z.info("[LifeCycleModule]: fetchUserInfo"),this.dispatch(o.tR.beforeFetchUserInfo);let r={};try{r=yield null!=(t=null==(e=this._infoModule)?void 0:e.fetchUserInfo())?t:Promise.resolve({})}catch(e){l.Z.error("[LifeCycleModule]: fetchUserInfo - error",e)}return this.dispatch(o.tR.afterFetchUserInfo,{userInfo:r}),r})}_getUserInfo(){var e,t;return l.Z.info("[LifeCycleModule]: _getUserInfo"),null!=(t=null==(e=this._infoModule)?void 0:e.getUserInfo())?t:{}}shouldFetchConsentData(){return l.Z.info("[LifeCycleModule]: shouldFetchConsentData"),this._consentModule.shouldFetch()}fetchConsentData(e){l.Z.info("[LifeCycleModule]: fetchConsentData"),this.dispatch(o.tR.beforeFetchConsentData,{entityKeys:e});let t=this._getUserInfo();return this._consentModule.fetch(e,t).then(t=>{let{data:r}=null!=t?t:{};return this.dispatch(o.tR.afterFetchConsentData,{entityKeys:e,data:r}),r}).catch(t=>{l.Z.error("[LifeCycleModule]: fetchConsentData failure",t),this.dispatch(o.tR.afterFetchConsentData,{entityKeys:e,data:null,error:t})})}shouldFetchNotificationData(){var e,t;return(l.Z.info("[LifeCycleModule]: shouldFetchNotificationData"),this._notificationModule)?null==(t=null==(e=this._notificationModule)?void 0:e.shouldFetch)?void 0:t.call(e):(l.Z.info("[LifeCycleModule]: no notification module"),!1)}fetchNotificationData(...e){var t,r;return(l.Z.info("[LifeCycleModule]: fetchNotificationData"),this._notificationModule)?(this.dispatch(o.tR.beforeFetchNotificationData,{notificationParams:e}),null==(r=null==(t=this._notificationModule)?void 0:t.fetch)?void 0:r.call(t,...e).then(t=>{let{data:r}=null!=t?t:{};return this.dispatch(o.tR.afterFetchNotificationData,{notificationParams:e,data:r}),r}).catch(t=>{l.Z.error("[LifeCycleModule]: fetchNotificationData failure",t),this.dispatch(o.tR.afterFetchNotificationData,{notificationParams:e,data:null,error:t})})):(l.Z.info("[LifeCycleModule]: no notification module"),Promise.resolve(null))}getConsentRecord(e){l.Z.info("[LifeCycleModule]: getConsentRecord",{entityKey:e});let t=this._getUserInfo();return this._consentModule.getRecord(e,t)}getConsentEntity(e){l.Z.info("[LifeCycleModule]: getConsentEntity",{entityKey:e});let t=this._getUserInfo();return this._consentModule.getEntity(e,t)}getConsentRecords(e){l.Z.info("[LifeCycleModule]: getConsentRecords",{entityKeys:e});let t=this._getUserInfo();return this._consentModule.getRecords(e,t)}getConsentEntities(e){l.Z.info("[LifeCycleModule]: getConsentEntities",{entityKeys:e});let t=this._getUserInfo();return this._consentModule.getEntities(e,t)}updateConsentRecords(e,t,r){return _(this,null,function*(){l.Z.info("[LifeCycleModule]: updateConsentRecords",{entityKeys:e,status:t,businessFlow:r}),this.dispatch(o.tR.beforeUpdateRecords,{entityKeys:e,status:t,businessFlow:r});let n={},i=this._getUserInfo();try{n=yield this._consentModule.updateRecords(e,i,t,r),this.dispatch(o.tR.afterUpdateRecords,{entityKeys:e,data:n})}catch(n){l.Z.error("[LifeCycleModule]: updateConsentRecords",n),this.dispatch(o.tR.afterUpdateRecords,{entityKeys:e,status:t,businessFlow:r,data:null,error:n})}return this._initThirdParties(n),n})}getNotificationData(){return(l.Z.info("[LifeCycleModule]: getNotificationData"),this._notificationModule)?this._notificationModule.getData():(l.Z.info("[LifeCycleModule]: no notification module"),null)}removeNotification(e){if(l.Z.info("[LifeCycleModule]: removeNotification"),!this._notificationModule){l.Z.info("[LifeCycleModule]: no notification module");return}if(!this._notificationModule.canNotificationBeRemoved(e))return;this.dispatch(o.tR.beforeRemoveNotification,e);let t=this._notificationModule.removeNotification(e);this._dispatchAfterEvent(o.tR.afterRemoveNotification,t)}notify(e){var t,{relatedEntityKeys:r=[]}=e,n=m(e,["relatedEntityKeys"]);if(l.Z.info("[LifeCycleModule]: notify"),!this._notificationModule){l.Z.info("[LifeCycleModule]: no notification module");return}let i=(null!=(t=this.getConsentEntities(r))?t:[]).reduce((e,t)=>(t&&(e[t.key]=t),e),{});this._triggerNotification(g({relatedEntityKeys:r,notificationData:this.getNotificationData(),relatedConsentEntityMap:i},n))}_triggerNotification(e){if(l.Z.info("[LifeCycleModule]: triggerNotification"),!this._notificationModule){l.Z.info("[LifeCycleModule]: no notification module");return}if(!this._notificationModule.shouldNotify(e))return;this.dispatch(o.tR.beforeNotify,e);let t=this._notificationModule.notify(e);this._dispatchAfterEvent(o.tR.afterNotify,t)}destruct(){this._cleanUpPlugins(),l.Z.info("[LifeCycleModule]: destruct")}}var b=new y},981043:function(e,t,r){"use strict";r.d(t,{N:function(){return i.Z},v:function(){return n.Z}});var n=r(904404),i=r(198884)},391105:function(){},188343:function(){},990172:function(){},186666:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={"platform-account-selector":"platform-account-selector-TVUAnq",platformAccountSelector:"platform-account-selector-TVUAnq","platform-account-selector-option-container":"platform-account-selector-option-container-xy14kP",platformAccountSelectorOptionContainer:"platform-account-selector-option-container-xy14kP","platform-account-selector-option-name":"platform-account-selector-option-name-qiG0L0",platformAccountSelectorOptionName:"platform-account-selector-option-name-qiG0L0","platform-account-selector-selected-account":"platform-account-selector-selected-account-bnyoAF",platformAccountSelectorSelectedAccount:"platform-account-selector-selected-account-bnyoAF","platform-account-selector-selected-account-content":"platform-account-selector-selected-account-content-gHimUm",platformAccountSelectorSelectedAccountContent:"platform-account-selector-selected-account-content-gHimUm","platform-account-selector-selected-account-name":"platform-account-selector-selected-account-name-Fspom0",platformAccountSelectorSelectedAccountName:"platform-account-selector-selected-account-name-Fspom0","platform-account-selector-selected-account-email":"platform-account-selector-selected-account-email-IO_lGG",platformAccountSelectorSelectedAccountEmail:"platform-account-selector-selected-account-email-IO_lGG","platform-account-selector-sign-out-option":"platform-account-selector-sign-out-option-XnOm_k",platformAccountSelectorSignOutOption:"platform-account-selector-sign-out-option-XnOm_k","platform-account-selector-switch-account-tip":"platform-account-selector-switch-account-tip-sJ8Xaf",platformAccountSelectorSwitchAccountTip:"platform-account-selector-switch-account-tip-sJ8Xaf","platform-account-selector-divider":"platform-account-selector-divider-Gc7WSD",platformAccountSelectorDivider:"platform-account-selector-divider-Gc7WSD","platform-selector":"platform-selector-e87isv",platformSelector:"platform-selector-e87isv",errorBorder:"errorBorder-bHU4QM",errorText:"errorText-iwpiqS","platform-selector-option-container":"platform-selector-option-container-jXySzD",platformSelectorOptionContainer:"platform-selector-option-container-jXySzD","platform-selector-option":"platform-selector-option-CsP2tY",platformSelectorOption:"platform-selector-option-CsP2tY","platform-selector-option-name":"platform-selector-option-name-B0DdLm",platformSelectorOptionName:"platform-selector-option-name-B0DdLm","form-item-time-picker":"form-item-time-picker-Ym4zJi",formItemTimePicker:"form-item-time-picker-Ym4zJi","system-zone":"system-zone-m2vYvw",systemZone:"system-zone-m2vYvw","picker-wrapper":"picker-wrapper-SoxDni",pickerWrapper:"picker-wrapper-SoxDni",picker:"picker-QJ4e7i","account-selector":"account-selector-KlgO4X",accountSelector:"account-selector-KlgO4X","account-selector-simple-option-container":"account-selector-simple-option-container-w2qPz1",accountSelectorSimpleOptionContainer:"account-selector-simple-option-container-w2qPz1","account-selector-simple-option":"account-selector-simple-option-Eg_f3F",accountSelectorSimpleOption:"account-selector-simple-option-Eg_f3F","account-selector-simple-option-avatar":"account-selector-simple-option-avatar-GXjc5e",accountSelectorSimpleOptionAvatar:"account-selector-simple-option-avatar-GXjc5e","account-selector-simple-option-name":"account-selector-simple-option-name-OsmuNy",accountSelectorSimpleOptionName:"account-selector-simple-option-name-OsmuNy","account-selector-sign-out-option":"account-selector-sign-out-option-Adzrw4",accountSelectorSignOutOption:"account-selector-sign-out-option-Adzrw4","account-selector-sign-in":"account-selector-sign-in-Pf5uNI",accountSelectorSignIn:"account-selector-sign-in-Pf5uNI","account-selector-sign-in-avatar":"account-selector-sign-in-avatar-qiLoCx",accountSelectorSignInAvatar:"account-selector-sign-in-avatar-qiLoCx","se-textarea-form-item":"se-textarea-form-item-gu7yTe",seTextareaFormItem:"se-textarea-form-item-gu7yTe","se-textarea":"se-textarea-bOl8pT",seTextarea:"se-textarea-bOl8pT","share-submit":"share-submit-AsdD9u",shareSubmit:"share-submit-AsdD9u","share-submit-container":"share-submit-container-tBF8np",shareSubmitContainer:"share-submit-container-tBF8np","share-submit-title":"share-submit-title-wwL321",shareSubmitTitle:"share-submit-title-wwL321"}},830512:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={centerPosition:"centerPosition-hmQeiB",dropmenuContainer:"dropmenuContainer-DptFh5",dropmenu:"dropmenu-jYLKSM"}},860083:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={tabItems:"tabItems-kuedsA",separation:"separation-ogNOmS",validateDot:"validateDot-uoLDXd",tabTitleWrapper:"tabTitleWrapper-AqxUpl",templateItem:"templateItem-BAkg4H",template:"template-hc6jXB"}},859815:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={productLinkContainer:"productLinkContainer-SIzx7C",title:"title-ku5k3u",contentWrap:"contentWrap-BQxHKr",image:"image-UNpOAF",product:"product-Go008N",productImg:"productImg-W1KAI3",close:"close-PI6QYL",desc:"desc-acY2ow",name:"name-GjDUwx",icon:"icon-DyYhw6",edit:"edit-mX09To",productTitle:"productTitle-gl0lSY",failedMessage:"failedMessage-Uv6MgA"}},180276:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={progress:"progress-TpEEUN",status:"status-J0amFy",percent:"percent-Ht9ehZ",unit:"unit-rLKYRI",text:"text-eDZPgE",cancelBtn:"cancelBtn-E8NQKA",fail:"fail-cIsqon",title:"title-sBmr0u",desc:"desc-J03Iq7"}},68331:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={menu:"menu-qQpaFF",item:"item-AJoSqj",icon_wrapper:"icon_wrapper-r_FJVc",iconWrapper:"icon_wrapper-r_FJVc",title:"title-eRSStw",generate_suffix:"generate_suffix-F2PokL",generateSuffix:"generate_suffix-F2PokL"}},219507:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={wordCountWrapper:"wordCountWrapper-INLkhG",wordCountWrapper_show:"wordCountWrapper_show-r3kXAB",wordCountWrapperShow:"wordCountWrapper_show-r3kXAB",wordCountWrapper_hidden:"wordCountWrapper_hidden-GefBew",wordCountWrapperHidden:"wordCountWrapper_hidden-GefBew",wordCountWrapper_count:"wordCountWrapper_count-_3eGuH",wordCountWrapperCount:"wordCountWrapper_count-_3eGuH",wordCountWrapper_icon:"wordCountWrapper_icon-IDRyKX",wordCountWrapperIcon:"wordCountWrapper_icon-IDRyKX",wordCountWrapper_divider:"wordCountWrapper_divider-cfDPbo",wordCountWrapperDivider:"wordCountWrapper_divider-cfDPbo"}},741995:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={"automatic-generation":"automatic-generation-ZBaO55",automaticGeneration:"automatic-generation-ZBaO55",box:"box-TjwB0h","generating-ball":"generating-ball-hKBWkv",generatingBall:"generating-ball-hKBWkv","generating-progress":"generating-progress-P3zB12",generatingProgress:"generating-progress-P3zB12","progress-text":"progress-text-CnnMCM",progressText:"progress-text-CnnMCM","one-digit":"one-digit-EYPzxe",oneDigit:"one-digit-EYPzxe","percent-text":"percent-text-poDq_H",percentText:"percent-text-poDq_H","generating-text":"generating-text-vt8WVD",generatingText:"generating-text-vt8WVD","tip-text":"tip-text-LTd5cS",tipText:"tip-text-LTd5cS","cancel-button":"cancel-button-SN0ue_",cancelButton:"cancel-button-SN0ue_","cancel-modal":"cancel-modal-FciV0j",cancelModal:"cancel-modal-FciV0j",title:"title-wqMEIO","lv-modal-footer":"lv-modal-footer-VdsIun",lvModalFooter:"lv-modal-footer-VdsIun","lv-modal-header":"lv-modal-header-Vb5Gd2",lvModalHeader:"lv-modal-header-Vb5Gd2","failed-icon":"failed-icon-cKhdAZ",failedIcon:"failed-icon-cKhdAZ","failed-text":"failed-text-G82qC8",failedText:"failed-text-G82qC8","failed-button-container":"failed-button-container-uuGbaF",failedButtonContainer:"failed-button-container-uuGbaF"}},125343:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={"material-export-modal-container":"material-export-modal-container-kQ7xTM",materialExportModalContainer:"material-export-modal-container-kQ7xTM","material-export-modal-title":"material-export-modal-title-KeZaU8",materialExportModalTitle:"material-export-modal-title-KeZaU8","close-icon":"close-icon-BSyxXi",closeIcon:"close-icon-BSyxXi","material-export-modal-content":"material-export-modal-content-ZVAdG7",materialExportModalContent:"material-export-modal-content-ZVAdG7","material-export-modal-content-cover":"material-export-modal-content-cover-YkF1AZ",materialExportModalContentCover:"material-export-modal-content-cover-YkF1AZ","material-export-modal-content-cover-wrapper":"material-export-modal-content-cover-wrapper-R05dAl",materialExportModalContentCoverWrapper:"material-export-modal-content-cover-wrapper-R05dAl","cover-wrapper":"cover-wrapper-yGxVmm",coverWrapper:"cover-wrapper-yGxVmm",duration:"duration-yFkmPC","material-export-modal-content-form":"material-export-modal-content-form-nP7prw",materialExportModalContentForm:"material-export-modal-content-form-nP7prw","lv-input":"lv-input-kn6b_J",lvInput:"lv-input-kn6b_J","material-export-modal-footer":"material-export-modal-footer-fS11P_",materialExportModalFooter:"material-export-modal-footer-fS11P_","material-export-modal-footer-tips":"material-export-modal-footer-tips-jwP40k",materialExportModalFooterTips:"material-export-modal-footer-tips-jwP40k","material-export-modal-footer-btns":"material-export-modal-footer-btns-rVJITU",materialExportModalFooterBtns:"material-export-modal-footer-btns-rVJITU"}},420413:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={button:"button-IEEIT_",button__disabled:"button__disabled-kCHGAk",buttonDisabled:"button__disabled-kCHGAk",icon:"icon-BAgY7w",command:"command-uwVxjT",ctrl:"ctrl-m1Ft96",enter:"enter-XlkaIw",short_cuts:"short_cuts-lzcNJ0",shortCuts:"short_cuts-lzcNJ0"}},666911:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={container:"container-mgCs6F",body:"body-h1cUip",item:"item-xCDOJr",label:"label-pxzZhI",textarea:"textarea-NXalwZ",next:"next-KPCPM0",next__center:"next__center-O3o7yo",nextCenter:"next__center-O3o7yo",next__bottom:"next__bottom-et8yb8",nextBottom:"next__bottom-et8yb8"}},347795:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={wrapper:"wrapper-NrCuB8",wrapper__fade_in:"wrapper__fade_in-KFdj3P",wrapperFadeIn:"wrapper__fade_in-KFdj3P",elementFadeIn:"elementFadeIn-ifVz4z",container:"container-vmRK1q",left:"left-jNeMgY",right:"right-GsqzCh",body:"body-yvLjE9",title:"title-Tbhv_k",content:"content-tOPr2F",icon:"icon-fen2Do",elementFadeOut:"elementFadeOut-r3eNeh"}},255559:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={"player-status":"player-status-PTfRyP",playerStatus:"player-status-PTfRyP","not-allowed":"not-allowed-aQr4jA",notAllowed:"not-allowed-aQr4jA","play-button":"play-button-kDvYQU",playButton:"play-button-kDvYQU",show:"show-I32oe_",hide:"hide-D0xaui"}},672970:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={headerWrapper:"headerWrapper-zf4JJH",leftSlot:"leftSlot-an7CTR",logo:"logo-Z6n9o9",split:"split-BZpmzH",allToolsWrapper:"allToolsWrapper-c38lUe",contentSlot:"contentSlot-B_mk4S",rightSlot:"rightSlot-yUAwWS"}},432714:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={"guide-icon-wrapper":"guide-icon-wrapper-WeZ2OX",guideIconWrapper:"guide-icon-wrapper-WeZ2OX","guide-icon":"guide-icon-n4FIvm",guideIcon:"guide-icon-n4FIvm"}},472958:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={cc_editor_kit_ttv_line:"cc_editor_kit_ttv_line-YbOA_8",ccEditorKitTtvLine:"cc_editor_kit_ttv_line-YbOA_8",cc_editor_kit_ttv_line_extra_margin:"cc_editor_kit_ttv_line_extra_margin-yCjOfD",ccEditorKitTtvLineExtraMargin:"cc_editor_kit_ttv_line_extra_margin-yCjOfD"}},394879:function(){},514553:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(150026),i=r(645622),o=r(388714),a=function(e,t){var r=this;this.getValidateMsg=function(e,t){void 0===t&&(t={});var o=Object.assign(Object.assign({},t),{value:r.obj,field:r.field,type:r.type}),a=(0,i.t)(r.validateMessages,e);return(0,n.mf)(a)?a(o):(0,n.HD)(a)?a.replace(/\#\{.+?\}/g,function(e){var t=e.slice(2,-1);if(t in o){if((0,n.Kn)(o[t])||(0,n.kJ)(o[t]))try{return JSON.stringify(o[t])}catch(e){return o[t]}return String(o[t])}return e}):a},(0,n.Kn)(t)&&(0,n.HD)(e)&&t.trim?this.obj=e.trim():(0,n.Kn)(t)&&t.ignoreEmptyString&&""===e?this.obj=void 0:this.obj=e,this.message=t.message,this.type=t.type,this.error=null,this.field=t.field||t.type,this.validateMessages=(0,i.j)(o.Z,t.validateMessages)},s={not:{configurable:!0},isRequired:{configurable:!0},end:{configurable:!0}};s.not.get=function(){return this._not=!this._not,this},s.isRequired.get=function(){if((0,n.O2)(this.obj)||(0,n.yD)(this.obj)){var e=this.getValidateMsg("required");this.error={value:this.obj,type:this.type,requiredError:!0,message:this.message||((0,n.Kn)(e)?e:(this._not?"[NOT MODE]:":"")+e)}}return this},s.end.get=function(){return this.error},a.prototype.addError=function(e){!this.error&&e&&(this.error={value:this.obj,type:this.type,message:this.message||((0,n.Kn)(e)?e:(this._not?"[NOT MODE]:":"")+e)})},a.prototype.validate=function(e,t){return(this._not?e:!e)&&this.addError(t),this},a.prototype.collect=function(e){e&&e(this.error)},Object.defineProperties(a.prototype,s)},975960:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=function(e){function t(t,r){e.call(this,t,Object.assign(Object.assign({},r),{type:"custom"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={validate:{configurable:!0}};return r.validate.get=function(){var e=this;return function(t,r){var n;if(t)return(n=t(e.obj,e.addError.bind(e)))&&n.then?(r&&n.then(function(){r&&r(e.error)},function(e){console.error(e)}),[n,e]):(r&&r(e.error),e.error)}},Object.defineProperties(t.prototype,r),t}(r(514553).Z)},171824:function(e,t,r){var n;n=function(e){var t,r,n,i,o,a,s,c,l,u,d,h,p,f;return t=e.lib.BlockCipher,r=e.algo,n=[],i=[],o=[],a=[],s=[],c=[],l=[],u=[],d=[],h=[],function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var r=0,p=0,t=0;t<256;t++){var f=p^p<<1^p<<2^p<<3^p<<4;f=f>>>8^255&f^99,n[r]=f,i[f]=r;var v=e[r],g=e[v],m=e[g],_=257*e[f]^16843008*f;o[r]=_<<24|_>>>8,a[r]=_<<16|_>>>16,s[r]=_<<8|_>>>24,c[r]=_;var _=16843009*m^65537*g^257*v^16843008*r;l[f]=_<<24|_>>>8,u[f]=_<<16|_>>>16,d[f]=_<<8|_>>>24,h[f]=_,r?(r=v^e[e[e[m^v]]],p^=e[e[p]]):r=p=1}}(),p=[0,1,2,4,8,16,32,64,128,27,54],f=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,r=t.words,i=t.sigBytes/4,o=((this._nRounds=i+6)+1)*4,a=this._keySchedule=[],s=0;s<o;s++)s<i?a[s]=r[s]:(e=a[s-1],s%i?i>6&&s%i==4&&(e=n[e>>>24]<<24|n[e>>>16&255]<<16|n[e>>>8&255]<<8|n[255&e]):e=(n[(e=e<<8|e>>>24)>>>24]<<24|n[e>>>16&255]<<16|n[e>>>8&255]<<8|n[255&e])^p[s/i|0]<<24,a[s]=a[s-i]^e);for(var c=this._invKeySchedule=[],f=0;f<o;f++){var s=o-f;if(f%4)var e=a[s];else var e=a[s-4];f<4||s<=4?c[f]=e:c[f]=l[n[e>>>24]]^u[n[e>>>16&255]]^d[n[e>>>8&255]]^h[n[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,s,c,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,u,d,h,i);var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var c=this._nRounds,l=e[t]^r[0],u=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<c;f++){var v=n[l>>>24]^i[u>>>16&255]^o[d>>>8&255]^a[255&h]^r[p++],g=n[u>>>24]^i[d>>>16&255]^o[h>>>8&255]^a[255&l]^r[p++],m=n[d>>>24]^i[h>>>16&255]^o[l>>>8&255]^a[255&u]^r[p++],_=n[h>>>24]^i[l>>>16&255]^o[u>>>8&255]^a[255&d]^r[p++];l=v,u=g,d=m,h=_}var v=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^r[p++],g=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&l])^r[p++],m=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^r[p++],_=(s[h>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^r[p++];e[t]=v,e[t+1]=g,e[t+2]=m,e[t+3]=_},keySize:8}),e.AES=t._createHelper(f),e.AES},e.exports=n(r(359302),r(223580),r(779514),r(813573),r(967272))},813573:function(e,t,r){var n;n=function(e){var t,r,n,i,o,a;return r=(t=e.lib).Base,n=t.WordArray,o=(i=e.algo).MD5,a=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,i=this.cfg,o=i.hasher.create(),a=n.create(),s=a.words,c=i.keySize,l=i.iterations;s.length<c;){r&&o.update(r),r=o.update(e).finalize(t),o.reset();for(var u=1;u<l;u++)r=o.finalize(r),o.reset();a.concat(r)}return a.sigBytes=4*c,a}}),e.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)},e.EvpKDF},e.exports=n(r(359302),r(866279),r(284278))},467064:function(e,t,r){var n;n=function(e){var t,r,n,i,o,a,s,c,l;return t=Math,n=(r=e.lib).WordArray,i=r.Hasher,o=e.algo,a=[],s=[],function(){function e(e){return(e-(0|e))*4294967296|0}for(var r=2,n=0;n<64;)(function(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0})(r)&&(n<8&&(a[n]=e(t.pow(r,.5))),s[n]=e(t.pow(r,1/3)),n++),r++}(),c=[],l=o.SHA256=i.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=r[6],h=r[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],v=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=c[p-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=v+c[p-7]+m+c[p-16]}var _=l&u^~l&d,y=n&i^n&o^i&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=h+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+_+s[p]+c[p],k=b+y;h=d,d=u,u=l,l=a+w|0,a=o,o=i,i=n,n=w+k|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+l|0,r[5]=r[5]+u|0,r[6]=r[6]+d|0,r[7]=r[7]+h|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[(i+64>>>9<<4)+14]=t.floor(n/4294967296),r[(i+64>>>9<<4)+15]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA256=i._createHelper(l),e.HmacSHA256=i._createHmacHelper(l),e.SHA256},e.exports=n(r(897021))},470922:function(e,t,r){"use strict";r.d(t,{ir:function(){return u},pw:function(){return l},r3:function(){return d},vA:function(){return c}});var n=r(769026),i=r(286354),o=r(365559),a=r(246737),s=function(e,t){return(0,n.qo)(e).filter(function(e){return(0,i.bh)(t,e)}).filter(function(e){return(0,i.Zo)(e)})},c=function(e,t){return void 0===t&&(t=new Map),(0,n.qo)(e).filter(function(e){return(0,i.gm)(t,e)})},l=function(e,t){return(0,o.v)(s((0,a.s)(e),t),!1)},u=function(e,t){return s((0,a.B)(e),t)},d=function(e,t){return e.shadowRoot?d(e.shadowRoot,t):!!(void 0!==Object.getPrototypeOf(e).contains&&Object.getPrototypeOf(e).contains.call(e,t))||(0,n.qo)(e.children).some(function(e){var r;if(e instanceof HTMLIFrameElement){var n=null===(r=e.contentDocument)||void 0===r?void 0:r.body;return!!n&&d(n,t)}return d(e,t)})}},614038:function(e,t,r){"use strict";r.d(t,{Ep:function(){return o},PP:function(){return c},ob:function(){return a}});var n=r(661135),i=r(974517);function o(e){var t=e.pathname,r=e.search,n=e.hash,i=t||"/";return r&&"?"!==r&&(i+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(i+="#"===n.charAt(0)?n:"#"+n),i}function a(e,t,r,o){var a,s,c,l,u,d;"string"==typeof e?(c="",l="",-1!==(u=(s=e||"/").indexOf("#"))&&(l=s.substr(u),s=s.substr(0,u)),-1!==(d=s.indexOf("?"))&&(c=s.substr(d),s=s.substr(0,d)),(a={pathname:s,search:"?"===c?"":c,hash:"#"===l?"":l}).state=t):(void 0===(a=(0,n.Z)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(e){if(e instanceof URIError)throw URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.');throw e}return r&&(a.key=r),o?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=(0,i.Z)(a.pathname,o.pathname)):a.pathname=o.pathname:a.pathname||(a.pathname="/"),a}function s(e,t,r){return Math.min(Math.max(e,t),r)}function c(e){void 0===e&&(e={});var t,r,i=e,c=i.getUserConfirmation,l=i.initialEntries,u=void 0===l?["/"]:l,d=i.initialIndex,h=i.keyLength,p=void 0===h?6:h,f=(t=null,r=[],{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,r,n,i){if(null!=t){var o="function"==typeof t?t(e,r):t;"string"==typeof o?"function"==typeof n?n(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var t=!0;function n(){t&&e.apply(void 0,arguments)}return r.push(n),function(){t=!1,r=r.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach(function(e){return e.apply(void 0,t)})}});function v(e){(0,n.Z)(b,e),b.length=b.entries.length,f.notifyListeners(b.location,b.action)}function g(){return Math.random().toString(36).substr(2,p)}var m=s(void 0===d?0:d,0,u.length-1),_=u.map(function(e){return"string"==typeof e?a(e,void 0,g()):a(e,void 0,e.key||g())});function y(e){var t=s(b.index+e,0,b.entries.length-1),r=b.entries[t];f.confirmTransitionTo(r,"POP",c,function(e){e?v({action:"POP",location:r,index:t}):v()})}var b={length:_.length,action:"POP",location:_[m],index:m,entries:_,createHref:o,push:function(e,t){var r="PUSH",n=a(e,t,g(),b.location);f.confirmTransitionTo(n,r,c,function(e){if(e){var t=b.index+1,i=b.entries.slice(0);i.length>t?i.splice(t,i.length-t,n):i.push(n),v({action:r,location:n,index:t,entries:i})}})},replace:function(e,t){var r="REPLACE",n=a(e,t,g(),b.location);f.confirmTransitionTo(n,r,c,function(e){e&&(b.entries[b.index]=n,v({action:r,location:n}))})},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),f.setPrompt(e)},listen:function(e){return f.appendListener(e)}};return b}r(446594),"undefined"!=typeof window&&window.document&&window.document.createElement},372971:function(e,t,r){"use strict";r.d(t,{FK:function(){return function e(t,r,n,s,c,l,u){if(1===t.length&&(0,o.O4)(t[0]))return[{type:i.literal,value:t[0].value}];for(var d=[],h=0;h<t.length;h++){var p=t[h];if((0,o.O4)(p)){d.push({type:i.literal,value:p.value});continue}if((0,o.yx)(p)){"number"==typeof l&&d.push({type:i.literal,value:n.getNumberFormat(r).format(l)});continue}var f=p.value;if(!(c&&f in c))throw new a.HR(f,u);var v=c[f];if((0,o.VG)(p)){v&&"string"!=typeof v&&"number"!=typeof v||(v="string"==typeof v||"number"==typeof v?String(v):""),d.push({type:"string"==typeof v?i.literal:i.object,value:v});continue}if((0,o.rp)(p)){var g="string"==typeof p.style?s.date[p.style]:(0,o.Ii)(p.style)?p.style.parsedOptions:void 0;d.push({type:i.literal,value:n.getDateTimeFormat(r,g).format(v)});continue}if((0,o.pe)(p)){var g="string"==typeof p.style?s.time[p.style]:(0,o.Ii)(p.style)?p.style.parsedOptions:s.time.medium;d.push({type:i.literal,value:n.getDateTimeFormat(r,g).format(v)});continue}if((0,o.uf)(p)){var g="string"==typeof p.style?s.number[p.style]:(0,o.Wh)(p.style)?p.style.parsedOptions:void 0;g&&g.scale&&(v*=g.scale||1),d.push({type:i.literal,value:n.getNumberFormat(r,g).format(v)});continue}if((0,o.HI)(p)){var m=p.children,_=p.value,y=c[_];if("function"!=typeof y)throw new a.YR(_,"function",u);var b=y(e(m,r,n,s,c,l).map(function(e){return e.value}));Array.isArray(b)||(b=[b]),d.push.apply(d,b.map(function(e){return{type:"string"==typeof e?i.literal:i.object,value:e}}))}if((0,o.Wi)(p)){var w=p.options[v]||p.options.other;if(!w)throw new a.C8(p.value,v,Object.keys(p.options),u);d.push.apply(d,e(w.value,r,n,s,c));continue}if((0,o.Jo)(p)){var w=p.options["=".concat(v)];if(!w){if(!Intl.PluralRules)throw new a.u_('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',a.jK.MISSING_INTL_API,u);var k=n.getPluralRules(r,{type:p.pluralType}).select(v-(p.offset||0));w=p.options[k]||p.options.other}if(!w)throw new a.C8(p.value,v,Object.keys(p.options),u);d.push.apply(d,e(w.value,r,n,s,c,v-(p.offset||0)));continue}}return d.length<2?d:d.reduce(function(e,t){var r=e[e.length-1];return r&&r.type===i.literal&&t.type===i.literal?r.value+=t.value:e.push(t),e},[])}},du:function(){return i}});var n,i,o=r(620786),a=r(235646);(n=i||(i={}))[n.literal=0]="literal",n[n.object=1]="object"},557926:function(e){"use strict";var t,r,n=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i(function(){throw 42},null,t)}catch(e){e!==r&&(i=null)}else i=null;var o=/^\s*class\b/,a=function(e){try{var t=n.call(e);return o.test(t)}catch(e){return!1}},s=function(e){try{if(a(e))return!1;return n.call(e),!0}catch(e){return!1}},c=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),d=function(){return!1};if("object"==typeof document){var h=document.all;c.call(h)===c.call(document.all)&&(d=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=c.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(d(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==r)return!1}return!a(e)&&s(e)}:function(e){if(d(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;if(l)return s(e);if(a(e))return!1;var t=c.call(e);return!!("[object Function]"===t||"[object GeneratorFunction]"===t||/^\[object HTML/.test(t))&&s(e)}},158606:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(218571),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,o={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!c.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:l,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},375302:function(e,t,r){var n,i,o=r(499845);n=i||(i={}),function(e){var t="object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=o(n);function o(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===t.Reflect?t.Reflect=n:i=o(t.Reflect,i),e(i)}(function(e){var t=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s=({__proto__:[]})instanceof Array,c=!a&&!s,l={create:a?function(){return R(Object.create(null))}:s?function(){return R({__proto__:null})}:function(){return R({})},has:c?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:c?function(e,r){return t.call(e,r)?e[r]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),d="object"==typeof o&&o.env&&"true"===o.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,o)},t.prototype.entries=function(){return new r(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function o(e,t){return t}function a(e,t){return[e,t]}}():Map,p=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,f=new(d||"function"!=typeof WeakMap?function(){var e=l.create(),r=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var t;do t="@@WeakMap@@"+function(){var e="function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(16)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(16)):o(new Uint8Array(16),16):o(Array(16),16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<16;++r){var n=e[r];(4===r||6===r||8===r)&&(t+="-"),n<16&&(t+="0"),t+=n.toString(16).toLowerCase()}return t}();while(l.has(e,t));return e[t]=!0,t}function i(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:l.create()})}return e[r]}function o(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}}():WeakMap);function v(e,t,r){var n=f.get(e);if(w(n)){if(!r)return;n=new h,f.set(e,n)}var i=n.get(t);if(w(i)){if(!r)return;i=new h,n.set(t,i)}return i}function g(e,t,r){var n=v(t,r,!1);return!w(n)&&!!n.has(e)}function m(e,t,r){var n=v(t,r,!1);if(!w(n))return n.get(e)}function _(e,t,r,n){v(r,n,!0).set(e,t)}function y(e,t){var r=[],n=v(e,t,!1);if(w(n))return r;for(var o=function(e){var t=A(e,i);if(!T(t))throw TypeError();var r=t.call(e);if(!x(r))throw TypeError();return r}(n.keys()),a=0;;){var s=function(e){var t=e.next();return!t.done&&t}(o);if(!s)return r.length=a,r;var c=s.value;try{r[a]=c}catch(e){try{(function(e){var t=e.return;t&&t.call(e)})(o)}finally{throw e}}a++}}function b(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function w(e){return void 0===e}function k(e){return null===e}function x(e){return"object"==typeof e?null!==e:"function"==typeof e}function S(e){var t=function(e,t){switch(b(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r="string",i=A(e,n);if(void 0!==i){var o=i.call(e,r);if(x(o))throw TypeError();return o}return function(e,t){if("string"===t){var r=e.toString;if(T(r)){var n=r.call(e);if(!x(n))return n}var i=e.valueOf;if(T(i)){var n=i.call(e);if(!x(n))return n}}else{var i=e.valueOf;if(T(i)){var n=i.call(e);if(!x(n))return n}var o=e.toString;if(T(o)){var n=o.call(e);if(!x(n))return n}}throw TypeError()}(e,r)}(e,0);return"symbol"==typeof t?t:""+t}function E(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function T(e){return"function"==typeof e}function C(e){return"function"==typeof e}function A(e,t){var r=e[t];if(null!=r){if(!T(r))throw TypeError();return r}}function I(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u||t!==u)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i||i===e?t:i}function R(e){return e.__=void 0,delete e.__,e}e("decorate",function(e,t,r,n){if(w(r)){if(!E(e)||!C(t))throw TypeError();return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!w(n)&&!k(n)){if(!C(n))throw TypeError();t=n}}return t}(e,t)}if(!E(e)||!x(t)||!x(n)&&!w(n)&&!k(n))throw TypeError();return k(n)&&(n=void 0),function(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,r,n);if(!w(o)&&!k(o)){if(!x(o))throw TypeError();n=o}}return n}(e,t,r=S(r),n)}),e("metadata",function(e,t){return function(r,n){if(!x(r)||!w(n)&&!function(e){switch(b(e)){case 3:case 4:return!0;default:return!1}}(n))throw TypeError();_(e,t,r,n)}}),e("defineMetadata",function(e,t,r,n){if(!x(r))throw TypeError();return w(n)||(n=S(n)),_(e,t,r,n)}),e("hasMetadata",function(e,t,r){if(!x(t))throw TypeError();return w(r)||(r=S(r)),function e(t,r,n){if(g(t,r,n))return!0;var i=I(r);return!k(i)&&e(t,i,n)}(e,t,r)}),e("hasOwnMetadata",function(e,t,r){if(!x(t))throw TypeError();return w(r)||(r=S(r)),g(e,t,r)}),e("getMetadata",function(e,t,r){if(!x(t))throw TypeError();return w(r)||(r=S(r)),function e(t,r,n){if(g(t,r,n))return m(t,r,n);var i=I(r);if(!k(i))return e(t,i,n)}(e,t,r)}),e("getOwnMetadata",function(e,t,r){if(!x(t))throw TypeError();return w(r)||(r=S(r)),m(e,t,r)}),e("getMetadataKeys",function(e,t){if(!x(e))throw TypeError();return w(t)||(t=S(t)),function e(t,r){var n=y(t,r),i=I(t);if(null===i)return n;var o=e(i,r);if(o.length<=0)return n;if(n.length<=0)return o;for(var a=new p,s=[],c=0;c<n.length;c++){var l=n[c],u=a.has(l);u||(a.add(l),s.push(l))}for(var d=0;d<o.length;d++){var l=o[d],u=a.has(l);u||(a.add(l),s.push(l))}return s}(e,t)}),e("getOwnMetadataKeys",function(e,t){if(!x(e))throw TypeError();return w(t)||(t=S(t)),y(e,t)}),e("deleteMetadata",function(e,t,r){if(!x(t))throw TypeError();w(r)||(r=S(r));var n=v(t,r,!1);if(w(n)||!n.delete(e))return!1;if(n.size>0)return!0;var i=f.get(t);return i.delete(r),i.size>0||(f.delete(t),!0)})})},527194:function(e,t,r){"use strict";r.d(t,{Nn:function(){return c},w0:function(){return s}});var n=r(789786),i=r(882314),o=r(501729),a=r(313080),s=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,a,s,c=this._parentage;if(c){if(this._parentage=null,Array.isArray(c))try{for(var u=(0,n.XA)(c),d=u.next();!d.done;d=u.next())d.value.remove(this)}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else c.remove(this)}var h=this.initialTeardown;if((0,i.m)(h))try{h()}catch(e){s=e instanceof o.B?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var f=(0,n.XA)(p),v=f.next();!v.done;v=f.next()){var g=v.value;try{l(g)}catch(e){s=null!=s?s:[],e instanceof o.B?s=(0,n.ev)((0,n.ev)([],(0,n.CR)(s)),(0,n.CR)(e.errors)):s.push(e)}}}catch(e){r={error:e}}finally{try{v&&!v.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}}if(s)throw new o.B(s)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)l(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,a.P)(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&(0,a.P)(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function c(e){return e instanceof s||e&&"closed"in e&&(0,i.m)(e.remove)&&(0,i.m)(e.add)&&(0,i.m)(e.unsubscribe)}function l(e){(0,i.m)(e)?e():e.unsubscribe()}s.EMPTY},514726:function(e,t,r){"use strict";r.d(t,{p:function(){return a}});var n=r(23423),i=r(227299),o=r(153946);function a(e,t,r,a,s,c,l,u){var d=[],h=0,p=0,f=!1,v=function(){!f||d.length||h||t.complete()},g=function(e){return h<a?m(e):d.push(e)},m=function(e){c&&t.next(e),h++;var u=!1;(0,n.Xf)(r(e,p++)).subscribe((0,o.x)(t,function(e){null==s||s(e),c?g(e):t.next(e)},function(){u=!0},void 0,function(){if(u)try{for(h--;d.length&&h<a;)!function(){var e=d.shift();l?(0,i.f)(t,l,function(){return m(e)}):m(e)}();v()}catch(e){t.error(e)}}))};return e.subscribe((0,o.x)(t,g,function(){f=!0,v()})),function(){null==u||u()}}},567250:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},927390:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var n=r(949024),i=function(){function e(t,r,i){(0,n.PA)(this,e),(0,n._x)(this,"flag",{}),(0,n._x)(this,"keyframe",!1),(0,n._x)(this,"gopId",0),(0,n._x)(this,"duration",0),(0,n._x)(this,"size",0),(0,n._x)(this,"units",[]),(0,n._x)(this,"chromaFormat",420),this.originPts=this.pts=t,this.originDts=this.dts=r,i&&(this.units=i)}return(0,n.qH)(e,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),e}()},831295:function(e,t,r){"use strict";r.d(t,{b:function(){return s}});var n=r(58924),i=r(814694),o=r(169330),a=r(362753),s=function(){function e(){(0,n.PA)(this,e)}return(0,n.qH)(e,null,[{key:"box",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=8+(r=r.filter(Boolean)).reduce(function(e,t){return e+t.byteLength},0),o=new Uint8Array(i);o[0]=i>>24&255,o[1]=i>>16&255,o[2]=i>>8&255,o[3]=255&i,o.set(e,4);var a=8;return r.forEach(function(e){o.set(e,a),a+=e.byteLength}),o}},{key:"ftyp",value:function(t){return t.find(function(e){return e.type===i.Vc.VIDEO&&e.codecType===i._e.HEVC})?e.FTYPHEV1:e.FTYPAVC1}},{key:"initSegment",value:function(t){var r=e.ftyp(t);return(0,o.gJ)(r,e.moov(t))}},{key:"pssh",value:function(t){var r=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],(0,o.Qc)(t.kid),[0,0,0,0]));return e.box(e.types.pssh,r)}},{key:"moov",value:function(t){if(!t[0].useEME||!t[0].encv&&!t[0].enca)return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale)].concat((0,n.u)(t.map(function(t){return e.trak(t)})),[e.mvex(t)]));t[0].pssh||(t[0].pssh={kid:t[0].kid});var r=this.pssh(t[0].pssh);return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale),e.mvex(t)].concat((0,n.u)(t.map(function(t){return e.trak(t)})),[r]))}},{key:"mvhd",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.tkhdDuration||0,t.width,t.height),e.mdia(t))}},{key:"tkhd",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minf(t))}},{key:"mdhd",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,t>>24&255,t>>16&255,t>>8&255,255&t,85,196,0,0]))}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"minf",value:function(t){return e.box(e.types.minf,t.type===i.Vc.VIDEO?e.VMHD:e.SMHD,e.DINF,e.stbl(t))}},{key:"stbl",value:function(t){var r=[];return t&&t.ext&&t.ext.stss&&r.push(e.stss(t.ext.stss.entries)),e.box(e.types.stbl,e.stsd(t),e.STTS,r[0],e.STSC,e.STSZ,e.STCO)}},{key:"stsd",value:function(t){var r;return r="audio"===t.type?t.useEME&&t.enca?e.enca(t):e.mp4a(t):t.useEME&&t.encv?e.encv(t):e.avc1hev1(t),e.box(e.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),r)}},{key:"enca",value:function(t){var r=t.enca.channelCount,n=t.enca.sampleRate,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,n>>8&255,255&n,0,0]),o=e.esds(t.config),a=e.sinf(t.enca);return e.box(e.types.enca,i,o,a)}},{key:"encv",value:function(t){var r,i,o=t.sps.length>0?t.sps[0]:[],a=t.pps.length>0?t.pps[0]:[],s=t.width,c=t.height,l=t.sarRatio[0],u=t.sarRatio[1],d=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h=new Uint8Array((r=(i=[1,o[1],o[2],o[3],255,225,o.length>>>8&255,255&o.length]).concat.apply(i,(0,n.u)(o)).concat([1,a.length>>>8&255,255&a.length])).concat.apply(r,(0,n.u)(a))),p=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),f=e.sinf(t.encv),v=new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,u>>24,u>>16&255,u>>8&255,255&u]);return e.box(e.types.encv,d,e.box(e.types.avcC,h),e.box(e.types.btrt,p),f,e.box(e.types.pasp,v))}},{key:"schi",value:function(t){var r=new Uint8Array([]),n=e.tenc(t);return e.box(e.types.schi,r,n)}},{key:"tenc",value:function(t){var r=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat((0,o.Qc)(t.default_KID)));return e.box(e.types.tenc,r)}},{key:"sinf",value:function(t){var r=new Uint8Array([]),n=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),o=e.schi(t);return e.box(e.types.sinf,r,e.box(e.types.frma,n),e.box(e.types.schm,i),o)}},{key:"avc1hev1",value:function(t){var r=t.codecType===i._e.HEVC,n=r?e.types.hvc1:e.types.avc1,o=r?e.hvcC(t):e.avcC(t),a=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o];return r?a.push(e.box(e.types.fiel,new Uint8Array([1,0]))):t.sarRatio&&t.sarRatio.length>1&&a.push(e.pasp(t.sarRatio)),e.box.apply(e,[n].concat(a))}},{key:"avcC",value:function(t){var r,i,o,a=[],s=[];return t.sps.forEach(function(e){o=e.byteLength,a.push(o>>>8&255),a.push(255&o),a.push.apply(a,(0,n.u)(e))}),t.pps.forEach(function(e){o=e.byteLength,s.push(o>>>8&255),s.push(255&o),s.push.apply(s,(0,n.u)(e))}),e.box(e.types.avcC,new Uint8Array((r=(i=[1,a[3],a[4],a[5],255,224|t.sps.length]).concat.apply(i,a).concat([t.pps.length])).concat.apply(r,s)))}},{key:"hvcC",value:function(t){var r,i=t.hvcC;if(i instanceof ArrayBuffer||i instanceof Uint8Array)return i;var o=t.vps,a=t.sps,s=t.pps;if(i){var c=i.generalProfileCompatibilityFlags,l=i.generalConstraintIndicatorFlags,u=(o.length&&1)+(a.length&&1)+(s.length&&1);r=[1,i.generalProfileSpace<<6|i.generalTierFlag<<5|i.generalProfileIdc,c>>>24,c>>>16,c>>>8,c,l[0],l[1],l[2],l[3],l[4],l[5],i.generalLevelIdc,240,0,252,252|i.chromaFormatIdc,248|i.bitDepthLumaMinus8,248|i.bitDepthChromaMinus8,0,0,i.numTemporalLayers<<3|i.temporalIdNested<<2|3,u];var d=function(e){var t;r.push(e.length>>8,e.length),(t=r).push.apply(t,(0,n.u)(e))};o.length&&(r.push(160,0,o.length),o.forEach(d)),a.length&&(r.push(161,0,a.length),a.forEach(d)),s.length&&(r.push(162,0,s.length),s.forEach(d))}else r=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return e.box(e.types.hvcC,new Uint8Array(r))}},{key:"pasp",value:function(t){var r=(0,n.ZQ)(t,2),i=r[0],o=r[1];return e.box(e.types.pasp,new Uint8Array([i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o]))}},{key:"mp4a",value:function(t){return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),t.config.length?e.esds(t.config):void 0)}},{key:"esds",value:function(t){var r=t.length;return e.box(e.types.esds,new Uint8Array([0,0,0,0,3,23+r,0,0,0,4,15+r,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([r]).concat(t).concat([6,1,2])))}},{key:"mvex",value:function(t){return e.box.apply(e,[e.types.mvex].concat((0,n.u)(t.map(function(t){return e.trex(t.id)}))))}},{key:"trex",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trex1",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]))}},{key:"trex2",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]))}},{key:"moof",value:function(t){return e.box.apply(e,[e.types.moof,e.mfhd(t[0].samples?t[0].samples[0].gopId:0)].concat((0,n.u)(t.map(function(t){return e.traf(t)}))))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"traf",value:function(t){var r=e.tfhd(t.id),n=e.tfdt(t,t.baseMediaDecodeTime),i=0;if(t.isVideo&&t.videoSenc&&t.videoSenc.forEach(function(e){i+=8,e.subsamples&&e.subsamples.length&&(i+=2+6*e.subsamples.length)}),t.videoSencLength=i,t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)){if(t.isVideoEncryption){if(t.isVideo){var o=e.saiz(t),a=e.saio(t),s=e.trun1(t),c=e.senc(t);return e.box(e.types.traf,r,n,o,a,s,c)}if(t.isAudioEncryption){var l=e.sbgp(),u=e.saiz(t),d=e.saio(t),h=e.senc(t),p=e.trun1(t);return e.box(e.types.traf,r,n,l,u,d,h,p)}var f=e.sbgp(),v=e.trun1(t);return e.box(e.types.traf,r,n,f,v)}if(t.isVideo){var g=e.trun1(t);return e.box(e.types.traf,r,n,g)}var m=e.sbgp(),_=e.saiz(t),y=e.saio(t),b=e.senc(t),w=e.trun1(t);return e.box(e.types.traf,r,n,m,_,y,b,w)}var k=e.sdtp(t);return e.box(e.types.traf,r,n,k,e.trun(t.samples,k.byteLength+76))}},{key:"sdtp",value:function(t){var r=new a.Z;return t.samples.forEach(function(e){r.write(new Uint8Array(t.isVideo?[e.keyframe?32:16]:[16]))}),e.box(e.types.sdtp,this.extension(0,0),r.buffer)}},{key:"trun1",value:function(t){var r=new a.Z,n=a.Z.writeUint32(t.samples.length),i=null;if(t.isVideo){var o=t.videoSencLength;i=a.Z.writeUint32(16*t.samples.length+o+149),!t.isVideoEncryption&&t.isAudioEncryption&&(i=a.Z.writeUint32(16*t.samples.length+92))}else{var s=12*t.samples.length+124;t.isAudioEncryption&&(s=12*t.samples.length+8*t.audioSenc.length+177),i=a.Z.writeUint32(s)}return t.samples.forEach(function(e){r.write(a.Z.writeUint32(e.duration)),r.write(a.Z.writeUint32(e.size)),r.write(a.Z.writeUint32(e.keyframe?33554432:65536)),t.isVideo&&r.write(a.Z.writeUint32(e.cts?e.cts:0))}),e.box(e.types.trun,this.extension(0,t.flags),n,i,r.buffer)}},{key:"senc",value:function(t){var r=new a.Z,n=t.samples.length,i=t.isVideo?16:8,o=t.isVideo?2:0,s=[],c=0;return t.isVideo?(s=t.videoSenc,c=t.videoSencLength):s=t.audioSenc,c=c||i*n,r.write(a.Z.writeUint32(16+c),e.types.senc,this.extension(0,o)),r.write(a.Z.writeUint32(n)),s.forEach(function(e){for(var t=0;t<e.InitializationVector.length;t++)r.write(new Uint8Array([e.InitializationVector[t]]));e.subsamples&&e.subsamples.length&&(r.write(a.Z.writeUint16(e.subsamples.length)),e.subsamples.forEach(function(e){r.write(a.Z.writeUint16(e.BytesOfClearData)),r.write(a.Z.writeUint32(e.BytesOfProtectedData))}))}),r.buffer}},{key:"saio",value:function(t){var r=12*t.samples.length+141;!t.isVideo&&t.isAudioEncryption&&(r=149);var n=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r]);return e.box(e.types.saio,n)}},{key:"saiz",value:function(t){var r=t.samples.length,n=new Uint8Array([0,0,0,0,16,r>>24&255,r>>16&255,r>>8&255,255&r]);return e.box(e.types.saiz,n)}},{key:"sbgp",value:function(){var t=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return e.box(e.types.sbgp,this.extension(0,0),t)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"tfhd",value:function(t){return e.box(e.types.tfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"tfdt",value:function(t,r){var n=Math.floor(r/4294967296),i=Math.floor(r%4294967296);return t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)?e.box(e.types.tfdt,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])):e.box(e.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i]))}},{key:"trun",value:function(t,r){var n=t.length,i=12+16*n;r+=8+i;var o=new Uint8Array(i);o.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0);for(var a=0;a<n;a++){var s=t[a],c=s.duration,l=s.size,u=s.flag,d=void 0===u?{}:u,h=s.cts,p=void 0===h?0:h;o.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c,l>>>24&255,l>>>16&255,l>>>8&255,255&l,d.isLeading<<2|(null===d.dependsOn||void 0===d.dependsOn?1:d.dependsOn),d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|(null===d.isNonSyncSample||void 0===d.isNonSyncSample?1:d.isNonSyncSample),61440&d.degradationPriority,15&d.degradationPriority,p>>>24&255,p>>>16&255,p>>>8&255,255&p],12+16*a)}return e.box(e.types.trun,o)}},{key:"moovMP4",value:function(t){return e.box.apply(e,[e.types.moov,e.mvhd(t[0].duration,t[0].timescale)].concat((0,n.u)(t.map(function(t){return e.trackMP4(t)}))))}},{key:"trackMP4",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.duration,t.width,t.height),e.mdiaMP4(t))}},{key:"mdiaMP4",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minfMP4(t))}},{key:"minfMP4",value:function(t){return e.box(e.types.minf,t.type===i.Vc.VIDEO?e.VMHD:e.SMHD,e.DINF,e.stblMP4(t))}},{key:"stblMP4",value:function(t){var r=t.ext,n=[e.stsd(t),e.stts(r.stts),e.stsc(r.stsc),e.stsz(r.stsz),e.stco(r.stco)];return r.stss.length&&n.push(e.stss(r.stss)),r.ctts.length&&n.push(e.ctts(r.ctts)),e.box.apply(e,[e.types.stbl].concat(n))}},{key:"stts",value:function(t){var r=t.length,n=new Uint8Array(8*r),i=0;return t.forEach(function(e){var t=e.value,r=e.count;n.set([r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8}),e.box(e.types.stts,(0,o.gJ)(new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r]),n))}},{key:"stsc",value:function(t){var r=t.length,n=new Uint8Array(12*r),i=0;return t.forEach(function(e){var t=e.firstChunk,r=e.samplesPerChunk,o=e.sampleDescIndex;n.set([t>>24,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,o>>24,o>>16&255,o>>8&255,255&o],i),i+=12}),e.box(e.types.stsc,(0,o.gJ)(new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r]),n))}},{key:"stsz",value:function(t){var r=t.length,n=new Uint8Array(4*r),i=0;return t.forEach(function(e){n.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4}),e.box(e.types.stsz,(0,o.gJ)(new Uint8Array([0,0,0,0,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r]),n))}},{key:"stco",value:function(t){var r=t.length,n=new Uint8Array(4*r),i=0;return t.forEach(function(e){n.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4}),e.box(e.types.stco,(0,o.gJ)(new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r]),n))}},{key:"stss",value:function(t){var r=t.length,n=new Uint8Array(4*r),i=0;return t.forEach(function(e){n.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4}),e.box(e.types.stss,(0,o.gJ)(new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r]),n))}},{key:"ctts",value:function(t){var r=t.length,n=new Uint8Array(8*r),i=0;return t.forEach(function(e){var t=e.value,r=e.count;n.set([r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8}),e.box(e.types.ctts,(0,o.gJ)(new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r]),n))}},{key:"styp",value:function(){return e.box(e.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(t){var r=t.timescale,n=t.samples[0].duration,i=n*t.samples.length,o=t.samples[0].sampleOffset*n,a=8;t.samples.forEach(function(e){a+=e.size});var s=0;if(t.isVideo){var c,l=0;t.videoSenc&&(c=t.videoSenc),t.isVideo&&c.forEach(function(e){l+=8,e.subsamples&&e.subsamples.length&&(l+=2+6*e.subsamples.length)}),t.videoSencLength=l,s=a+141+16*t.samples.length+l,t.useEME&&t.isAudioEncryption&&!t.isVideoEncryption&&(s=a+16*t.samples.length+84)}else s=a+116+12*t.samples.length,t.useEME&&t.isAudioEncryption&&(s=a+169+12*t.samples.length+8*t.audioSenc.length);var u=new Uint8Array([0,0,0,0,0,0,0,255&t.id,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,1,0,s>>16&255,s>>8&255,255&s,i>>24&255,i>>16&255,i>>8&255,255&i,144,0,0,0]);return e.box(e.types.sidx,u)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();(0,n._x)(s,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce(function(e,t){return e[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)],e},Object.create(null))),(0,n._x)(s,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),(0,n._x)(s,"FTYPAVC1",s.box(s.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))),(0,n._x)(s,"FTYPHEV1",s.box(s.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49]))),(0,n._x)(s,"DINF",s.box(s.types.dinf,s.box(s.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))),(0,n._x)(s,"VMHD",s.box(s.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))),(0,n._x)(s,"SMHD",s.box(s.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0]))),(0,n._x)(s,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0])),(0,n._x)(s,"STTS",s.box(s.types.stts,s.StblTable)),(0,n._x)(s,"STSC",s.box(s.types.stsc,s.StblTable)),(0,n._x)(s,"STSZ",s.box(s.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]))),(0,n._x)(s,"STCO",s.box(s.types.stco,s.StblTable))},437085:function(e,t,r){"use strict";r.d(t,{ZP:function(){return c}});var n=r(486097),i=r(996706),o=r(166782),a=r(677578);function s(e,t){o.Z.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var c=function(){function e(t){(0,n.PA)(this,e),i.ZP.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),(0,a.ZP)(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return(0,n.qH)(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=i.ZP.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&("touch"===this.playerConfig.domEventType||"mouse"===this.playerConfig.domEventType)&&(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var r=this;if(!e||!t||!this.player){s(this.pluginName,"plugin.on(event, callback)");return}"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){r.__events[e]=t,r.player.on(e,t)})}},{key:"once",value:function(e,t){var r=this;if(!e||!t||!this.player){s(this.pluginName,"plugin.once(event, callback)");return}"string"==typeof e?(this.__onceEvents[e]=t,this.player.once(e,t)):Array.isArray(e)&&e.forEach(function(n){r.__onceEvents[n]=t,r.player.once(e,t)})}},{key:"off",value:function(e,t){var r=this;if(!e||!t||!this.player){s(this.pluginName,"plugin.off(event, callback)");return}"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach(function(n){delete r.__events[e],r.player.off(n,t)})}},{key:"offAll",value:function(){var e=this;["__events","__onceEvents"].forEach(function(t){Object.keys(e[t]).forEach(function(r){e[t][r]&&e.off(r,e[t][r]),r&&delete e[t][r]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this.player).emit.apply(t,[e].concat(n))}}},{key:"emitUserAction",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var i=(0,n.Zj)((0,n.Zj)({},r),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,i)}}},{key:"hook",value:function(e,t){return a.z3.call.apply(a.z3,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return a.xn.call.apply(a.xn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return a.v8.call.apply(a.v8,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return r&&(t.pluginName=r),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,r=this.pluginName;this.offAll(),i.ZP.clearAllTimers(this),i.ZP.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(t){e[t]=null}),t.unRegisterPlugin(r),(0,a.Qs)(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&Object.defineProperty(e,r,t[r])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}()},400813:function(e,t,r){"use strict";r.d(t,{d:function(){return i}});var n=r(486097),i=function(e,t){var r,i,o=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),a=o.plugins,s=o.ignores,c=o.icons,l=void 0===c?{}:c,u=o.i18n,d=void 0===u?[]:u;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(r=e.config.plugins).push.apply(r,(0,n.u)(void 0===a?[]:a)),(i=e.config.ignores).push.apply(i,(0,n.u)(void 0===s?[]:s)),Object.keys(l).map(function(t){e.config.icons[t]||(e.config.icons[t]=l[t])});var h=e.config.i18n||[];d.push.apply(d,(0,n.u)(h)),e.config.i18n=d}},886242:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"}},775516:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(486097),i=function(){function e(t){(0,n.PA)(this,e),this.bufferedList=t}return(0,n.qH)(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}()},188389:function(e,t,r){"use strict";r.d(t,{CR:function(){return a},XA:function(){return o},_T:function(){return i},ev:function(){return s},pi:function(){return n}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function s(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}},348873:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAV4SURBVHgB7ZxfTls5FMaPDUPEn0rtDvJSQPPU7oDuoF3B3MACgBU0WUHhfQbCCmBW0O6gPFWUeSCzApBKixJpfMYOZDCX6/vHPvb1UP+eUpKKT+c70bWPPwOQSCQSiUQikUg8IV5m168gQrrZ5fP17LILnuBAjBK8tvnjA+fs89rm94v17NsGRILS0uELn5EvXKxu3rwHDzAgRAlGzg/ly27u1+wxMd4/G74YQQsokzu8IwuIO7m3RkLgu7+GK6dABElBSwTrjJDx/vkfi0cQELPJOmxvLMaD0fDFFTjiXNB6gu9BgCEXk4Hvbq1psg6J4dYFtRCs47Vbm5qs42q4VUFXt76/ZYhSMHsODlB3663JC6qQb8ENa8MbFZRQsA5Jt1KZrGNjeO2Crm392AYUfUrBOSknciWw27Rb1ZoSWecQGG6AHxoZXlnQAIJ15FOWDb4eLO3V+bB/k++p262lBQ0pOMeIickbk/jAJutUGl5Y0BYFPwBBftUOFgf6z1o0WedUGv6uyPBHBY1EsM60W9WLGEzWKTL8QUHXsxvZmeKj/GkXYgJxX6ofAWcfICIQ4XQesfdF27oWf+U3v/Vl9b0MD5qgBHMU8sn/7JP6tzJcsH+OGWPtTrIQrxjD/bODZ/38W8aHUtviGYhBkWDFWna9A4xtt/JNQvzEcK53NlwcFb1duWwKLl4KnkPY/VIxAbozvC8N/w3C6LqSNZBP+JXSJV2thX0Q8TUFwyNt1xky9t6r4RVdqdNo6+lNfAPBxbo8GW5hcuPhCKl4y64EozZCwy1Nth7fOYt37EoT0wEOm+8D49tggzQZkfXOh8snYIHTgNlKvBIMczvnh34n95Zr6pOxWOqNhsx6ck9yBNJAvLPgptRaU8tNA0PRm613XaA9pDOJJxRsQ6nhchc2xuU+lcmkBVU8Ek8s2IUHhrdscmPkufdhTGfyM5ThL3vXe90MvQx/vAUd5NYxUwdlPlMaTfk1u3wluDjmcsnX4TcZeCBI0KFozBWSsqBD2SDbhqBBB2rxdahzpExpeAtBhzDdahN0oDC8taADdaZIxy3o4GZ4q0EHykyRwtFkHetufWJBB1BHJF0go7nh0QQdbGM5nkzWkWdZ8ztff+/8WefDsQUdGnVrCjrUpEp8i7mBSsNjDjoUio8hN1BmePRBh5n46eu4gg6Fhv8/gg7yaQtC/B1b0EFNrMY4ea2vAqIOOuRHbFEZbhhLlgYdWhVfMkdt1fCKOWr1sim0+JqD31YMrzEsrx10CCLeIFg9KBHYVdFy5c5wdUjo7SGaz1iV0WjrOY3lcKa6lVa8oSvzyzfTcuXWcPSyAijLWBV/viHU4k2C1dVB+V6/4L8YU8SkhtfMWOWxHt85izcIVqM3wbk8QoGq1F/hRMjZcMc0i9OA2SqWYxBsO3ozzS+tDCdIsxAFHWrGcgyCXQbCdxi7tZbhhBkrskO6UvHEXWnC1K2lhhNnrEhPPRWPxPvrShP1utVTxoq8oIp78XDquyvNFE/bleGCwcYEl3d8pFm8FNSEj/uYFchuDRu3CVLQAMcUpWCgO/oK8ihOHrVt7PBfLqClYipk12TIFz6ubt14v+DgrUNvw7id45huvilUt07EZJfq6DqPtw5VguX+/Gh6Ay4WpBYuxJGvYiq8fuXPhitDhvwNIpIuTayYTrKWXvt+QAV7yge5T1RE4GCt94fSjFa6NVBX6gRdh86Y7pKY3CV56tYmA2FqWimowvk+kYGmA2FqWivoDLLjFU8XyZrSekFnWB8GEl9vdCWagioad2skXakTVUFnVHZrZF2pE2VBFca/KBFhV+pEW9AZ/50NybVQiEu3PwWqW33dfEskEolEIpFIJJ4C/wIY+5T+au5N6gAAAABJRU5ErkJggg=="},551503:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAcgSURBVHgB7ZxPbFRVFMa/OzMt0A7tQCmlUM1U00ATEoobdzLE0MBOjCKuqH/ixgV0aaLpkKiJq7a4MQZtuy0qsAMJUONCAxpwYwBJOiYkyD+tCYi2vHe958FgZ+b9f/e8mZr3Sxoyb16H6en33vfdc+4USEhISEhISEhISIgfgXpS3FxAOrUFkAOIiin/RCo1C+PBNyj+fBF1oj4Fnd4xgNnbo5h/UAADG5f/c/HS5iu7xS6UEDMpxM1Xg/uUki6gu70AJt5Zf2sAaczKk9iHmIlXoUd2FiDk2cePf70N/DUPnQyt+QMTT1/774DAdrEDM4iJeBWakhMVj9evgm5Gem5WHpCYQIzEV9AvB0fUD5evONaUBla3Qhf7191GflmN4vPq0i8iJuIp6NGdeXXtDdk+t2alehfR7zxUyAPr7tg/KbBfHkUOMRBPQRfMYo06y6TVW1i7ElEpbrhpp84yOWQxghjgNyVSpyFnPc+LYFBUyNmBy94nxmBQ/Ao1zKO+zusMr9KJp675O1Hyq5S3oNM7hpQs/K2CWpapr2YEhWJSoe2e39MLyqBeACO8BU2ngimCYlRAg6qJSV4IjHIaFF9B7WKSFxSjOrK+Tx/pueFmRE7k0YIDYILHlPwakR2GCczeUsnAcD2NCnlh81XkMgZCMAcDWznW+jwKpZgUFopRPgyKYlLIYhI5tdYfBQP6FUqdJGp+RMUlRvmOSV4wxCj9Ck2n/MUkL1xUerY/3N2kBoYYpbegFJOCGpETFKPaW2oOU0wKYUROFOQJvQal75InIzJVa05XQQkyqKs3qBtvPaR7JhmRxoISc7iHXrFb/asBfQo1zX1ai0mQQS2KUQ7dpKjkdMYoPQqNEpO8eBSj8qn7eozI8f9RKtUQo/QoNEpM8oJUuj5nxSRW0noa0dEV+sWgWhsLPc7uzDHZdpKWiwVwoiFGZRAVIUYhwcuCGAas9Xf0fOvGw3FJLyIQ7ZLXGZOcEJjEqydKYhA0ax8HL/moMSp8QcmIgnaTgiKVScyLg48fN6nZkNATbxxJYSRKNyp8Qd3GGroQokjqfPxwu9XUOAheIo1LwpkSZ0wqQ+p8+aTt/Uw1iWfVO8+Dk5AxKpxCDcnSqamA1OmEidfATcgYFbyg1liDd4xgGdFLJ6Ycn95lRZsZ8FKQp4LHtOAF5TYiYrEROWHEoNIQu06CFTTMWCM444uNyAnr/ibZDSrwrhP/BSUjknyzGAsyogUx5vv8Zoyxx6iAu078F9Rarwve7SxVMcnz9AaMUf5iU51jkue3fg3aIlkAJz7X+f4Uai7a08mFNHcjLPwq9T0u8S5oXOv1PadC74t/FKOOgRdfMcq7oI0Sk7wwMMxuUCpGeRmUe0HjiElSFTOAETlhxSiTvxvlNS5xNqUGNyLblzur1DOveqa863zXoZ6zQjnHGmXc1uthXo5ilIghRrU67zqxV6iu3R9uaFZnxUvXMUbZK1TX7g83Hig9cVHHGFVbUPosUUxjDTBhxSiJKfBiG6NqCyokb2sOck5LTPKiWbkxd4wyatuYdpf8FnAiU+Oc6ixjGRR3jLJJE7Vj5B/2qx+aZy7clMkgv+L5bXgf/EtZxbMX7+SmSnux7u/r4EA5ejtwqeJYbUF/75sD06C9Y3UnvYkCYmJuoQPF1o/w8ZW3ERc2l7z5ExjIrmhBWzb6B7yCciH3jPraCg5MKY9XH6st6Hyz/wZvADpXdaBeHOobBgfSzNQ0ZGoLOtk7p654rTfzttasun82oV78ku3DdM8r0Mxk98z3peqD9sF+oYk2MWiJHE3pDDra9X+MOyif976Juxk9txzl2SXDSNtGP/uCkkqFqSUrUjHrqc4ydzNZfNb7OrSgehB26rSecv3Gty6rbpPIIySkzt4NT6KROPLdi+iOEKNInV1nzjv2INz7oaYZafbdubp+RuTEh/3vIhLCdHU494Ie7p9RGp5BCMiIsiv0/bUGXUSMUZNdp390HbV4j0CEEUqljWBETnzQ/x7C4GREi/Eu6Cf9JXXnCGRQjWJETvy2vFu5/huBvkeqUY2TES3G3xiZwr7PGEVGRJd7ozPds9d3jCIjMs3UpJ9z/RU0QIxqdHWWCRSjXGJSNf634ny6aczLoCx11mG9HpYjSqVeBmXFpNPnfDerg+2+MwxXlXZ3dmGpQSsoN0QagXa0BCsoxShI298W3TeXNy/DUoNi1LdrnnN6enLtqfOBdrQE33CbMm3X+Y0ck7wY7ztga1B+YlI1wQtKMarKoJaKETlBMWr6iT0Vx/zGpGrCfWiBDMp8eOk3SjcpKhSjrqvCEmpeMdV15lwRIQj/OaXDG4co8P8fiklQjDqkLn1TyOGu0+eHEBJ/G25d2FS8nzfSGTWyTW0TkHkgnj/ap5E5CVES0jw+b2TGSkXBO3pOSEhISEhISEhIYOBfvDRI7CLiNewAAAAASUVORK5CYII="},959448:function(e,t,r){"use strict";e.exports=r.p+"static/image/instagram-stories.40a42ec4.png"},417271:function(e,t,r){"use strict";e.exports=r.p+"static/image/youtube-shorts.68507739.png"},233450:function(e,t,r){"use strict";e.exports=r.p+"static/image/ai-writer-loading-dark.b2bebb2e.webp"},613910:function(e,t,r){"use strict";e.exports=r.p+"static/image/ai-writer-loading-white.669bbd57.webp"},36696:function(e,t,r){"use strict";r.d(t,{r:function(){return a}});var n=r(69984),i=r(764112),o=r(772322);r(218571);var a=e=>(0,o.jsx)("svg",(0,i._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),{children:(0,o.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.955 7.5v1.685a.25.25 0 0 1-.427.177L1.646 7.48a.5.5 0 0 1 0-.707L3.528 4.89a.25.25 0 0 1 .427.176V6.5h4.419a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5H6.75v-1h1.624a1.5 1.5 0 0 1 1.5 1.5v2a1.5 1.5 0 0 1-1.5 1.5z",clipRule:"evenodd"})}))},960332:function(e,t,r){"use strict";r.d(t,{r:function(){return a}});var n=r(69984),i=r(764112),o=r(772322);r(218571);var a=e=>(0,o.jsx)("svg",(0,i._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),{children:(0,o.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M3.182 3.025c-.942 0-1.705.763-1.705 1.705v10.23c0 .941.763 1.705 1.705 1.705h13.64c.941 0 1.705-.763 1.705-1.705V4.73c0-.942-.764-1.705-1.705-1.705zM3.177 4.73h2.558v2.273H3.177zm0 3.978h2.558v2.273H3.177zm2.558 3.978H3.177v2.274h2.558zm8.526-7.956h2.558v2.273H14.26zm0 3.978h2.558v2.273H14.26zm2.558 3.978H14.26v2.274h2.558z",clipRule:"evenodd"})}))},4813:function(e,t,r){"use strict";r(692082),r(568502)},321474:function(e,t,r){"use strict";var n,i=r(879386),o=r(46395),a=r(429271),s=r(732634),c=[];c.push((0,a.i)((0,i.fE)({},(n||{}).contextCompat,((n||{}).contextCompatByEntries||{})["refer-image-editor"],((0,o.nB)()||{}).contextCompat))),c.push((0,s.m)((0,i.fE)({},(n||{}).ssrCompat,((n||{}).ssrCompatByEntries||{})["refer-image-editor"],((0,o.nB)()||{}).ssrCompat))),(0,i.fo)(c,n)},264176:function(e,t,r){"use strict";r.d(t,{l:function(){return a}});var n=r(963730),i=r(478705),o=r(806797);function a(e,t){e.register(o.Ui,new n.M(i.a,[t]))}},978495:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}}),r(870064),r(811042),r(623118),r(641026),r(123356),new(r(239849)).C().startLifeCycle().catch(e=>{console.error(e)});let n=()=>null},125518:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(69984),i=r(764112),o=r(772322);r(218571);var a=r(123951),s=r(659179);r(274606),r(920279);let c=e=>(0,o.jsxs)("div",(0,i._)((0,n._)({className:"back_to_third_party"},e),{children:[(0,o.jsx)("span",{className:"back_to_third_party-btn lv_sign_in_panel_wide-secondary-button",children:(0,o.jsx)(s.JJ,{className:"back_to_third_party-icon"})}),(0,o.jsx)("span",{className:"back_to_third_party-label",children:a.ZP.t("web_signin_button_go_back_signin",{action0:e=>e},"Go back")})]}))},697513:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(772322);r(445175),r(529114);var i=r(429907),o=r(595051),a=r(218571),s=r(123951),c=r(123688),l=r(125518);r(181338);var u=r(152155),d=r.n(u);let h=e=>{var{toLogIn:t,send:r,email:u}=e,[h,p]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:d()("lv_forget_pwd_panel-content","lv_forget_pwd_panel_email_fill"),children:[(0,n.jsx)(l.Z,{onClick:()=>{r("BACK_SIGN_IN"),t()}}),(0,n.jsx)("div",{className:"lv_forget_pwd_panel-icon-wrapper",children:(0,n.jsx)("img",{src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/signin_panel_reset.png",className:"lv_forget_pwd_panel-icon lv_forget_pwd_panel-icon-reset",alt:"ForgetPasswordPNG",crossOrigin:"anonymous"})}),(0,n.jsx)("div",{className:"lv_forget_pwd_panel-title lv_forget_pwd_panel-title-reset",children:s.oc.t("web_signin_title_reset_password",{},"Reset password")}),(0,n.jsx)("div",{className:"lv_forget_pwd_panel-description lv_forget_pwd_panel-description-reset",children:s.oc.t("web_signin_desc_reset_password",{},"We\u2019ll email you a link to reset your password.")}),(0,n.jsx)("form",{children:(0,n.jsx)(i.Z,{value:u,onChange:e=>{r({type:"SAVE_EMAIL",email:e}),e&&!c.s9.test(e)?p(s.oc.t("web_signin_error_text_invalid_email",{},"Enter a valid email")):p("")},className:d()("lv_forget_pwd_panel-input lv_forget_pwd_panel-input-reset lv_sign_in_panel_wide-input",{"lv_sign_in_panel_wide-input-warn":""!==h}),placeholder:s.oc.t("web_signin_placeholder_enter_email_reset",{},"Enter email")})}),""!==h?(0,n.jsx)("div",{className:"lv_forget_pwd_panel-warn",children:h}):null,(0,n.jsx)(o.Z,{loading:f,onClick:()=>{if(!f){if(!u||!c.s9.test(u.trim())){p(s.oc.t("email_contain_at"));return}v(!0),r({type:"INIT_RESET_EMAIL_ERROR_CB",func:e=>{p(e.description),v(!1)}}),r({type:"SEND_EMAIL",email:u,emailNotRegisterCb:()=>{p(s.oc.t("email_contain_at")),v(!1)},onError:()=>{v(!1)}})}},type:"primary",className:d()("lv_forget_pwd_panel-btn lv_forget_pwd_panel-btn-reset lv_sign_in_panel_wide-primary-button",{"lv_forget_pwd_panel-email-warn":""!==h}),children:s.oc.t("web_signin_button_confirm_password",{},"Confirm")})]})}},737236:function(e,t,r){"use strict";r.d(t,{S:function(){return d}});var n=r(69984),i=r(772322);r(218571);var o=r(152155),a=r.n(o),s=r(123951),c=r(659179);r(993030);var l=e=>{var{toEmailTypeSignIn:t,toEmailTypeSignUp:r}=e;return(0,i.jsxs)("div",{className:"lv_new_third_part_sign_in_expand-wrapper",children:[(0,i.jsx)("div",{className:a()("lv_new_third_part_sign_in_expand-button","sign-in"),onClick:t,children:s.ZP.t("web_signin_button_siginin_old_account",{},"Sign in")}),(0,i.jsx)("div",{className:a()("lv_new_third_part_sign_in_expand-button","sign-up"),onClick:r,children:s.ZP.t("web_accounts_btn_sign_up_if_no_account",{},"Sign up")})]})},u=e=>{var{toEmailTypeSignIn:t,handleClick:r,isBeta:n}=e;return(0,i.jsx)("div",{className:"lv_new_third_part_sign_in_expand-wrapper",children:(0,i.jsxs)("div",{className:a()("lv_new_third_part_sign_in_expand-button",{"lv_new_third_part_sign_in_expand-last-button":n}),onClick:()=>{t(),null==r||r()},children:[(0,i.jsx)(c.Yur,{size:20,className:"lv_new_third_part_sign_in_expand-icon"}),(0,i.jsx)("span",{className:"lv_new_third_part_sign_in_expand-label",children:s.ZP.t("web_accounts_placeholder_enter_email",{},"Continue with Email")})]})})},d=e=>e.isBeta?(0,i.jsx)(l,(0,n._)({},e)):(0,i.jsx)(u,(0,n._)({},e))},398815:function(e,t,r){"use strict";function n(e){var t=[];return(null==e?void 0:e.region)&&t.push("store_region=".concat(e.region.toLowerCase())),(null==e?void 0:e.lang)&&t.push("lang=".concat(e.lang.toLowerCase())),t.length>0?"?".concat(t.join("&")):""}function i(e){return"/clause/terms-of-service"+n(e)}function o(e){return"/clause/privacy-policy"+n(e)}function a(e){return"/clause/cookies-policy"+n(e)}function s(e){return"/clause/community-guideline"+n(e)}function c(e){return"/clause/material-license-agreement"+n(e)}function l(e){return"/clause/creator-agreement"+n(e)}function u(e){return"/clause/dsa-compliance-capcut"+n(e)}r.d(t,{FH:function(){return o},Mj:function(){return s},Oi:function(){return i},Or:function(){return c},cf:function(){return u},n$:function(){return l},ok:function(){return a}})},671943:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var n={Err_NoCommentPermission:2363,Err_CommentPublishFailed:2364,Err_CommentPublishFailedDuplication:2365,Err_CommentPublishingProhibited:2366,Err_CommentPublishFailedRateLimit:2367,Err_CommentPublishFailedRiskControl:2368,Err_CommentDeletionFailed:2369,Err_DeletionFailedNoPermission:2370,Err_CommentListFetchFailed:2371,Err_ShareToGroupMermberFailed:2372}},591016:function(e,t,r){"use strict";r.d(t,{R:function(){return o},o:function(){return i}});var n="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,i=()=>{var e;return(null===(e=location)||void 0===e?void 0:e.originParams)?location.originParams:location.search||""},o=()=>n?i():""},130814:function(e,t,r){"use strict";r.d(t,{F:function(){return a}});var n=r(69984),i=r(554269),o=r(92498);class a{patchParams(e){var t={};try{var r=new o.dc(window.location.href).searchParams;t.enter_from=null==r?void 0:r.get("enter_from")}catch(e){}return(0,n._)({},t,e)}report(e,t){var r=this.patchParams(e),{immediately:n}=t||{};n?this.reporter.reportBecon("login_signup_page",r):this.reporter.report("login_signup_page",r)}constructor(){this.reporter=(0,i.y)()}}},157418:function(e,t,r){"use strict";r.d(t,{Q:function(){return s}});var n=r(461228),i=r(69984),o=r(292770),a=[100026,100028];class s{init(){var e=this;return(0,n._)(function*(){if(!e.uploader){yield e.auth.init();var t=Object.assign({getSliceFunc:e=>e>209715200?10485760:2097152,uploadSliceCount:3},e.auth.getConfig());t.videoHost||delete t.videoHost,t.imageHost||delete t.imageHost;var{default:n}=yield Promise.all([r.e("8583"),r.e("3173"),r.e("7716"),r.e("9680")]).then(r.t.bind(r,249220,23));e.uploader=new n((0,i._)({},(0,o.X)({region:t.region}),t))}return e.uploader})()}upload(e){var t=this;return(0,n._)(function*(){var r,{file:o,type:s="image",onSuccess:c,onProgress:l,onError:u,onStart:d}=e,h=yield t.init(),p=h.addFile({file:o,stsToken:t.auth.getStsToken(),type:s});h.start(p),null==d||d(p,o),h.on("progress",e=>{e.key===p&&(null==l||l((0,i._)({key:p},e)))}),h.on("complete",e=>{e.key===p&&(null==c||c((0,i._)({key:p},e.uploadResult)))});var f=0;return h.on("error",(r=(0,n._)(function*(e){var r;if(e.key===p){if(a.includes(Number(null==e?void 0:null===(r=e.extra)||void 0===r?void 0:r.errorCode))&&f<1){f++,yield t.auth.init(),h.refreshSTSToken(t.auth.getStsToken()),h.start(p);return}null==u||u(e)}}),function(e){return r.apply(this,arguments)})),h})()}cancel(e){var t;return null===(t=this.uploader)||void 0===t?void 0:t.cancel(e)}constructor(e){this.uploader=null,this.auth=e}}},134680:function(e,t,r){"use strict";r.d(t,{m:function(){return a}});var n=r(722169),i=r(123951),o=r(7583);class a{start(e){var t;if(this.userInfo=e.userInfo,(null===(t=this.userInfo)||void 0===t?void 0:t.ageGateBirthday)&&!this.ageGateChecker.isAgeBanned&&!this.ageGateChecker.checkBirthday(this.userInfo.region,this.userInfo.ageGateBirthday)){var r=!1,a=()=>{r||(r=!0,this.ageGateChecker.openAppealModal({content:i.ZP.t("dre_account_desc_capcut_account_will_be_removed",{},"Your account will be removed because you\u2019ll no longer meet the age requirement to use CapCut in your region."),onLogout:()=>{o.h.logout(),o.O.logout()},maskStyle:{zIndex:2e3,backdropFilter:"blur(10px)"},wrapStyle:{zIndex:2e3}}))};i.ZP.i18nInstance.instance.store&&Object.values(i.ZP.i18nInstance.instance.store).some(e=>!(0,n.isEmpty)(null==e?void 0:e.translation))?a():i.ZP.i18nInstance.instance.on("loaded",()=>{a()})}}constructor(e){this.ageGateChecker=e.ageGateChecker}}},210834:function(){"use strict";var e,t;(t=e||(e={}))[t.unknown=-1]="unknown",t[t.top=0]="top",t[t.dress=1]="dress"},313109:function(e,t,r){"use strict";r.d(t,{jn:function(){return n.j}}),r(414842);var n=r(686810);r(921748)},403189:function(e,t,r){"use strict";r.d(t,{j:function(){return o}});var n=r(460198),i={[n.xP.SalesSticker]:[n.Ms.EffectTypeSticker],[n.xP.SalesFont]:[n.Ms.EffectTypeFont],[n.xP.YkImage]:[n.Ms.EffectTypeImage]};function o(e){for(var[t,r]of Object.entries(i))if(r.includes(e))return t}},16884:function(e,t,r){"use strict";r.d(t,{o:function(){return l}});var n=r(461228),i=r(69984),o=r(764112),a=r(282560),s=r(549630),c=r(461133);class l extends s.I{get type(){return a.Gk.IMAGE}get previewUrl(){var e,t,r;return(null===(e=this.imageTranscodeInfo[360])||void 0===e?void 0:e.status_code)===c.iY.SUCCESS?this.imageTranscodeInfo[360].preview_url:null===(r=this._sourceData)||void 0===r?void 0:null===(t=r.asset_meta)||void 0===t?void 0:t.preview360_url}get previewKey(){var e,t,r;return(null===(e=this.imageTranscodeInfo[360])||void 0===e?void 0:e.status_code)===c.iY.SUCCESS?this.imageTranscodeInfo[360].key:null===(r=this._sourceData)||void 0===r?void 0:null===(t=r.asset_meta)||void 0===t?void 0:t.key}get preview72Url(){var e,t,r;return(null===(e=this.imageTranscodeInfo[720])||void 0===e?void 0:e.status_code)===c.iY.SUCCESS?this.imageTranscodeInfo[720].preview_url:null===(r=this._sourceData)||void 0===r?void 0:null===(t=r.asset_meta)||void 0===t?void 0:t.preview720_url}get imageAsyncResize(){return!!this._sourceData.image_async_resize}getTranscodeStatus(e){var t={};return((null==e?void 0:e.length)?e:c.bF).forEach(e=>{var r,n,i,o=null===(n=this._sourceData)||void 0===n?void 0:null===(r=n.asset_meta)||void 0===r?void 0:r["preview".concat(e,"_url")],a=e===c.M3.ORIGIN?e:"p_".concat(e),s=null===(i=this._sourceData.image_transcode_info)||void 0===i?void 0:i[a];s?t[e]=s.status_code:o?t[e]=c.iY.SUCCESS:this.imageAsyncResize?t[e]=c.iY.TRANSCODING:t[e]=c.iY.UNTRANSCODE}),t}get imageTranscodeInfo(){var e={};return c.bF.forEach(t=>{var r="preview".concat(t,"_url"),n=null===(u=this._sourceData)||void 0===u?void 0:null===(l=u.asset_meta)||void 0===l?void 0:l[r],a=t===c.M3.ORIGIN?t:"p_".concat(t),s=null===(d=this._sourceData.image_transcode_info)||void 0===d?void 0:d[a];if(s)e[t]=(0,o._)((0,i._)({},s),{key:this._sourceData.image_transcode_info.key});else if(n&&!(null===(h=e[t])||void 0===h?void 0:h.preview_url)){var l,u,d,h,p,f,v=this.getPreviewSizeByResolution(t);e[t]={preview_url:n,width:v.width,height:v.height,status_code:c.iY.SUCCESS,key:null===(f=this._sourceData)||void 0===f?void 0:null===(p=f.asset_meta)||void 0===p?void 0:p.key}}}),e}getPreviewInfo(e){var t=this;return(0,n._)(function*(){return t.sdk?t.sdk.getImagePreviewInfo(t,e):t.imageTranscodeInfo})()}getPreviewSizeByResolution(e){var t,r=c.ZR[e];if(!r||!this.width||!this.height||e===c.M3.ORIGIN)return{width:0,height:0};var n=this.width||0,i=this.height||0,[o,a]=r;if(n/i>c.fQ){if(n*i<o*a)return{width:n,height:i};var s=Math.sqrt(o*a/(n*i));return{width:Math.floor(n*s),height:Math.floor(i*s)}}if(n<=o&&i<=a)return{width:n,height:i};var l=o/n,u=a/i;return{width:Math.floor(n*(t=l>u?u:l)),height:Math.floor(i*t)}}}},971063:function(e,t,r){"use strict";r.d(t,{FS:function(){return h.F},Gk:function(){return p.Gk},Is:function(){return c.I},Lt:function(){return n.L},Mf:function(){return d.M},ZB:function(){return u.Z},dP:function(){return p.dP},kd:function(){return s.k},or:function(){return i.o},pz:function(){return l.p},qZ:function(){return o.q},vN:function(){return p.vN},w6:function(){return a.w}});var n=r(165303),i=r(16884),o=r(478130),a=r(350834),s=r(281982),c=r(549630),l=r(432175),u=r(368396),d=r(957657),h=r(21190),p=r(282560)},546690:function(e,t,r){"use strict";function n(){return crypto.randomUUID().toUpperCase()}r.d(t,{U:function(){return n}})},777743:function(){"use strict";var e,t,r,n;(r=e||(e={}))[r.horizontal=0]="horizontal",r[r.vertical=1]="vertical",r[r.all=2]="all",(n=t||(t={}))[n.horizontal=0]="horizontal",n[n.vertical=1]="vertical"},257953:function(e,t,r){"use strict";r.d(t,{m:function(){return p}});var n=r(577729),i=r(658742),o=r(980014),a=r(653889),s=r(85482),c=r(861023),l=r(268364),u=r(612019);function d(e,t){return(t.weight||0)-(e.weight||0)}function h(e){return!!e&&"function"==typeof e.handler&&(!e.when||"function"==typeof e.when)&&(!e.keyBindings.mac||!!Array.isArray(e.keyBindings.mac))&&(!e.keyBindings.win||!!Array.isArray(e.keyBindings.win))&&(!e.description||!!Array.isArray(e.description))}class p extends n.JT{get targetNode(){return this._targetNode}get onKeydown(){return this._emitter||(this._emitter=new i.Q),this._emitter.event}register(e){return(0,o.Y2)(h(e)),e.keyBindings[this._platform].slice().forEach(t=>{if(t!==l.VD.EMPTY){var r=[e];if(this._keymap.has(t)){var n=this._keymap.get(t);n&&(r=r.concat(n))}this._keymap.set(t,r)}}),(0,a.UQ)(()=>{this._unregister(e)})}batchRegister(e){var t=[];return Object.entries(e.keyBindings).forEach(r=>{var[n,i]=r,o=n.split(",").map(e=>Number(e)),a="win"===this._platform?o:[],s="mac"===this._platform?o:[],c={shouldPreventDefault:e.shouldPreventDefault,when:e.when,weight:e.weight,description:e.description,handler:"function"==typeof i?i:i.handler,keyBindings:{win:a,mac:s}};"function"!=typeof i&&Object.assign(c,{shouldPreventDefault:i.shouldPreventDefault,when:i.when,weight:i.weight,description:i.description}),t.push(this.register(c))}),(0,a.UQ)(()=>{t.forEach(e=>e.dispose())})}unregister(e){(0,o.Y2)(h(e)),this._unregister(e)}get _platform(){return s.V5||s.gn?"mac":"win"}_execute(e,t){var r=this._keymap.get(e);r&&(r.sort(d),r.forEach(e=>{var{handler:r,shouldPreventDefault:n=!0,when:i,options:o={keydown:!0}}=e;!this._checkTagBlacklist(t,e)&&("keydown"!==t.type||o.keydown)&&("keyup"!==t.type||o.keyup)&&(!i||i(t))&&(n&&t&&t.preventDefault(),r(t))}))}_checkTagBlacklist(e,t){if(!this._tagBlacklist.length)return!1;var r=e.target.tagName;return this._tagBlacklist.includes(r)}_unregister(e){e.keyBindings[this._platform].slice().forEach(t=>{if(t!==l.VD.EMPTY&&this._keymap.has(t)){var r=this._keymap.get(t);if(r){var n=r.indexOf(e);n>-1&&r.splice(n,1)}}})}constructor(e,t={}){super(),this._keymap=new Map,this._tagBlacklist=[],this._emitter=null,this._onKeydown=e=>{this._emitter&&this._emitter.fire(e);var t,r=u.e.getKeyCode(e),n=u.e.getAssistKey(e);null!==(t=this._skipCondition)&&void 0!==t&&t.call(this,r,n)||this._execute(n+r,e)},this._onKeyup=e=>{var t,r=u.e.getKeyCode(e),n=u.e.getAssistKey(e);null!==(t=this._skipCondition)&&void 0!==t&&t.call(this,r,n)||this._execute(n+r,e)},this._targetNode=e;var r,n,i=null!==(r=t.useCapture)&&void 0!==r&&r;this._skipCondition=t.skipCondition,this._tagBlacklist=null!==(n=t.tagBlacklist)&&void 0!==n?n:[],this._register((0,c.n)(e,"keydown",this._onKeydown,{capture:i})),this._register((0,c.n)(e,"keyup",this._onKeyup,{capture:i}))}}},718179:function(e,t,r){"use strict";r.d(t,{$U:function(){return o},_y:function(){return i}});var n=r(772322),i=r(218571).createContext(null),o=e=>(0,n.jsx)(i.Provider,{value:e.instantiationService,children:e.children})},977013:function(e,t,r){"use strict";r.d(t,{g:function(){return a}});var n=r(980014),i={text:/^[^\x25]+/,modulo:/^\x25\x25/,placeholder:/^\x25([vVbBdDsS])/},o=new Map;function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!r.length)return e;try{var s=function(e){var t=[];if(o.has(e))return o.get(e);for(var r=e;r;){var a=i.text.exec(r);if(a){t.push(a[0]),r=r.substring(a[0].length);continue}if(a=i.modulo.exec(r)){t.push("%"),r=r.substring(a[0].length);continue}(a=i.placeholder.exec(r))&&a.length>1?(t.push({placeholder:a[1]}),r=r.substring(a[0].length)):(0,n.ss)()}return o.set(e,t),t}(e);return function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o="",a=0;for(var s of e){if("string"==typeof s){o+=s;continue}if(void 0===r[a]){o+="undefined";continue}switch(s.placeholder.toLowerCase()){case"s":o+=String(r[a++]);break;case"d":o+=Number(r[a++]);break;case"b":o+=r[a++];break;case"v":o+=JSON.stringify(r[a++]);break;default:(0,n.ss)()}}for(;a<r.length;a++)o+=" ".concat(r[a]);return o}(s,...r)}catch(t){return"[invalid formatted message]".concat(e)}}},445292:function(e,t,r){"use strict";r.d(t,{Y:function(){return f}});var n=r(461228),i=r(963473),o=r(900268),a=r(818351),s=r(939051),c=r(167154),l=r(489941),u=r(167215),d=r(640712),h=r(813153),p=r(555827);class f{get _assetId(){return this._params.assetId}get _fromWorkspaceId(){return this._params.fromWorkspaceId}get _handler(){return this._params.handler}get onDidTranscode(){return this._params.handler.onDidTranscode}get onTranscodeFailure(){return this._params.handler.onTranscodeFailure}get _updateStatus(){return this._params.handler.updateStatus}get _updateModel(){return this._params.handler.updateModel}get transcoding(){return this._transcoding}canRetryTranscode(){return this._handler.status()===s.a.TranscodeFailure}transcode(){var e,t=this;return new Promise((e=(0,n._)(function*(e){if(t._handler.status()===s.a.Transcoding)return e((0,i.wf)(-1,"current material is not transcoding"));try{var r=yield t._params.userMaterialService.getEvercloudInstance(t._fromWorkspaceId);yield r.triggerImageResize({ids:[t._assetId]}),t.listenTranscodeResult()}catch(t){e((0,i.wf)(-1,null==t?void 0:t.message))}return(0,o.V)(t.onDidTranscode)(()=>e((0,i.ly)())),(0,o.V)(t.onTranscodeFailure)(t=>e(null!=t?t:(0,i.wf)(-1,"unknown"))),(0,i.ly)()}),function(t){return e.apply(this,arguments)}))}listenTranscodeResult(){var e=this;return(0,n._)(function*(){if(e._mutex.tryLock()){e._transcoding={progress:0,onSuccess:e._params.handler.onDidTranscode,error:void 0,onError:e._params.handler.onTranscodeFailure};var t=(0,h.c)(3,{onprogress:t=>{e._transcoding&&(e._transcoding.progress=t,e._params.handler.onProgress(t))}});try{var r=e._assetId,n=yield e._params.userMaterialService.getEvercloudInstance(e._fromWorkspaceId),i=yield(0,u.X)(r,{userMaterialInstance:n,resolutions:[...d.bF,"origin"]});if((0,p.tF)()&&(yield(0,p.wO)()),i.ok){var o=yield n.getAssets({ids:[e._assetId],material:!1});if(!o||1!==o.length){e._updateStatus(s.a.TranscodeFailure);return}var a=(0,l.V)(null==o?void 0:o[0]);(null==a?void 0:a.fileType)===c.YB.Image?(e._updateModel(a),e._updateStatus(s.a.Transcoded),e._updateStatus(s.a.Success)):e._updateStatus(s.a.TranscodeFailure)}else e._updateStatus(s.a.TranscodeFailure)}finally{e._mutex.unLock(),t()}}})()}constructor(e){this._params=e,this._mutex=new a.L}}},761435:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var n=(0,r(30276).yh)("base-main-draft-service")},96850:function(e,t,r){"use strict";r.d(t,{N:function(){return i}});var n=r(344911),i=()=>new n.y({isDev:!1,isProd:!0,isInternal:!1,appScmBuildVersion:"1.0.0.3029",appScmBuildBranch:"release/tools-1.1170.0"})},758314:function(e,t,r){"use strict";r.d(t,{B5:function(){return i}});var n=r(722169);function i(e){return(0,n.isArray)(e)?e.map(i):(0,n.isObject)(e)&&!(0,n.isDate)(e)?(0,n.mapKeys)((0,n.mapValues)(e,i),(e,t)=>t.replace(/[A-Z]/g,e=>"_".concat(e.toLowerCase()))):e}},291982:function(e,t,r){"use strict";r.d(t,{J:function(){return l}});var n=r(772322),i=r(123951),o=r(412030),a=r(235137),s=r(624804),c=r(659179),l=e=>{var{assetVideoPlayerManager:t}=e,{isLoadError:r,isLoading:l}=(0,a.k)(t,e=>({isLoading:e.observableData.isLoading,isLoadError:e.observableData.isLoadError}));return(0,n.jsxs)(n.Fragment,{children:[l?(0,n.jsxs)("div",{className:o.Z.loading,children:[(0,n.jsx)(s.I,{}),(0,n.jsx)("div",{className:o.Z.desc,children:i.ZP.t("loading_resources",{},"Loading resources...")})]}):null,r?(0,n.jsxs)("div",{className:o.Z.loadError,children:[(0,n.jsx)(c.Y88,{size:68,className:o.Z.icon}),(0,n.jsx)("div",{className:o.Z.desc,children:i.ZP.t("web_delete_move_file")})]}):null]})}},85337:function(e,t,r){"use strict";var n,i;r.d(t,{h:function(){return n}}),(i=n||(n={})).SELECT_EXPORT_ENTRY="SELECT_EXPORT_ENTRY",i.SET_EXPORT_CONFIG="SET_EXPORT_CONFIG"},529961:function(e,t,r){"use strict";r.d(t,{K:function(){return n}});class n{constructor(){this.progress=0,this.simulateOpt={initProgress:0,maxProgress:100,createTime:0,expectFinishTime:0,callback:()=>{console.log("[linerSimulateProgress]: lost sign callback")}},this.setOption=e=>{var{callback:t}=e;this.simulateOpt=Object.assign(this.simulateOpt,e,{callback:e=>{t(e),this.progress=e}}),this.start()},this.start=()=>{var e;!function(e,t){var{maxProgress:r,createTime:n,expectFinishTime:i,callback:o}=e;window.requestAnimationFrame(function e(){var a=Math.floor(new Date().getTime()/1e3);if(a>n&&a<i){var s=Math.max(t,Math.floor((a-n)/(i-n)*100));s<r&&(null==o||o(s++),window.requestAnimationFrame(e))}})}(this.simulateOpt,null!==(e=this.progress)&&void 0!==e?e:0)}}}},125905:function(e,t,r){"use strict";r.d(t,{k:function(){return c}});var n=r(789786),i=r(254845),o=r(151626),a=r(962604),s=r(457559);class c extends o.g{get syncMode(){return this._syncMode}get hasUnsynced(){var e=this._getTemplate();return!(0,a.j)(e.formData,this.formData,e.inactiveKeys)}syncFromTemplate(){var e=this._getTemplate();(0,a.Z)(e.formData,this.formData,e.inactiveKeys),this._updateVersion()}syncFromOtherCopy(e){var t=e.formData,r=this.formData;(0,a.Z)(t,r,[]),this._updateVersion()}updateSyncMode(e){return this._syncMode!==e&&(this._syncMode=e,!0)}_handleTemplateChange(){(0,i.EH)(()=>{Object.values(this._getTemplate().formData),this._syncMode===s.Y.Auto&&this.syncFromTemplate()})}constructor(e){var{getInitialForm:t,getInitialMeta:r,getTemplate:n,validate:o}=e;super({getInitialForm:t,getInitialMeta:r,validate:o}),this._syncMode=s.Y.OnCreated,this._getTemplate=n,(0,i.rC)(this),this._handleTemplateChange()}}(0,n.gn)([i.LO,(0,n.w6)("design:type",void 0===s.Y?Object:s.Y)],c.prototype,"_syncMode",void 0),(0,n.gn)([i.Fl,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],c.prototype,"syncMode",null),(0,n.gn)([i.Fl,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],c.prototype,"hasUnsynced",null),(0,n.gn)([i.aD,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],c.prototype,"syncFromTemplate",null),(0,n.gn)([i.aD,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof IFormCopy?Object:IFormCopy]),(0,n.w6)("design:returntype",void 0)],c.prototype,"syncFromOtherCopy",null),(0,n.gn)([i.aD,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s.Y?Object:s.Y]),(0,n.w6)("design:returntype",void 0)],c.prototype,"updateSyncMode",null)},890237:function(e,t,r){"use strict";r.d(t,{Y:function(){return s},v:function(){return a}});var n=r(69984),i=r(574451),o=r(447222);function a(e,t){var{selectedAccounts:r,shareChannel:o,authType:a}=e,s=(0,i._)(e,["selectedAccounts","shareChannel","authType"]);return(0,n._)({},t,s)}function s(e){var{authType:t}=e,r=(0,o.eb)(t),n={};return r.forEach(t=>{n[t]=e[t]}),n}},265929:function(e,t,r){"use strict";r.d(t,{a:function(){return a},l:function(){return i}});var n,i,o=r(69984);function a(e,t){var{type:r,data:n}=t;return"update"===r?(0,o._)({},e,n):"overwrite"===r?(0,o._)({},n):e}(n=i||(i={})).update="update",n.overwrite="overwrite"},951926:function(e,t,r){"use strict";r.d(t,{S:function(){return p}});var n=r(461228),i=r(69984),o=r(764112),a=r(789786),s=r(254845),c=r(285348),l=r(608833),u=r(889650),d=r(908983),h=r(5313);class p{_getPlatformUserId(){var e,t=this._businessAuthorizationService.getAccounts(c.NS.TikTokShopAffiliate)[0];return null!==(e=null==t?void 0:t.id)&&void 0!==e?e:""}setSelectedProduct(e){this.selectedProduct=e}updateSearchOptions(e){var{keyword:t="",platformType:r=l.d.TikTokShop}=e;this.queryToken=(0,u.ib)({keyword:t,platformType:r,platformUserId:this._getPlatformUserId(),limit:10},[],{hasMore:!0,offset:0})}fetchProductLinkList(){var e=this;return(0,n._)(function*(){if((0,s.z)(()=>{e.loading=!0,e.loadingFailure=!1}),!e.loading)return{list:[]};var t=yield e._productLinkDataService.getProductLink(e.queryToken);return((0,s.z)(()=>{e.loading=!1}),t.ok)?((0,s.z)(()=>{var{list:r}=t.value.value;e.queryToken.offset?e.productLinkList.push(...r):e.productLinkList=r,e.queryToken=t.value}),{hasMore:t.value.hasMore,list:(0,s.ZN)(e.productLinkList)||[]}):((0,s.z)(()=>{e.loadingFailure=!0}),{list:[]})})()}verifyProductAdd(e){var t=this;return(0,n._)(function*(){(0,s.z)(()=>{t.loadingVerifyAdd=!0});var r=yield t._productLinkDataService.verifyProductAdd((0,o._)((0,i._)({},e),{platformUserId:t._getPlatformUserId()}));if(r.ok)return r.value})()}verifyProductContent(e){var t=this;return(0,n._)(function*(){(0,s.z)(()=>{t.loadingVerifyContent=!0});var r=yield t._productLinkDataService.verifyProductContent((0,o._)((0,i._)({},e),{platformUserId:t._getPlatformUserId()}));if((0,s.z)(()=>{t.loadingVerifyContent=!1}),r.ok)return t.verifyContentResult=r.value,r.value})()}constructor(e,t){this._productLinkDataService=e,this._businessAuthorizationService=t,this.productLinkList=[],this.selectedProduct=null,this.loading=!0,this.loadingFailure=!1,this.loadingVerifyAdd=!1,this.loadingVerifyContent=!1,this.verifyContentResult={success:!0,failedMessage:""},(0,s.rC)(this,{selectedProduct:s.LO,productLinkList:s.LO,loading:s.LO,loadingVerifyAdd:s.LO,loadingVerifyContent:s.LO,verifyContentResult:s.LO}),this.queryToken=(0,u.ib)({keyword:"",platformType:l.d.TikTokShop,platformUserId:""},[],{hasMore:!0,offset:0})}}p=(0,a.gn)([(0,a.fM)(0,d.Q),(0,a.fM)(1,h._),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===d.Q?Object:d.Q,void 0===h._?Object:h._])],p)},404389:function(e,t,r){"use strict";r.d(t,{S:function(){return ee}});var n=r(69984),i=r(772322);r(349601),r(822289);var o=r(982465),a=r(781494),s=r(5622),c=r(218571),l=r(195291),u=r(429188),d=r(813727),h=r(105789),p=r.n(h),f=r(565523),v=r(718179),g=r(184171),m=r(843970),_=r(413872),y=r(647071),b=r(733031),w=r(887893),k=r(722236),x=r(12192),S=r(24544),E=r(30019),T=r(775411),C=r(290574),A=r(195894),I=r(399501),R=r(6090),P=r(193968),O=r(509564),D=r(950544),M=r(405859),L=r(909599),N=r(164837),j=r(583741),F=r(754764),U=r(845119),Z=r(256011),B=r(176758),V=r(262299),W=r(305940),z=r(261218),G=r(231576),Y=r(433500),H=r(860824),K=r(202659),J=r(914601),q=r(363301),X=r(904878),Q=r(8224),$=r(480566),ee=(0,u.Pi)(()=>{var{i18n:e}=(0,d.$)(),t=(0,f.G)(M.J),r=(0,f.G)(L.Y),u=(0,j.B)(),{aiGenerateVideoRatio:h,smartWriterManager:ee,aiWriterTrackDataManager:et}=r,[er,en]=(0,c.useState)(null),[ei,eo]=(0,c.useState)(null),[ea,es]=(0,c.useState)(null),[ec,el]=(0,c.useState)(null),[eu,ed]=(0,c.useState)(!0),[eh,ep]=(0,c.useState)(!1),[ef,ev]=(0,c.useState)(null),[eg,em]=(0,c.useState)(!1),[e_,ey]=(0,c.useState)(!1),[eb,ew]=(0,c.useState)(!1),ek=(0,c.useRef)(!1),ex=(0,c.useRef)(!1),{pageLifeCycle:eS,theme:eE,textEditorManager:eT}=t,{aiWriterManager:eC,aiGeneratePopupVisible:eA}=r,eI=!!([N.jp.AiProcessing,N.jp.AiProcessFailed].some(e=>e===eS)||N.jp.DefaultEmpty&&ee.smartWriterResults.length>0),eR=e=>!eh&&(ex.current=!0,eC.handleGenerate(e),!0),eP=e=>{ed(e.current)},eO=()=>{setTimeout(()=>{var{editor:t}=eT,n=(0,A.z)(t,g.I);ep(!!n),ey(t.isEmpty()&&!n);var i=t.getText();if(r.aiScriptText=i||"",t.isEmpty()){em(!0),ev(e.t("web_textvideo_toast_enter_srcipt_generate",{},"Can\u2019t generate a video without a script"));return}if(!i){em(!0);return}r.aiScriptText=i;var o=i.trim();if(RegExp("^[^A-Za-z0-9\\s\\p{P}\\p{Emoji}]+$","gu").test(o)){em(!0),ev(e.t("web_textvideo_desc_english_script_required",{},"Currently the video can only be generated from English scripts."));return}if(RegExp("^[\\p{P}\\d\\s\\p{Emoji}]+$","u").test(o)||!o.length){em(!0),ev(e.t("web_textvideo_desc_valid_content_required",{},"Your script doesn\u2019t contain valid content."));return}em(!1),ev(null)},0)};return(0,c.useEffect)(()=>{er&&eT.editor.focusAtEnd()},[er]),(0,o.default)(()=>{eT.editor.off(I.r.EDITABLE_CHANGE,eP)}),(0,i.jsx)("div",{className:$.Z["ai-script-generate-wrapper"],id:"ai-script-generate-wrapper",children:(0,i.jsxs)("div",{className:$.Z["ai-script-generate-main-container"],children:[(0,i.jsxs)("div",{className:$.Z["ai-script-generate-editor-header"],children:[(0,i.jsx)(Q.r,{className:$.Z["ai-script-generate-editor-icon"]}),e.t("web_smart_tools_text_generate_script",{},"Generate video script")]}),(0,i.jsx)("div",{className:$.Z["ai-script-generate-divider"]}),(0,i.jsx)("div",{className:$.Z.aiScriptGenerateEditorContainer,children:(0,i.jsxs)("div",{className:$.Z["ai-script-generate-editor-wrapper"],ref:en,style:{userSelect:eh?void 0:"text"},id:"ai-script-generate-editor-wrapper",onClick:()=>{eh||eT.editor.focus()},onMouseDown:()=>{eC.isEditorMouseDown=!0},children:[(0,i.jsxs)("div",{className:$.Z.editorAnchor,ref:eo,children:[ea&&(0,l.createPortal)((0,i.jsx)("div",{className:p()($.Z.placeholderWrapper,{[$.Z.none]:eh||!eu}),children:e.t("web_ai_writer_text_generate_script",{string0:(0,i.jsx)(Z.Z,{className:$.Z.placeholderInlineButton,onClick:()=>eR("button_slash"),"data-smart-writer-outside":!1,theme:eE})},"Press {string0} to use AI writer to generate video scripts, or enter a script yourself.")}),ea),ec&&(0,l.createPortal)((0,i.jsx)(B.Z,{className:p()({[$.Z.none]:eh||!eu}),"data-smart-writer-outside":!1,onClick:()=>eR("button"),onGenerate:()=>eR("button")}),ec)]}),er&&ei?(0,i.jsx)(R.h,{businessKey:"cc_ttv_ai_script_editor",getPlugins:t=>[new g.p(t,e=>(0,i.jsx)(v.$U,{instantiationService:u,children:(0,i.jsx)(z.F,{editor:t,triggerFrom:e.triggerFrom,onClose:e.onClose})})),new m.P(t,{containerAnchor:ei,content:(0,i.jsx)("div",{className:$.Z.aiStarContainer,ref:el})}),new _.t(t,{placeholderAnchor:ei,mainPlaceholder:(0,i.jsx)("div",{className:$.Z.placeholderContainer,ref:es})}),new y.U(t),new b.bN(t,{beforeTrigger:()=>{if(ex.current){ex.current=!1;return}(0,K.z)(u,{action:"ai_writer",aiWriterEntrance:"mark"})}}),new w.W(t,{limit:3e3,renderTips:(e,t)=>(0,i.jsx)(U.I,{wordCount:e,limit:t}),lineContentFilter:e=>e.replace(/\s+$/,""),container:()=>document.querySelector("#ai-script-generate-wrapper"),onOverLimit:()=>{ek.current||(ek.current=!0,a.Z.warning({id:"ai-script-generate-out-of-limit",content:e.t("web_textvideo_toast_supports_upto_3000",{placeholder0:3e3},"Enter no more than {placeholder0} characters")}),(0,H.E)(u,{reason:"script_limit"}))},onNotOverLimit:()=>{ek.current=!1}}),new k.x(t,{sessionStorageKey:"cc_ttv_ai_script_editor",onRestore:e=>{var t=e.getText();r.aiScriptText=t},shouldRestore:()=>Promise.resolve(!!r.aiScriptText)}),new x.m6(t,{renderToolbar:e=>(0,i.jsx)(v.$U,{instantiationService:u,children:(0,i.jsx)(G.F,(0,n._)({editor:t},e))})}),new S.an(t,{renderToolbar:e=>(0,i.jsx)(v.$U,{instantiationService:u,children:(0,i.jsx)(q.M,(0,n._)({editor:t},e))})}),new E.x,new T.F,new C.x],onInit:e=>{eT.setEditor(e),ed(e.isEditable()),e.on(I.r.EDITABLE_CHANGE,eP),window.editor=e,eO(),ew(!0)},schema:new P.V({[g.I]:{display:O.v.block,displayEnter:!1},[D.IT]:{lmkr:!1}}),onChange:eO,scroller:er,getViewPortPadding:()=>({top:30,bottom:30})}):null,eb&&(0,i.jsx)(J.E,{})]})}),(0,i.jsx)("div",{className:$.Z["ai-script-generate-divider"]}),(0,i.jsxs)("div",{className:$.Z["ai-script-generate-footer"],children:[(0,i.jsxs)("div",{className:$.Z["ai-script-generate-footer-tips"],children:[(0,i.jsx)(X.r,{className:$.Z["ai-script-generate-footer-tips-icon"]}),(0,i.jsx)("span",{children:e.t("web_whatisnew_text_only_english",{},"Currently the audio in the video can only be generated from the English scripts.")})]}),(0,i.jsxs)("div",{className:$.Z["ai-script-generate-footer-action"],children:[(0,i.jsx)(V.D,{value:h,onChange:e=>{r.setAiGenerateVideoRatio(e)}}),(0,i.jsx)("div",{className:$.Z.speechSelectContainer,children:(0,i.jsx)(Y.Z,{})}),(0,i.jsx)(F.v,{disabled:eI||eg,toolTip:{disabledContent:ef||""},onClick:()=>{if(!eh){var{editor:t}=eT;if((0,A._Q)(t,e=>e.replace(/\s+$/,""))>3e3){s.Z.warning({title:e.t("web_textvideo_toast_unable_to_generate",{},"Couldn\u2019t generate"),content:e.t("web_textvideo_toast_maximum_number_3000",{placeholder0:3e3},"Enter no more than {placeholder0} characters."),okText:e.t("web_textvideo_button_go_to_modify",{},"OK")}),(0,H.E)(u,{});return}r.aiScriptText=t.getText(),r.setAiGeneratePopupVisible(!0)}},children:e.t("web_autocut_button_generate",{},"Generate")})]})]}),(0,i.jsx)(W.n,{visible:e_,onVisibleChange:e=>{ey(e)},onSelect:()=>eR("template_entrance")})]})})})},893734:function(e,t,r){"use strict";r.d(t,{Z:function(){return _}});var n,i,o=r(772322);r(459360),r(529114);var a=r(293793),s=r(173006),c=r(947406),l=r(401725),u=r(595051),d=r(813727),h=r(218571),p=r(744152),f=r(388014),v=r(122331),g=r(987548);n="https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/aigc-logo.webp",(i=new Image).src=globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(n,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),[].push(i);var m=[{ticksPerPercent:1,totalPercent:50},{ticksPerPercent:10,totalPercent:30},{ticksPerPercent:20,totalPercent:15},{ticksPerPercent:30,totalPercent:4}].reduce((e,t,r)=>{var{ticksPerPercent:n,totalPercent:i}=t;return e.concat({ticksPerPercent:n,totalPercent:i,endTick:n*i+(0===r?0:e[r-1].endTick),endPercent:i+(0===r?0:e[r-1].endPercent)})},[]);let _=function(e){var{status:t,onCancel:r,onRetry:n,errorCode:i,onBackToEdit:_}=e,{i18n:y}=(0,d.$)(),b=(0,h.useMemo)(()=>[y.t("web_textvideo_toast_loading_1",{},"Generating video may take some time."),y.t("web_textvideo_toast_loading_2",{}," You can edit the video after it is generated."),y.t("web_textvideo_toast_loading_3",{},"You may replace the media afterward.")],[y]),[w,k]=(0,h.useState)(0),x=b[w],S=(0,a.default)(()=>k((w+1)%b.length)),{run:E,cancel:T}=(0,c.default)(S,3e3),C=(0,s.default)(0);(0,c.default)(C.inc,100);var A=(0,h.useMemo)(()=>{var e=C.state,t=m.findIndex(t=>e<t.endTick);if(t<0)return 99;var r=m[t];return Math.min(99,Math.floor(r.endPercent+(e-r.endTick)/r.ticksPerPercent))},[C.state]),I=()=>{r()},R=()=>{n()},P=()=>i===p.a6.InvalidInput?y.t("web_textvideo_desc_english_script_required",{},"Currently the video can only be generated from English scripts."):i===p.a6.SensitiveInput?y.t("web_textvideo_desc_no_sensitive_content",{},"Your script may contain content that violate our Community Guidelines."):y.t("web_textvideo_toast_exception_occurred",{},"Something went wrong");return((0,h.useEffect)(()=>{"loading"!==t?T():E()},[T,E,t]),(0,h.useEffect)(()=>{"loading"!==t&&C.set(0)},[t,C]),"failed"===t)?(0,o.jsxs)("div",{className:g.Z["automatic-generation"],children:[(0,o.jsx)("div",{className:g.Z["failed-icon"],children:(0,o.jsx)(f.r,{})}),(0,o.jsx)("div",{className:g.Z["failed-text"],children:y.t("web_textvideo_toast_generate_failure",{},"Failed to generate")}),(0,o.jsx)(l.Z,{content:y.t("web_textvideo_toast_unstable_network",{},"Poor internet connection"),checkOverflow:!0,children:(0,o.jsx)("div",{className:g.Z["tip-text"],children:y.t("web_textvideo_toast_unstable_network",{},"Poor internet connection")})}),(0,o.jsxs)("div",{className:g.Z["failed-button-container"],children:[(0,o.jsx)(u.Z,{type:"secondary",size:"large",onClick:I,children:y.t("web_pwa_button_cancel",{},"Cancel")}),(0,o.jsx)(u.Z,{type:"primary",size:"large",onClick:R,children:y.t("web_textvideo_button_retry",{},"Retry")})]})]}):"failedServer"===t?(0,o.jsxs)("div",{className:g.Z["automatic-generation"],children:[(0,o.jsx)("div",{className:g.Z["failed-icon"],children:(0,o.jsx)(v.r,{})}),(0,o.jsx)("div",{className:g.Z["failed-text"],children:y.t("web_textvideo_toast_generate_failure",{},"Failed to generate")}),(0,o.jsx)(l.Z,{content:P(),checkOverflow:!0,children:(0,o.jsx)("div",{className:g.Z["tip-text"],children:P()})}),(0,o.jsx)("div",{className:g.Z["failed-button-container"],children:i&&[p.a6.InvalidInput,p.a6.SensitiveInput].includes(i)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Z,{type:"secondary",size:"large",onClick:I,children:y.t("web_pwa_button_cancel",{},"Cancel")}),(0,o.jsx)(u.Z,{type:"primary",size:"large",onClick:_,children:y.t("web_textvideo_button_no_sensitive_content",{},"Edit script")})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Z,{type:"secondary",size:"large",onClick:I,children:y.t("web_pwa_button_cancel",{},"Cancel")}),(0,o.jsx)(u.Z,{type:"primary",size:"large",onClick:R,children:y.t("web_textvideo_button_retry",{},"Retry")})]})})]}):(0,o.jsxs)("div",{className:g.Z["automatic-generation"],children:[(0,o.jsx)("div",{className:g.Z["generating-ball"],children:(0,o.jsx)("img",{src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/aigc-logo.webp",height:45,width:45})}),(0,o.jsxs)("div",{className:g.Z["generating-text"],children:[y.t("web_autocut_toast_generating_now",{},"Generating...")," ".concat(A,"%")]}),(0,o.jsx)(l.Z,{content:x,checkOverflow:!0,children:(0,o.jsx)("div",{className:g.Z["tip-text"],children:x})}),(0,o.jsx)("div",{style:{flexGrow:10}}),(0,o.jsx)(u.Z,{className:g.Z["cancel-button"],type:"secondary",size:"large",onClick:I,children:y.t("web_pwa_button_cancel",{},"Cancel")})]})}},763660:function(e,t,r){"use strict";r.d(t,{Y:function(){return l}});var n=r(69984),i=r(764112),o=r(574451),a=r(772322);r(306822);var s=r(489837);r(218571);var c=r(7798),l=e=>{var{children:t}=e,r=(0,o._)(e,["children"]);return(0,a.jsx)(s.Z,(0,i._)((0,n._)({className:c.Z.radio},r),{children:t}))}},236056:function(e,t,r){"use strict";r.d(t,{BQ:()=>q,P6:()=>$,kN:()=>Q,M7:()=>X});let n=r("69984"),i=r("772322"),o=r("988441"),a=r("764112");r("218571");let s=r("112247"),c=r("137213"),l=r("822936"),u=r("809240"),d=r("297865"),h=r("100333"),p=r("434520"),f=r("73403"),v=r("340284"),g=r("756658"),m=r("3606"),_=r("453786"),y=r("512671"),b=r("848748"),w=r("698971"),k=r("906207"),x=r("377961"),S=r("51380"),E=r("717384"),T=r("988701"),C=r("962404"),A=r("232219"),I=r("487684"),R=r("711863"),P=r("80942"),O=r("354839"),D=r("624133"),M=r("736067"),L=r("497784"),N=r("902791"),j=r("722110"),F=r("814268"),U=r("500576"),Z=r("864908"),B=r("161667"),V=r("651592"),W=r("771005"),z=r("941888"),G=r("839977"),Y=r("495229"),H=r("610779"),K=r("125830"),J=r("104619");var q={[o.o.ImageToImage]:(0,i.jsx)(u.r,{}),[o.o.TextToImage]:(0,i.jsx)(_.r,{}),[o.o.Script]:(0,i.jsx)(g.r,{}),[o.o.RemoveBackground]:(0,i.jsx)(l.r,{}),[o.o.ImageUpscaler]:(0,i.jsx)(h.r,{}),[o.o.ImageStyleConversion]:(0,i.jsx)(d.r,{}),[o.o.ImageStyleAvatar]:(0,i.jsx)(e=>(0,i.jsxs)("svg",(0,a._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:24,height:25,fill:"none",viewBox:"0 0 24 25"},e),{children:[(0,i.jsx)("path",{fill:"#16161D",fillRule:"evenodd",d:"M3 12.134c0-1.689.44-3.274 1.212-4.648L5.34 9.751a.33.33 0 0 0 .59 0l1.367-2.744 2.745-1.367a.33.33 0 0 0 0-.59L7.746 3.906A9.5 9.5 0 0 1 22 12.134v7.475c0 .842-.683 1.524-1.525 1.524H4.115A1.114 1.114 0 0 1 3 20.02zm4.5-1.741a.26.26 0 0 1 .259-.26h9.482a.26.26 0 0 1 .259.26v5.425c-.185 1-1.444 3.316-5 3.316s-4.815-2.65-5-3.817z",clipRule:"evenodd"}),(0,i.jsx)("path",{fill:"#16161D",d:"M5.424 2.264a.233.233 0 0 1 .418 0l.954 1.918 1.917.954a.233.233 0 0 1 0 .418l-1.917.954-.954 1.917a.233.233 0 0 1-.418 0L4.47 6.508l-1.918-.954a.233.233 0 0 1 0-.418l1.918-.954z"})]})),{}),[o.o.Resize]:(0,i.jsx)(v.r,{}),[o.o.VideoUpscaler]:(0,i.jsx)(b.r,{}),[o.o.ImageRestoration]:(0,i.jsx)(f.r,{}),[o.o.ImageAiToning]:(0,i.jsx)(s.r,{}),[o.o.ImageColoring]:(0,i.jsx)(c.r,{}),[o.o.ImageNightEnhance]:(0,i.jsx)(p.r,{}),[o.o.VideoSlowMotion]:(0,i.jsx)(e=>(0,i.jsxs)("svg",(0,a._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:24,height:25,fill:"none",viewBox:"0 0 24 25"},e),{children:[(0,i.jsx)("path",{fill:"#000",fillOpacity:.01,d:"M0 .134h24v24H0z"}),(0,i.jsx)("path",{fill:"#090C14",fillRule:"evenodd",d:"M3 11.134a9 9 0 1 1 16.863 4.383h-2.781v-1.645H10.48l-.157 2.212H9.147a4 4 0 0 0-.642-1.03c-.75-.862-1.809-1.272-2.976-1.272-.715 0-1.388.153-1.975.469A9 9 0 0 1 3 11.134m12.952 4.932v.018h-.001a.375.375 0 0 1-.374.345h-2.58l-.129 1.452h.039c.206-.399.745-.694 1.413-.694 1.173 0 2.046.883 2.043 2.133.003 1.378-1.044 2.35-2.647 2.35-1.516 0-2.598-.866-2.608-2.093h1.735c.012.456.401.745.873.745.546 0 .929-.376.925-.951.004-.575-.379-.95-.925-.95-.379 0-.722.192-.873.513l-1.568-.308.18-2.543.077-1.08h4.42v1.063m-11.937-.777c-.88.516-1.386 1.549-1.39 3.016-.006 2.168 1.111 3.453 2.904 3.456 1.789.003 2.9-1.279 2.904-3.456.003-2.165-1.115-3.392-2.904-3.392a3.4 3.4 0 0 0-.817.095 2.6 2.6 0 0 0-.697.281m7.44-3.154a1.15 1.15 0 0 0 1.625 0c.897-.897 2.74-3.652 3.604-4.973a.184.184 0 0 0-.255-.258c-1.357.88-4.217 2.774-4.975 3.606a1.15 1.15 0 0 0 0 1.625m-6.98 6.17c-.006 1.384.437 2.004 1.054 2.004s1.057-.62 1.053-2.004c-.003-1.353-.436-1.953-1.053-1.953s-1.047.6-1.054 1.953m6.018 2.48a.917.917 0 0 1-.899.899.89.89 0 0 1-.9-.9.89.89 0 0 1 .9-.886c.472 0 .893.398.9.886m6.047-4.138h1.773l.72 1.53.758-1.53h1.76l-1.323 2.467 1.387 2.467h-1.747l-.835-1.568-.81 1.568H16.45l1.4-2.467z",clipRule:"evenodd"})]})),{}),[o.o.VideoStabilization]:(0,i.jsx)(m.r,{}),[o.o.VideoStyleConversion]:(0,i.jsx)(y.r,{}),[o.o.Autocut]:(0,i.jsx)(w.r,{}),[o.o.TextToVideo]:(0,i.jsx)(k.r,{}),[o.o.URLToVideo]:(0,i.jsx)(x.r,{}),[o.o.LongToShort]:(0,i.jsx)(J.r,{}),[o.o.BatchEdit]:(0,i.jsx)(S.r,{}),[o.o.TextToDesign]:(0,i.jsx)(T.r,{}),[o.o.ProductPhotos]:(0,i.jsx)(E.r,{}),[o.o.AIModel]:(0,i.jsx)(C.r,{}),[o.o.TextToSpeech]:(0,i.jsx)(A.r,{}),[o.o.AudioVideoTranslator]:(0,i.jsx)(I.r,{}),[o.o.TextToImageInGraphic]:(0,i.jsx)(_.r,{})},X={[o.o.ImageToImage]:(0,i.jsx)(M.r,{}),[o.o.TextToImage]:(0,i.jsx)(W.r,{}),[o.o.Script]:(0,i.jsx)(Z.r,{}),[o.o.RemoveBackground]:(0,i.jsx)(D.r,{}),[o.o.ImageUpscaler]:(0,i.jsx)(N.r,{}),[o.o.ImageStyleConversion]:(0,i.jsx)(L.r,{}),[o.o.ImageStyleAvatar]:(0,i.jsx)(R.r,{}),[o.o.Resize]:(0,i.jsx)(U.r,{}),[o.o.VideoUpscaler]:(0,i.jsx)(G.r,{}),[o.o.ImageRestoration]:(0,i.jsx)(F.r,{}),[o.o.ImageAiToning]:(0,i.jsx)(P.r,{}),[o.o.ImageColoring]:(0,i.jsx)(O.r,{}),[o.o.ImageNightEnhance]:(0,i.jsx)(j.r,{}),[o.o.VideoSlowMotion]:(0,i.jsx)(V.r,{}),[o.o.VideoStabilization]:(0,i.jsx)(B.r,{}),[o.o.VideoStyleConversion]:(0,i.jsx)(z.r,{}),[o.o.Autocut]:(0,i.jsx)(Y.r,{}),[o.o.TextToVideo]:(0,i.jsx)(H.r,{}),[o.o.URLToVideo]:(0,i.jsx)(K.r,{}),[o.o.LongToShort]:(0,i.jsx)(J.r,{}),[o.o.BatchEdit]:(0,i.jsx)(S.r,{}),[o.o.TextToDesign]:(0,i.jsx)(T.r,{}),[o.o.ProductPhotos]:(0,i.jsx)(E.r,{}),[o.o.AIModel]:(0,i.jsx)(C.r,{}),[o.o.TextToSpeech]:(0,i.jsx)(A.r,{}),[o.o.AudioVideoTranslator]:(0,i.jsx)(I.r,{}),[o.o.TextToImageInGraphic]:(0,i.jsx)(W.r,{})},Q=(0,n._)({},q),$=(0,n._)({},X)},910009:function(e,t,r){"use strict";r.d(t,{H:function(){return u}});var n=r(772322);r(459360);var i=r(401725),o=r(218571),a=r(105789),s=r.n(a),c=r(328981),l=r(532152),u=e=>{var{className:t,style:r,type:a="next",disabled:u=!1,toolTip:d,children:h,onClick:p}=e,f="normal"===a,v="info"===a,g=f||v,m=u&&!(null==d?void 0:d.disabledContent),[_,y]=(0,o.useState)(!1);return(0,n.jsx)(i.Z,{content:u&&(null==d?void 0:d.disabledContent)?null==d?void 0:d.disabledContent:null==d?void 0:d.content,popupVisible:_&&(!u&&!!(null==d?void 0:d.content)||u&&!!(null==d?void 0:d.disabledContent)),disabled:m,children:(0,n.jsxs)("div",{className:s()(l.Z.button,{[l.Z.button__normal]:f,[l.Z.button__info]:v,[l.Z.button__disabled]:u},t),style:r,onClick:function(){u||null==p||p()},onMouseEnter:()=>{y(!0)},onMouseLeave:()=>{y(!1)},"data-disabled":u?1:0,children:[g?h:null,"next"===a?(0,n.jsx)(c.r,{className:l.Z.next_icon}):null]})})}},418345:function(e,t,r){"use strict";r.d(t,{pF:function(){return R},uD:function(){return i}});var n,i,o=r(461228),a=r(772322);r(349601),r(463844),r(387346);var s=r(781494),c=r(279134),l=r(221489),u=r(218571),d=r(429188),h=r(254845),p=r(659179),f=r(958444),v=r(247130),g=r(813727),m=r(924846),_=r(629364),y=r(37011),b=r(105789),w=r.n(b),k=r(640712),x=r(292146),S=r(565523),E=r(718179),T=r(765610),C=r(248176);r(10792);var A=r(215135),I=r(823981);(n=i||(i={}))[n.GoogleDrive=0]="GoogleDrive",n[n.DropBox=1]="DropBox",n[n.Cloud=2]="Cloud",n[n.FilePicker=3]="FilePicker",n[n.Drag=4]="Drag",n[n.Shopify=5]="Shopify";var R=(0,d.Pi)((0,u.forwardRef)(function(e,t){var r,n,i,{multiple:d=!1,useWebUpload:b=!0,needValidateLogin:R=!1,menuOnly:P,showDivider:O,onExecuteAction:D,onClickAction:M,children:L,accept:N,validFile:j,uploadOptions:F,beforeUpload:U,onAddMedia:Z,disableThird:B=!1,onSelectCloudAsset:V,validCloudAsset:W,onPickCloud:z,onPickLocal:G,onPickThirdParty:Y,onMaterialFilter:H,uploadMeta:K,materialManager:J,callbacks:q,countLimit:X,allowActions:Q=[],uploadMaxSize:$,resetAfterClose:ee,uploadMaxDuration:et,uploadMinDuration:er,pickCloudFileBtnText:en,pickCloudFileTitle:ei,toolType:eo,uploadTxt:ea="Upload"}=e,es=(0,g.$)(),[ec,el]=(0,u.useState)(!1),[eu,ed]=(0,u.useState)([]),[eh,ep]=(0,u.useState)(!1),ef=(0,S.G)(C.Gw),ev=(0,S.G)(y.T),eg=(0,u.useCallback)(()=>{s.Z.error(es.t("web_magicTools_toast_reselect_material",{},"Couldn\u2019t process material. Try another one."))},[es]),{pickThirdFile:em,pickLocalFile:e_,onCancel:ey,onRetry:eb}=(0,_.Vn)({multiple:d,accept:N,uploadMaxSize:$,uploadMaxDuration:et,uploadMinDuration:er,beforeUpload:e=>"image/gif"!==e.type||(eg(),!1),countLimit:null!=X?X:16,materialManager:J,uploadMeta:K,callbacks:q,toolType:eo}),ew=(0,u.useMemo)(()=>{var e=k.NF.video,t=k.NF.image,r=k.NF.audio,n="";return(null==N?void 0:N.includes("video"))&&"object"==typeof e&&(n+=(0,x.d)("".concat(null==e?void 0:e.accept,","))),(null==N?void 0:N.includes("image"))&&"object"==typeof t&&(n+=(0,x.d)("".concat(null==t?void 0:t.accept,","))),(null==N?void 0:N.includes("audio"))&&"object"==typeof r&&(n+=(0,x.d)("".concat(null==r?void 0:r.accept,","))),n},[N]),ek=(0,u.useRef)(null),ex=(0,u.useCallback)(()=>{if(!ef.hasLogin)return[];var e,t=null===(e=J.materials)||void 0===e?void 0:e.materials;return null==t?void 0:t.filter(e=>{var t=e.mime;if("image/gif"===t)return!1;if(!N)return!0;var r=null!=N&&!!N.includes("video")&&(null==t?void 0:t.startsWith("video")),n=null!=N&&!!N.includes("audio")&&(null==t?void 0:t.startsWith("audio")),i=null!=N&&!!N.includes("image")&&(null==t?void 0:t.startsWith("image"));return r||n||i})},[N]),eS=(0,u.useCallback)(e=>{var t=ex();return e.map(e=>null==t?void 0:t.find(t=>t.md5===e)).filter(e=>e)||[]},[ex]),eE=(0,u.useCallback)((0,o._)(function*(){if(null==eu?void 0:eu.length){var e,t,r=ex(),n=eu.filter(e=>null==r?void 0:r.find(t=>t.md5===e)),i=eS(n);if(n.length){var o=(d?i:[i[0]]).map(e=>{var t;return J.buildUserMaterialLifecycleAndAddBind(e,null!==(t=J.currentWorkspaceId)&&void 0!==t?t:"")});(!W||(yield W(d?o:o[0])))&&(ep(!0),null==V||V(d?o:o[0],null!==(t=J.currentWorkspaceId)&&void 0!==t?t:""),null===(e=ek.current)||void 0===e||e.close(),ep(!1),ee&&ed([]))}}}),[eu,ex]),eT=(0,u.useCallback)(()=>{var e,t,r,n;if(!ef.hasLogin){ef.login();return}null==z||z(),null===(n=ek.current)||void 0===n||n.open({multiple:d,title:es.t("web_tool_Select_file",{},"Select file"),data:null===(e=J.currentSpaceDirectoryFiles)||void 0===e?void 0:e.filter(e=>"folder"!==e.type).map(e=>{var t,r;return null===(r=J.materials)||void 0===r?void 0:null===(t=r.materials)||void 0===t?void 0:t.find(t=>t.md5===e.md5)}),globalData:J.globalMaterials,value:eu,folder:null===(t=J.currentSpaceDirectoryFiles)||void 0===t?void 0:t.filter(e=>"folder"===e.type),onConfirm:eE,supportFileType:N,onValueOrderChange:e=>{ed([...e])},onSelect:e=>{(0,I.Z)(e)?ed([...e]):ed([e])},loading:null===(r=J.materials)||void 0===r?void 0:r.loading,onDirectorySelect:e=>{var{assetId:t,sourcePath:r,name:n}=e;J.setSpaceDirectoryAssetId({assetId:t,sourcePath:r,name:n})},onCancel:()=>{ed([])},sourcePath:J.directoryPath,showSpaceSelector:!0,defaultWorkspace:J.currentWorkspaceId,workspaceList:J.workspaceList,confirmButtonLoading:!1,onWorkspaceChange:e=>{J.setCurrentWorkspaceId(e),J.setSpaceDirectoryMap("-1",{}),J.setSpaceDirectoryAssetId({assetId:"-1",name:J.currentWorkspaceName||""}),ex()},status:J.spaceLoadingStatus,onRetry:J.getCurrentSpaceDirectoryFiles.bind(J)})},[es,eu,ex,eE,eh,ev,ei,en,J,J.globalMaterials,J.directoryPath,J.currentSpaceDirectoryFiles,J.currentWorkspaceName,J.spaceLoadingStatus]);(0,u.useEffect)(()=>(0,h.EH)(()=>{var e,t,r,n,i=ek.current;null==i||null===(n=i.update)||void 0===n||n.call(i,{data:null===(e=J.currentSpaceDirectoryFiles)||void 0===e?void 0:e.filter(e=>"folder"!==e.type).map(e=>{var t,r;return null===(r=J.materials)||void 0===r?void 0:null===(t=r.materials)||void 0===t?void 0:t.find(t=>t.md5===e.md5)}),value:eu,globalData:J.globalMaterials,onConfirm:eE,folder:null===(t=J.currentSpaceDirectoryFiles)||void 0===t?void 0:t.filter(e=>"folder"===e.type),loading:null===(r=J.materials)||void 0===r?void 0:r.loading,sourcePath:J.directoryPath,status:J.spaceLoadingStatus})}),[eu,ex,ew,eE,eh,es,J,ev,en,J,J.globalMaterials,null===(i=J.materials)||void 0===i?void 0:i.materials,J.currentWorkspaceId,J.currentSpaceDirectoryFiles,J.directoryPath,J.currentWorkspaceName,J.spaceLoadingStatus]);var eC=(0,u.useCallback)((e,t)=>{switch(e){case 2:eT();break;case 3:t&&e_({fileList:t,action:"click_add",importOptions:F});break;case 4:t&&e_({fileList:t,action:"drag_to_panel",importOptions:F})}el(!1),null==D||D()},[e_,eT,F]),eA=(0,u.useCallback)((r=(0,o._)(function*(e,t){if(!j||(yield j(e))){for(var r of(null==U||U(e,t),Array.from(e||[])))if(!(0,k.J5)({file:r,accepts:N})){s.Z.error(es.t("web_not_supported_material_type",{},"Material format not supported."));return}eC(t,e)}}),function(e,t){return r.apply(this,arguments)}),[N,j,es,eC,U]),eI=e=>{eA(Array.from(e.target.files),3),e.target.value=null};(0,u.useEffect)(()=>{if(!ef.hasLogin)return},[]),(0,u.useImperativeHandle)(t,()=>({handleFileList:eA,onCancel:ey,onRetry:eb}));var eR=(n=(0,o._)(function*(e){null==Y||Y(e);var t,r=yield em({pageEnterFrom:e,workspaceId:F.toWorkspaceId});(null==r?void 0:r.ok)&&(e===m.O9.GOOGLE_DRIVE?t=A.b.GOOGLE_DRIVE:e===m.O9.DROP_BOX?t=A.b.DROPBOX:e===m.O9.SHOPIFY&&(t=A.b.SHOPIFY),t&&r.value.show(t))}),function(e){return n.apply(this,arguments)}),eP=(0,a.jsx)(l.Z,{triggerProps:{className:"smart-tools-upload-more-dropdown-wrapper"},unmountOnExit:!1,trigger:"hover",popupVisible:ec,onVisibleChange:e=>{el(e),e&&(null==Z||Z())},droplist:(0,a.jsxs)(c.Z,{onClickMenuItem:e=>null==M?void 0:M(e),className:w()("main-upload-menu",P&&"embed"),children:[P&&b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.Z.Item,{className:"third-file-item",children:[(0,a.jsx)(v.Hi7,{size:20}),es.t("web_tool_my_device",{},"My Device"),(0,a.jsx)("input",{className:"input-btn-upload",type:"file",title:"",accept:ew,onChange:e=>{eI(e)},onClick:e=>{if(R&&!ef.hasLogin){ef.login(),e.preventDefault();return}null==M||M("".concat(3)),e.stopPropagation(),null==G||G()},multiple:d})]},"".concat(3)),O&&(0,a.jsx)("div",{className:"st-upload__menu-item-divider"})]}),(0,a.jsxs)(c.Z.Item,{className:"third-file-item",onClick:()=>eT(),children:[(0,a.jsx)(p.NqL,{size:20}),es.t("cloud_web",{},"Cloud")]},"".concat(2)),Q.includes(0)&&(0,a.jsxs)(c.Z.Item,{className:"third-file-item",onClick:()=>eR(m.O9.GOOGLE_DRIVE),children:[(0,a.jsx)(p.YTE,{size:20}),es.t("web_tool_Google_Drived",{},"Google Drive")]},"".concat(0)),Q.includes(1)&&(0,a.jsxs)(c.Z.Item,{className:"third-file-item",onClick:()=>eR(m.O9.DROP_BOX),children:[(0,a.jsx)(p.v__,{size:20}),es.t("web_tool_Dropbox",{},"Dropbox")]},"".concat(1)),Q.includes(5)&&(0,a.jsxs)(c.Z.Item,{className:"third-file-item",onClick:()=>eR(m.O9.SHOPIFY),children:[(0,a.jsx)(f.fVr,{size:20}),es.t("web_Shopify_text_from_sp",{},"From Shopify")]},"".concat(5))]}),position:P?"top":"br",children:P?L:(0,a.jsx)("div",{className:"file-third",children:(0,a.jsx)(p.PI0,{})})});return P?(0,a.jsxs)(a.Fragment,{children:[eP,(0,a.jsx)(E.$U,{instantiationService:ev,children:(0,a.jsx)(T.S,{ref:ek})})]}):(0,a.jsxs)("div",{className:"file-device",children:[(0,a.jsx)("span",{className:"file-upload-txt",children:es.t("web_magicTools_button_select_from_device_Txt",{},ea)}),eP,(0,a.jsx)("input",{className:"input-btn-upload",type:"file",title:"",accept:ew,onChange:e=>{eI(e)},onClick:()=>{null==G||G()},multiple:d}),(0,a.jsx)(E.$U,{instantiationService:ev,children:(0,a.jsx)(T.S,{ref:ek})})]})}))},505277:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(577729),i=r(658742);class o extends n.JT{get onPlayingChange(){return this._onPlayingChange.event}get currentPlayingId(){return this._currentPlayingId}pauseAll(){this._currentPlayingId=null,this._onPlayingChange.fire(null)}changePlaying(e){this._currentPlayingId=e,this._onPlayingChange.fire(e)}constructor(...e){super(...e),this._currentPlayingId=null,this._onPlayingChange=this._register(new i.Q)}}},845893:function(e,t,r){"use strict";r.d(t,{a:function(){return j}});var n=r(461228),i=r(69984),o=r(764112),a=r(789786),s=r(658096),c=r.n(s),l=r(124337),u=r(326923),d=r(405859),h=r(674679),p=r(543544),f=r(164837),v=r(744152),g=r(816752),m=r(460198),_=r(461644),y=r(226134),b=r(797323),w=r(111954),k=r(248176),x=r(649183),S=r(254845),E=r(781440),T=r(135692),C=r(193703),A=r(905141),I=r(413892),R=r(703388),P=r(886656),O=r(794606),D=r(492197),M=r(626173),L=r(657893),N=r(860884);class j{get currentWorkspace(){var{profile:e}=this;return this._workspaceService.workspaceList.find(t=>{var r;return t.workspace_id===(null==e?void 0:null===(r=e.spaceInfo)||void 0===r?void 0:r.workspaceId)})}get profile(){return this._textToVideoService.profile}setExportModalVisible(e){this.exportModalVisible=e}setMoveSpaceModalVisible(e){this.moveSpaceModalVisible=e}setExportWorkspace(e){this.exportWorkspace=e,(null==e?void 0:e.workspace_id)&&this._textToVideoService.storageExpandManager.setExpandWorkspaceId(null==e?void 0:e.workspace_id)}handleExport(e,t){var r=this;return(0,n._)(function*(){if(r.profile){r.exportFormData=e;var n=(null===(d=r.exportWorkspace)||void 0===d?void 0:d.workspace_id)||(null===(h=r.currentWorkspace)||void 0===h?void 0:h.workspace_id)||"",a=null==t?void 0:t.taskId,{generatedResult:s}=r._textToVideoService;try{if(r.exportPrepareLoading=!0,yield r._handleSyncPackageStatus(n),r._mainTextToVideoWidgetService.transitionToPageLifeCycle(f.jp.PreparingExport),r.lvShareReviewInstance||r._initShareSdk(),r._performanceReporterService.performanceMarkStart("EXPORT_VIDEO",{reportInterval:3e4}),!a){var d,h,p,v,g,m,_,y,b,w,k,x,S,E,C,I,R,L,N,{draftKey:j,packageId:F}=r._getPackage(),U=JSON.stringify({filmGeneratedBy:j,uploadSource:{owner:null===(_=r.profile)||void 0===_?void 0:_.uid,platform:"browser",createTime:Date.now()},packageType:4,packageTransferedFrom:23,packageSmartToolsInfo:JSON.stringify(r._textToVideoService.getSmartToolsInfo())}),{height:Z,width:B}=(0,T.q6)({width:(null==s?void 0:null===(y=s.size)||void 0===y?void 0:y[0])||0,height:(null==s?void 0:null===(b=s.size)||void 0===b?void 0:b[1])||0,definition:e.definition}),V="".concat(c().generate()).concat(c().generate()).concat(c().generate()).concat(c().generate()),W=r._teaAdapterService.getTeaConfig().header,z={header:W,client_ip:"",user:{user_id:null===(w=r.profile)||void 0===w?void 0:w.uid,user_is_login:!0,user_unique_id:null===(k=r.profile)||void 0===k?void 0:k.uid,web_id:W.custom.web_id},params:{is_vip:(null===(x=r._capcutAccountService.userVipInfo)||void 0===x?void 0:x.flag)===void 0?void 0:Number(null===(S=r._capcutAccountService.userVipInfo)||void 0===S?void 0:S.flag),text_cnt:(null===(C=r._textToVideoService.generatedResult)||void 0===C?void 0:null===(E=C.info.subtitleList)||void 0===E?void 0:E.length)||0}},G={videoName:e.video_name,duration:(null==s?void 0:s.duration)||0,definition:A.y7[e.definition],quality:e.quality,fps:e.fps,format:e.format,draftId:j,packageId:F,videoId:V,extra:U,customInfo:JSON.stringify(z),width:B,height:Z,uid:(null===(I=r.profile)||void 0===I?void 0:I.uid)||"",appVersion:"10.1.0",sdkVersion:"13.8.0",fromWorkspaceId:null!==(N=r._textToVideoService.generatedWorkspaceId)&&void 0!==N?N:null===(R=r.profile)||void 0===R?void 0:R.spaceInfo.workspaceId,toWorkspaceId:n,type:22,region:null===(L=r.profile)||void 0===L?void 0:L.region,appId:348188},Y=yield r._aiToolDataService.createRenderTask(G);if(!Y.ok)throw Error("render create fail",Y);a=Y.value.taskId,(0,P.I)(r._containerService,{draftId:j,actionType:"export",draftName:"Untitled Project",format:e.format,bitRateType:A.Gm[e.quality],resolution:String(e.definition),fps:String(e.fps),colorSpace:"SDR - Rec.709",isAdvancedOption:null==t?void 0:t.isAdvancedOption}),r.exportTaskId=a,(0,O.r)(r._containerService,(0,i._)({videoGenerateType:r._textToVideoService.videoGenerateType,videoId:V,useTts:1},r._textToVideoService.getSmartToolsInfo(),(0,D.Z)((0,M.Z)(r._textToVideoService.aiWriterTrackDataManager.trackData,["script_category_list","script_id_list","smart_script_id_list","script_request_id_list"]),(e,t)=>({script_category_list:"text_to_video_script_category",smart_script_id_list:"text_to_video_smart_script_id",script_request_id_list:"text_to_video_script_request_id",script_id_list:"text_to_video_script_id"})[t]||t)))}r.setExportModalVisible(!1),r.exportWorkspace=void 0,null===(p=(0,l.H7)())||void 0===p||p.on("rendering",()=>{r._mainTextToVideoWidgetService.transitionToPageLifeCycle(f.jp.Exporting)}),null===(v=(0,l.H7)())||void 0===v||v.on("render-success",()=>{r._mainTextToVideoWidgetService.transitionToPageLifeCycle(f.jp.Exported),r._performanceReporterService.performanceMarkEnd("EXPORT_VIDEO",{detail:(0,o._)((0,i._)({eventType:"key_path_perf",status:"success"},e),{duration:(null==s?void 0:s.duration)||0})})}),null===(g=(0,l.H7)())||void 0===g||g.on("render-fail",()=>{r._mainTextToVideoWidgetService.transitionToPageLifeCycle(f.jp.ViewProduction),r._performanceReporterService.performanceMarkEnd("EXPORT_VIDEO",{detail:(0,o._)((0,i._)({eventType:"key_path_perf",status:"fail"},e),{duration:(null==s?void 0:s.duration)||0})})}),null===(m=(0,l.H7)())||void 0===m||m.renderTask({type:u.F.OPEN,data:{taskId:a}})}catch(t){r._performanceReporterService.performanceMarkEnd("EXPORT_VIDEO",{detail:(0,o._)((0,i._)({eventType:"key_path_perf",status:"fail"},e),{duration:(null==s?void 0:s.duration)||0})}),r._slardarAdapterService.captureException("create_render_task_err",t),r._mainTextToVideoWidgetService.transitionToPageLifeCycle(f.jp.ViewProduction)}finally{r.exportPrepareLoading=!1}}})()}handleEditMore(){var e=this;return(0,n._)(function*(){e.editMorePrepareLoading=!0;try{e._performanceReporterService.performanceMarkStart("GENERATE_DRAFT"),performance.now(),yield e._handleSyncPackageStatus((null===(t=e.profile)||void 0===t?void 0:t.spaceInfo.workspaceId)||"");var t,r,n,i,o,{draftKey:a}=e._getPackage(),s=(0,N.Lj)(L.o1),c=(0,N.Lj)(L.Lc),l="/editor/".concat(a,"?from_page=smart_tool_page&__tool_type=text_to_video&workspaceId=").concat((null===(n=e.profile)||void 0===n?void 0:null===(r=n.spaceInfo)||void 0===r?void 0:r.workspaceId)||0,"&spaceId=").concat(null===(i=e.profile)||void 0===i?void 0:i.spaceInfo.spaceId,"&draftIdc=").concat(null===(o=e.profile)||void 0===o?void 0:o.idc,"&__tool_position=edit_more&enter_from=draft&tab_name=").concat(s,"&sub_tab=").concat(c,"&edit_type=text_to_video&__video_generate_type=").concat(v.bI[e._textToVideoService.videoGenerateType]);if((0,C.X)()){var{query:u}=(0,C.x)();l+=u}window.open(l,"_blank")||(e._textToVideoService.setDoNotBlockWindowClose(!0),location.href=globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(l,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}))}catch(t){e._performanceReporterService.performanceMarkEnd("GENERATE_DRAFT",{detail:{eventType:"key_path_perf",status:"fail"}}),e._slardarAdapterService.captureException("edit more",t)}finally{e.editMorePrepareLoading=!1}})()}restore(){this._persistanceService.restore(this,["exportModalVisible","moveSpaceModalVisible","exportWorkspace","exportFormData","exportTaskId"],{shouldRestore:!!this._capcutAccountService.userProfile.uid,storeId:"TextToVideoExportManager",uid:this._capcutAccountService.userProfile.uid})&&[f.jp.PreparingExport,f.jp.Exporting,f.jp.Exported].includes(this._mainTextToVideoWidgetService.pageLifeCycle)&&(this._mainTextToVideoWidgetService.transitionToPageLifeCycle(f.jp.ViewProduction),this.exportFormData&&this.handleExport(this.exportFormData,{taskId:this.exportTaskId}))}_initShareSdk(){var e,t,r,{searchParams:n}=new URL(window.location.href);(0,l.H7)({uid:(null===(e=this.profile)||void 0===e?void 0:e.uid)||"",EverCloud:this._userMaterialsService.getBaseEvercloud(),region:null===(t=this.profile)||void 0===t?void 0:t.region,extraData:{currentPage:"smart_tool_page",toolType:"text_to_video",fromPage:n.get("__from_page")||n.get("from_page")||void 0,enterFrom:null!==(r=n.get("enter_from"))&&void 0!==r?r:"first_page"},expandInfo:{},reqDomain:g._L.getVars()}),this.lvShareReviewInstance=(0,l.H7)()}_getPackage(){var e,{draftKey:t,packageId:r}=(null===(e=this._textToVideoService.generatedResult)||void 0===e?void 0:e.info)||{};return{draftKey:this.draftKey||t,packageId:this.packageId||r}}_handleSyncPackageStatus(e){var t=this;return(0,n._)(function*(){if(t.profile){var r,n,i=yield t._aiToolDataService.syncPackageStatus({taskId:t._textToVideoService.aiTaskId,fromWorkspaceId:null!==(r=t._textToVideoService.generatedWorkspaceId)&&void 0!==r?r:t.profile.spaceInfo.workspaceId,toWorkspaceId:e,smartToolType:m.no.TextToVideo});if(i.ok)i.value.draftKey&&(t.draftKey=i.value.draftKey,t.packageId=i.value.packageId);else throw(null===(n=i.code)||void 0===n?void 0:n.toString())===I.i.NOT_ENOUGH_STORAGE&&t._textToVideoService.handleShowStorageFullModal(t.editMorePrepareLoading?R.Hq.ExpandOnSync:R.Hq.ExpandOnExport),Error("sync fail",i)}})()}constructor(e,t,r,n,i,o,a,s,c,l,u){this._textToVideoService=e,this._containerService=t,this._mainTextToVideoWidgetService=r,this._performanceReporterService=n,this._userMaterialsService=i,this._teaAdapterService=o,this._slardarAdapterService=a,this._workspaceService=s,this._capcutAccountService=c,this._aiToolDataService=l,this._persistanceService=u,this.exportModalVisible=!1,this.moveSpaceModalVisible=!1,this.exportWorkspace=void 0,this.exportPrepareLoading=!1,this.editMorePrepareLoading=!1,(0,S.rC)(this)}}(0,a.gn)([S.LO,(0,a.w6)("design:type",Boolean)],j.prototype,"exportModalVisible",void 0),(0,a.gn)([S.LO,(0,a.w6)("design:type",Boolean)],j.prototype,"moveSpaceModalVisible",void 0),(0,a.gn)([S.LO,(0,a.w6)("design:type",Object)],j.prototype,"exportWorkspace",void 0),(0,a.gn)([S.LO,(0,a.w6)("design:type",Boolean)],j.prototype,"exportPrepareLoading",void 0),(0,a.gn)([S.LO,(0,a.w6)("design:type",Boolean)],j.prototype,"editMorePrepareLoading",void 0),(0,a.gn)([S.aD.bound,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Boolean]),(0,a.w6)("design:returntype",void 0)],j.prototype,"setExportModalVisible",null),(0,a.gn)([S.aD.bound,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Boolean]),(0,a.w6)("design:returntype",void 0)],j.prototype,"setMoveSpaceModalVisible",null),(0,a.gn)([S.aD.bound,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",void 0)],j.prototype,"setExportWorkspace",null),(0,a.gn)([S.aD.bound,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof ExportFormData?Object:ExportFormData,Object]),(0,a.w6)("design:returntype",Promise)],j.prototype,"handleExport",null),(0,a.gn)([S.aD.bound,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",Promise)],j.prototype,"handleEditMore",null),j=(0,a.gn)([(0,a.fM)(1,_.t),(0,a.fM)(2,d.J),(0,a.fM)(3,h.i),(0,a.fM)(4,E.b),(0,a.fM)(5,y.w),(0,a.fM)(6,b.L),(0,a.fM)(7,w.W),(0,a.fM)(8,k.Gw),(0,a.fM)(9,x.H),(0,a.fM)(10,p.t),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Omit?Object:Omit,void 0===_.t?Object:_.t,void 0===d.J?Object:d.J,void 0===h.i?Object:h.i,void 0===E.b?Object:E.b,void 0===y.w?Object:y.w,void 0===b.L?Object:b.L,void 0===w.W?Object:w.W,void 0===k.Gw?Object:k.Gw,void 0===x.H?Object:x.H,void 0===p.t?Object:p.t])],j)},56795:function(e,t,r){"use strict";r.d(t,{O:function(){return n},u:function(){return v}});var n,i=r(461228),o=r(574451),a=r(789786);r(349601);var s=r(781494),c=r(543544),l=r(649183),u=r(810381),d=r(248176),h=r(123951),p=r(254845),f=["web_textvideo_toast_creative_1","web_textvideo_toast_creative_2","web_textvideo_toast_creative_3","web_textvideo_toast_creative_4","web_textvideo_toast_creative_5","web_textvideo_toast_creative_6","web_textvideo_toast_creative_7","web_textvideo_toast_creative_8","web_textvideo_toast_creative_9","web_textvideo_toast_creative_10"];(n||(n={})).initOnTextToVideoService="PromptSuggestionManager";class v{restore(){this._persistanceService.restore(this,["visible","offsetBottom","endAnimated","list","loading","id","data"],{shouldRestore:!!this._capcutAccountService.userProfile.uid,storeId:this._storeId,uid:this._capcutAccountService.userProfile.uid})}showPromptList(e){var t=this;return(0,i._)(function*(){var{id:r,bottom:n}=e,i=(0,o._)(e,["id","bottom"]);!t.loading&&(t.data=i,yield t.fetchPromptSug(i),t.list.length>0&&(t.visible=!0,t.offsetBottom=n,t.id=r))})()}closePromptList(){this.endAnimated=!0}afterPromptListClosed(){this.visible=!1,this.offsetBottom=-9999,this.endAnimated=!1,this.list=[]}fetchPromptSug(e){var t=this;return(0,i._)(function*(){if(!t.loading){if(""===e.input){t.list=t._getRandomStringsFromArray(f).map(e=>h.oc.t(e));return}try{t.loading=!0;var r=yield t._aiToolDataService.promptSug(e);r.ok&&(t.list=r.value.recommendResult)}catch(e){t._reportService.reportDevError("prompt_suggestion_error",e),s.Z.error(h.oc.t("web_ai_writer_toast_no_recommendations_found",{},"No recommendations found"))}finally{t.loading=!1}}})()}_getRandomStringsFromArray(e){for(var t=[];t.length<5;){var r=Math.floor(Math.random()*e.length);t.includes(r)||t.push(r)}var n=[];for(var i of t)n.push(e[i]);return n}constructor(e,t,r,n,i){this._aiToolDataService=t,this._reportService=r,this._capcutAccountService=n,this._persistanceService=i,this.visible=!1,this.offsetBottom=-9999,this.endAnimated=!1,this.list=[],this.loading=!1,this.id="",this.data={},this._storeId="",(0,p.rC)(this),this._storeId=e}}(0,a.gn)([p.LO,(0,a.w6)("design:type",Boolean)],v.prototype,"visible",void 0),(0,a.gn)([p.LO,(0,a.w6)("design:type",Number)],v.prototype,"offsetBottom",void 0),(0,a.gn)([p.LO,(0,a.w6)("design:type",Boolean)],v.prototype,"endAnimated",void 0),(0,a.gn)([p.LO,(0,a.w6)("design:type",Array)],v.prototype,"list",void 0),(0,a.gn)([p.LO,(0,a.w6)("design:type",Boolean)],v.prototype,"loading",void 0),(0,a.gn)([p.LO,(0,a.w6)("design:type",String)],v.prototype,"id",void 0),(0,a.gn)([p.LO,(0,a.w6)("design:type","undefined"==typeof IPromptSugParams?Object:IPromptSugParams)],v.prototype,"data",void 0),(0,a.gn)([p.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",void 0)],v.prototype,"restore",null),(0,a.gn)([p.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],v.prototype,"showPromptList",null),(0,a.gn)([p.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",void 0)],v.prototype,"closePromptList",null),(0,a.gn)([p.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",void 0)],v.prototype,"afterPromptListClosed",null),(0,a.gn)([p.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof IPromptSugParams?Object:IPromptSugParams]),(0,a.w6)("design:returntype",Promise)],v.prototype,"fetchPromptSug",null),(0,a.gn)([p.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array]),(0,a.w6)("design:returntype",Array)],v.prototype,"_getRandomStringsFromArray",null),v=(0,a.gn)([(0,a.fM)(1,l.H),(0,a.fM)(2,u.m),(0,a.fM)(3,d.Gw),(0,a.fM)(4,c.t),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===n?Object:n,void 0===l.H?Object:l.H,void 0===u.m?Object:u.m,void 0===d.Gw?Object:d.Gw,void 0===c.t?Object:c.t])],v)},579729:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var n=(0,r(30276).yh)("smart-tools-audio-player-service")},600049:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n=r(789786),i=r(855523),o=r(461644);class a{get draftWorkspaceManager(){return this._draftWorkspaceManager}constructor(e){this._containerService=e,this._draftWorkspaceManager=this._containerService.createInstance(i.I,"")}}a=(0,n.gn)([(0,n.fM)(0,o.t),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o.t?Object:o.t])],a)},428271:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});var n=(0,r(30276).yh)("storage-expend-service")},164837:function(e,t,r){"use strict";r.d(t,{B6:function(){return a},CO:function(){return s},jp:function(){return o}}),(n=o||(o={})).DefaultEmpty="DefaultEmpty",n.AiProcessing="AiProcessing",n.AiProcessFailed="AiProcessFailed",n.RewriteProcessFailed="RewriteProcessFailed",n.Generating="Generating",n.GenerateFailed="GenerateFailed",n.ViewProduction="ViewProduction",n.PreparingExport="PreparingExport",n.Exporting="Exporting",n.Exported="Exported",(i=a||(a={})).Category="Category",i.Rewrite="Rewrite",i.Shorter="Shorter",i.Longer="Longer",i.Translate="Translate";var n,i,o,a,s={Category:"ai_writer",Rewrite:"polish",Shorter:"shorter",Longer:"longer",Translate:"translate"}},793960:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var n=r(980014),i=r(167154),o=r(619398),a=r(467425);function s(e){return e.replace("http:","https:")}function c(e){var t,r,c,l,u,d;return e.video?{sourceType:i.ov.PublicSpace,assetType:o.pS.Material,vid:null===(u=e.video)||void 0===u?void 0:u.source,filename:e.video.file_name,fileType:i.YB.Video,mime:e.video.mime,subType:(0,a.m)(e.video.file_name),size:e.video.size,cover:{url:e.video.cover},width:e.video.width,height:e.video.height,duration:e.video.duration,isVideoTranscoding:!1,videoTranscodeInfo:e.video.video_infos.reduce((e,t)=>(e[t.definition]={url:s(t.url),key:t.key},e),{}),thumb:(null===(d=e.video)||void 0===d?void 0:d.thumb)?{common:{singleFrameHeight:e.video.thumb.common_info.single_frame_height,singleFrameWidth:e.video.thumb.common_info.single_frame_width,totalSetNum:e.video.thumb.common_info.total_set_num},details:e.video.thumb.detail_infos.map(e=>({frameCount:e.frame_count,imageWidth:e.image_width,imageHeight:e.image_height,url:s(e.url)}))}:void 0}:e.audio?(r=e.audio.audio_infos[0],{vid:null===(t=e.audio)||void 0===t?void 0:t.source,sourceType:i.ov.PublicSpace,assetType:o.pS.Material,filename:e.audio.file_name,subType:(0,a.m)(e.audio.file_name),fileType:i.YB.Audio,size:e.audio.size,duration:e.audio.duration,isAudioTranscoding:!1,audioTranscodeInfo:{"128kb":{url:s(r.url),key:r.key}}}):e.image?(l=e=>({url:s(e)}),{sourceType:i.ov.PublicSpace,assetType:o.pS.Material,vid:null===(c=e.image)||void 0===c?void 0:c.source,fileType:i.YB.Image,size:e.image.size,isImgTranscoding:!1,cover:{url:l(e.image.image_360p_url).url},imgTranscodeInfo:{"360p":l(e.image.image_360p_url),"720p":l(e.image.image_720p_url),"1080p":l(e.image.image_1080p_url),origin:l(e.image.origin)}}):void(0,n.ss)("un expect file type")}},633359:function(e,t,r){"use strict";r.d(t,{P:function(){return g}});var n=r(461228),i=r(69984),o=r(789786),a=r(199297),s=r(239534),c=r(577729),l=r(658742),u=r(432019),d=r(831246),h=r(111954),p=r(226134),f=r(610306),v=r(523474);class g extends c.JT{_loadStorageExpandPackage(){return Promise.all([r.e("8583"),r.e("3173"),r.e("7716"),r.e("9680")]).then(r.bind(r,463350))}prefetch(){var e=this;return(0,n._)(function*(){yield e._loadStorageExpandPackage()})()}get modalShowStatus(){return this._modalShowStatus}isSupportPay(e){var t=this;return(0,n._)(function*(){var r=yield t.getInstance(e),n=yield null==r?void 0:r.isSupportExpand();return null!=n&&n})()}isRegionSupportPay(){var e=this;return(0,n._)(function*(){var{LvStorageExpandModalSingleton:t}=yield e._loadStorageExpandPackage();return t.isSupportExpandStatic()})()}isSpaceRoleSupportPay(e){var t=this._workspaceService.workspaceList.find(t=>t.workspace_id===e);return(null==t?void 0:t.role)==="owner"}_updateWebId(e){this._webId=e}showSpaceNotEnoughModal(e){var t=this;return(0,n._)(function*(){var{workspaceId:r,modalProps:n,reporterParams:o}=e;if(t.canOpenInstanceModal){t._fireModalOpen();var a=yield t.getInstance(r),{IStorageShowType:s,OPEN_PAGE_FROM:c}=yield t._loadStorageExpandPackage();null==a||a.show({type:s.CAPACITY_INSUFFICIENT,modalProps:{okText:null==n?void 0:n.okText,cancelText:null==n?void 0:n.cancelText,title:null==n?void 0:n.title,content:null==n?void 0:n.content,onOk:()=>{t._onDidOk.fire()},onCancel:()=>{t._onDidCancel.fire()},onClose:()=>{t._onDidOk.dispose(),t._onDidCancel.dispose(),t._fireModalClose()}},reporterParams:(0,i._)({pageFrom:c.spaceLimitUpgrade},o)})}})()}showPayModal(e){var t=this;return(0,n._)(function*(){var{workspaceId:r,reporterParams:n,isUpgrade:i}=e;if(t.canOpenInstanceModal){t._fireModalOpen();var o=yield t.getInstance(r),{IStorageShowType:a}=yield t._loadStorageExpandPackage();null==o||o.show({type:i?a.VIP_BUY:a.CAPACITY_BUY,reporterParams:n,onCurrentShowPayStatus:(e,r)=>{"success"===e?t._onDidPaySuccess.fire(r):"error"===e&&t._onDidPayFailed.fire(r)},modalProps:{onClose:()=>{t._fireModalClose()}}})}})()}showPayUploadFullSpaceModal(e){var t=this;return(0,n._)(function*(){var{workspaceId:r,uploadFileList:n,reporterParams:o}=e;if(t.canOpenInstanceModal){t._fireModalOpen();var a=yield t.getInstance(r),s=yield t.isSupportPay(r),{IStorageShowType:c,OPEN_PAGE_FROM:l}=yield t._loadStorageExpandPackage();null==a||a.show({type:c.UPLOAD_FULL_SPACE_RESOLVE,isUpgradeEntryVisible:s,uploadFileList:n,reporterParams:(0,i._)({pageFrom:l.spaceLimitUpgrade},o),modalProps:{onOk:()=>{t._onDidOk.fire()},onCancel:()=>{t._onDidCancel.fire(),t._onDidOk.dispose(),t._onDidCancel.dispose(),t._fireModalClose()}},onCurrentShowPayStatus:(e,r)=>{"success"===e?t._onDidPaySuccess.fire(r):"error"===e&&t._onDidPayFailed.fire(r)}})}})()}getInstance(e){var t=this;return(0,n._)(function*(){yield t._initAwaitLocker.awaitForInit();var r=t._getUserInfo(),n=t._getCloudInfo(e),i=t._getWorkspaceInfo(e),o=t._getDefaultWorkspaceInfo(),c=t._getWorkspaceList(),{LvStorageExpandModalSingleton:l}=yield t._loadStorageExpandPackage();return l({userInfo:r,cloudInfo:n,workspaceInfo:i,workspaceList:c,defaultWorkspaceInfo:o,cookieConsent:s.g,isBOE:!t._environmentService.isProd,riskInfo:{webid:t._webId},shouldStartFirstPartyAnalytics:!1,getABTestConfig:(e,r)=>t._teaAdapterService.getABTestVar(e,r),onModalStatusChange:e=>{e===a.pJ.OPEN?t._fireModalOpen():t._fireModalClose()},handleReporterProcessing:(e,r)=>{t._onDidReporterProcessing.fire(e,r)},onPayStatusChange:(e,r)=>{var n,s=t._userService.dangerUsedUserMachineService;t._onDidGlobalPayStatusChange.fire(e),e===a.lp.SUCCESS&&(s.send({type:"UPDATE_WORKSPACE",workspaceId:(null==r?void 0:null===(n=r.productInfo)||void 0===n?void 0:n.isCloud)?null==i?void 0:i.workspace_id:null==o?void 0:o.workspace_id}),s.send({type:"UPDATE_VIP_INFO"}),s.send({type:"REFRESH_WORKSPACE_LIST"}))}})})()}_fireModalOpen(){this._modalShowStatus!==a.pJ.OPEN&&(this._modalShowStatus=a.pJ.OPEN,this._onDidOpen.fire())}_fireModalClose(){this._modalShowStatus!==a.pJ.CLOSED&&(this._modalShowStatus=a.pJ.CLOSED,this._onDidClose.fire())}get canOpenInstanceModal(){return this._modalShowStatus===a.pJ.CLOSED}lockModal(e){var t=this;return(0,n._)(function*(){var r=yield t.getInstance(e);r.getConfig().canOpenModal&&r.updateConfig({canOpenModal:!1})})()}freeModal(e){var t=this;return(0,n._)(function*(){var r=yield t.getInstance(e);r.getConfig().canOpenModal||r.updateConfig({canOpenModal:!0})})()}_getUserInfo(){var e=this._accountService.userProfile,{userVipInfo:t}=this._accountService;return{name:null==e?void 0:e.name,avatar:null==e?void 0:e.avatar,hasLogined:!0,uid:null==e?void 0:e.uid,region:null==e?void 0:e.region,email:null==e?void 0:e.email,idc:null==e?void 0:e.idc,reqDomain:null==e?void 0:e.reqDomain,createTime:null==e?void 0:e.create_time,vipInfo:t}}_getCloudInfo(e){var t;return null===(t=this._workspaceService.workspaceExpandInfoMap)||void 0===t?void 0:t[e]}_getWorkspaceInfo(e){var t;return this._accountService.hasLogin&&this._workspaceService.available?null!==(t=this._workspaceService.getWorkspace(e))&&void 0!==t?t:{}:{workspace_id:""}}_getWorkspaceList(){var e;return this._accountService.hasLogin&&this._workspaceService.available&&null!==(e=this._workspaceService.workspaceList)&&void 0!==e?e:[]}_getDefaultWorkspaceInfo(){var e,t,r,n=null===(t=this._accountService.userProfile)||void 0===t?void 0:null===(e=t.personalSpaceInfo)||void 0===e?void 0:e.workspaceId;return this._accountService.hasLogin&&this._workspaceService.available?null!==(r=this._workspaceService.getWorkspace(n))&&void 0!==r?r:{}:{workspace_id:""}}constructor(e,t,r,n,i){super(),this._accountService=e,this._workspaceService=t,this._teaAdapterService=r,this._environmentService=n,this._userService=i,this._serviceBrand=void 0,this._webId="",this._onDidPaySuccess=this._register(new l.Q),this._onDidPayFailed=this._register(new l.Q),this._onDidGlobalPayStatusChange=this._register(new l.Q),this._onDidOpen=this._register(new l.Q),this._onDidReporterProcessing=this._register(new l.Q),this._onDidOk=this._register(new l.Q),this._onDidCancel=this._register(new l.Q),this._onDidClose=this._register(new l.Q),this._initAwaitLocker=new u.G,this._modalShowStatus=a.pJ.CLOSED,this.onDidOpen=this._onDidOpen.event,this.onDidReporterProcessing=this._onDidReporterProcessing.event,this.onDidPaySuccess=this._onDidPaySuccess.event,this.onDidPayFailed=this._onDidPayFailed.event,this.onDidOk=this._onDidOk.event,this.onDidCancel=this._onDidCancel.event,this.onDidClose=this._onDidClose.event,this.onDidGlobalPayStatusChange=this._onDidGlobalPayStatusChange.event,Promise.all([this._teaAdapterService.getWebId().then(e=>{this._updateWebId(e)})]).then(()=>{this._initAwaitLocker.initDone()})}}g=(0,o.gn)([(0,o.fM)(0,d.D),(0,o.fM)(1,h.W),(0,o.fM)(2,p.w),(0,o.fM)(3,f.Y),(0,o.fM)(4,v.S),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===d.D?Object:d.D,void 0===h.W?Object:h.W,void 0===p.w?Object:p.w,void 0===f.Y?Object:f.Y,void 0===v.S?Object:v.S])],g)},853698:function(e,t,r){"use strict";r.d(t,{Y:function(){return a}});var n=r(516173),i=r(980014),o=r(658742);class a{get result(){return this._cacheResult}set(e,t,r){(0,i.Y2)(this._checkTable(e)),(0,i.Y2)(!this._done),new n.m(this._transaction,e).set(t,r).catch(e=>{this._onError.fire(e)})}setMany(e,t){(0,i.Y2)(this._checkTable(e)),(0,i.Y2)(!this._done),new n.m(this._transaction,e).setMany(t).catch(e=>{this._onError.fire(e)})}delete(e,t){(0,i.Y2)(this._checkTable(e)),(0,i.Y2)(!this._done),new n.m(this._transaction,e).delete(t).catch(e=>{this._onError.fire(e)})}deleteMany(e,t){(0,i.Y2)(this._checkTable(e)),(0,i.Y2)(!this._done),new n.m(this._transaction,e).deleteMany(t).catch(e=>{this._onError.fire(e)})}query(e,t){(0,i.Y2)(this._checkTable(e)),(0,i.Y2)(!this._done),this.queryMany(e,[t])}queryMany(e,t){(0,i.Y2)(this._checkTable(e)),(0,i.Y2)(!this._done),new n.m(this._transaction,e).queryMany(t).then(t=>{if(t)for(var[r,n]of(this._cacheResult.has(e)||this._cacheResult.set(e,new Map),t))this._cacheResult.get(e).set(r,n)}).catch(e=>{this._onError.fire(e)})}clear(e){(0,i.Y2)(this._checkTable(e)),(0,i.Y2)(!this._done),new n.m(this._transaction,e).clear().catch(e=>{this._onError.fire(e)})}commit(){this._done=!0}_checkTable(e){return this._tables.has(e)}constructor(e,t){for(var r of(this._transaction=e,this._cacheResult=new Map,this._tables=new Set,this._onError=new o.Q,this._onComplete=new o.Q,this._done=!1,this.onError=this._onError.event,this.onComplete=this._onComplete.event,t))this._tables.add(r);this._transaction.onabort=()=>{this._onError.fire(this._transaction.error)},this._transaction.onerror=()=>{this._onError.fire(this._transaction.error)},this._transaction.oncomplete=()=>{this._onComplete.fire(this._cacheResult)}}}},242803:function(e,t,r){"use strict";r.d(t,{bF:function(){return o},m_:function(){return i},q1:function(){return n},yO:function(){return a}});var n=e=>{var{status:t,speed:r,task_detail:n,draft_info:i}=e.data;return{status:t,progress:r,taskDetail:(null==n?void 0:n.map(e=>({resourceId:e.resource_id,resourceName:e.resource_name,resourceType:e.resource_type,level:e.level,width:e.width,height:e.height,scene:e.scene,platform:e.platform,md5:e.md5,video:e.video&&{cover:e.video.cover,playInfo:e.video.play_info},image:e.image&&{url:e.image.key,key:e.image.key,urlList:e.image.url_list,previewKey:e.image.preview_key}})))||[],draftInfo:i?{draftKey:i.draft_key,packageId:i.package_id,materialId:i.material_id,subtitleList:i.subtitle_list}:void 0}},i=e=>{var{status:t,speed:r,task_detail:n,draft_info:i}=e.data;return{status:t,progress:r,taskDetail:(null==n?void 0:n.map(e=>({resourceId:e.resource_id,resourceName:e.resource_name,resourceType:e.resource_type,level:e.level,width:e.width,height:e.height,scene:e.scene,platform:e.platform,md5:e.md5,video:e.video&&{cover:e.video.cover,playInfo:e.video.play_info},image:e.image&&{url:e.image.url,key:e.image.key,urlList:e.image.url_list,previewKey:e.image.preview_key}})))||[],draftInfo:i?{draftKey:i.draft_key,packageId:i.package_id,materialId:i.material_id,subtitleList:i.subtitle_list}:void 0}},o=e=>{var{task_id:t,task_detail:r,link_type:n}=e.data;return{taskId:t,taskDetail:(null==r?void 0:r.map(e=>({resourceId:e.resource_id,resourceName:e.resource_name,resourceType:e.resource_type,level:e.level,width:e.width,height:e.height,scene:e.scene,platform:e.platform,md5:e.md5,video:e.video&&{cover:e.video.cover,playInfo:e.video.play_info},image:e.image&&{url:e.image.key,key:e.image.key,urlList:e.image.url_list,previewKey:e.image.preview_key}})))||[],linkType:null!=n?n:0}},a=e=>{var{task_id:t,task_detail:r,link_type:n}=e.data;return{taskId:t,taskDetail:(null==r?void 0:r.map(e=>({resourceId:e.resource_id,resourceName:e.resource_name,resourceType:e.resource_type,level:e.level,width:e.width,height:e.height,scene:e.scene,platform:e.platform,md5:e.md5,video:e.video&&{cover:e.video.cover,playInfo:e.video.play_info},image:e.image&&{url:e.image.url,key:e.image.key,urlList:e.image.url_list,previewKey:e.image.preview_key}})))||[],linkType:null!=n?n:0}}},333205:function(e,t,r){"use strict";r.d(t,{J:function(){return a},L:function(){return i}});var n,i,o=r(30276);(n=i||(i={}))[n.Success=1]="Success",n[n.Process=0]="Process",n[n.Failure=-1]="Failure",n[n.Cancel=2]="Cancel";var a=(0,o.yh)("ai-writer-data-service")},460446:function(e,t,r){"use strict";r.d(t,{p:function(){return v}});var n=r(69984),i=r(764112),o=r(789786),a=r(577729),s=r(408541),c=r(963473),l=r(37011),u=r(353799),d=r(411038),h=r(532461),p=r(284676),f=r(528981);class v extends a.JT{createPromptToTextTask(e){var t=(0,f.L)(e.prompt);if(t)return t;var r=(0,s.Rl)(),o=this._promptToTextRepository.promptToText((0,i._)((0,n._)({},e),{requestId:r}));return(0,c.oW)(new p.e(o))}textRewrite(e){return this._textRewriteRepository.textRewrite(e)}report(e){return this._aiWriterReportRepository.report(e)}constructor(e){super(),this._instantiationService=e,this._promptToTextRepository=this._instantiationService.createInstance(u.P),this._textRewriteRepository=this._instantiationService.createInstance(d.o),this._aiWriterReportRepository=this._instantiationService.createInstance(h.u)}}v=(0,o.gn)([(0,o.fM)(0,l.T),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===l.T?Object:l.T])],v)},218514:function(e,t,r){"use strict";var n,i,o,a;r.d(t,{m:function(){return i}}),(o=n||(n={}))[o.Loki=0]="Loki",o[o.Heycan=1]="Heycan",o[o.TuChong=2]="TuChong",(a=i||(i={})).Free="free",a.LimitedTimeFree="limited_time_free",a.Subscribe="subscribe",a.Oneoff="oneoff"},166627:function(e,t,r){"use strict";var n,i;r.d(t,{H:function(){return n}}),(i=n||(n={}))[i.UNKNOWN=0]="UNKNOWN",i[i.HEYCAN=1]="HEYCAN",i[i.LOKI=2]="LOKI",i[i.MUSIC=3]="MUSIC",i[i.TUCHONG=5]="TUCHONG",i[i.BRAND=6]="BRAND",i[i.VIMO=7]="VIMO"},922813:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});var n=r(998498),i=r.n(n),o=r(759794);function a(e,t){return e.interceptors.request.use(e=>{var{url:r="",baseURL:n="",headers:a,data:s={}}=e,{pathname:c}=(0,o.GM)("".concat(n).concat(r)),l=c.length>=7?c.slice(-7):c;a.lan="zh-hans",a.pf="1",a.appvr=t.appVersion,a.tdid="web",a["sign-ver"]=1,a["device-time"]=Math.floor(Date.now()/1e3);var u="9e2c|".concat(l,"|").concat(a.pf,"|").concat(a.appvr,"|").concat(a["device-time"],"|").concat(a.tdid,"|11ac");return a.sign=i()(u).toLowerCase(),e.data=s,e.headers=a,e}),e}},830119:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var n={COMMERCIAL_GET_BENEFITS:"/commerce/v1/vip/get_benefits",QUERY_VOICE_BENEFIT:"/commerce/v1/benefits/query_voice_benefit",REPORT_VOICE_USAGE:"/commerce/v1/benefits/report_voice_usage",BATCH_GET_USER_BENEFIT:"/commerce/v1/benefits/batch_get_user_benefit",REPORT_USAGE:"/commerce/v1/benefits/report_usage"}},963853:function(e,t,r){"use strict";r.d(t,{T:function(){return p}});var n=r(461228),i=r(69984),o=r(618230),a=r(963473),s=r(327736),c=r(669403),l=r(89772),u=r(816752),d=r(530487),h=r(599662);class p{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new s.yk().build(s.kk),(0,c.i3)(e),(0,l.mH)(e),(0,o.V)(e),e)}return this._networkClientInstance}_getApi(e){return"".concat(u._L.getVar("web_domain")).concat(e)}fetchQuota(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(h.b.INTELLIGENT_QUOTA),{smart_tool_type:e.smartToolType},{withCredentials:!0});if("0"!==r.ret)return(0,a.wf)(Number(r.ret),r.errmsg);return(0,a.oW)(r)}catch(e){return(0,d.m)(e,-1,"smart-tools-fetch-quota-error")}})()}reportUseTime(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(h.b.INTELLIGENT_REPORT),{smart_tool_type:e.smartToolType},{withCredentials:!0});if("0"!==r.ret)return(0,a.wf)(Number(r.ret),r.errmsg);return(0,a.oW)(r)}catch(e){return(0,d.m)(e,-1,"smart-tools-fetch-quota-error")}})()}getFileList(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(h.b.INTELLIGENT_FILE_LIST),(0,i._)({},e),{withCredentials:!0});if("0"!==r.ret)return(0,a.wf)(Number(r.ret),r.errmsg);return(0,a.oW)(r)}catch(e){return(0,d.m)(e,-1,"get-file-list-err")}})()}}},47583:function(e,t,r){"use strict";r.d(t,{s:function(){return d}});var n=r(789786),i=r(577729),o=r(37011),a=r(468561),s=r(292180),c=r(492197),l=r(823981),u=r(799882);class d extends i.JT{save(e){var t=this._buildRequest(e);return this._draftSaveRepository.save(t)}deltaUpdate(e){var t=this._buildRequest(e);return this._draftSaveRepository.deltaUpdate(t)}constructor(e){super(),this._instantiationService=e,this._buildRequest=e=>{var t=["md5"];return(0,l.Z)(e)||(0,u.Z)(e)?(0,c.Z)(e,(r,n)=>{var i=t.includes(n)?n:(0,s.Z)(n);switch(delete e[n],!0){case(0,l.Z)(r):e[i]=r.map(this._buildRequest);case(0,u.Z)(r):e[i]=this._buildRequest(r);default:e[i]=r}return i}):e},this._draftSaveRepository=this._instantiationService.createInstance(a.o)}}d=(0,n.gn)([(0,n.fM)(0,o.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o.T?Object:o.T])],d)},727282:function(e,t,r){"use strict";r.d(t,{R:function(){return i}});var n=r(589872);class i extends n.O{reportBusinessEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._filter(t)&&super.reportBusinessEvent(e,t,r)}reportBusinessExitEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._filter(t)&&super.reportBusinessExitEvent(e,t,r)}reportDevEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._filter(t)&&super.reportDevEvent(e,t)}reportDevError(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super.reportDevError(e,t,r)}constructor(e,t,r){super(e,t),this._filter=r}}},762134:function(e,t,r){"use strict";r.d(t,{B:function(){return s}});var n=r(789786),i=r(211928),o=r(861479),a=r(250047);class s extends o.i{getCoverResourceToken(){return this._getResourceTokenSync(this._createCoverToken.bind(this),()=>this._coverResourceToken,e=>this._coverResourceToken=e)}_createCoverToken(e){var t=this._getCoverResourceKey(),r=this.getCover(e);return(0,a.MZ)({key:t,url:r},this._downloadService)}_getCoverResourceKey(){return"".concat(this.key,"_cover")}constructor(e,t,r){super(e,t),this.key=e,this._downloadService=r}}s=(0,n.gn)([(0,n.fM)(2,i.tx),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof Resource?Object:Resource,void 0===i.tx?Object:i.tx])],s)},861479:function(e,t,r){"use strict";r.d(t,{Z:function(){return d},i:function(){return h}});var n=r(461228),i=r(80217),o=r(963473),a=r(980014),s=r(658742),c=r(442317),l=r(466477),u=r(753851);function d(e){return new Promise((t,r)=>{e.status===i.n.error&&e.restart(),e.onReady(e=>{t((0,o.oW)(e))}),e.onError(e=>{r(e)})})}class h{get resourceType(){return this.value.type}onResourceCreated(){(0,l.R)(this.value)?this._doResourceReady(this.value):this._tryCompleteResource()}onReady(e){if(this.status!==i.n.complete)return this._resourceReadyEmitter.event(e);var t=!1;return setTimeout(()=>{t||((0,a.Y2)((0,l.R)(this.value)),e(this.value))}),{dispose:()=>{t=!0}}}onError(e){if(this.status===i.n.complete)return{dispose:()=>{}};if(this.status!==i.n.error)return this._resourceErrorEmitter.event(e);var t=!1;return setTimeout(()=>{if(!t){if(this.status!==i.n.error)return this._resourceErrorEmitter.event(e);(0,a.Y2)(this.error),e(this.error)}}),{dispose:()=>{t=!0}}}restart(){(0,a.Y2)(this.status===i.n.error),this._tryCompleteResource()}_tryCompleteResource(){var e=this;return(0,n._)(function*(){var t=yield e._fetchResourceDetail();if(!t.ok){e._onHandleResourceError(t.cause);return}e._onHandleResourceReady(t.value)})()}_doResourceReady(e){this.status=i.n.complete,this._resourceReadyEmitter.fire(e),this._onResourceReadyDefer.resolve(e)}_getResourceTokenSync(e,t,r){var n=t();if(n)return n;if((0,l.R)(this.value)){var i=e(this.value);return r(i),i}var o=new u.R(()=>new Promise(t=>{var n=this.onReady(n=>{var i=e(n);r(i),t(i)});this.onError(()=>n.dispose())}));return r(o),o}_getResourceTokenSyncWithCondition(e,t,r,i){var o=t();if(o)return o;var a=new u.R(()=>{var t;return new Promise((t=(0,n._)(function*(t){var n=e((yield i.promise));n&&(r(n),t(n))}),function(e){return t.apply(this,arguments)}))});return r(a),a}_getResourceTokenAsync(e,t,r){var i=this;return(0,n._)(function*(){var n=t();if(n)return n;if((0,l.R)(i.value)){var o=e(i.value);return r(o),o}if(yield i._onResourceReadyDefer.promise,n=t())return n;(0,a.Y2)((0,l.R)(i.value));var s=e(i.value);return r(s),s})()}_onHandleResourceReady(e){this.value=Object.assign(this.value,e),(0,l.K)(this.value),this._doResourceReady(e)}_onHandleResourceError(e){this.status=i.n.error,this.error=e,this._resourceErrorEmitter.fire(e)}_fetchResourceDetail(){var e=this;return(0,n._)(function*(){(0,a.Y2)(e.status===i.n.init||e.status===i.n.error);try{e.status=i.n.fetching;var t=yield e.doFetch();return(0,a.Y2)(Object.keys(t).length>1,"resource is not full resource. ".concat(t)),(0,o.oW)(t)}catch(t){return e.status=i.n.error,(0,o.Mx)(-1,"fetch resource detail fail.",t)}})()}constructor(e,t){this.key=e,this.status=i.n.init,this._resourceReadyEmitter=new s.Q,this._resourceErrorEmitter=new s.Q,this._onResourceReadyDefer=(0,c.PQ)(),this.value=t}}},235238:function(e,t,r){"use strict";r.d(t,{s:function(){return d}});var n=r(461228),i=r(69984),o=r(789786),a=r(211928),s=r(49978),c=r(806797),l=r(949743),u=r(250047);class d extends s.${getCover(e){return e.coverUrl}_getDigitalResourceKey(){return"".concat(this.key,"_video")}_createDigitalResourceToken(e){var{originUrl:t}=e,r=this._getDigitalResourceKey();return(0,u.MZ)({key:r,url:t,md5:e.md5},this._downloadService)}getDigitalResourceToken(){return this._getResourceTokenSync(this._createDigitalResourceToken.bind(this),()=>this._digitalResourceToken,e=>this._digitalResourceToken=e)}getContentUrl(e){return e.previewVideo.originUrl}getDigitalHumanResourceToken(){return this._getResourceTokenSync(this._createDigitalHumanResourceToken.bind(this),()=>this._digitalResourceToken,e=>this._digitalResourceToken=e)}_createDigitalHumanResourceToken(e){var{originUrl:t}=e,r=this._getDigitalHumanResourceKey();return(0,u.MZ)({key:r,url:t,md5:e.md5},this._downloadService)}_getDigitalHumanResourceKey(){return"".concat(this.key,"_digital_human_").concat(this.value.resourceId)}getThumbResourceTokens(){return this._getResourceTokenAsync(this._createVideoThumbTokens.bind(this),()=>this._thumbResourceTokens,e=>this._thumbResourceTokens=e)}_createVideoThumbTokens(e){return e.previewVideo.thumb.details.map(t=>{var r=this._getThumbResourceKey(t.url),{singleFrameWidth:n,singleFrameHeight:o}=e.previewVideo.thumb.common,a={frameCount:t.frameCount,singleFrameWidth:n,singleFrameHeight:o,imageWidth:t.imageWidth,imageHeight:t.imageHeight};return(0,u.MZ)((0,i._)({key:r,url:t.url},a),this._downloadService,this._getDownloadConfig(e))})}_getThumbResourceKey(e){return"".concat(this.key,"_thumb_").concat(e)}doFetch(){var e=this;return(0,n._)(function*(){var[t,r]=(yield e._videoDataService.getVideos({})).pair();if(t)throw Error("doFetch error-".concat(t.code,"-").concat(t.msg));return(0,i._)({type:e.value.type},r.value.list[0])})()}constructor(e,t,r,n,i){super(e,t,r),this.key=e,this._downloadService=r,this._configurationService=n,this._videoDataService=i}}d=(0,o.gn)([(0,o.fM)(2,a.tx),(0,o.fM)(3,c.Ui),(0,o.fM)(4,l.u),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IDigitalHumanMeta?Object:IDigitalHumanMeta,void 0===a.tx?Object:a.tx,void 0===c.Ui?Object:c.Ui,void 0===l.u?Object:l.u])],d)},187955:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var n=r(852630),i=r(789786),o=r(211928),a=r(250047),s=r(980014),c=r(466477),l=r(762134),u=r(610306);class d extends l.B{getCover(e){return e.url}getContentResourceToken(){return this._getResourceTokenSync(this._createContentResourceToken.bind(this),()=>this._contentResourceToken,e=>this._contentResourceToken=e)}getContentResolutionInfo(){return(0,s.Y2)((0,c.R)(this.value)),this._getImageSourceResolutionInfo(this.value)}getResourceTokenByFuzzyMatchWidth(e){for(var t of((0,s.Y2)((0,c.R)(this.value)),this.value.transcode))if(t.width>=e){if(n&&t.width>n)continue;n=t.width,r=t}r||(r=this.value.transcode[this.value.transcode.length-1]);var r,n,i=this._getResolutionResourceKey(String(n));return(0,a.MZ)({key:i,url:r.url,md5:this.value.uri},this._downloadService)}getAllResolutionResourceTokens(){return this._getResourceTokenAsync(this._createAllResolutionResourceTokens.bind(this),()=>{if(0!==Object.keys(this._allResolutionResourceTokens).length)return this._allResolutionResourceTokens},e=>this._allResolutionResourceTokens=e)}_createCoverToken(e){var t=this._getCoverResourceKey(),r=this.getCover(e);return(0,a.MZ)({key:t,url:r},this._downloadService)}_createAllResolutionResourceTokens(e){return(0,s.Y2)(e.transcode),e.transcode.reduce((e,t,r)=>(e[t.width]||(e[t.width]=this._createUserPhotoResourceTokenByKey(r)),e),{})}_createUserPhotoResourceTokenByKey(e){(0,s.Y2)((0,c.R)(this.value)),(0,s.Y2)(this.value.transcode,"transcode should not be undefined!");var t=this.value.transcode[e],{url:r,width:n}=t,i=this._getResolutionResourceKey(String(n));return(0,a.MZ)({key:i,url:r,md5:t.url},this._downloadService)}_createContentResourceToken(e){var{url:t,resolution:r}=this._getImageSourceResolutionInfo(e),n=this._getResolutionResourceKey(r);return(0,a.MZ)({key:n,url:t,md5:e.url},this._downloadService)}_getResolutionResourceKey(e){return"".concat(this.key,"_resolution_").concat(e)}_getImageSourceResolutionInfo(e){var t=function(e){var t=r.find(t=>t.resolution===e);if(t)return{v:t}},r=e.transcode.map(e=>{var{url:t,width:r,height:n}=e;return{url:t,resolution:this._getResolutionKeyByLongSide(r,n)}}).filter(e=>e.resolution);for(var i of this._environmentService.isAutoTest?["720p","1024p","540p","480p","360p","288p"]:["480p","720p","360p","540p","1024p","288p"]){var o=t(i);if("object"===(0,n._)(o))return o.v}return{url:e.url,resolution:"origin"}}getImageSourceOrderedResolutionInfo(){return(0,s.Y2)((0,c.R)(this.value)),this.getContentResolutionInfo()}_getResolutionKeyByLongSide(e,t,r){var n=100,i=null;for(var o of null!=r?r:[1024,720,540,480,360,288]){var a=void 0;(a=e>t?Math.abs(o-e):Math.abs(o-t))<n&&(n=a,i=o)}if(i)return"".concat(i,"p")}doFetch(){return(0,s.Y2)((0,c.R)(this.value)),Promise.resolve(this.value)}constructor(e,t,r,n){super(e,t,r),this.key=e,this._downloadService=r,this._environmentService=n,this._allResolutionResourceTokens={}}}d=(0,i.gn)([(0,i.fM)(2,o.tx),(0,i.fM)(3,u.Y),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IImageSourceMeta?Object:IImageSourceMeta,void 0===o.tx?Object:o.tx,void 0===u.Y?Object:u.Y])],d)},528512:function(e,t,r){"use strict";r.d(t,{p:function(){return n}});var n=(0,r(30276).yh)("sticker-motion-resource-service")},303175:function(e,t,r){"use strict";r.d(t,{u:function(){return c}});var n=r(789786),i=r(251164),o=r(10888),a=r(963730),s=r(37011);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new a.M(o.a,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,n.gn)([(0,n.fM)(0,s.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s.T?Object:s.T])],c)},370505:function(e,t,r){"use strict";r.d(t,{H:function(){return c}});var n=r(789786),i=r(251164),o=r(476566),a=r(963730),s=r(37011);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new a.M(o.j,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,n.gn)([(0,n.fM)(0,s.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s.T?Object:s.T])],c)},537584:function(e,t,r){"use strict";r.d(t,{r:function(){return i}});var n=r(980014);class i{get store(){return this._store}constructor(e){for(var t of(this._store=new Map,e)){(0,n.Y2)(!this._store.has(t.id));var r=new Map;for(var i of t.tables)(0,n.Y2)(!r.has(i.name)),r.set(i.name,i);this._store.set(t.id,{version:t.version,tables:r})}}}},83718:function(e,t,r){"use strict";var n=r(246513),i=r(845208),o=r(972690),a=r(443387),s=r(633335),c=i("String.prototype.charAt"),l=i("String.prototype.charCodeAt");e.exports=function(e,t){if("string"!=typeof e)throw new n("Assertion failed: `string` must be a String");var r=e.length;if(t<0||t>=r)throw new n("Assertion failed: `position` must be >= 0, and < the length of `string`");var i=l(e,t),u=c(e,t),d=o(i),h=a(i);if(!d&&!h)return{"[[CodePoint]]":u,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(h||t+1===r)return{"[[CodePoint]]":u,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var p=l(e,t+1);return a(p)?{"[[CodePoint]]":s(i,p),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":u,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}},694394:function(e,t,r){"use strict";var n=r(246513);e.exports=function(e,t){if("boolean"!=typeof t)throw new n("Assertion failed: Type(done) is not Boolean");return{value:e,done:t}}},626464:function(e,t,r){"use strict";var n=r(246513),i=r(943278),o=r(537322),a=r(569379),s=function(){try{return delete[].length,!0}catch(e){return!1}}();e.exports=function(e,t,r,c){if("Object"!==a(e))throw new n("Assertion failed: `O` must be an Object");if(!i(t))throw new n("Assertion failed: `P` must be a Property Key");if("boolean"!=typeof c)throw new n("Assertion failed: `Throw` must be a Boolean");if(c){if(e[t]=r,s&&!o(e[t],r))throw new n("Attempted to assign to readonly property.");return!0}try{return e[t]=r,!s||o(e[t],r)}catch(e){return!1}}},671282:function(e,t,r){"use strict";var n=r(600282),i=r(618247),o=r(789046),a=r(538113);e.exports=function(e){var t=n(e);return o(t)||0===t?0:a(t)?i(t):t}},412732:function(e,t,r){"use strict";function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,{Z:function(){return n}})},194166:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(498989),i=r(647738);let o=n.hj.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>(0,i.Yw)(e,t),redo:()=>({state:e,dispatch:t})=>(0,i.KX)(e,t)}),addProseMirrorPlugins(){return[(0,i.m8)(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}})},358179:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=r(498989).NB.create({name:"text",group:"inline"})},290869:function(e,t,r){"use strict";function n(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}r.d(t,{Z:function(){return n}})},424507:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(678656);let i={...r(284581),...n.Z}},535591:function(e,t,r){"use strict";let n,i;r.d(t,{Z:function(){return j}});var o=r(833600);let{toString:a}=Object.prototype,{getPrototypeOf:s}=Object,c=(n=Object.create(null),e=>{let t=a.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())}),l=e=>(e=e.toLowerCase(),t=>c(t)===e),u=e=>t=>typeof t===e,{isArray:d}=Array,h=u("undefined"),p=l("ArrayBuffer"),f=u("string"),v=u("function"),g=u("number"),m=e=>null!==e&&"object"==typeof e,_=e=>{if("object"!==c(e))return!1;let t=s(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},y=l("Date"),b=l("File"),w=l("Blob"),k=l("FileList"),x=l("URLSearchParams");function S(e,t,{allOwnKeys:r=!1}={}){let n,i;if(null!=e){if("object"!=typeof e&&(e=[e]),d(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{let i;let o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;for(n=0;n<a;n++)i=o[n],t.call(null,e[i],i,e)}}}function E(e,t){let r;t=t.toLowerCase();let n=Object.keys(e),i=n.length;for(;i-- >0;)if(t===(r=n[i]).toLowerCase())return r;return null}let T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,C=e=>!h(e)&&e!==T,A=(i="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>i&&e instanceof i),I=l("HTMLFormElement"),R=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),P=l("RegExp"),O=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};S(r,(r,i)=>{let o;!1!==(o=t(r,i,e))&&(n[i]=o||r)}),Object.defineProperties(e,n)},D="abcdefghijklmnopqrstuvwxyz",M="0123456789",L={DIGIT:M,ALPHA:D,ALPHA_DIGIT:D+D.toUpperCase()+M},N=l("AsyncFunction"),j={isArray:d,isArrayBuffer:p,isBuffer:function(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&v(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||v(e.append)&&("formdata"===(t=c(e))||"object"===t&&v(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&p(e.buffer)},isString:f,isNumber:g,isBoolean:e=>!0===e||!1===e,isObject:m,isPlainObject:_,isUndefined:h,isDate:y,isFile:b,isBlob:w,isRegExp:P,isFunction:v,isStream:e=>m(e)&&v(e.pipe),isURLSearchParams:x,isTypedArray:A,isFileList:k,forEach:S,merge:function e(){let{caseless:t}=C(this)&&this||{},r={},n=(n,i)=>{let o=t&&E(r,i)||i;_(r[o])&&_(n)?r[o]=e(r[o],n):_(n)?r[o]=e({},n):d(n)?r[o]=n.slice():r[o]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&S(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(S(t,(t,n)=>{r&&v(t)?e[n]=(0,o.Z)(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a;let c={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)a=i[o],(!n||n(a,e,t))&&!c[a]&&(t[a]=e[a],c[a]=!0);e=!1!==r&&s(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:l,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},toArray:e=>{if(!e)return null;if(d(e))return e;let t=e.length;if(!g(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r;let n=(e&&e[Symbol.iterator]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let r;let n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:I,hasOwnProperty:R,hasOwnProp:R,reduceDescriptors:O,freezeMethods:e=>{O(e,(t,r)=>{if(v(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(v(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(e,t)=>{let r={};return(e=>{e.forEach(e=>{r[e]=!0})})(d(e)?e:String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>Number.isFinite(e=+e)?e:t,findKey:E,global:T,isContextDefined:C,ALPHABET:L,generateString:(e=16,t=L.ALPHA_DIGIT)=>{let r="",{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&v(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{let t=Array(10),r=(e,n)=>{if(m(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;let i=d(e)?[]:{};return S(e,(e,t)=>{let o=r(e,n+1);h(o)||(i[t]=o)}),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:N,isThenable:e=>e&&(m(e)||v(e))&&v(e.then)&&v(e.catch)}},384474:function(e,t,r){"use strict";r.d(t,{F:function(){return o}});var n=r(540723),i=r(453740);function o(e){return function(){let t=e.getMonitor(),r=e.getRegistry();(0,n.k)(t.isDragging(),"Cannot call endDrag while not dragging.");let o=t.getSourceId();return null!=o&&(r.getSource(o,!0).endDrag(t,o),r.unpinSource()),{type:i.Bs}}}},471488:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var n=r(786678);class i{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let e=this,{dispatch:t}=this.store,r=(0,n.W1)(this);return Object.keys(r).reduce((n,i)=>{let o=r[i];return n[i]=(...r)=>{let n=o.apply(e,r);void 0!==n&&t(n)},n},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{let e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}},482778:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});let n=0;function i(){return n++}},786377:function(e,t,r){"use strict";/*! js-cookie v3.0.5 | MIT */function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:function(){return i}});var i=function e(t,r){function i(e,i,o){if("undefined"!=typeof document){"number"==typeof(o=n({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in o)o[s]&&(a+="; "+s,!0!==o[s]&&(a+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+a}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var o=r[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=t.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){i(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},187457:function(e,t,r){"use strict";r.d(t,{Ax:function(){return k},FC:function(){return g},GJ:function(){return E},Mn:function(){return x},Pu:function(){return v},dR:function(){return C},k9:function(){return y},nd:function(){return b},nj:function(){return T},vs:function(){return a},wx:function(){return F}});var n=r(881714);class i{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class o{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&o.empty)return o.empty}recover(e){let t=0,r=65535&e;if(!this.inverted)for(let e=0;e<r;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*r]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let n=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let c=this.ranges[s]-(this.inverted?n:0);if(c>e)break;let l=this.ranges[s+o],u=this.ranges[s+a],d=c+l;if(e<=d){let o=l?e==c?-1:e==d?1:t:t,a=c+n+(o<0?0:u);if(r)return a;let h=e==(t<0?c:d)?null:s/3+(e-c)*65536,p=e==c?2:e==d?1:4;return(t<0?e!=c:e!=d)&&(p|=8),new i(a,p,h)}n+=u-l}return r?e+n:new i(e+n,0,null)}touches(e,t){let r=0,n=65535&t,i=this.inverted?2:1,o=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let a=this.ranges[t]-(this.inverted?r:0);if(a>e)break;let s=this.ranges[t+i];if(e<=a+s&&t==3*n)return!0;r+=this.ranges[t+o]-s}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,i=0;n<this.ranges.length;n+=3){let o=this.ranges[n],a=o-(this.inverted?i:0),s=o+(this.inverted?0:i),c=this.ranges[n+t],l=this.ranges[n+r];e(a,a+c,s,s+l),i+=l-c}}invert(){return new o(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?o.empty:new o(e<0?[0,-e,0]:[0,0,e])}}o.empty=new o([]);class a{constructor(e=[],t,r=0,n=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=n}slice(e=0,t=this.maps.length){return new a(this.maps,this.mirror,e,t)}copy(){return new a(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let n=e.getMirror(t);this.appendMap(e.maps[t],null!=n&&n<t?r+n:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let n=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=n&&n>t?r-n-1:void 0)}}invert(){let e=new a;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let n=0;for(let r=this.from;r<this.to;r++){let i=this.maps[r].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(r);if(null!=t&&t>r&&t<this.to){r=t,e=this.maps[t].recover(i.recover);continue}}n|=i.delInfo,e=i.pos}return r?e:new i(e,n,null)}}let s=Object.create(null);class c{getMap(){return o.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let r=s[t.stepType];if(!r)throw RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in s)throw RangeError("Duplicate use of step JSON ID "+e);return s[e]=t,t.prototype.jsonID=e,t}}class l{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new l(e,null)}static fail(e){return new l(null,e)}static fromReplace(e,t,r,i){try{return l.ok(e.replace(t,r,i))}catch(e){if(e instanceof n.e4)return l.fail(e.message);throw e}}}function u(e,t,r){let i=[];for(let n=0;n<e.childCount;n++){let o=e.child(n);o.content.size&&(o=o.copy(u(o.content,t,o))),o.isInline&&(o=t(o,r,n)),i.push(o)}return n.HY.fromArray(i)}class d extends c{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new n.p2(u(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,i),t.openStart,t.openEnd);return l.fromReplace(e,this.from,this.to,o)}invert(){return new h(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new d(t.pos,r.pos,this.mark)}merge(e){return e instanceof d&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new d(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new d(t.from,t.to,e.markFromJSON(t.mark))}}c.jsonID("addMark",d);class h extends c{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new n.p2(u(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return l.fromReplace(e,this.from,this.to,r)}invert(){return new d(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new h(t.pos,r.pos,this.mark)}merge(e){return e instanceof h&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new h(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new h(t.from,t.to,e.markFromJSON(t.mark))}}c.jsonID("removeMark",h);class p extends c{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return l.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return l.fromReplace(e,this.pos,this.pos+1,new n.p2(n.HY.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(e))return new p(this.pos,t.marks[r]);return new p(this.pos,this.mark)}}return new f(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new p(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new p(t.pos,e.markFromJSON(t.mark))}}c.jsonID("addNodeMark",p);class f extends c{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return l.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return l.fromReplace(e,this.pos,this.pos+1,new n.p2(n.HY.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new p(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new f(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new f(t.pos,e.markFromJSON(t.mark))}}c.jsonID("removeNodeMark",f);class v extends c{constructor(e,t,r,n=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=n}apply(e){return this.structure&&m(e,this.from,this.to)?l.fail("Structure replace would overwrite content"):l.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new o([this.from,this.to-this.from,this.slice.size])}invert(e){return new v(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new v(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof v)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?n.p2.empty:new n.p2(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new v(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?n.p2.empty:new n.p2(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new v(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new v(t.from,t.to,n.p2.fromJSON(e,t.slice),!!t.structure)}}c.jsonID("replace",v);class g extends c{constructor(e,t,r,n,i,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=n,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(m(e,this.from,this.gapFrom)||m(e,this.gapTo,this.to)))return l.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return l.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?l.fromReplace(e,this.from,this.to,r):l.fail("Content does not fit in gap")}getMap(){return new o([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new g(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),n=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||n<t.pos||i>r.pos?null:new g(t.pos,r.pos,n,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new g(t.from,t.to,t.gapFrom,t.gapTo,n.p2.fromJSON(e,t.slice),t.insert,!!t.structure)}}function m(e,t,r){let n=e.resolve(t),i=r-t,o=n.depth;for(;i>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,i--;if(i>0){let e=n.node(o).maybeChild(n.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function _(e,t,r,i=r.contentMatch,o=!0){let a=e.doc.nodeAt(t),s=[],c=t+1;for(let t=0;t<a.childCount;t++){let l=a.child(t),u=c+l.nodeSize,d=i.matchType(l.type);if(d){i=d;for(let t=0;t<l.marks.length;t++)r.allowsMarkType(l.marks[t].type)||e.step(new h(c,u,l.marks[t]));if(o&&l.isText&&"pre"!=r.whitespace){let e,t=/\r?\n|\r/g,i;for(;e=t.exec(l.text);)i||(i=new n.p2(n.HY.from(r.schema.text(" ",r.allowedMarks(l.marks))),0,0)),s.push(new v(c+e.index,c+e.index+e[0].length,i))}}else s.push(new v(c,u,n.p2.empty));c=u}if(!i.validEnd){let t=i.fillBefore(n.HY.empty,!0);e.replace(c,c,new n.p2(t,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}function y(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let n=e.$from.node(r),i=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&n.canReplace(i,o,t))return r;if(0==r||n.type.spec.isolating||!((0==i||n.canReplace(i,n.childCount))&&(o==n.childCount||n.canReplace(0,o))))break}return null}function b(e,t,r=null,n=e){let i=function(e,t){let{parent:r,startIndex:n,endIndex:i}=e,o=r.contentMatchAt(n).findWrapping(t);if(!o)return null;let a=o.length?o[0]:t;return r.canReplaceWith(n,i,a)?o:null}(e,t),o=i&&function(e,t){let{parent:r,startIndex:n,endIndex:i}=e,o=r.child(n),a=t.contentMatch.findWrapping(o.type);if(!a)return null;let s=(a.length?a[a.length-1]:t).contentMatch;for(let e=n;s&&e<i;e++)s=s.matchType(r.child(e).type);return s&&s.validEnd?a:null}(n,t);return o?i.map(w).concat({type:t,attrs:r}).concat(o.map(w)):null}function w(e){return{type:e,attrs:null}}function k(e,t,r=1,n){let i=e.resolve(t),o=i.depth-r,a=n&&n[n.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=r-2;e>o;e--,t--){let r=i.node(e),o=i.index(e);if(r.type.spec.isolating)return!1;let a=r.content.cutByIndex(o,r.childCount),s=n&&n[t+1];s&&(a=a.replaceChild(0,s.type.create(s.attrs)));let c=n&&n[t]||r;if(!r.canReplace(o+1,r.childCount)||!c.type.validContent(a))return!1}let s=i.indexAfter(o),c=n&&n[0];return i.node(o).canReplaceWith(s,s,c?c.type:i.node(o+1).type)}function x(e,t){let r=e.resolve(t),n=r.index();return S(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function S(e,t){return!!(e&&t&&!e.isLeaf&&e.canAppend(t))}function E(e,t,r=-1){let n=e.resolve(t);for(let e=n.depth;;e--){let i,o,a=n.index(e);if(e==n.depth?(i=n.nodeBefore,o=n.nodeAfter):r>0?(i=n.node(e+1),a++,o=n.node(e).maybeChild(a)):(i=n.node(e).maybeChild(a-1),o=n.node(e+1)),i&&!i.isTextblock&&S(i,o)&&n.node(e).canReplace(a,a+1))return t;if(0==e)break;t=r<0?n.before(e):n.after(e)}}function T(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let e=0;e<r.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==r.openStart&&r.size?2:1);e++)for(let t=n.depth;t>=0;t--){let r=t==n.depth?0:n.pos<=(n.start(t+1)+n.end(t+1))/2?-1:1,o=n.index(t)+(r>0?1:0),a=n.node(t),s=!1;if(1==e)s=a.canReplace(o,o,i);else{let e=a.contentMatchAt(o).findWrapping(i.firstChild.type);s=e&&a.canReplaceWith(o,o,e[0])}if(s)return 0==r?n.pos:r<0?n.before(t+1):n.after(t+1)}return null}function C(e,t,r=t,i=n.p2.empty){if(t==r&&!i.size)return null;let o=e.resolve(t),a=e.resolve(r);return A(o,a,i)?new v(t,r,i):new I(o,a,i).fit()}function A(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}c.jsonID("replaceAround",g);class I{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=n.HY.empty;for(let t=0;t<=e.depth;t++){let r=e.node(t);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=n.HY.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,a=r.depth,s=i.depth;for(;a&&s&&1==o.childCount;)o=o.firstChild.content,a--,s--;let c=new n.p2(o,a,s);return e>-1?new g(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new v(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,n=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(n=0),i.type.spec.isolating&&n<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=1==t?e:this.unplaced.openStart;r>=0;r--){let e=null,i=(r?(e=O(this.unplaced.content,r-1).firstChild).content:this.unplaced.content).firstChild;for(let o=this.depth;o>=0;o--){let{type:a,match:s}=this.frontier[o],c,l=null;if(1==t&&(i?s.matchType(i.type)||(l=s.fillBefore(n.HY.from(i),!1)):e&&a.compatibleContent(e.type)))return{sliceDepth:r,frontierDepth:o,parent:e,inject:l};if(2==t&&i&&(c=s.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:o,parent:e,wrap:c};if(e&&s.matchType(e.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=O(e,t);return!!i.childCount&&!i.firstChild.isLeaf&&(this.unplaced=new n.p2(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=O(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new n.p2(R(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new n.p2(R(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let e=0;e<o.length;e++)this.openFrontierNode(o[e]);let a=this.unplaced,s=r?r.content:a.content,c=a.openStart-e,l=0,u=[],{match:d,type:h}=this.frontier[t];if(i){for(let e=0;e<i.childCount;e++)u.push(i.child(e));d=d.matchFragment(i)}let p=s.size+e-(a.content.size-a.openEnd);for(;l<s.childCount;){let e=s.child(l),t=d.matchType(e.type);if(!t)break;(++l>1||0==c||e.content.size)&&(d=t,u.push(function e(t,r,i){if(r<=0)return t;let o=t.content;return r>1&&(o=o.replaceChild(0,e(o.firstChild,r-1,1==o.childCount?i-1:0))),r>0&&(o=t.type.contentMatch.fillBefore(o).append(o),i<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(n.HY.empty,!0)))),t.copy(o)}(e.mark(h.allowedMarks(e.marks)),1==l?c:0,l==s.childCount?p:-1)))}let f=l==s.childCount;f||(p=-1),this.placed=P(this.placed,t,n.HY.from(u)),this.frontier[t].match=d,f&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=s;e<p;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==e?n.p2.empty:new n.p2(R(a.content,e-1,1),e-1,p<0?a.openEnd:e-1):new n.p2(R(a.content,e,l),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!D(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:r}=this.$to,n=this.$to.after(r);for(;r>1&&n==this.$to.end(--r);)++n;return n}findCloseLevel(e){t:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:n}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=D(e,t,n,r,i);if(o){for(let r=t-1;r>=0;r--){let{match:t,type:n}=this.frontier[r],i=D(e,r,n,t,!0);if(!i||i.childCount)continue t}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=P(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let t=e.node(r),n=t.type.contentMatch.fillBefore(t.content,!0,e.index(r));this.openFrontierNode(t.type,t.attrs,n)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=P(this.placed,this.depth,n.HY.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(n.HY.empty,!0);e.childCount&&(this.placed=P(this.placed,this.frontier.length,e))}}function R(e,t,r){return 0==t?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(R(e.firstChild.content,t-1,r)))}function P(e,t,r){return 0==t?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(P(e.lastChild.content,t-1,r)))}function O(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function D(e,t,r,n,i){let o=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==o.childCount&&!r.compatibleContent(o.type))return null;let s=n.fillBefore(o.content,!0,a);return s&&!function(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}(r,o.content,a)?s:null}function M(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let i=n;i>=0;i--){let n=e.start(i);if(n<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(n==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==n-1)&&r.push(i)}return r}class L extends c{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return l.fail("No node at attribute step's position");let r=Object.create(null);for(let e in t.attrs)r[e]=t.attrs[e];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return l.fromReplace(e,this.pos,this.pos+1,new n.p2(n.HY.from(i),0,t.isLeaf?0:1))}getMap(){return o.empty}invert(e){return new L(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new L(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new L(t.pos,t.attr,t.value)}}c.jsonID("attr",L);class N extends c{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return l.ok(r)}getMap(){return o.empty}invert(e){return new N(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new N(t.attr,t.value)}}c.jsonID("docAttr",N);let j=class extends Error{};(j=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r}).prototype=Object.create(Error.prototype),j.prototype.constructor=j,j.prototype.name="TransformError";class F{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new a}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new j(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=n.p2.empty){let i=C(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new n.p2(n.HY.from(r),0,0))}delete(e,t){return this.replace(e,t,n.p2.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return function(e,t,r,i){if(!i.size)return e.deleteRange(t,r);let o=e.doc.resolve(t),a=e.doc.resolve(r);if(A(o,a,i))return e.step(new v(t,r,i));let s=M(o,e.doc.resolve(r));0==s[s.length-1]&&s.pop();let c=-(o.depth+1);s.unshift(c);for(let e=o.depth,t=o.pos-1;e>0;e--,t--){let r=o.node(e).type.spec;if(r.defining||r.definingAsContext||r.isolating)break;s.indexOf(e)>-1?c=e:o.before(e)==t&&s.splice(1,0,-e)}let l=s.indexOf(c),u=[],d=i.openStart;for(let e=i.content,t=0;;t++){let r=e.firstChild;if(u.push(r),t==i.openStart)break;e=r.content}for(let e=d-1;e>=0;e--){var h;let t=u[e],r=(h=t.type).spec.defining||h.spec.definingForContent;if(r&&!t.sameMarkup(o.node(Math.abs(c)-1)))d=e;else if(r||!t.type.isTextblock)break}for(let t=i.openStart;t>=0;t--){let c=(t+d+1)%(i.openStart+1),h=u[c];if(h)for(let t=0;t<s.length;t++){let u=s[(t+l)%s.length],d=!0;u<0&&(d=!1,u=-u);let p=o.node(u-1),f=o.index(u-1);if(p.canReplaceWith(f,f,h.type,h.marks))return e.replace(o.before(u),d?a.after(u):r,new n.p2(function e(t,r,i,o,a){if(r<i){let n=t.firstChild;t=t.replaceChild(0,n.copy(e(n.content,r+1,i,o,n)))}if(r>o){let e=a.contentMatchAt(0),r=e.fillBefore(t).append(t);t=r.append(e.matchFragment(r).fillBefore(n.HY.empty,!0))}return t}(i.content,0,i.openStart,c),c,i.openEnd))}}let p=e.steps.length;for(let n=s.length-1;n>=0&&(e.replace(t,r,i),!(e.steps.length>p));n--){let e=s[n];e<0||(t=o.before(e),r=a.after(e))}}(this,e,t,r),this}replaceRangeWith(e,t,r){return function(e,t,r,i){if(!i.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let n=function(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(0==n.parentOffset)for(let e=n.depth-1;e>=0;e--){let t=n.index(e);if(n.node(e).canReplaceWith(t,t,r))return n.before(e+1);if(t>0)return null}if(n.parentOffset==n.parent.content.size)for(let e=n.depth-1;e>=0;e--){let t=n.indexAfter(e);if(n.node(e).canReplaceWith(t,t,r))return n.after(e+1);if(t<n.node(e).childCount)break}return null}(e.doc,t,i.type);null!=n&&(t=r=n)}e.replaceRange(t,r,new n.p2(n.HY.from(i),0,0))}(this,e,t,r),this}deleteRange(e,t){return function(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),o=M(n,i);for(let t=0;t<o.length;t++){let r=o[t],a=t==o.length-1;if(a&&0==r||n.node(r).type.contentMatch.validEnd)return e.delete(n.start(r),i.end(r));if(r>0&&(a||n.node(r-1).canReplace(n.index(r-1),i.indexAfter(r-1))))return e.delete(n.before(r),i.after(r))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(t-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o)return e.delete(n.before(o),r);e.delete(t,r)}(this,e,t),this}lift(e,t){return function(e,t,r){let{$from:i,$to:o,depth:a}=t,s=i.before(a+1),c=o.after(a+1),l=s,u=c,d=n.HY.empty,h=0;for(let e=a,t=!1;e>r;e--)t||i.index(e)>0?(t=!0,d=n.HY.from(i.node(e).copy(d)),h++):l--;let p=n.HY.empty,f=0;for(let e=a,t=!1;e>r;e--)t||o.after(e+1)<o.end(e)?(t=!0,p=n.HY.from(o.node(e).copy(p)),f++):u++;e.step(new g(l,u,s,c,new n.p2(d.append(p),h,f),d.size-h,!0))}(this,e,t),this}join(e,t=1){return function(e,t,r){let i=new v(t-r,t+r,n.p2.empty,!0);e.step(i)}(this,e,t),this}wrap(e,t){return function(e,t,r){let i=n.HY.empty;for(let e=r.length-1;e>=0;e--){if(i.size){let t=r[e].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=n.HY.from(r[e].type.create(r[e].attrs,i))}let o=t.start,a=t.end;e.step(new g(o,a,o,a,new n.p2(i,0,0),r.length,!0))}(this,e,t),this}setBlockType(e,t=e,r,i=null){return function(e,t,r,i,o){if(!i.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(t,r,(t,r)=>{var s,c;let l,u;if(t.isTextblock&&!t.hasMarkup(i,o)&&(s=e.doc,c=e.mapping.slice(a).map(r),u=(l=s.resolve(c)).index(),l.parent.canReplaceWith(u,u+1,i))){let s=null;if(i.schema.linebreakReplacement){let e="pre"==i.whitespace,t=!!i.contentMatch.matchType(i.schema.linebreakReplacement);e&&!t?s=!1:!e&&t&&(s=!0)}!1===s&&function(e,t,r,n){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(n).map(r+1+o);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}(e,t,r,a),_(e,e.mapping.slice(a).map(r,1),i,void 0,null===s);let c=e.mapping.slice(a),l=c.map(r,1),u=c.map(r+t.nodeSize,1);return e.step(new g(l,u,l+1,u-1,new n.p2(n.HY.from(i.create(o,null,t.marks)),0,0),1,!0)),!0===s&&function(e,t,r,n){t.forEach((i,o)=>{if(i.isText){let a,s=/\r?\n|\r/g;for(;a=s.exec(i.text);){let i=e.mapping.slice(n).map(r+1+o+a.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}(e,t,r,a),!1}})}(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return function(e,t,r,i,o){let a=e.doc.nodeAt(t);if(!a)throw RangeError("No node at given position");r||(r=a.type);let s=r.create(i,null,o||a.marks);if(a.isLeaf)return e.replaceWith(t,t+a.nodeSize,s);if(!r.validContent(a.content))throw RangeError("Invalid content for node type "+r.name);e.step(new g(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new n.p2(n.HY.from(s),0,0),1,!0))}(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new L(e,t,r)),this}setDocAttribute(e,t){return this.step(new N(e,t)),this}addNodeMark(e,t){return this.step(new p(e,t)),this}removeNodeMark(e,t){if(!(t instanceof n.vc)){let r=this.doc.nodeAt(e);if(!r)throw RangeError("No node at position "+e);if(!(t=t.isInSet(r.marks)))return this}return this.step(new f(e,t)),this}split(e,t=1,r){return function(e,t,r=1,i){let o=e.doc.resolve(t),a=n.HY.empty,s=n.HY.empty;for(let e=o.depth,t=o.depth-r,c=r-1;e>t;e--,c--){a=n.HY.from(o.node(e).copy(a));let t=i&&i[c];s=n.HY.from(t?t.type.create(t.attrs,s):o.node(e).copy(s))}e.step(new v(t,t,new n.p2(a.append(s),r,r),!0))}(this,e,t,r),this}addMark(e,t,r){var n;let i,o,a,s;return n=this,a=[],s=[],n.doc.nodesBetween(e,t,(n,c,l)=>{if(!n.isInline)return;let u=n.marks;if(!r.isInSet(u)&&l.type.allowsMarkType(r.type)){let l=Math.max(c,e),p=Math.min(c+n.nodeSize,t),f=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(f)||(i&&i.to==l&&i.mark.eq(u[e])?i.to=p:a.push(i=new h(l,p,u[e])));o&&o.to==l?o.to=p:s.push(o=new d(l,p,r))}}),a.forEach(e=>n.step(e)),s.forEach(e=>n.step(e)),this}removeMark(e,t,r){var i;let o,a;return i=this,o=[],a=0,i.doc.nodesBetween(e,t,(i,s)=>{if(!i.isInline)return;a++;let c=null;if(r instanceof n.ZU){let e=i.marks,t;for(;t=r.isInSet(e);)(c||(c=[])).push(t),e=t.removeFromSet(e)}else r?r.isInSet(i.marks)&&(c=[r]):c=i.marks;if(c&&c.length){let r=Math.min(s+i.nodeSize,t);for(let t=0;t<c.length;t++){let n=c[t],i;for(let e=0;e<o.length;e++){let t=o[e];t.step==a-1&&n.eq(o[e].style)&&(i=t)}i?(i.to=r,i.step=a):o.push({style:n,from:Math.max(s,e),to:r,step:a})}}}),o.forEach(e=>i.step(new h(e.from,e.to,e.style))),this}clearIncompatible(e,t,r){return _(this,e,t,r),this}}},446594:function(e,t,r){"use strict";function n(e,t){if(!e)throw Error("Invariant failed")}r.d(t,{Z:function(){return n}})}}]);