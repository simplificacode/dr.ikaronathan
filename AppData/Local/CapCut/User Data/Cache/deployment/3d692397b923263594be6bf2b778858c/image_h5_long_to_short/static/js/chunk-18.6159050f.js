/*!
* @ies/filter-xss v3.1.4
* (c) 2024
*/var e,t;e=this,t=function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var n=/[^a-zA-Z0-9\\_:.-]/gim,i=/</g,o=/>/g,s=/&#([a-zA-Z0-9]*);?/gim,a=/&quot;/g,c=/&colon;?/gim,u=/&newline;?/gim,l=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,d=/u\s*r\s*l\s*\(.*/gi,h=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,f=/"/g,p=function(e){return e.replace(i,"&lt;").replace(o,"&gt;")},v={indexOf:function(e,t){var r,n;for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1},forEach:function(e,t,r){var n,i;for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},some:function(e,t,r){var n,i;for(n=0,i=e.length;n<i;n++)if(t.call(r,e[n],n,e))return!0;return!1},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},includes:function(e,t){if("string"==typeof e)return -1!==e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},uniq:function(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(r.push(e[n]),t[e[n]]=!0);return r},from:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},keys:function(e){var t=[];for(var r in e)t.push(r);return t}};function g(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]?e.substr(1,e.length-2):e}function _(e){var t,r,n,i,o,s,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=function(e){e=e.replace(/rn/g,"n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?t+=String.fromCharCode(n>>6|192)+String.fromCharCode(63&n|128):t+=String.fromCharCode(n>>12|224)+String.fromCharCode(n>>6&63|128)+String.fromCharCode(63&n|128)}return t}(e);l<e.length;)i=(t=e.charCodeAt(l++))>>2,o=(3&t)<<4|(r=e.charCodeAt(l++))>>4,s=(15&r)<<2|(n=e.charCodeAt(l++))>>6,a=63&n,isNaN(r)?s=a=64:isNaN(n)&&(a=64),u=u+c.charAt(i)+c.charAt(o)+c.charAt(s)+c.charAt(a);return u}function m(e){var t,r,n,i,o,s,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");u<e.length;)t=a.indexOf(e.charAt(u++))<<2|(i=a.indexOf(e.charAt(u++)))>>4,r=(15&i)<<4|(o=a.indexOf(e.charAt(u++)))>>2,n=(3&o)<<6|(s=a.indexOf(e.charAt(u++))),c+=String.fromCharCode(t),64!==o&&(c+=String.fromCharCode(r)),64!==s&&(c+=String.fromCharCode(n));return function(e){for(var t="",r=0,n=0,i=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(t+=String.fromCharCode((31&n)<<6|63&e.charCodeAt(r+1)),r+=2):(t+=String.fromCharCode((15&n)<<12|(63&e.charCodeAt(r+1))<<6|63&e.charCodeAt(r+2)),r+=3);return t}(c)}function y(e,t,r){var n="",i=0,o=!1,s=!1,a=0,c=e.length,u="",l="";e:for(a=0;a<c;a++){var d=e.charAt(a);if(!1===o){if("<"===d){o=a;continue}}else if(!1===s){if("<"===d){n+=r(e.slice(i,a)),o=a,i=a;continue}if(">"===d||a===c-1){n+=r(e.slice(i,o)),u=function(e){var t,r=v.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=v.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}(l=e.slice(o,a+1)),n+=t(o,n.length,u,l,"</"===l.slice(0,2)),i=a+1,o=!1;continue}if('"'===d||"'"===d)for(var h=1,f=e.charAt(a-h);""===f.trim()||"="===f;){if("="===f){s=d;continue e}f=e.charAt(a-++h)}}else if(d===s){s=!1;continue}}return i<c&&(n+=r(e.substr(i))),n}function b(e,t){var r=0,i=0,o=[],s=!1,a=e.length;function c(e,r){if(!((e=(e=v.trim(e)).replace(n,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&o.push(i)}}for(var u=0;u<a;u++){var l=e.charAt(u),d=void 0;if(!1!==s||"="!==l){if(!1===s||u!==i){if(/\s|\n|\t/.test(l)){if(e=e.replace(/\s|\n|\t/g," "),!1===s){if(-1===(d=function(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}return -1}(e,u))){c(v.trim(e.slice(r,u))),s=!1,r=u+1;continue}u=d-1;continue}if(-1===(d=function(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}return -1}(e,u-1))){c(s,g(v.trim(e.slice(r,u)))),s=!1,r=u+1;continue}}}else{if(-1===(d=e.indexOf(l,u+1)))break;c(s,v.trim(e.slice(i+1,d))),s=!1,r=(u=d)+1}}else s=e.slice(r,u),r=u+1,i='"'===e.charAt(r)||"'"===e.charAt(r)?r:function(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}return -1}(e,u+1)}return r<e.length&&(!1===s?c(e.slice(r)):c(s,g(v.trim(e.slice(r))))),v.trim(o.join(" "))}function w(e,t,r){var n,i;if(r=function(e){for(var t="",r=0,n=e.length;r<n;r++)t+=32>e.charCodeAt(r)?" ":e.charAt(r);return v.trim(t)}(r.replace(a,'"').replace(s,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}).replace(c,":").replace(u," ")),"href"===t||"src"===t){if("#"===(r=v.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(l.lastIndex=0,l.test(r))return""}else if("style"===t&&(h.lastIndex=0,h.test(r)||(d.lastIndex=0,d.test(r)&&(l.lastIndex=0,l.test(r)))))return"";return r=p(r.replace(f,"&quot;"))}var k=function(e){return"string"==typeof e?e.replace(/'/g,'"').replace('=""',"").replace(/\s+/g,"").toLowerCase():""},E=function(){function e(e){var t=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{});t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=function(){return""}),t.whiteList={},t.onTag=function(){},t.onTagAttr=function(){},t.onIgnoreTag=function(){},t.onIgnoreTagAttr=function(){},t.safeAttrValue=w,t.escapeHtml=p,this.options=Object.assign(t,e)}return e.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t,r,n,i,o,s=this.options,a=s.whiteList,c=s.onTag,u=s.onIgnoreTag,l=s.onTagAttr,d=s.onIgnoreTagAttr,h=s.safeAttrValue,f=s.escapeHtml;s.stripBlankChar&&(e=e.split("").filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}).join("")),s.allowCommentTag||(e=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("<!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var i=e.indexOf("-->",n);if(-1===i)break;r=i+3}return t}(e));var p=!1;s.stripIgnoreTagBody&&(t=s.stripIgnoreTagBody,"function"!=typeof(r=u)&&(r=function(){}),n=!Array.isArray(t),i=[],o=!1,u=(p={onIgnoreTag:function(e,s,a){if(n||-1!==v.indexOf(t,e)){if(a.isClosing){var c=a.position+10;return i.push([!1!==o?o:a.position,c]),o=!1,"[/removed]"}return o||(o=a.position),"[removed]"}return r(e,s,a)},remove:function(e){var t="",r=0;return v.forEach(i,function(n){t+=e.slice(r,n[0]),r=n[1]}),t+=e.slice(r)}}).onIgnoreTag);var g=y(e,function(e,t,r,n,i){var o={sourcePosition:e,position:t,isClosing:i,isWhite:Object.prototype.hasOwnProperty.call(a,r)},s=c(r,n,o);if(null!=s)return s;if(o.isWhite){if(o.isClosing)return"</".concat(r,">");var p=function(e){var t=v.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=v.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=v.trim(e.slice(0,-1))),{html:e,closing:r}}(n),g=a[r],_=b(p.html,function(e,t){var n=-1!==v.indexOf(g,e),i=l(r,e,t,n);return null==i?n?(t=h(r,e,t,null))?"".concat(e,'="').concat(t,'"'):e:null==(i=d(r,e,t,n))?void 0:i:i});return n="<".concat(r),_&&(n+=" ".concat(_)),p.closing&&(n+=" /"),n+=">"}return null==(s=u(r,n,o))?f(n):s},f);return p&&(g=p.remove(g)),g},e}(),S=!0,x=function(e){return e&&e.Math==Math&&e},T=x("object"==typeof globalThis&&globalThis)||x("object"==typeof window&&window)||x("object"==typeof self&&self)||x("object"==typeof global&&global)||Function("return this")();try{!0!==(S=!!(S=String(S)).startsWith("<%=")||JSON.parse(S))&&"true"!==S||(T=Function("\nvar _checkXSS = function (it) {\n  return it && it.Math == Math && it;\n};\nreturn _checkXSS(typeof globalThis === 'object' && globalThis) ||\n_checkXSS(typeof window === 'object' && window) ||\n_checkXSS(typeof self === 'object' && self) ||\n_checkXSS(typeof global === 'object' && global) ||\nFunction('return this')();\n")())}catch(e){console.log(e)}var I=new(function(){function e(){var e=this;this.batchData=[],this.uniqKeys=new Set,this.timeout=2e3,this.lock=!1,this.isSetedConfig=!1,this.getSlardarBid=function(){var t,r,n="cc_web_smart_tools";if(!v.includes(n,"bid"))return n;if(e.config&&e.config.bid)return e.config.bid;var i=T;if(i&&i._xssBid)return i._xssBid;if(i&&i.slardar&&"function"==typeof i.slardar.config){var o=(i.slardar.config()||{}).bid;if(o)return o}if(i&&i.Slardar&&"function"==typeof i.Slardar.config){var s=(i.Slardar.config()||{}).bid;if(s)return s}return(null===(r=null===(t=null==i?void 0:i.Slardar)||void 0===t?void 0:t._baseParams)||void 0===r?void 0:r.bid)||"argus"},this.getConfigRegion=function(){var t,r="maliva";return v.includes(r,"region")?e.config&&e.config.region?e.config.region:((null===(t=null==T?void 0:T.gfdatav1)||void 0===t?void 0:t.region)||"cn").toLowerCase():r},this.gerReportUrl=function(){var t={cn:m("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:m("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:m("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:m("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:m("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:m("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:m("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9")}[e.getConfigRegion()];if(t)return t+e.getSlardarBid()}}return e.prototype.setConfig=function(e){this.isSetedConfig||(this.config=e)},e.prototype.upload=function(){var e=this;if(!this.config||!this.config.isCloseSSRReport||(null==T?void 0:T.document)){var t=!1;t=String(!1);try{if((!0===(t=!t.startsWith("<%=")&&JSON.parse(t))||"true"===t)&&!(null==T?void 0:T.document))return}catch(e){console.log(e)}var r=this.gerReportUrl();!this.lock&&r&&0!==this.batchData.length&&(this.lock=!0,setTimeout(function(){var t=e.batchData.slice(0,100);e.batchData=e.batchData.slice(100),T.fetch(r,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).catch(function(e){console.warn("xss defense report error",e)}),e.lock=!1,e.upload()},this.timeout))}},e.prototype.generateKey=function(e){return e.collectKey?[e.collectMode,e.collectKey].join("___"):""},e.prototype.push=function(e){this.batchData.push(e),this.upload()},e.prototype.report=function(e){var t=this.generateKey(e);if(T.fetch&&e.collectKey){var r="SSR";void 0!==T&&void 0!==T.location&&void 0!==T.location.href&&(r=T.location.href),e.documentUrl=r;var n={age:Math.floor(Date.now()),type:"xss",url:r,body:e,"user-agent":""};n.url="".concat(t,"___").concat(e.documentUrl),"SSR"===r&&(n.url="SSR___".concat(n.url),n.body.ssr=!0),this.push(n)}},e}());function A(e,t){return I.setConfig(t),new E(t).process(e)}var P=function(e){return -1===(e=(e=(e=(e=e.replace(/&colon;/gi,":")).replace(/&tab;/gi,"")).replace(/&newline;/gi,"")).replace(/(\t|\n|\r)/g,"")).indexOf("&#")?e.trim().toLowerCase():e.trim().replace(/&#(?:(x)([0-9a-f]+)|([0-9]+));?/gi,function(e,t,r,n){return String.fromCharCode(t?parseInt(r,16):parseInt(n))}).replace(/(\t|\n|\r)/g,"").toLowerCase()};function C(e,t){if(void 0===e&&(e=""),"string"!=typeof e)return!0;if(e=P(e),v.includes(e,"base64")&&!function(e){if(""===e||""===e.trim())return!0;try{return!v.includes(e,"data:text/html;base64")}catch(e){return!0}}(e))return t&&t("data:text/html;base64"),!1;var r=["expression(","behavior:","view-source:"];if(v.some(r,function(t){return -1!==e.indexOf(t)}))return v.forEach(r,function(r){-1!==e.indexOf(r)&&t&&t(r)}),!1;var n=["data:application","data:javascript","data:text/html","data:texthtml"];if(v.some(n,function(t){return -1!==e.indexOf(t)}))return v.forEach(n,function(r){-1!==e.indexOf(r)&&t&&t(r)}),!1;if(e.indexOf("javascript:")>0)return t&&t("javascript:"),!1;if(/^javascript:/i.test(e)){var i=e.slice(11).replace(/\s/g,"").trim();return!!v.some(["void","void(0)","void0","false","undefined",";"],function(e){return e===i})||(t&&t("javascript:"),!1)}return!0}var R=function(e,t){var r,n,i=!1;if(i=String(!1),"string"!=typeof e||(n=Number(1e4),void 0!==r&&(n=r),"NaN"!==n.toString()&&-1!==n&&e.length>=n)||C(e,t))return e;try{if(!0===(i=!i.startsWith("<%=")&&JSON.parse(i))||"true"===i){var o=new URL(e);return o.origin+o.pathname}}catch(e){return console.log(e),"#"}return"#"};function D(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=[]),"string"!=typeof e)return!0;if(!C(e=P(e)))return!1;var i,o={url:(i=e.match(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/)||[])[0],scheme:i[1],slash:i[2],host:i[3],port:i[4],path:i[5],query:i[6],hash:i[7]},s=o.scheme,a=o.host;return n?!!n(e):!(!s||!a)&&(!v.includes(["http","https","file"],s)||("object"==typeof window&&window&&(t=r(r([],t,!0),[location.host],!1)),v.some(t,function(e){return!!(e instanceof RegExp&&e.test(a))||e===a})))}var L=function(e,t){for(var r={},n=0,i=v.keys(e);n<i.length;n++){var o=i[n];Array.isArray(e[o])?r[o]=v.from(e[o]):r[o]=L({},e[o])}for(var s=0,a=v.keys(t);s<a.length;s++)(o=a[s])in e?Array.isArray(e[o])?r[o]=e[o].concat(t[o]):r[o]=L(e[o],t[o]):Array.isArray(t[o])?r[o]=v.from(t[o]):r[o]=L({},t[o]);return r},N={blackList:{a:["folder"],meta:["content"],iframe:["srcdoc"],input:["pattern"],vmlframe:["xmlns"]},blackTags:["script","xml","embed","isindex","object","base","set","handler","animate","payload","import"],blackAttrs:["charset","ns","namespace","formaction","xlink:href","xmlns:xlink","handler","repeat","repeat-start","repeat-end"],blackAttrRegExps:[/^on/],filterList:{param:["value"],video:["poster"],form:["action"]},filterAttrs:["href","src","background","style","dynsrc","lowsrc","content"],specialContentClosure:["title","style","noscript","textarea","xmp","iframe","noembed","noframes"]};try{var O={};O.blackAttrRegExps&&(O.blackAttrRegExps=O.blackAttrRegExps.map(function(e){return new RegExp(e.toString().slice(1,e.toString().length-1))}));var F="merge";v.includes(F,"override")&&(N=O),v.includes(F,"merge")&&(N=L(N,O))}catch(e){console.log(e)}var B={mode:"black",whiteList:{},blackConfig:N,collect:null,initCollect:function(){B.collect={blackList:{},blackTags:[],blackAttrs:[],blackAttrRegExps:[],filterAttrs:[],filterList:{},filterProtocol:[]}},removeCollect:function(){var e=function(e){for(var t=0,r=function(r){Array.isArray(e[r])?0===e[r].length?delete e[r]:(e[r]=v.from(v.uniq(e[r])),t+=e[r].length):0===v.keys(e[r]).length?delete e[r]:v.keys(e[r]).forEach(function(n){e[r][n]=v.from(v.uniq(e[r][n])),t+=e[r][n].length})},n=0,i=v.keys(e);n<i.length;n++)r(i[n]);return{count:t,ret:e}}(B.collect),t=e.count,r=e.ret;return B.collect=null,{collectKey:0===t?null:JSON.stringify(r),collectMode:"black"}},onIgnoreTag:function(e,t){var r;if(!v.includes(N.blackTags,e))return y(t,function(e,t,r,n,i){if(-1!==r.indexOf("/"))return p(n);if(i)return"</".concat(r,">");var o=function(e){var t,r=(t=/\s|\n|\t/.exec(e))?t.index:-1;if(-1===r)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=e.slice(r+1,-1).trim())[e.length-1];return n&&(e=e.slice(0,-1).trim()),{html:e,closing:n}}(n),s=b(o.html,function(e,t){var n,i,o=0;if(N.blackList[r]&&v.includes(N.blackList[r],e)&&(B.collect.blackList[r]=B.collect.blackList[r]||[],B.collect.blackList[r].push(e),o++),N.blackAttrRegExps.length&&N.blackAttrRegExps.some(function(t){return t.test(e)})&&v.forEach(N.blackAttrRegExps,function(t){t.test(e)&&(B.collect.blackAttrRegExps.push("".concat(t.toString(),"->").concat(e)),o++)}),N.blackAttrs.length&&v.includes(N.blackAttrs,e)&&(N.blackAttrs.push(e),o++),!o){if(Array.isArray(N.specialContentClosure)&&"string"==typeof t&&N.specialContentClosure.find(function(e){return t.includes("</".concat(e,">"))})){null===(n=B.collect)||void 0===n||n.filterAttrs.push(e);var s="#";return t?"".concat(e,"='").concat(s,"'"):e}return N.filterList&&N.filterList[r]&&v.includes(N.filterList[r],e)?((s=R(t,function(e){var t;null===(t=B.collect)||void 0===t||t.filterProtocol.push(e)}))!==t&&(B.collect.filterList[r]=B.collect.filterList[r]||[],B.collect.filterList[r].push(e)),t?"".concat(e,"='").concat(s,"'"):e):N.filterAttrs&&v.includes(N.filterAttrs,e)?((s=R(t,function(e){var t;null===(t=B.collect)||void 0===t||t.filterProtocol.push(e)}))!==t&&(null===(i=B.collect)||void 0===i||i.filterAttrs.push(e)),t?"".concat(e,"='").concat(s,"'"):e):t?"".concat(e,"='").concat(t,"'"):e}});return n="<".concat(r),s&&(n+=" ".concat(s)),o.closing&&(n+=" /"),n+=">"},p);null===(r=B.collect)||void 0===r||r.blackTags.push(e)}},j=function(e){var t=e.reportOnly,r=void 0===t||t,n=e.block;return r&&"all"===r?"report":("string"==typeof r&&("true"===r&&(r=!0),"false"===r&&(r=!1)),n?"enforce":r?"report":"enforce")},M=function(e){return function(r,n,i){if(!r||"string"!=typeof r)return r;var o=n;e===A&&(o=B).initCollect();var s=e(r,o);if(k(s)===k(r))return r;if(!i)return s;var a=i.logType,c=j(i),u=o.removeCollect();return I.report(t(t({type:a,disposition:c},u),{sourceText:_(r.replace(/'/g,'"')),filterText:_(s.replace(/'/g,'"'))})),"enforce"===c?s:r}},H=M(function(e,t){return void 0===t&&(t={}),t&&t.whiteList||(t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}),new E(t).process(e)}),U=M(A),Z=function(e,t,r){var n=[],i=R(e,function(e){n.push(e)});if(i===e)return e;n=v.from(v.uniq(n));var o=t||r||{};if(!o)return i;var s=o.logType,a=j(r);return I.report({type:s,disposition:a,collectKey:n.join("___"),collectData:JSON.stringify(n),collectMode:"black",sourceText:_(e),filterText:_(i)}),"enforce"===a?i:e},V=T._xssProject||{},G=T.xssNamespace||{},W="3.1.4",K={FilterXSS:E,version:W,webpackPluginVersion:"3.1.9",reportOnly:"all",filterXSS:H,_filterXSS:U,filterUrl:Z,BlackConfig:B,project:V,setProjectName:function(e){V[e]=this,T._xssProjectName=e}};G["lvweb/smart-tools"]=K,T.xssNamespace=G,T.Math&&!T.Math.xssNamespace&&(T.Math.xssNamespace=G),V[W]=K,T.globalThis=T,T.getFilterXss=function(){return void 0!==this._xssProjectName?this._xssProject[this._xssProjectName]:K},T.xss=K,T.isSafeUrl=D,T.isSafeDomain=D,T.isSafeProtocol=C,T._xssProject=V,T._xssProjectName&&(V[T._xssProjectName]=K);var z=K.setProjectName.bind(K);e.BlackConfig=B,e.FilterXSS=E,e._filterXSS=U,e.filterUrl=Z,e.filterXSS=H,e.isSafeDomain=D,e.isSafeProtocol=C,e.isSafeUrl=D,e.project=V,e.setProjectName=z,e.setXssNamespace=function(e){var t=e.appId,r=e.bid,n=e.region,i=e.isCloseSSRReport;G[t]=K,B.bid=r,B.region=n,B.enabled=!0,B.isCloseSSRReport=i},e.xssNamespace=G,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xss={}),(self.webpackChunksmart_tools=self.webpackChunksmart_tools||[]).push([["1917"],{123772:function(e,t,r){"use strict";r(642470),r(68204),r(945462)},287210:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(269001),o=r(471664),s=r(650093);t.default=function(e){var t=this;this.sendCode=function(e){var r=e.mobile,s=e.extra_params,a=(0,i.encryptParams)(n({mobile:r,type:7},void 0===s?{}:s),["mobile","type"]);return t.request({url:o.WEB_AFF_URL.SEND_MOBILE_CODE,method:"POST",data:a})},this.smsLogin=function(e){var r=e.mobile,s=e.code,a=e.need_frozen_user,c=e.extra_params,u=(0,i.encryptParams)(n({mobile:r,code:s,need_frozen_user:void 0===a?0:a,type:7},void 0===c?{}:c),["mobile","type","code"]);return t.request({url:o.WEB_AFF_URL.SMS_LOGIN,method:"POST",data:u})},this.sendEmailCode=function(e){var r=e.email,s=e.extra_params,a=(0,i.encryptParams)(n({email:r,type:13},void 0===s?{}:s),["email","type"]);return t.request({url:o.WEB_AFF_URL.SEND_EMAIL_CODE,method:"POST",data:a})},this.emailLogin=function(e){var r=e.email,s=e.code,a=e.need_frozen_user,c=e.extra_params,u=(0,i.encryptParams)(n({email:r,code:s,need_frozen_user:void 0===a?0:a,type:13},void 0===c?{}:c),["email","type","code"]);return t.request({url:o.WEB_AFF_URL.EMAIL_LOGIN,method:"POST",data:u})},this.pwdLogin=function(e){var r,s=e.password,a=e.need_frozen_user,c=e.extra_params,u=["email","username","mobile","account"].find(function(t){return!!e[t]});if(!u)return Promise.reject();var l=(0,i.encryptParams)(n(((r={password:s})[u]=e[u],r.need_frozen_user=void 0===a?0:a,r),void 0===c?{}:c),["password",u]);return t.request({url:o.WEB_AFF_URL.PWD_LOGIN,method:"POST",data:l})},this.oauthLoginCall=function(e){var t=e.platform_app_id,r=e.next,a=e.extra_params,c=(0,s.get)("initProps")||{},u=c.aid,l=c.subjectAid,d=(0,i.objectToString)(n({platform_app_id:t,next:r,aid:u,subject_aid:l,account_sdk_source:"web"},void 0===a?{}:a));window.location.href="".concat(o.WEB_AFF_URL.OAUTH_LOGIN_CALL,"?").concat(d)},this.oauthLogin=function(e){var r=e.platform_app_id,i=e.redirect_uri,s=e.code,a=e.need_frozen_user,c=e.login_only,u=e.extra_params;return t.request({url:void 0===c||c?o.WEB_AFF_URL.OAUTH_LOGIN_ONLY:o.WEB_AFF_URL.OAUTH_LOGIN,method:"POST",data:n({platform_app_id:r,redirect_uri:i,code:s,need_frozen_user:void 0===a?0:a},void 0===u?{}:u)})},this.subjectLoginList=function(e){void 0===e&&(e={});var r=e.extra_params;return t.request({url:o.WEB_AFF_URL.SUBJECT_LOGIN_LIST,method:"GET",data:void 0===r?{}:r})},this.subjectLogin=function(e){var r=e.login_subject_uid,s=e.user_identity_id,a=e.extra_params,c=(0,i.encryptParams)(n({login_subject_uid:r,user_identity_id:void 0===s?"0":s},void 0===a?{}:a),["login_subject_uid","user_identity_id"]);return t.request({url:o.WEB_AFF_URL.SUBJECT_LOGIN,method:"POST",data:c})},this.logout=function(e){var r=e.next,a=e.not_redirect,c=(0,s.get)("initProps")||{},u={account_sdk_source:"web",aid:c.aid,subject_aid:c.subjectAid,next:void 0===r?"":r};if(void 0!==a&&a)return t.request({url:o.WEB_AFF_URL.LOGOUT,method:"GET",data:n(n({},u),{next:encodeURIComponent(u.next)})});window.location.href="".concat(o.WEB_AFF_URL.LOGOUT,"?").concat((0,i.objectToString)(u))},this.memberSwitch=function(e){var r=e.to_sec_member_id,i=e.extra_params;return t.request({url:o.WEB_AFF_URL.MEMBER_SWITCH,method:"POST",data:n({to_sec_member_id:r},void 0===i?{}:i)})};var r=e.request;this.request=r}},436398:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(471664);t.default=function(e){var t=this;this.createUserWithRole=function(e){var r=e.role_key,o=e.sec_user_id,s=e.name,a=e.identity_id,c=e.subject_uid,u=e.extra_params,l=void 0===u?{}:u;return new Promise(function(e,u){t.request({url:i.WEB_AFF_URL.CREATE_USER_WITH_ROLE,method:"POST",data:n({role_key:r,sec_user_id:o,name:s,identity_id:a,subject_uid:c},l)}).then(function(t){e(t)}).catch(function(e){u(e)})})},this.addUserRole=function(e){var r=e.role_key,o=e.sec_user_identity_ids,s=e.subject_uid,a=e.extra_params,c=void 0===a?{}:a;return new Promise(function(e,a){t.request({url:i.WEB_AFF_URL.ADD_USER_ROLE,method:"POST",data:n({role_key:r,sec_user_identity_ids:o,subject_uid:s},c)}).then(function(t){e(t)}).catch(function(e){a(e)})})},this.deleteUserRole=function(e){var r=e.role_key,o=e.sec_user_identity_ids,s=e.subject_uid,a=e.extra_params,c=void 0===a?{}:a;return new Promise(function(e,a){t.request({url:i.WEB_AFF_URL.DELETE_USER_ROLE,method:"POST",data:n({role_key:r,sec_user_identity_ids:o,subject_uid:s},c)}).then(function(t){e(t)}).catch(function(e){a(e)})})},this.getUserRoleList=function(e){var r=e.subject_uid,o=e.extra_params,s=void 0===o?{}:o;return new Promise(function(e,o){t.request({url:i.WEB_AFF_URL.USER_ROLE_LIST,method:"GET",data:n({subject_uid:r},s)}).then(function(t){e(t)}).catch(function(e){o(e)})})},this.getAllUserRoleList=function(e){var r=e.subject_uid,o=e.identity_id,s=e.page,a=void 0===s?1:s,c=e.page_size,u=void 0===c?10:c,l=e.extra_params,d=void 0===l?{}:l;return new Promise(function(e,s){t.request({url:"".concat(i.WEB_AFF_URL.ALL_USER_ROLE_LIST).concat(a,"/"),method:"GET",data:n({subject_uid:r,identity_id:o,page_size:u},d)}).then(function(t){e(t)}).catch(function(e){s(e)})})},this.getUserPermissions=function(e){var r=e.subject_uid,o=e.extra_params,s=void 0===o?{}:o;return new Promise(function(e,o){t.request({url:i.WEB_AFF_URL.USER_PERMISSIONS,method:"GET",data:n({subject_uid:r},s)}).then(function(t){e(t)}).catch(function(e){o(e)})})};var r=e.request;this.request=r}},563555:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(269001),o=r(471664);t.default=function(e){var t=this;this.checkMobileRegistered=function(e){var r=e.mobile,s=e.extra_params,a=(0,i.encryptParams)(n({mobile:r},void 0===s?{}:s),["mobile"]);return new Promise(function(e,r){t.request({url:o.WEB_URL.CHECK_MOBILE_REGISTER,method:"POST",data:a}).then(function(t){e(t)}).catch(function(e){r(e)})})},this.checkEmailRegistered=function(e){var r=e.email,s=e.extra_params,a=(0,i.encryptParams)(n({email:r},void 0===s?{}:s),["email"]);return t.request({url:o.WEB_URL.CHECK_EMAIL_REGISTER,method:"POST",data:a})};var r=e.request;this.request=r}},873815:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.after=void 0;var i=r(527116),o=r(269001),s=r(650093);t.after=function(e){var t,r,a,c=(null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.url)||"",u=(null===(r=null==e?void 0:e.headers)||void 0===r?void 0:r["x-tt-logid"])||"",l=function(e){var t,r,n=(null===(r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.data)||void 0===r?void 0:r.response)||(null==e?void 0:e.data)||{};if("string"==typeof n)try{n=JSON.parse(n)}catch(e){console.log("fetch",e)}return n}(e),d=(0,s.get)("initProps"),h=(null==d?void 0:d.printLog)||!1;if((null==l?void 0:l.message)==="success")return h&&(0,o.printGroupLog)("call ".concat(c," result >>>>"),{SUCCESS:l.data,Logid:u},!1),Promise.resolve(l.data);h&&(0,o.printGroupLog)("call ".concat(c," result >>>>"),{ERROR:l.data,Logid:u},!1);var f=!(null==d?void 0:d.appShowCaptcha),p=null===(a=null==l?void 0:l.data)||void 0===a?void 0:a.verify_center_decision_conf;return f&&p?Promise.resolve(i.sliderView.show({verifyData:p,requestConfig:null==e?void 0:e.config})):Promise.reject(n(n({},l.data),{log_id:u}))}},835628:function(e,t,r){"use strict";t.default=void 0;var n=r(218571);function i(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=r.onEnter,c=r.onLeave,u=(0,n.useRef)(),l=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),2!==r.length);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}(t,2)||i(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=l[0],h=l[1],f=(0,n.useCallback)(function(){a&&a(),h(!0)},["function"==typeof a]),p=(0,n.useCallback)(function(){c&&c(),h(!1)},["function"==typeof c]);return(0,n.useLayoutEffect)(function(){var t=u.current;if(e&&(t="function"==typeof e?e():e),t)return t.addEventListener("mouseenter",f),t.addEventListener("mouseleave",p),function(){var e,r;null===(e=t)||void 0===e||e.removeEventListener("mouseenter",f),null===(r=t)||void 0===r||r.removeEventListener("mouseleave",p)}},[u.current,"function"==typeof e?void 0:e].concat(function(e){if(Array.isArray(e))return o(e)}(s)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(s)||i(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),[u,d]}},879672:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(571456),i=r(935892),o=r(74969),s=r(913736),a=r(515402),c=r(859933),u=r(227478),l=r(962472),d=r(683132),h=(0,u.tT)().maxDecodeOnceWasm,f=function(e){(0,n.XW)(r,e);var t=(0,n.WY)(r);function r(){var e;(0,n.PA)(this,r);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,n._x)((0,n.Lc)(e),"TAG","WasmController"),(0,n._x)((0,n.Lc)(e),"_avccpushed",!1),(0,n._x)((0,n.Lc)(e),"_maxDecodeOnce",h),(0,n._x)((0,n.Lc)(e),"_continueDecodeThreshold",h/2),(0,n._x)((0,n.Lc)(e),"_wasmInitCost",0),(0,n._x)((0,n.Lc)(e),"_threadSupported",(0,u.Bo)()&&(0,u.tT)().canUseThreadMode),(0,n._x)((0,n.Lc)(e),"_simdSuppported",(0,u.yJ)()),(0,n._x)((0,n.Lc)(e),"_decoderMode",window.WebAssembly?3:4),e}return(0,n.qH)(r,[{key:"wasmInitCost",get:function(){var e;return null===(e=this._decoderWorker)||void 0===e?void 0:e._wasmInitCost}},{key:"isHevc",get:function(){var e;return null===(e=this._parent)||void 0===e?void 0:e.isHevc}},{key:"_selectDecodeWorker",value:function(){this.analyse.addWasmInit();var e,t=(0,u.P_)(),r=t.H264_DECODER_URL,n=t.H265_DECODER_URL,i=t.H265_THREAD_DECODER_URL,c=t.H265_SIMD_DECODER_URL,l=t.ASM_H264_DECODER_URL,h=t.ASM_H265_DECODER_URL;if(d.kg.log(this.TAG,"start init wasm worker:",performance.now(),"hevc:",this.isHevc,"decoderMode:",this._decoderMode),this.isHevc){if(!(e=1===this._decoderMode?i:2===this._decoderMode?c:3===this._decoderMode?n:h)){this._workerErrorCallback("no found decoder url, decodeMode:".concat(this._decoderMode));return}return{decoder:1===this._decoderMode?new s.Z:(0,u.P_)().HEVC_WORKER_URL?new Worker((0,u.P_)().HEVC_WORKER_URL):new o.Z,url:e}}if(!(e=4===this._decoderMode?l:r)){this._workerErrorCallback("no found decoder url, decodeMode:".concat(this._decoderMode));return}return{decoder:(0,u.P_)().AVC_WORKER_URL?new Worker((0,u.P_)().AVC_WORKER_URL):new a.Z,url:e}}},{key:"_initWorker",value:function(){this.isHevc&&(this._threadSupported&&(this._decoderMode=1),this._simdSuppported&&(this._decoderMode=2)),this._initDecodeWorkerInternal()}},{key:"_initDecodeWorkerInternal",value:function(){var e=l.Z.getCachedDecoder(this.isHevc);if(e){d.kg.warn(this.TAG,"select decoder from cache"),this.analyse.addWasmInit(),this._avccpushed=!1,this._bindWorkerEvent(e),this._decoderWorker=e,e.ready&&(this._decoderReady=!0,this._initDecoderWithConfiguration(e,this.meta),this._workerMessageCallback({type:"DECODER_READY",data:e}),d.kg.log(this.TAG,"decoder ready!"));return}var t=this._selectDecodeWorker()||{},r=t.decoder,n=t.url;r&&(this._avccpushed=!1,this._bindWorkerEvent(r),r.isHevc=this.isHevc,r.postMessage({msg:"init",meta:{},batchDecodeCount:h,url:n}),this._decoderWorker=r)}},{key:"_bindWorkerEvent",value:function(e){var t=this,r=function(r,n){d.kg.log(t.TAG,"worker failed: ",r,n),t._terminateWorker(e),t._decoderWorker=null,!1===(0,u.tT)().wasmFallbackToAsm||4===t._decoderMode?t._workerErrorCallback(r):(t._decoderMode=1===t._decoderMode||2===t._decoderMode?3:4,t._initDecodeWorkerInternal())};e._onMessage=function(n){var i,o;switch(n.data.msg){case"DECODER_READY":if(d.kg.log(t.TAG,"wasm worker ready!","cost:",n.data.cost),t._decoderReady=!0,e._wasmInitCost=parseInt(n.data.cost),!t.meta)return;t._avccpushed||t._initDecoderWithConfiguration(e,t.meta),t.emit(c.ZP.VIDEO.VIDEO_DECODER_INIT,e),t._workerMessageCallback({type:"DECODER_READY",data:e});break;case"DECODED":if(t._inDecoding=!0,(null===(i=n.data)||void 0===i?void 0:null===(o=i.info)||void 0===o?void 0:o.id)!==t._id)return;t._workerMessageCallback({type:"RECEIVE_FRAME",data:n.data});break;case"BATCH_FINISH_FLAG":if(t._inDecoding=!1,!t._workerMessageCallback)return;t._workerMessageCallback({type:"BATCH_FINISH"});break;case"INIT_FAILED":r(n.data.log,1)}},e._onError=function(e){r(e.message,2)},e.addEventListener("message",e._onMessage),e.addEventListener("error",e._onError)}},{key:"_initDecoderWithConfiguration",value:function(e,t){d.kg.log(this.TAG,"init decoder with configuration"),this._avccpushed=!0,e.postMessage({msg:"updatemeta",meta:{}});var r=[t.rawVps||t.vps[0],t.rawSps||t.sps[0],t.rawPps||t.pps[0]].filter(Boolean),n=new Uint8Array(r.reduce(function(e,t){return e+(t.byteLength+4)},0)),i=0;r.forEach(function(e){n.set([0,0,0,1],i),i+=4,n.set(e,i),i+=e.byteLength}),e.postMessage({msg:"initDecoder",data:n})}},{key:"destroy",value:function(){if(this._decoderWorker){if((0,u.tT)().reuseWasmDecoder){this._offWorkerBind(this._decoderWorker),l.Z.cacheDecoder(this._decoderWorker);return}this._terminateWorker(this._decoderWorker)}}},{key:"_offWorkerBind",value:function(e){e.removeEventListener("message",e._onMessage),e.removeEventListener("error",e._onError),e.postMessage({msg:"flush"}),e._onMessage=null,e._onError=null,d.kg.log(this.TAG,"flush decoder and unbind worker event")}},{key:"_terminateWorker",value:function(e){this._offWorkerBind(e),e.postMessage({msg:"destroy"}),e.terminate(),d.kg.log(this.TAG,"destroy decoder worker")}}]),r}(i.Z)},307224:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(571456),i=r(733730),o=r(859933),s=function(e){(0,n.XW)(r,e);var t=(0,n.WY)(r);function r(e,i){var o;return(0,n.PA)(this,r),(o=t.call(this))._config=e,o._parent=i,o._meta=null,o._ready=!1,o._isLive=!0,o._innerDegrade=!1,o._singleTrack=-1,o}return(0,n.qH)(r,[{key:"analyse",get:function(){return this._parent.analyse}},{key:"isLive",get:function(){return this._isLive}},{key:"innerDegrade",get:function(){return this._innerDegrade}},{key:"noAudio",get:function(){return 1===this._singleTrack||2===this._singleTrack}},{key:"noVideo",get:function(){return 3===this._singleTrack}},{key:"duration",get:function(){return this._timeRange.duration},set:function(e){this._timeRange&&(this._timeRange.duration=e)}},{key:"_bindEvents",value:function(){var e=this;this._parent.on(o.ZP.TIMELINE.APPEND_CHUNKS,this._appendChunk.bind(this)),this._parent.on(o.ZP.TIMELINE.RESET_BASE_DTS,this._resetDts.bind(this)),this._parent.on(o.ZP.TIMELINE.START_RENDER,this._startRender.bind(this)),this._parent.on(o.ZP.TIMELINE.DO_PLAY,this._doPlay.bind(this)),this._parent.on(o.ZP.TIMELINE.DO_PAUSE,this._doPause.bind(this)),this._parent.on(o.ZP.TIMELINE.DO_SEEK,this._doSeek.bind(this)),this._parent.on(o.ZP.TIMELINE.DESTROY,this._destroy.bind(this)),this._parent.on(o.ZP.TIMELINE.CHASE_FRAME,this._doChaseFrame.bind(this)),this._parent.on(o.ZP.TIMELINE.SINGLE_TRACK,function(t){e._singleTrack=t}),this._parent.on(o.ZP.TIMELINE.SET_PLAY_MODE,function(t){e._isLive="LIVE"===t}),this._parent.on(o.ZP.TIMELINE.INNER_DEGRADE,function(){e._innerDegrade=!0}),this._parent.on(o.ZP.TIMELINE.SET_VIDEO_DURATION,function(t){e.duration=t})}}]),r}(i.Z)},712076:function(e,t,r){"use strict";r.d(t,{Z:function(){return o},s:function(){return i}});var n=r(571456);function i(e){var t;(null===(t=e.buffer)||void 0===t?void 0:t.close)&&e.buffer.close()}var o=function(){function e(t){(0,n.PA)(this,e),this.TAG="FrameQueue",this._parent=t,this._lastGopId=0,this._frames=[]}return(0,n.qH)(e,[{key:"currentTimeDts",get:function(){return this._parent.preciseVideoDts}},{key:"length",get:function(){return this._frames.length}},{key:"frames",get:function(){return this._frames}},{key:"append",value:function(e){if(!e.info){i(e);return}this._frames.push(e)}},{key:"appendVodFrame",value:function(e){this._frames.push(e)}},{key:"nextFrame",value:function(){var e=this._frames.length;return 1===this._parent.noAudio&&e>3&&(this._frames=this._frames.slice(e-2)),this._frames[0]}},{key:"shift",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._frames.shift();return this.deletePassed(e),t}},{key:"deletePassed",value:function(e){this._frames=this._frames.filter(function(t){return!!t.info&&t.info.dts>e||(i(t),!1)})}},{key:"empty",value:function(){this._frames.forEach(function(e){return i(e)}),this._frames=[]}},{key:"destroy",value:function(){this.empty(),this._lastGopId=0}}]),e}()},698428:function(e,t,r){"use strict";r.d(t,{S:function(){return s},Z:function(){return o}});var n=r(571456),i=r(683132),o=new(function(){function e(){(0,n.PA)(this,e),(0,n._x)(this,"_queue",[]),(0,n._x)(this,"TAG","FrameRenderCache")}return(0,n.qH)(e,[{key:"cacheCvs",value:function(e){this._queue.push(e),i.kg.log(this.TAG,"cache canvas!")}},{key:"getCachedCvs",value:function(){var e=this._queue.pop();return e&&i.kg.log(this.TAG,"get cached canvas!"),e}}]),e}()),s=function(){function e(t,r){(0,n.PA)(this,e),this.TAG="FrameRender",this.configs=Object.assign({},t),this.parent=r,this.canvas=this.configs.canvas,this.canvas.glInstance=this,this.meta=Object.assign({},this.configs.meta),this.frameRenderCache=o,this._initMeta(),this._initContextGL(),this.contextGL&&(this._initProgram(),this._initBuffers(),this._initTextures())}return(0,n.qH)(e,[{key:"_initMeta",value:function(){this.chroma=this.meta.chromaFormat,this.height=this.meta.height,this.width=this.meta.width,(this.canvas.width!==this.meta.width||this.canvas.height!==this.meta.height)&&(this.canvas.width=this.meta.width,this.canvas.height=this.meta.height,this.parent.emitResizeEvent())}},{key:"_initContextGL",value:function(){if("2d"===this.configs.type){this.ctx=this.canvas.getContext("2d");return}for(var e=this.canvas,t=null,r=["webgl","experimental-webgl","moz-webgl","webkit-3d"],n=0;!t&&n<r.length;){var o=r[n];try{t=e.getContext(o,this.configs.glCtxOptions),i.kg.log("FrameRender","use=",o,this.configs.glCtxOptions);break}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),++n}this.contextGL=t}},{key:"_initProgram",value:function(){var e=this.contextGL,t=e.createShader(e.VERTEX_SHADER);e.shaderSource(t,"attribute vec4 vertexPos;\nattribute vec4 texturePos;\nattribute vec4 uTexturePos;\nattribute vec4 vTexturePos;\nvarying vec2 textureCoord;\nvarying vec2 uTextureCoord;\nvarying vec2 vTextureCoord;\nvoid main()\n{\n  gl_Position = vertexPos;\n  textureCoord = texturePos.xy;\n  uTextureCoord = uTexturePos.xy;\n  vTextureCoord = vTexturePos.xy;\n}"),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+e.getShaderInfoLog(t));var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,"precision highp float;\nvarying highp vec2 textureCoord;\nvarying highp vec2 uTextureCoord;\nvarying highp vec2 vTextureCoord;\nuniform sampler2D ySampler;\nuniform sampler2D uSampler;\nuniform sampler2D vSampler;\nuniform mat4 YUV2RGB;\nvoid main(void) {\n  highp float y = texture2D(ySampler,  textureCoord).r;\n  highp float u = texture2D(uSampler,  uTextureCoord).r;\n  highp float v = texture2D(vSampler,  vTextureCoord).r;\n  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;\n}"),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+e.getShaderInfoLog(r));var n=e.createProgram();e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||console.log("Program failed to compile: "+e.getProgramInfoLog(n)),e.useProgram(n);var i=e.getUniformLocation(n,"YUV2RGB");e.uniformMatrix4fv(i,!1,[1.16438,0,1.59603,-.87079,1.16438,-.39176,-.81297,.52959,1.16438,2.01723,0,-1.08139,0,0,0,1]),this.shaderProgram=n}},{key:"_initBuffers",value:function(){var e=this.contextGL,t=this.shaderProgram,r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW);var n=e.getAttribLocation(t,"vertexPos");e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var o=e.getAttribLocation(t,"texturePos");e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),this.texturePosBuffer=i;var s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var a=e.getAttribLocation(t,"uTexturePos");e.enableVertexAttribArray(a),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),this.uTexturePosBuffer=s;var c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var u=e.getAttribLocation(t,"vTexturePos");e.enableVertexAttribArray(u),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),this.vTexturePosBuffer=c}},{key:"_initTextures",value:function(){var e=this.contextGL,t=this.shaderProgram,r=this._initTexture(),n=e.getUniformLocation(t,"ySampler");e.uniform1i(n,0),this.yTextureRef=r;var i=this._initTexture(),o=e.getUniformLocation(t,"uSampler");e.uniform1i(o,1),this.uTextureRef=i;var s=this._initTexture(),a=e.getUniformLocation(t,"vSampler");e.uniform1i(a,2),this.vTextureRef=s,e.pixelStorei(e.UNPACK_ALIGNMENT,1)}},{key:"_initTexture",value:function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t}},{key:"_drawPictureGL",value:function(e,t,r,n,i){var o=n*r,s=i*r/2;(444===this.chroma||422===this.chroma)&&(s*=2);var a={yData:(e=new Uint8Array(e)).subarray(0,o),uData:e.subarray(o,o+s),vData:e.subarray(o+s,o+s+s)};this._drawPictureGL420(a,t,r,n,i)}},{key:"_drawPictureGL420",value:function(e,t,r,n,i){var o=this.contextGL,s=this.texturePosBuffer,a=this.uTexturePosBuffer,c=this.vTexturePosBuffer,u=this.yTextureRef,l=this.uTextureRef,d=this.vTextureRef,h=e.yData,f=e.uData,p=e.vData,v=r/2;(422===this.chroma||444===this.chroma)&&(v=r);var g=v,_=this.canvas.width/this.width,m=this.canvas.height/this.height,y=0,b=0,w=this.canvas.width,k=this.canvas.height;_<m?(k=this.height*this.canvas.width/this.width,b=parseInt((this.canvas.height-this.height*this.canvas.width/this.width)/2)):(w=this.width*this.canvas.height/this.height,y=parseInt((this.canvas.width-this.width*this.canvas.height/this.height)/2)),o.viewport(y,b,w,k);var E=new Float32Array([1,0,0,0,1,1,0,1]);o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,E,o.DYNAMIC_DRAW);var S=new Float32Array([1,0,0,0,1,1,0,1]);o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,S,o.DYNAMIC_DRAW);var x=new Float32Array([1,0,0,0,1,1,0,1]);o.bindBuffer(o.ARRAY_BUFFER,c),o.bufferData(o.ARRAY_BUFFER,x,o.DYNAMIC_DRAW),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,u),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,n,r,0,o.LUMINANCE,o.UNSIGNED_BYTE,h),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,l),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,i,v,0,o.LUMINANCE,o.UNSIGNED_BYTE,f),o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,d),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,i,g,0,o.LUMINANCE,o.UNSIGNED_BYTE,p),o.drawArrays(o.TRIANGLE_STRIP,0,4)}},{key:"_drawPicture2d",value:function(e){if(e&&this.canvas){this.ctx||(this.ctx=this.canvas.getContext("2d"));var t=e.displayWidth||e.width,r=e.displayHeight||e.height;(this.canvas.height!==r||this.canvas.width!==t)&&(this.canvas.height=r,this.canvas.width=t);try{this.ctx.drawImage(e.dom||e,0,0,t,r)}catch(t){console.error(this.TAG,"_drawPicture2d",e,e.dom,t,t.message)}}}},{key:"_resize",value:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.canvas.width=e,this.canvas.height=t,this.parent.emitResizeEvent())}},{key:"render",value:function(e,t,r,n,i){this._resize(t,r),this.contextGL?this._drawPictureGL(e,t,r,n,i):this._drawPicture2d(e)}},{key:"resetMeta",value:function(e){this.meta=Object.assign({},e)}},{key:"updateBind",value:function(e,t){this.parent=e,this.resetMeta(t)}},{key:"destroy",value:function(e){this.parent=null,e&&(this.contextGL&&this.contextGL.clear(this.contextGL.DEPTH_BUFFER_BIT|this.contextGL.COLOR_BUFFER_BIT),o.cacheCvs(this.canvas))}}]),e}()},634466:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(571456),i=r(683132),o=r(258809),s=r(698428),a=r(156045),c=r(859933),u=function(e){(0,n.XW)(r,e);var t=(0,n.WY)(r);function r(e,i){var o;return(0,n.PA)(this,r),(o=t.call(this,e,i)).TAG="VideoRenderFromVideo",o._videoDecodeController=new a.Z(e,(0,n.Lc)(o)),o._canAutoPlay=!0,o._videoDecode=e.videoDecode,o._chaseToFrame=null,o}return(0,n.qH)(r,[{key:"videoDecode",get:function(){return this._videoDecode},set:function(e){this._videoDecode=e}},{key:"_bindEvents",value:function(){var e=this;(0,n.U2)((0,n.IP)(r.prototype),"_bindEvents",this).call(this),this.on("keyFrame",this._onKeyFrame.bind(this)),this.on(c.ZP.DECODE_EVENTS.READY,this._onReady.bind(this)),this.on(c.ZP.DECODE_EVENTS.DECODED,this._onDecoded.bind(this)),this.on(c.ZP.DECODE_EVENTS.PLAY_FAILED,this._onPlayFailed.bind(this)),this.on("error",this._onError.bind(this)),this.on(c.ZP.DECODE_EVENTS.APPEND_VIDEO,this._onAppendVideo.bind(this)),this.on(c.ZP.DECODE_EVENTS.FIRST_FRAME,this._onFirstFrame.bind(this)),this._parent.on(c.ZP.DECODE_EVENTS.CHASE_VIDEO_FRAME,this._onChaseVideoFrame.bind(this)),this._parent.on(c.ZP.TIMELINE.SYNC_DTS,this._onTimeLineSyncDTS.bind(this)),window.addEventListener("unload",function(){e._empty()})}},{key:"_onTimeLineSyncDTS",value:function(e){this._videoDecodeController.checkValidBlob(e)}},{key:"_onChaseVideoFrame",value:function(e){this._doChaseVideoFrame(e)}},{key:"_onAppendVideo",value:function(e){try{this._parent._parent.appendChild(e)}catch(e){cosole.error(this.TAG,"onAppendVideo",e)}}},{key:"_onKeyFrame",value:function(){i.kg.log(this.TAG,"_onKeyFrame,  keyframe"),this._videoDecodeController.emit("keyFrame")}},{key:"_onError",value:function(e,t){console.error(this.TAG,"decoder error",e,t),t||this._emitTimelineEvents(c.ZP.TIMELINE.PLAY_EVENT,c.NW.ERROR,this._assembleErr(e&&e.message))}},{key:"_onReady",value:function(){if(!this._frameRender){var e=Object.assign(this._config,{meta:this._meta,canvas:this._canvas,type:"2d"});try{this._frameRender=new s.S(e,this)}catch(e){this._emitTimelineEvents(c.ZP.TIMELINE.PLAY_EVENT,c.NW.ERROR,this._assembleErr(e&&e.message))}}this._startDecode()}},{key:"_onFirstFrame",value:function(e){i.kg.log(this.TAG,"onFirstFrame"),this._receiveFrame(e),this._firstFrame=!0}},{key:"_onDecoded",value:function(e){var t=this;this._inChaseFrame?(this.chaseFrameAfter++,1===this.chaseFrameAfter&&this._chaseToFrame&&(this._parent.emit(c.ZP.DECODE_EVENTS.CHASE_VIDEO_FRAME_END,this._chaseToFrame),this._frameQueue.length&&this._frameQueue.frames.forEach(function(e){t._videoDecodeController.frameRendend(e.buffer)}),this._frameQueue.empty(),this._videoDecodeController.checkMinFrames(this._frameQueue.length),this._timeRange.deletePassed(this._chaseToFrame.frame.dts),this._inChaseFrame=!1,this._chaseToFrame=null,console.warn(this.TAG,"onDecoded","_inChaseFrame end"))):this.chaseFrameAfter=0,this._receiveFrame(e)}},{key:"_onPlayFailed",value:function(e){console.warn(this.TAG,"onPlayFailed, this._ready:",this._ready,",firstEmit:",e,",frame length:",this._frameQueue.length),this._ready||e||this._whenReady(),this._canAutoPlay=!1}},{key:"canSeek",value:function(e){return this._videoDecodeController.canSeek(e)}},{key:"_initDecoder",value:function(){this._isInit||(i.kg.log(this.TAG,"_initDecoder"),this._videoDecodeController.isInit||this._videoDecodeController.init(this._meta),this._isInit=!0)}},{key:"_receiveFrame",value:function(e){(0,n.U2)((0,n.IP)(r.prototype),"_receiveFrame",this).call(this,e),this._videoDecodeController.checkMaxFrames(this._frameQueue._frames.length)}},{key:"_setMetadata",value:function(e){i.kg.warn(this.TAG,"video set metadata",e),this._meta=e;var t=e.fpsNum/e.fpsDen;t?i.kg.log(this.TAG,"detect fps:",t):i.kg.warn(this.TAG,"no detect fps,start estimate"),this._initDecoder(e)}},{key:"_doChaseVideoFrame",value:function(e){this._inChaseFrame=!0,this._chaseToFrame=e,this._videoDecodeController.chaseVideoFrame(e)}},{key:"_appendChunk",value:function(e){this._meta||this._setMetadata(e);for(var t=e.samples.slice(),r=t.length,n=0;n<r;n++){var i=t.shift();i.keyframe&&this.emit("keyFrame"),this._timeRange.append([i],this.noAudio,!1)}}},{key:"_startDecode",value:function(){this._videoDecodeController.startDecode()}},{key:"_checkToDecode",value:function(){this._startDecode()}},{key:"_startRender",value:function(){i.kg.log(this.TAG,"_startRender interval",this.interval),this._tickTimer.start(this.interval)}},{key:"_render",value:function(e){var t=this,r=this._frameQueue.nextFrame(),n=this.preciseVideoDts;if(!r||!this._timeRange){if(this._videoDecodeController.checkMinFrames(this._frameQueue._frames.length),this._parent._paused)return;if(!this._firstFrame){i.kg.log(this.TAG,"_render","not first frame return");return}var o=this._videoDecodeController;if(i.kg.log(this.TAG,",lack frame, _inDecoding:",this._videoDecodeController._isInDecoding,this._videoDecodeController._isDecodePause,",_frameQueue.length:",this._frameQueue.length),!this._frameQueue.length&&o.isIDLE){this._ready=!1;var s=this._parent.audioRender;console.warn(this.TAG,"trigger video waiting vdecode, preciseVideoDts:",n,s.currentTime,s.duration,s.buffered.end(0),s.baseDts),this.emit(c.ZP.VIDEO.VIDEO_WAITING)}this._checkToDecode();return}var a=r.info;if(!a){this._frameQueue.shift(),console.error("not info");return}this._renderDts=a.dts;var u=a.dts-n;if(u<-150){this.lastPrecise;var l=this._frameQueue.frames,d=this._getDeleteFrames(l,n),h=d.deleteFrames,f=d.useFrames;l.splice(0),f.forEach(function(e){l.push(e)}),h.forEach(function(e){t._videoDecodeController.frameRendend(e.buffer)}),this._videoDecodeController.emit("renderDelay",u,this._frameQueue._frames.length),this._videoDecodeController.checkMinFrames(this._frameQueue.length);return}if(e||!(u>30)||!(u<6e4)){Math.abs(this._lastTimeupdate-a.dts)>250&&(this._emitTimelineEvents(c.ZP.TIMELINE.PLAY_EVENT,c.NW.TIMEUPDATE),this._lastTimeupdate=a.dts),i.kg.long&&i.kg.log(this.TAG,"render delay:".concat(u," , timelinePosition:").concat(n," , dts:").concat(a.dts," , cost:").concat(a.cost," , gopID:").concat(a.gopId," , rest:").concat(this._frameQueue.length,", buffer frame:").concat(this._timeRange.frameLength));var p=performance.now();this._frameRender.render(r.buffer,r.width,r.height,r.yLinesize,r.uvLinesize),this.hasFirstFrame||e||(this.hasFirstFrame=!0,this._parent.emit(c.ZP.TIMELINE.PLAY_EVENT,"firstframe")),this._videoDecodeController.frameRendend(r.buffer),this._frameQueue.shift(),this._videoDecodeController.checkMinFrames(this._frameQueue.length),this._videoDecodeController.emit("renderDelay",u,this._frameQueue._frames.length),this._renderCost=performance.now()-p,e||(this.lastTime&&(this.lastPrecise,Date.now(),this.lastTime),this.lastFrameinfo=a.dts,this.lastPrecise=n,this.lastTime=Date.now(),this.lastAudioTime=this._parent.audioRender.currentTime)}}},{key:"_updateSegmentEnd",value:function(){}},{key:"_destroy",value:function(e){this._empty(),(0,n.U2)((0,n.IP)(r.prototype),"destroy",this).call(this,e),this._videoDecodeController.destroy()}},{key:"_doPause",value:function(){i.kg.log(this.TAG,">>>>>>>>doPause"),this._tickTimer.stop()}},{key:"_getDeleteFrames",value:function(e,t){var r=[],n=[];return e.forEach(function(e){e.info&&e.info.dts>t?n.push(e):e.info&&e.info.dts<=t&&r.push(e)}),{deleteFrames:r,useFrames:n}}},{key:"_empty",value:function(){this._videoDecodeController&&(this._videoDecodeController.empty(),this._frameQueue.frames.forEach(function(e){e.buffer&&e.buffer.dom&&(e.buffer.dom.width=0,e.buffer.dom.height=0,e.buffer.dom=null)}))}}]),r}(o.Z)},335712:function(e,t,r){"use strict";r.d(t,{M:function(){return _}});var n=r(276673),i=r(128263),o=r(676533),s=r(259937),a=r(267318),c=r(75244),u=r(339225),l=r(518906),d=r(12413),h=r(296901),f=r(649894),p=[f.H0,f.Su,f.SI,f.fH,f.rl,f.li,f.Vp,f.j4,f._E,f.mo,f.Dq,f.kA,f.H6,f.fU,f.fk,f.M9,f.OX,f.V9,f.eb,f.B3,f.a5,f.f3,f.$z,f.$h,f.ul,f.yP,f.UL,f.tA,f.lp,f.yU,f.pK,f.l$,f.hC,f.nn,f.dE,f.Ks,f.Ue],v=[f.GP,f.$u,f.rg,f.Xc,f.h1,f.m2,f._B,f.X_,f.Ro,f.PG,f.py,f.At,f.m1,f.$e,f.Pm],g=[f.uv,f.e0,f.UD,f.Mn,f.Bx,f.F6,f.Kz,f.WN,f.Aq,f.g3,f.LU,f.UG,f.sP,f.bx,f.dP,f.G3,f.TW,f.p4,f.MY,f.Jc,f.h5,f.Hg,f.$v,f.gQ,f.ZA],_=new function(){var e=this;this.eventTypes=new Map,this.extractEvents=function(t){var r;if(!e.eventTypes.get(t.type))return null;switch(t.type){case f.OX:case f.M9:case f.V9:r=a.$;break;case f.H0:case f.H6:r=c.Y;break;case f.SI:case f.j4:case f._E:case f.eb:case f.m2:case f.B3:case f._B:case f.X_:case f.rl:r=u.U;break;case f.GP:case f.mo:case f.$u:case f.rg:case f.Xc:case f.h1:case f.Dq:case f.kA:console.error("view\u7EC4\u4EF6\u6682\u4E0D\u652F\u6301\u62D6\u62FD\u4E8B\u4EF6, \u4E8B\u4EF6\u7C7B\u578B:",t.type),r=n.O;break;case f.pK:case f.l$:case f.$e:case f.hC:console.error("view\u7EC4\u4EF6\u6682\u4E0D\u652F\u6301touch\u4E8B\u4EF6, \u4E8B\u4EF6\u7C7B\u578B:",t.type),r=n.O;break;case f.e0:case f.UD:case f.Mn:r=d.B;break;case f.gQ:r=h.J;break;case f.At:r=i.R;break;case f.Pm:r=l.p;break;case f.li:case f.Vp:case f.a5:r=o.y;break;case f.UG:case f.TW:case f.$h:case f.ul:case f.Ro:case f.PG:case f.py:case f.yP:console.error("view\u7EC4\u4EF6\u6682\u4E0D\u652F\u6301pointer\u4E8B\u4EF6, \u4E8B\u4EF6\u7C7B\u578B:",t.type),r=n.O;break;case f.dE:case f.Ue:case f.Ks:r=s.h;break;default:r=n.O}return new r(t,t.target)},p.concat(v).concat(g).forEach(function(t){return e.eventTypes.set(t,!0)})}},77851:function(e,t,r){"use strict";r.d(t,{ky:function(){return b},nF:function(){return I},qF:function(){return E},qW:function(){return x},s7:function(){return T},vA:function(){return p},zs:function(){return v}});var n,i,o=r(386859),s=r(113961),a=r(405359),c=r(312745),u=r(26105),l=r(640595),d=r(657550),h=r(509564),f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function p(){var e=[];return e.toMap=function(){return(0,s.A)(this)},e}function v(e){void 0===e&&(e=20);for(var t="",r=0;r<e;r++){var n=Math.floor(Math.random()*f.length);t+=f[n]}return t}function g(e,t,r){var t=e.offsetToPoint(t),n=t.line,i=t.offset,r=e.offsetToPoint(r),o=r.line,s=r.offset,a="";if(n===o)return e.getLine(n).getModelText().slice(i,s);for(var c=n;c<=o;c++){var u=e.getLine(c).getModelText();a+=c===n?u.slice(i):c===o?u.slice(0,s):u}return a}function _(e,t,r){return t=e.offsetToPoint(t),r=e.offsetToPoint(r),e.getEntities({start:t,end:r})}(n=i=i||{})[n.BLOCK=0]="BLOCK",n[n.LMKR=1]="LMKR",n[n.TEXT=2]="TEXT";var m=function(e,t){return b(e.attributes,t)?i.BLOCK:(0,a.eV)(e)?i.LMKR:i.TEXT},y=[[d.cI,d.cI,function(e,t){return!t.startsWith("\n")}],[d.ar,d.cI,d.ar],[function(e){return!e.endsWith("\n")},function(e){return!e.endsWith("\n")},d.ar]];function b(e,t){return void 0===e&&(e={}),Object.keys(e).some(function(r){var n=null===(n=t.get(r))||void 0===n?void 0:n.display;return"string"==typeof n?n===h.v.block:"function"==typeof n&&n(e[r])===h.v.block})}function w(e,t,r,n){var i=Object.keys(e).reduce(function(i,o){return o===t||function(e,t,r,n){if(n instanceof RegExp){if(e.match(n))return!0}else if(n(e,t,r))return!0;return!1}(o,e[o],r,n)?i[o]=e[o]:i[o]="",i},{});return e.lmkr&&(i.lmkr=e.lmkr),i}function k(e,t){var r=(0,o.b)({},e);return Object.keys(e).forEach(function(n){e[n]&&!t[n]&&delete r[n]}),r}function E(e,t){if(t)return Object.keys(t).filter(function(e){return t[e]}).find(function(t){var r;return(null===(r=e.get(t))||void 0===r?void 0:r.attributes)||(null===(t=e.get(t))||void 0===t?void 0:t.lineAttributes)})}function S(e,t,r){if(t>=e.ops.length)throw Error("getOpOffsetInDocumentWithCache index overstep");for(var n=t,i=0;0<=n;){if(r.has(n)){i+=r.get(n);break}var o=e.ops[n];(0,c.f)(o)!==u.HP.INSERT&&(i+=(0,c.a)(o)),n--}return i}function x(e,t,r){return r.reduce(function(r,n){if(!(n instanceof l.I))return r.concat(n);var i=e.getZoneState(n.zoneId);if(!i&&n.ops.some(function(e){return!e.insert}))throw Error("attempt to apply new ZoneDelta which is invalid");var s=!1,a=n.reduce(function(e,r,a){var l=(0,c.f)(r);return l===u.HP.DELETE?e.push(r):l===u.HP.RETAIN?(s=!1,function(e,t,r,n,i){var s,a=e.ops[r];if(!a.attributes||!b(a.attributes,i)||!(t=(s=t).ops[s.ops.length-1]))return!1;if((0,c.f)(t)===u.HP.INSERT)return!t.insert.endsWith("\n");for(var l=e.ops.slice(0,r).filter(function(e){return(0,c.f)(e)!==u.HP.INSERT});l[l.length-1]&&(0,c.f)(l[l.length-1])===u.HP.DELETE;)l.pop();return 0!==l.length&&"\n"!==g(n,(r=l.reduce(function(e,t){return e+(0,c.a)(t)},0))-1,r)&&!(0,o._)(_(n,r-1,r),1)[0].attributes.lmkr}(n,e,a,i,t)&&e.insertEnter(),e.push(r),function e(t,r,n,i,s){var a=t.ops[r],l=t.ops[n];if(!a.attributes||!b(a.attributes,s))return function(e,t,r,n){for(var i=!1,s=t+1;s<e.ops.length;){var a=(0,c.f)(e.ops[s]);if(a===u.HP.INSERT)return!1;if(a===u.HP.RETAIN)break;a===u.HP.DELETE&&(i=!0),s++}if(!i)return!1;var l=e.ops.slice(0,t+1).filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return(0,c.a)(t)+e},0),d=(0,o._)(_(r,l-1,l),1)[0],h=b(d.attributes,n),f=e.ops.slice(0,s).filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return(0,c.a)(t)+e},0),t=(0,o._)(_(r,f,f+1),1)[0],n=b(t.attributes,n);return h?!g(r,f,f+1).startsWith("\n"):n?!d.attributes.lmkr&&!g(r,l-1,l).endsWith("\n"):!(!d.attributes.lmkr||!t.attributes.lmkr)}(t,r,i,s);if(!l)return"\n"!==g(i,d=t.ops.filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return e+(0,c.a)(t)},0),d+1);if((a=(0,c.f)(l))!==u.HP.INSERT)return a!==u.HP.RETAIN?e(t,r,n+1,i,s):"\n"!==g(i,d=t.ops.slice(0,n).filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return e+(0,c.a)(t)},0),d+1);var d,l=l.insert.startsWith("\n"),r=t.ops.slice(0,r+1).filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return e+(0,c.a)(t)},0),r=g(i,r-1,r).endsWith("\n");return!l&&!r}(n,a,a+1,i,t)&&e.insertEnter()):(!s&&function e(t,r,n,i,s){var a=t.ops[n],l=t.ops[r];if(l){var d=(0,c.f)(l);return d===u.HP.INSERT?(0,y[m(l,s)][m(a,s)])(l.insert,a.insert):d!==u.HP.RETAIN?e(t,r-1,n,i,s):(t=t.ops.slice(0,r+1).filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return e+(0,c.a)(t)},0),r=(0,o._)(_(i,t-1,t),1)[0],(0,y[r=m({insert:t=g(i,t-1,t),attributes:r.attributes},s)][m(a,s)])(t,a.insert))}return!1}(n,a-1,a,i,t)&&e.insertEnter(),e.push(r),(a=function e(t,r,n,i,s){var a=t.ops[r],l=t.ops[n];if(!l){if(!i)return!1;var d=t.ops.slice().filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return e+(0,c.a)(t)},0),h=(0,o._)(_(i,d,d+1),1)[0],f=g(i,d,d+1),d=m({insert:f,attributes:h.attributes},s);return(0,y[m(a,s)][d])(a.insert,f)}if((h=(0,c.f)(l))===u.HP.INSERT)return(0,y[m(a,s)][m(l,s)])(a.insert,l.insert);if(h!==u.HP.RETAIN)return h===u.HP.DELETE&&e(t,r,n+1,i,s);var t=t.ops.slice(0,n).filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return e+(0,c.a)(t)},0),n=(0,o._)(_(i,t,t+1),1)[0],f=g(i,t,t+1),d=m({insert:f,attributes:n.attributes},s);return(0,y[m(a,s)][d])(a.insert,f)}(n,a,a+1,i,t))&&e.insertEnter(),s=a),e},n.create({zoneId:n.zoneId}));return r.concat(a)},new c.D).reduce(function(r,n){if(!(n instanceof l.I))return r.concat(n);var i=e.getZoneState(n.zoneId);if(!i&&n.ops.some(function(e){return!e.insert}))throw Error("attempt to apply new ZoneDelta which is invalid");var s=new Map,a=n.reduce(function(e,r,a){var l=(0,c.f)(r);if(l===u.HP.DELETE||!r.attributes)return e.push(r);var d,h,f=S(n,a-1,s);if(s.set(a-1,f),l===u.HP.RETAIN&&(d=f+(0,c.a)(r),(h=function(e,t,r){for(var n,i,s=[],a=e.offsetToPoint(t).line,u=e.getLine(a)._offsetStart,l=a;l<e.length();l++){var d=e.getLine(l).getOps();try{for(var h=(n=void 0,(0,o.c)(d)),f=h.next();!f.done;f=h.next()){var p,v,g=f.value,_=(0,c.a)(g),m=u+_;if(r<=u)return s;u<=r&&t<m&&(p=Math.max(t-u,0),v=Math.min(_,r-u),s.push({insert:g.insert.slice(p,v),attributes:g.attributes})),u+=_}}catch(e){n={error:e}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}return s}(i,f,d)).forEach(function(l,f){var p,v,g=(0,o.b)((0,o.b)({},l.attributes),r.attributes),m=E(t,g);if(m&&l.attributes&&null!==(p=t.get(m))&&void 0!==p&&p.attributes&&(A=t.get(m).attributes,g=w(g,m,l.attributes[m],A)),null!=g&&g.lmkr){var y=void 0;if(f<h.length-1)y=h[f+1].attributes;else{for(var b=!1,x=a+1;x<n.ops.length;){var T=n.ops[x];if((0,c.f)(T)!==u.HP.DELETE){var I,b=!0;y=(0,c.f)(T)===u.HP.INSERT?T.attributes:(I=S(n,a,s),s.set(a,I),I=(0,o._)(_(i,I,I+1),1)[0],(0,o.b)((0,o.b)({},I.attributes),T.attributes));break}x++}b||(y=(0,o._)(_(i,d,d+1),1)[0].attributes)}var A=E(t,y);return A&&(P=t.get(A).lineAttributes)&&(g=w(g,A,y[A],P)),e.retain(l.insert.length,k(r.attributes,g))}if(m){var P=t.get(m).lineAttributes;if(0<=f)return e.retain(l.insert.length,k(r.attributes,g));for(var C=e.ops.length-1,R=void 0;0<=C;){var D=(0,c.f)(e.ops[C]);if(D!==u.HP.DELETE){R=D;break}C++}return C<0||(f=e.ops[C],R===u.HP.INSERT&&null!==(v=f.attributes)&&void 0!==v&&v.lmkr?P&&(e.ops[C]={insert:f.insert,attributes:w(f.attributes,m,l.attributes[m],P)}):R===u.HP.RETAIN&&f.attributes),e.retain(l.insert.length,k(r.attributes,g))}return e.retain(l.insert.length,k(r.attributes,g))})),l!==u.HP.INSERT)return e;var p=r.attributes,v=E(t,p);if(v&&null!==(g=t.get(v))&&void 0!==g&&g.attributes&&(p=w(p,v,p[v],t.get(v).attributes)),r.attributes.lmkr){for(var g,m=void 0,y=!1,b=a+1;b<n.ops.length;){var x=n.ops[b];if((0,c.f)(x)!==u.HP.DELETE){y=!0,m=x.attributes;break}b++}y?(l=n.ops[b],(g=(0,c.f)(l))===u.HP.INSERT&&l.attributes&&(m=l.attributes),g===u.HP.RETAIN&&!l.attributes&&i&&(m=(I=(0,o._)(_(i,f,f+1),1)[0]).attributes)):i&&(m=(I=(0,o._)(_(i,f,f+1),1)[0]).attributes),!m||(T=E(t,m))&&(A=t.get(T).lineAttributes)&&(p=w(p,T,m[T],A))}else if(v){for(var T,I,A=t.get(v).lineAttributes,P=e.ops.slice(),C=P.length-1;0<=C;){var R=P[C],D=(0,c.f)(R);if(D===u.HP.RETAIN)break;if(D===u.HP.INSERT&&R.insert&&R.insert.includes("\n")){C=-1;break}C--}0<=C&&!P[C].attributes&&A&&i&&(R=P[C],T=P.slice(0,C+1).filter(function(e){return(0,c.f)(e)!==u.HP.INSERT}).reduce(function(e,t){return e+(0,c.a)(t)},0),(I=(0,o._)(_(i,T-1,T),1)[0]).attributes.lmkr&&(v=w(I.attributes,v,r.attributes[v],A),A=1<R.retain?[{retain:R.retain-1},{retain:1,attributes:v}]:[{retain:1,attributes:v}],(v=e.ops).splice.apply(v,(0,o.e)([C,1],A))))}return e.insert(r.insert,p)},new l.I({zoneId:n.zoneId}));return r.concat(a)},new c.D)}function T(e){return!e.some(function(e){return e._getOps().map(function(e){return"string"==typeof e.insert?e.insert:" "}).join("")!==e.getModelText()})}function I(e){return e.reduce(function(e,t){return t instanceof l.I&&(t=t.reduce(function(e,t){if((0,c.f)(t)!==u.HP.INSERT||!t.insert)return e.push(t);var r=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/\t/g," ".repeat(8)).replace(/[\x00-\x08\x0b\x0c\x0e-\x1f\x7f]/g,"");return r===t.insert?e.push(t):e.push((0,o.b)((0,o.b)({},t),{insert:r}))},new l.I({zoneId:t.zoneId}))),e.concat(t)},new c.D)}},146141:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var n=function(){function e(){this.t=new WeakMap,this.n=new WeakMap,this.i=new WeakMap}var t=e.prototype;return t._setNode=function(e,t){document.contains(t),e._node=t,this._deleteNode(e),this._deleteNode(t),this.t.set(e,t),this.n.set(t,e)},t._resetNode=function(e){e._node=null},t._deleteNode=function(e){var t;e instanceof HTMLElement?((t=this.n.get(e))&&this.t.delete(t),this.n.delete(e)):((t=this.t.get(e))&&this.n.delete(t),this.t.delete(e))},t.getModel=function(e){return this.n.get(e)},t.getView=function(e){return this.t.get(e)},t._setLeaf=function(e,t){this.i.set(e,t)},t._deleteLeaf=function(e){this.i.delete(e)},t.getLeafModel=function(e){return this.i.get(e)},t.destroy=function(){this.t=new WeakMap,this.n=new WeakMap,this.i=new WeakMap},e}()},254341:function(e,t,r){"use strict";r.d(t,{J:function(){return i}});var n=r(789771);function i(e){var t=document.createElement("a");return(0,n.T)(t,e),t}},882614:function(e,t,r){"use strict";r.d(t,{Zb:function(){return s},jU:function(){return i},kT:function(){return o}});var n=r(789771);function i(e){var t=document.createElement("ul");return(0,n.T)(t,e),t}function o(e){var t=document.createElement("ol");return(0,n.T)(t,e),t}function s(e){var t=document.createElement("li");return(0,n.T)(t,e),t}},461060:function(e,t,r){"use strict";function n(e){return e.split(";").reduce(function(e,t){if(!t.trim())return e;var r=t.split(":");return e[r[0].trim().toLowerCase().replace(/([-][a-z])/g,function(e){return e.toUpperCase().replace("-","")})]=r[1].trim(),e},{})}function i(e,t,r){"-"===t[0]?e.setProperty(t,r):null===r?e[t]="":"number"!=typeof r?e[t]=r:e[t]=r+"px"}r.d(t,{A:function(){return i},R:function(){return n}})},531578:function(e,t,r){"use strict";function n(e){if(e.nodeType!==Node.ELEMENT_NODE||!(e instanceof HTMLElement))return"";try{return JSON.stringify(["className","tagName","dataset"].reduce(function(t,r){return t[r]=e[r],t},{}))}catch(e){return""}}r.d(t,{F:function(){return n}})},128965:function(e,t,r){"use strict";r.d(t,{T:()=>i});var n={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","h","K"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TL:["H","hB","hb","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function i(e,t){for(var r="",i=0;i<e.length;i++){var o=e.charAt(i);if("j"===o){for(var s=0;i+1<e.length&&e.charAt(i+1)===o;)s++,i++;var a=1+(1&s),c=s<2?1:3+(s>>1),u=function(e){var t,r=e.hourCycle;if(void 0===r&&e.hourCycles&&e.hourCycles.length&&(r=e.hourCycles[0]),r)switch(r){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw Error("Invalid hourCycle")}var i=e.language;return"root"!==i&&(t=e.maximize().region),(n[t||""]||n[i||""]||n["".concat(i,"-001")]||n["001"])[0]}(t);for(("H"==u||"k"==u)&&(c=0);c-- >0;)r+="a";for(;a-- >0;)r=u+r}else"J"===o?r+="H":r+=o}return r}},446939:function(e,t,r){"use strict";r.d(t,{p:function(){return n}});var n=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/},149325:function(e,t,r){"use strict";r.d(t,{I:function(){return f},O:function(){return o}});var n=r(789786),i=r(62290);function o(e){if(0===e.length)throw Error("Number skeleton cannot be empty");for(var t=e.split(i.r).filter(function(e){return e.length>0}),r=[],n=0;n<t.length;n++){var o=t[n].split("/");if(0===o.length)throw Error("Invalid number skeleton");for(var s=o[0],a=o.slice(1),c=0;c<a.length;c++)if(0===a[c].length)throw Error("Invalid number skeleton");r.push({stem:s,options:a})}return r}var s=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,a=/^(@+)?(\+|#+)?[rs]?$/g,c=/(\*)(0+)|(#+)(0+)|(0+)/g,u=/^(0+)$/;function l(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(a,function(e,r,n){return"string"!=typeof n?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):"+"===n?t.minimumSignificantDigits=r.length:"#"===r[0]?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+("string"==typeof n?n.length:0)),""}),t}function d(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function h(e){return d(e)||{}}function f(e){for(var t={},r=0;r<e.length;r++){var i=e[r];switch(i.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=i.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=(0,n.pi)((0,n.pi)((0,n.pi)({},t),{notation:"scientific"}),i.options.reduce(function(e,t){return(0,n.pi)((0,n.pi)({},e),d(t)||{})},{}));continue;case"engineering":t=(0,n.pi)((0,n.pi)((0,n.pi)({},t),{notation:"engineering"}),i.options.reduce(function(e,t){return(0,n.pi)((0,n.pi)({},e),d(t)||{})},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw RangeError("integer-width stems only accept a single optional option");i.options[0].replace(c,function(e,r,n,i,o,s){if(r)t.minimumIntegerDigits=n.length;else if(i&&o)throw Error("We currently do not support maximum integer digits");else if(s)throw Error("We currently do not support exact integer digits");return""});continue}if(u.test(i.stem)){t.minimumIntegerDigits=i.stem.length;continue}if(s.test(i.stem)){if(i.options.length>1)throw RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(s,function(e,r,n,i,o,s){return"*"===n?t.minimumFractionDigits=r.length:i&&"#"===i[0]?t.maximumFractionDigits=i.length:o&&s?(t.minimumFractionDigits=o.length,t.maximumFractionDigits=o.length+s.length):(t.minimumFractionDigits=r.length,t.maximumFractionDigits=r.length),""});var o=i.options[0];"w"===o?t=(0,n.pi)((0,n.pi)({},t),{trailingZeroDisplay:"stripIfInteger"}):o&&(t=(0,n.pi)((0,n.pi)({},t),l(o)));continue}if(a.test(i.stem)){t=(0,n.pi)((0,n.pi)({},t),l(i.stem));continue}var h=d(i.stem);h&&(t=(0,n.pi)((0,n.pi)({},t),h));var f=function(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var r=e.slice(0,2);if("+!"===r?(t.signDisplay="always",e=e.slice(2)):"+?"===r&&(t.signDisplay="exceptZero",e=e.slice(2)),!u.test(e))throw Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}(i.stem);f&&(t=(0,n.pi)((0,n.pi)({},t),f))}return t}},472238:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(50906),i=r.n(n),o=r(56052),s=r(61687),a=r(698698),c=r(244913),u=class{constructor(e,t,r,n){if(!(r in o.yy))throw Error("[ThirdPartyModuleRegister]: Invalid relation");this._moduleClass=e,this._relatedEntities=null!=t?t:[],this._entityRelation=null!=r?r:o.yy.AND,this._getConfig=n}getRelatedEntities(){return a.Z.info("[ThirdPartyModuleRegister]: getRelatedEntities"),this._relatedEntities}_meetRequirements(e){return(a.Z.info("[ThirdPartyModuleRegister]: meetRequirements",{data:e}),this._entityRelation===o.yy.AND)?this._relatedEntities.every(t=>{var r,n;return(null==(n=null==(r=e[t])?void 0:r.record)?void 0:n.status)===o.lg.APPROVE}):this._entityRelation===o.yy.OR&&this._relatedEntities.some(t=>{var r,n;return(null==(n=null==(r=e[t])?void 0:r.record)?void 0:n.status)===o.lg.APPROVE})}initThirdPartyModule(e,t,r){var n,u,l,d,h,f;a.Z.info("[ThirdPartyModuleRegister]: initThirdPartyModule");let p=this._moduleClass;if(!(0,s.l)(p,c.Z)){a.Z.error("[ThirdPartyModuleRegister]: initThirdPartyModule - Invalid Implementation of ThirdPartyModule",{ModuleClass:p});return}let v=null!=(n=null==p?void 0:p.canBeInitBeforeApprove)&&n,g=this._relatedEntities.reduce((t,r)=>(t[r]=i()(e[r]),t),{}),_=this._meetRequirements(g);if((!this._module||!this._module.isInitialized())&&v){this._module=new p(null==(u=this._getConfig)?void 0:u.call(this)),this._module.init(g,_);return}if(!_){if(this._module){t(o.tR.beforeThirdPartyReject);let e=this._module.reject(g);r(o.tR.afterThirdPartyReject,e),(null==(h=null==(d=(l=this._module).shouldDestructAfterReject)?void 0:d.call(l))||h)&&(this._module.destruct(),this._module=null,a.Z.info("[ThirdPartyModuleRegister]: destruct third parties"))}return}this._module||(a.Z.info("[ThirdPartyModuleRegister]: recreate"),this._module=new p(null==(f=this._getConfig)?void 0:f.call(this)),this._module.init(g,!0)),t(o.tR.beforeThirdPartyApprove);let m=this._module.approve(g);r(o.tR.afterThirdPartyApprove,m)}}},904404:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(56052),i=class{getName(){return this.constructor.name}getLifeCycleEvents(){return Object.values(n.tR).filter(e=>"function"==typeof(this==null?void 0:this[e]))}}},659847:function(){},479595:function(){},700680:function(){},101123:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={routeBack:"routeBack-ofKob2",icon:"icon-uFkvlZ",title:"title-HVIPap"}},288179:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={label:"label-bG2JN9"}},987548:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={"automatic-generation":"automatic-generation-mEJhdz",automaticGeneration:"automatic-generation-mEJhdz",box:"box-b_xBAc","generating-ball":"generating-ball-v23Y2F",generatingBall:"generating-ball-v23Y2F","generating-progress":"generating-progress-x0odZw",generatingProgress:"generating-progress-x0odZw","progress-text":"progress-text-oxZRaE",progressText:"progress-text-oxZRaE","one-digit":"one-digit-lVnX7f",oneDigit:"one-digit-lVnX7f","percent-text":"percent-text-dgCoAQ",percentText:"percent-text-dgCoAQ","generating-text":"generating-text-M378GR",generatingText:"generating-text-M378GR","tip-text":"tip-text-Vsdy6W",tipText:"tip-text-Vsdy6W","cancel-button":"cancel-button-Kp81jN",cancelButton:"cancel-button-Kp81jN","lv-btn-size-large":"lv-btn-size-large-ZkS0Ce",lvBtnSizeLarge:"lv-btn-size-large-ZkS0Ce","cancel-modal":"cancel-modal-aI5I0J",cancelModal:"cancel-modal-aI5I0J",title:"title-FnCjq_","lv-modal-footer":"lv-modal-footer-k9IW3p",lvModalFooter:"lv-modal-footer-k9IW3p","lv-modal-header":"lv-modal-header-bdHta1",lvModalHeader:"lv-modal-header-bdHta1","failed-icon":"failed-icon-Q6GP1T",failedIcon:"failed-icon-Q6GP1T","failed-text":"failed-text-D_A9Gj",failedText:"failed-text-D_A9Gj","failed-button-container":"failed-button-container-L9pdV_",failedButtonContainer:"failed-button-container-L9pdV_"}},585233:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={container:"container-rI9E6f",body:"body-cwc1py",item:"item-_1y34f",item__break:"item__break-ss4Tv0",itemBreak:"item__break-ss4Tv0",label:"label-mITRPJ",textarea:"textarea-MvSUgx",textarea__show_prompt_button:"textarea__show_prompt_button-gTuMWi",textareaShowPromptButton:"textarea__show_prompt_button-gTuMWi",required:"required-blpiPp",prompt_button:"prompt_button-uvF6yP",promptButton:"prompt_button-uvF6yP"}},819061:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={wrapper:"wrapper-sO_Y0n",wrapper__fade_in:"wrapper__fade_in-WDTFzg",wrapperFadeIn:"wrapper__fade_in-WDTFzg",elementFadeIn:"elementFadeIn-nTqzGF",container:"container-WnnUHX",left:"left-pSVzDi",right:"right-89U4ct",body:"body-s1gzXa",title:"title-Zlpxbf",content:"content-h61Cm7",icon:"icon-Pn5rTQ",elementFadeOut:"elementFadeOut-ZTC0Fd"}},244809:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={container:"container-WAivGV",container__fade_in:"container__fade_in-a2hyZX",containerFadeIn:"container__fade_in-a2hyZX",elementFadeIn:"elementFadeIn-asECPr",container__fade_out:"container__fade_out-TrEY8K",containerFadeOut:"container__fade_out-TrEY8K",elementFadeOut:"elementFadeOut-dpgakH",header:"header-umX55G",title:"title-rVInna",random_icon:"random_icon-P1LiKj",randomIcon:"random_icon-P1LiKj",random:"random-AaBZJg",list:"list-uMw8IG",item:"item-LiIUDF"}},466302:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={cardContainer:"cardContainer-mwV4ZO",cardCover:"cardCover-mOoXNL",cardVideo:"cardVideo-RYBL5j",cardIconContainer:"cardIconContainer-yeSBkN",cardIcon:"cardIcon-KCsHBk",cardText:"cardText-tN71BP",cardTitleContainer:"cardTitleContainer-hV_e68",cardTitle:"cardTitle-KiVlII",titleHide:"titleHide-uHQnyZ",cardContentContainer:"cardContentContainer-xQFNUD",cardContent:"cardContent-GMbGa8",contentHide:"contentHide-prC1IP"}},10792:function(){},122889:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n={"cc-ttv-ai-writer-container":"cc-ttv-ai-writer-container-apfzeg",ccTtvAiWriterContainer:"cc-ttv-ai-writer-container-apfzeg",elementFadeIn:"elementFadeIn-i90UnL","container-fade-out":"container-fade-out-TeFzzF",containerFadeOut:"container-fade-out-TeFzzF",elementFadeOut:"elementFadeOut-x77Lia"}},402964:function(e,t,r){e.exports=r(766132)},77274:function(e,t,r){"use strict";var n=r(211996);e.exports=function(e,t){t=t||{};var r={};function i(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function o(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:i(void 0,e[r]):i(e[r],t[r])}function s(e){if(!n.isUndefined(t[e]))return i(void 0,t[e])}function a(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:i(void 0,e[r]):i(void 0,t[r])}function c(r){return r in t?i(e[r],t[r]):r in e?i(void 0,e[r]):void 0}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return n.forEach(Object.keys(e).concat(Object.keys(t)),function(e){var t=u[e]||o,i=t(e);n.isUndefined(i)&&t!==c||(r[e]=i)}),r}},548864:function(e,t,r){"use strict";var n=r(527705).version,i=r(75497),o={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){o[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var s={};o.transitional=function(e,t,r){function o(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,a){if(!1===e)throw new i(o(n," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!s[n]&&(s[n]=!0,console.warn(o(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,a)}},e.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),o=n.length;o-- >0;){var s=n[o],a=t[s];if(a){var c=e[s],u=void 0===c||a(c,s,e);if(!0!==u)throw new i("option "+s+" must be "+u,i.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new i("Unknown option "+s,i.ERR_BAD_OPTION)}},validators:o}},908875:function(e,t,r){"use strict";r.d(t,{Uv:()=>g.Z,V_:()=>y});let n=r("150026"),i=r("835427"),o=r("865045"),s=r("740283"),a=r("935781"),c=r("209478"),u=r("514553");var l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,d=RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),h=/^(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})(\.(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})){3}$/,f=function(e){function t(t,r){e.call(this,t,Object.assign(Object.assign({},r),{type:"type"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={email:{configurable:!0},url:{configurable:!0},ip:{configurable:!0}};return r.email.get=function(){return this.type="email",this.validate(void 0===this.obj||l.test(this.obj),this.getValidateMsg("type.email"))},r.url.get=function(){return this.type="url",this.validate(void 0===this.obj||d.test(this.obj),this.getValidateMsg("type.url"))},r.ip.get=function(){return this.type="ip",this.validate(void 0===this.obj||h.test(this.obj),this.getValidateMsg("type.ip"))},Object.defineProperties(t.prototype,r),t}(u.Z);let p=r("975960"),v=r("645622"),g=r("388714");var _=function(e,t){return new m(e,Object.assign({field:"value"},t))};_.globalConfig={},_.setGlobalConfig=function(e){_.globalConfig=e||{}};var m=function(e,t){var r=_.globalConfig,n=Object.assign(Object.assign(Object.assign({},r),t),{validateMessages:(0,v.j)(r.validateMessages,t.validateMessages)});this.string=new i.Z(e,n),this.number=new o.Z(e,n),this.array=new s.Z(e,n),this.object=new a.Z(e,n),this.boolean=new c.Z(e,n),this.type=new f(e,n),this.custom=new p.Z(e,n)},y=function(e,t){void 0===t&&(t={}),this.schema=e,this.options=t};y.prototype.messages=function(e){this.options=Object.assign(Object.assign({},this.options),{validateMessages:(0,v.j)(this.options.validateMessages,e)})},y.prototype.validate=function(e,t){var r=this;if((0,n.Kn)(e)){var i=[],o=null;this.schema&&Object.keys(this.schema).forEach(function(t){if((0,n.kJ)(r.schema[t]))for(var a=0;a<r.schema[t].length&&"break"!==function(n){var a=r.schema[t][n],c=a.type,u=a.message;if(!c&&!a.validator)throw"You must specify a type to field "+t+"!";var l=Object.assign(Object.assign({},r.options),{message:u,field:t});"ignoreEmptyString"in a&&(l.ignoreEmptyString=a.ignoreEmptyString),"strict"in a&&(l.strict=a.strict);var d=new m(e[t],l),h=d.type[c]||null;if(!h){if(a.validator){h=d.custom.validate(a.validator),"[object Array]"===Object.prototype.toString.call(h)&&h[0].then?i.push({function:h[0],_this:h[1],key:t}):h&&s(t,h);return}h=d[c]}if(Object.keys(a).forEach(function(e){a.required&&(h=h.isRequired),"message"!==e&&h[e]&&a[e]&&"object"==typeof h[e]&&(h=h[e]),h[e]&&void 0!==a[e]&&"function"==typeof h[e]&&(h=h[e](a[e]))}),h.collect(function(e){e&&s(t,e)}),o)return"break"}(a);a++);}),i.length>0?Promise.all(i.map(function(e){return e.function})).then(function(){i.forEach(function(e){e._this.error&&s(e.key,e._this.error)}),t&&t(o)}):t&&t(o)}function s(e,t){o||(o={}),(!o[e]||t.requiredError)&&(o[e]=t)}}},645622:function(e,t,r){"use strict";r.d(t,{j:function(){return i},t:function(){return o}});var n=r(150026),i=function(e,t){var r=Object.assign({},e);return Object.keys(t||{}).forEach(function(e){var i=r[e],o=null==t?void 0:t[e];r[e]=(0,n.Kn)(i)?Object.assign(Object.assign({},i),o):o||i}),r},o=function(e,t){for(var r=t.split("."),n=e,i=0;i<r.length&&void 0!==(n=n&&n[r[i]]);i++);return n}},723850:function(e,t,r){var n;n=function(e){var t;return t=e.lib.WordArray,e.enc.Base64url={stringify:function(e,t=!0){var r=e.words,n=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],s=0;s<n;s+=3)for(var a=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<n;c++)o.push(i.charAt(a>>>6*(3-c)&63));var u=i.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e,r=!0){var n=e.length,i=r?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<i.length;s++)o[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(n=c)}return function(e,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return t.create(i,o)}(e,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},e.enc.Base64url},e.exports=n(r(359302))},80640:function(e,t,r){var n;n=function(e){var t,r,n,i;return r=(t=e.lib).Base,n=t.WordArray,(i=e.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=r.extend({init:function(e,t){e=this.words=e||[],void 0!=t?this.sigBytes=t:this.sigBytes=8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],i=0;i<t;i++){var o=e[i];r.push(o.high),r.push(o.low)}return n.create(r,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}}),e},e.exports=n(r(359302))},333638:function(e,t,r){var n=r(686707);function i(e,t,r,n,i){var s=o.apply(this,arguments);return e.addEventListener(r,s,i),{destroy:function(){e.removeEventListener(r,s,i)}}}function o(e,t,r,i){return function(r){r.delegateTarget=n(r.target,t),r.delegateTarget&&i.call(e,r)}}e.exports=function(e,t,r,n,o){return"function"==typeof e.addEventListener?i.apply(null,arguments):"function"==typeof r?i.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return i(e,t,r,n,o)}))}},792316:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw TypeError("The listener must be a function");var a=new i(n,o||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(u=1,c=Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(h=1,c=Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},534760:function(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var n,i,o,s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},484933:function(e,t,r){"use strict";r.d(t,{L:function(){return a}});var n=r(433499),i=r(795363),o=0,s=!1,a=function(e,t,r){void 0===r&&(r={});var a=(0,i.F)(e,t);if(!s&&a){if(o>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),s=!0,setTimeout(function(){s=!1},1);return}o++,(0,n.v)(a.node,r.focusOptions),o--}}},34522:function(e,t,r){"use strict";r.d(t,{V:function(){return a},Z:function(){return s}});var n=r(341579),i=r(740492),o=r(286354),s="NEW_FOCUS",a=function(e,t,r,a,c){var u=e.length,l=e[0],d=e[u-1],h=(0,o.Z9)(a);if(!(a&&e.indexOf(a)>=0)){var f=void 0!==a?r.indexOf(a):-1,p=c?r.indexOf(c):f,v=c?e.indexOf(c):-1;if(-1===f)return -1!==v?v:s;if(-1===v)return s;var g=f-p,_=r.indexOf(l),m=r.indexOf(d),y=(0,n.T)(r),b=(void 0!==a?y.indexOf(a):-1)-(c?y.indexOf(c):f);if(!g&&v>=0||0===t.length)return v;var w=(0,i.L)(e,t[0]),k=(0,i.L)(e,t[t.length-1]);if(f<=_&&h&&Math.abs(g)>1)return k;if(f>=m&&h&&Math.abs(g)>1)return w;if(g&&Math.abs(b)>1)return v;if(f<=_)return k;if(f>m)return w;if(g)return Math.abs(g)>1?v:(u+v+g)%u}}},157215:function(e,t,r){"use strict";r.d(t,{K:function(){return a}});var n=r(220885),i=r(769026),o=function(e){for(var t=new Set,r=e.length,n=0;n<r;n+=1)for(var i=n+1;i<r;i+=1){var o=e[n].compareDocumentPosition(e[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return e.filter(function(e,r){return!t.has(r)})},s=function(e){return e.parentNode?s(e.parentNode):e},a=function(e){return(0,i._2)(e).filter(Boolean).reduce(function(e,t){var r=t.getAttribute(n.Sk);return e.push.apply(e,r?o((0,i.qo)(s(t).querySelectorAll("[".concat(n.Sk,'="').concat(r,'"]:not([').concat(n.ZO,'="disabled"])')))):[t]),e},[])}},341579:function(e,t,r){"use strict";r.d(t,{O:function(){return i},T:function(){return o}});var n=r(286354),i=function(e,t){return(0,n.MH)(e)&&e.name&&t.filter(n.MH).filter(function(t){return t.name===e.name}).filter(function(e){return e.checked})[0]||e},o=function(e){var t=new Set;return e.forEach(function(r){return t.add(i(r,e))}),e.filter(function(e){return t.has(e)})}},357095:function(e,t,r){"use strict";var n=r(685458);e.exports=function(){return n()&&!!Symbol.toStringTag}},96204:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var n=r(789786),i=r(620786),o=r(579419),s=r(372971);function a(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}var c=function(){function e(t,r,i,c){void 0===r&&(r=e.defaultLocale);var u,l,d=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=d.formatToParts(e);if(1===t.length)return t[0].value;var r=t.reduce(function(e,t){return e.length&&t.type===s.du.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e},[]);return r.length<=1?r[0]||"":r},this.formatToParts=function(e){return(0,s.FK)(d.ast,d.locales,d.formatters,d.formats,e,void 0,d.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=d.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(d.locales)[0]}},this.getAst=function(){return d.ast},this.locales=r,this.resolvedLocale=e.resolveLocale(r),"string"==typeof t){if(this.message=t,!e.__parse)throw TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var h=c||{},f=(h.formatters,(0,n._T)(h,["formatters"]));this.ast=e.__parse(t,(0,n.pi)((0,n.pi)({},f),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw TypeError("A message must be provided as a String or AST.");this.formats=(u=e.formats,i?Object.keys(u).reduce(function(e,t){var r,o;return e[t]=(r=u[t],(o=i[t])?(0,n.pi)((0,n.pi)((0,n.pi)({},r||{}),o||{}),Object.keys(r).reduce(function(e,t){return e[t]=(0,n.pi)((0,n.pi)({},r[t]),o[t]||{}),e},{})):r),e},(0,n.pi)({},u)):u),this.formatters=c&&c.formatters||(void 0===(l=this.formatterCache)&&(l={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:(0,o.H)(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,(0,n.ev)([void 0],t,!1)))},{cache:a(l.number),strategy:o.A.variadic}),getDateTimeFormat:(0,o.H)(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,n.ev)([void 0],t,!1)))},{cache:a(l.dateTime),strategy:o.A.variadic}),getPluralRules:(0,o.H)(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,(0,n.ev)([void 0],t,!1)))},{cache:a(l.pluralRules),strategy:o.A.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if(void 0!==Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return new Intl.Locale(t.length>0?t[0]:"string"==typeof e?e:e[0])}},e.__parse=i.Qc,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}()},770019:function(e,t,r){var n=r(218907),i=e.exports;!function(){"use strict";var e,t,r,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof i.stringify&&(i.stringify=function(i,o,s){var c;if(e="",t="","number"==typeof s)for(c=0;c<s;c+=1)t+=" ";else"string"==typeof s&&(t=s);if(r=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw Error("JSON.stringify");return function i(o,s){var c,u,l,d,h,f=e,p=s[o],v=null!=p&&(p instanceof n||n.isBigNumber(p));switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(o)),"function"==typeof r&&(p=r.call(s,o,p)),typeof p){case"string":if(v)return p;return a(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":case"bigint":return String(p);case"object":if(!p)return"null";if(e+=t,h=[],"[object Array]"===Object.prototype.toString.apply(p)){for(c=0,d=p.length;c<d;c+=1)h[c]=i(c,p)||"null";return l=0===h.length?"[]":e?"[\n"+e+h.join(",\n"+e)+"\n"+f+"]":"["+h.join(",")+"]",e=f,l}if(r&&"object"==typeof r)for(c=0,d=r.length;c<d;c+=1)"string"==typeof r[c]&&(l=i(u=r[c],p))&&h.push(a(u)+(e?": ":":")+l);else Object.keys(p).forEach(function(t){var r=i(t,p);r&&h.push(a(t)+(e?": ":":")+r)});return l=0===h.length?"{}":e?"{\n"+e+h.join(",\n"+e)+"\n"+f+"}":"{"+h.join(",")+"}",e=f,l}}("",{"":i})})}()},902215:function(e,t,r){"use strict";function n(){return!1}r.d(t,{F:function(){return n}})},20835:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var n=r(254845);function i(e){return(0,n.Gf)(e)}},502862:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},815676:function(e,t,r){"use strict";r.d(t,{c:function(){return o}});var n=r(52555),i=r(882314);function o(e){return(0,i.m)(e[n.L])}},696772:function(e,t,r){var n=r(140860).Buffer;function i(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,o=e.length,s=this._len,a=0;a<o;){for(var c=s%i,u=Math.min(o-a,i-c),l=0;l<u;l++)r[c+l]=e[a+l];s+=u,a+=u,s%i==0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0;this._block.writeUInt32BE((r-n)/4294967296,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},i.prototype._update=function(){throw Error("_update must be implemented by subclass")},e.exports=i},878925:function(e,t){!function(r,n){"use strict";var i="function",o="undefined",s="object",a="string",c="major",u="model",l="name",d="type",h="vendor",f="version",p="architecture",v="console",g="mobile",_="tablet",m="smarttv",y="wearable",b="embedded",w="Amazon",k="Apple",E="ASUS",S="BlackBerry",x="Browser",T="Chrome",I="Firefox",A="Google",P="Huawei",C="Microsoft",R="Motorola",D="Opera",L="Samsung",N="Sharp",O="Sony",F="Xiaomi",B="Zebra",j="Facebook",M="Chromium OS",H="Mac OS",U=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},Z=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},V=function(e,t){return typeof e===a&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,500)},K=function(e,t){for(var r,o,a,c,u,l,d=0;d<t.length&&!u;){var h=t[d],f=t[d+1];for(r=o=0;r<h.length&&!u&&h[r];)if(u=h[r++].exec(e))for(a=0;a<f.length;a++)l=u[++o],typeof(c=f[a])===s&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):void 0:this[c[0]]=l?c[1].call(this,l,c[2]):void 0:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):void 0):this[c]=l||n;d+=2}},z=function(e,t){for(var r in t)if(typeof t[r]===s&&t[r].length>0){for(var i=0;i<t[r].length;i++)if(V(t[r][i],e))return"?"===r?n:r}else if(V(t[r],e))return"?"===r?n:r;return e},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,f],[/opios[\/ ]+([\w\.]+)/i],[f,[l,D+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[l,D+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[l,D]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[l,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,f],[/\bddg\/([\w\.]+)/i],[f,[l,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[l,"UC"+x]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[l,"Smart Lenovo "+x]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+x],f],[/\bfocus\/([\w\.]+)/i],[f,[l,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[l,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[l,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI "+x]],[/fxios\/([-\w\.]+)/i],[f,[l,I]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+x]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+x],f],[/samsungbrowser\/([\w\.]+)/i],[f,[l,L+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[l,f],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,j],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[l,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,T+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[l,"Android "+x]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[f,z,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[l,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,f],[/(cobalt)\/([\w\.]+)/i],[l,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,G]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,L],[d,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,L],[d,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[h,k],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,k],[d,_]],[/(macintosh);/i],[u,[h,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,N],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,P],[d,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,P],[d,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[h,F],[d,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,F],[d,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[d,g]],[/\b(opd2\d{3}a?) bui/i],[u,[h,"OPPO"],[d,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[d,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,R],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,R],[d,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,"LG"],[d,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,"LG"],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[d,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[d,g]],[/(pixel c)\b/i],[u,[h,A],[d,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,A],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,O],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,O],[d,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,w],[d,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,w],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[d,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,S],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,E],[d,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,E],[d,g]],[/(nexus 9)/i],[u,[h,"HTC"],[d,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[d,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[d,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[d,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[h,"Ulefone"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[d,_]],[/(surface duo)/i],[u,[h,C],[d,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[d,g]],[/(u304aa)/i],[u,[h,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[d,_]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[d,_]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[d,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[d,_]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[d,_]],[/\b(k88) b/i],[u,[h,"ZTE"],[d,_]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[d,_]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[d,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[d,_]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[d,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[d,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[d,g]],[/\b(ph-1) /i],[u,[h,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[d,_]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[d,_]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[d,_]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[d,_]],[/(sprint) (\w+)/i],[h,u,[d,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,C],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,B],[d,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,B],[d,g]],[/smart-tv.+(samsung)/i],[h,[d,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,L],[d,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,"LG"],[d,m]],[/(apple) ?tv/i],[h,[u,k+" TV"],[d,m]],[/crkey/i],[[u,T+"cast"],[h,A],[d,m]],[/droid.+aft(\w+)( bui|\))/i],[u,[h,w],[d,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,N],[d,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,O],[d,m]],[/(mitv-\w{5}) bui/i],[u,[h,F],[d,m]],[/Hbbtv.*(technisat) (.*);/i],[h,u,[d,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,W],[u,W],[d,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[d,v]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[d,v]],[/(playstation [345portablevi]+)/i],[u,[h,O],[d,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,C],[d,v]],[/((pebble))app/i],[h,u,[d,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[h,k],[d,y]],[/droid.+; (glass) \d/i],[u,[h,A],[d,y]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,B],[d,y]],[/(quest( \d| pro)?)/i],[u,[h,j],[d,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[d,b]],[/(aeobc)\b/i],[u,[h,w],[d,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[f,z,q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,z,q],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,H],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,f],[/\(bb(10);/i],[f,[l,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[l,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[l,T+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,M],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,f],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,f]]},J=function(e,t){if(typeof e===s&&(t=e,e=n),!(this instanceof J))return new J(e,t).getResult();var v=typeof r!==o&&r.navigator?r.navigator:n,m=e||(v&&v.userAgent?v.userAgent:""),y=v&&v.userAgentData?v.userAgentData:n,b=t?U(Y,t):Y,w=v&&v.userAgent==m;return this.getBrowser=function(){var e,t={};return t[l]=n,t[f]=n,K.call(t,m,b.browser),t[c]=typeof(e=t[f])===a?e.replace(/[^\d\.]/g,"").split(".")[0]:n,w&&v&&v.brave&&typeof v.brave.isBrave==i&&(t[l]="Brave"),t},this.getCPU=function(){var e={};return e[p]=n,K.call(e,m,b.cpu),e},this.getDevice=function(){var e={};return e[h]=n,e[u]=n,e[d]=n,K.call(e,m,b.device),w&&!e[d]&&y&&y.mobile&&(e[d]=g),w&&"Macintosh"==e[u]&&v&&typeof v.standalone!==o&&v.maxTouchPoints&&v.maxTouchPoints>2&&(e[u]="iPad",e[d]=_),e},this.getEngine=function(){var e={};return e[l]=n,e[f]=n,K.call(e,m,b.engine),e},this.getOS=function(){var e={};return e[l]=n,e[f]=n,K.call(e,m,b.os),w&&!e[l]&&y&&y.platform&&"Unknown"!=y.platform&&(e[l]=y.platform.replace(/chrome os/i,M).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return m},this.setUA=function(e){return m=typeof e===a&&e.length>500?W(e,500):e,this},this.setUA(m),this};J.VERSION="1.0.38",J.BROWSER=Z([l,f,c]),J.CPU=Z([p]),J.DEVICE=Z([u,h,d,v,g,m,_,y,b]),J.ENGINE=J.OS=Z([l,f]),typeof t!==o?(e.exports&&(t=e.exports=J),t.UAParser=J):typeof define===i&&define.amd?define(function(){return J}):typeof r!==o&&(r.UAParser=J);var X=typeof r!==o&&(r.jQuery||r.Zepto);if(X&&!X.ua){var Q=new J;X.ua=Q.getResult(),X.ua.get=function(){return Q.getUA()},X.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var r in t)X.ua[r]=t[r]}}}("object"==typeof window?window:this)},233879:function(e,t,r){"use strict";e.exports=r(27381)},756105:function(e,t,r){"use strict";e.exports=r(14394)},575874:function(e,t,r){"use strict";r.d(t,{g:function(){return a}});var n=r(826637),i=r(941457),o=r(600777),s=r(782106),a=function(){function e(t){(0,n.PA)(this,e),(0,n._x)(this,"streams",[]),(0,n._x)(this,"currentStream",null),(0,n._x)(this,"dvrWindow",0),(0,n._x)(this,"_segmentPointer",-1),this.hls=t}return(0,n.qH)(e,[{key:"lastSegment",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.lastSegment}},{key:"currentSegment",get:function(){var e;return null===(e=this.currentSegments)||void 0===e?void 0:e[this._segmentPointer]}},{key:"nextSegment",get:function(){var e;return null===(e=this.currentSegments)||void 0===e?void 0:e[this._segmentPointer+1]}},{key:"currentSegments",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.segments}},{key:"currentSubtitleEndSn",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.currentSubtitleEndSn}},{key:"liveEdge",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.liveEdge}},{key:"totalDuration",get:function(){var e;return(null===(e=this.currentStream)||void 0===e?void 0:e.totalDuration)||0}},{key:"seekRange",get:function(){var e=this.currentSegments;if(e&&e.length)return[e[0].start,e[e.length-1].end]}},{key:"isEmpty",get:function(){var e;return!(null!==(e=this.currentSegments)&&void 0!==e&&e.length)}},{key:"isLive",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.live}},{key:"hasSubtitle",get:function(){var e;return!!(null!==(e=this.currentStream)&&void 0!==e&&e.currentSubtitleStream)}},{key:"getAudioSegment",value:function(e){var t;return null===(t=this.currentStream)||void 0===t?void 0:t.getAudioSegment(e)}},{key:"moveSegmentPointer",value:function(e){var t;null==e&&(e=this._segmentPointer+1),this._segmentPointer=(0,i.u)(e,-1,null===(t=this.currentSegments)||void 0===t?void 0:t.length)}},{key:"reset",value:function(){this.streams=[],this.currentStream=null,this.dvrWindow=0,this._segmentPointer=-1}},{key:"getSegmentByIndex",value:function(e){var t;return null===(t=this.currentSegments)||void 0===t?void 0:t[e]}},{key:"setNextSegmentByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._segmentPointer=e-1}},{key:"findSegmentIndexByTime",value:function(e){var t=this.currentSegments;if(t){for(var r,n=0,i=t.length;n<i;n++)if(e>=(r=t[n]).start&&e<r.end)return n;if(.2>Math.abs(e-t[t.length-1].end))return t.length-1}}},{key:"upsertPlaylist",value:function(e,t,r){var n=this;if(e){if(e.isMaster)this.streams.length=e.streams.length,e.streams.filter(function(e){return e.url}).forEach(function(e,t){n.streams[t]?n.streams[t].update(e):n.streams[t]=new o.F(e)}),this.currentStream=this.streams[0];else if(Array.isArray(e.segments)){var i=this.currentStream;if(i){i.update(e,t,r);var a=i.updateSubtitle(r);a&&this.hls.emit(s.j.SUBTITLE_SEGMENTS,{list:a})}else this.reset(),this.currentStream=this.streams[0]=new o.F(e,t,r)}this.currentStream&&this.hls.isLive&&!this.dvrWindow&&(this.dvrWindow=this.currentSegments.reduce(function(e,t){return e+t.duration},0))}}},{key:"switchSubtitle",value:function(e){var t;null===(t=this.currentStream)||void 0===t||t.switchSubtitle(e)}},{key:"clearOldSegment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=this.currentStream;if(this.dvrWindow&&t){var r=t.endTime-this.dvrWindow;!(r<=0)&&(t.segments.length<=e||(this._segmentPointer=t.clearOldSegment(r,this._segmentPointer)))}}},{key:"checkSegmentTrackChange",value:function(e,t){var r=this.findSegmentIndexByTime(e),n=this.getSegmentByIndex(r);if(n&&(n.hasAudio||n.hasVideo)){if(2!==t&&n.hasAudio&&n.hasVideo)return n;if(!(n.end-e>.3)){var i=this.getSegmentByIndex(r+1);if(i&&(i.hasAudio||i.hasVideo)&&(i.hasAudio!==n.hasAudio||i.hasVideo!==n.hasVideo))return i}}}}]),e}()},765731:function(e,t,r){"use strict";r.d(t,{J_:function(){return a},Kn:function(){return o},PO:function(){return s}});var n=r(11065),i=Object.prototype.toString;function o(e){return null!==e&&"object"===(0,n.Ac)(e)}function s(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function a(e){return"[object Date]"===i.call(e)}},429152:function(e,t,r){"use strict";r.d(t,{mf:function(){return d}});var n=r(11065),i=r(884532),o=r(537686),s=r(944607),a=r(263901),c=r(765731),u=r(892371),l=r(923428),d=function(e){(0,n.XW)(d,e);var t,r=(0,n.WY)(d);function d(e){var t;return(0,n.PA)(this,d),t=r.call(this,e),(0,n._x)((0,n.Lc)(t),"type",o.t.FETCH),(0,n._x)((0,n.Lc)(t),"_queue",[]),(0,n._x)((0,n.Lc)(t),"_alive",[]),(0,n._x)((0,n.Lc)(t),"_currentTask",null),(0,n._x)((0,n.Lc)(t),"_config",void 0),t._config=(0,s.i)(e),t._config.loaderType!==o.t.XHR&&i.j.isSupported()||(t.type=o.t.XHR),t.log=e.logger,t}return(0,n.qH)(d,[{key:"isFetch",value:function(){return this.type===o.t.FETCH}},{key:"load",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"!=typeof e&&e?r=e:r.url=e||r.url||this._config.url,(r=Object.assign({},this._config,r)).params&&(r.params=Object.assign({},r.params)),r.headers&&(0,c.PO)(r.headers)&&(r.headers=Object.assign({},r.headers)),r.body&&(0,c.PO)(r.body)&&(r.body=Object.assign({},r.body)),r.transformRequest&&(r=r.transformRequest(r)||r),r.logger=this.log;var n=new a.i(this.type,r);return n.loader.on(l.K.REAL_TIME_SPEED,function(e){t.emit(l.K.REAL_TIME_SPEED,e)}),this._queue.push(n),1!==this._queue.length||this._currentTask&&this._currentTask.running||this._processTask(),n.promise}},{key:"cancel",value:(t=(0,n.x)((0,n.l5)().mark(function e(){var t;return(0,n.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._queue.map(function(e){return e.cancel()}).concat(this._alive.map(function(e){return e.cancel()})),this._currentTask&&t.push(this._currentTask.cancel()),this._queue=[],this._alive=[],e.next=6,Promise.all(t);case 6:return e.next=8,(0,u._v)();case 8:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var t=this._currentTask.exec().catch(function(e){});t&&"function"==typeof t.finally&&t.finally(function(){var t,r;null!==(t=e._currentTask)&&void 0!==t&&t.alive&&(null===(r=e._alive)||void 0===r?void 0:r.length)>0&&(e._alive=e._alive.filter(function(t){return t&&t!==e._currentTask})),e._processTask()})}}}],[{key:"isFetchSupport",value:function(){return i.j.isSupported()}}]),d}(r(733730).Z)},133239:function(e,t,r){"use strict";r.d(t,{n:function(){return u}});var n=r(949024),i=r(400880),o=r(690516),s=r(242654),a=r(288661),c=5*9e4,u=function(){function e(t,r,i){(0,n.PA)(this,e),this.videoTrack=t,this.audioTrack=r,this.metadataTrack=i,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=!1,this._videoTimestampBreak=!1,this._lastAudioExceptionGapDot=0,this._lastAudioExceptionOverlapDot=0,this._lastAudioExceptionLargeGapDot=0}return(0,n.qH)(e,[{key:"fix",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];t=Math.round(9e4*t);var i=this.videoTrack,o=this.audioTrack,s=i.samples,a=o.samples;if(s.length||a.length){var c=s[0],u=a[0],l=0;if(s.length&&a.length&&(l=c.dts-u.pts),this._baseDtsInited||this._calculateBaseDts(this.audioTrack,this.videoTrack),r&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t),!n){this._videoNextDts=l>0?t+l:t,this._audioNextPts=l>0?t:t-l;var d=c?c.dts-this._baseDts-this._videoNextDts:0,h=u?u.pts-this._baseDts-this._audioNextPts:0;Math.abs(d||h)>9e4&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t)}if(this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(o),this._fixVideo(i),this.metadataTrack.exist()){var f=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(t){t.pts=t.originPts-e._baseDts,t.time=Math.max(0,t.pts)/f})}i.samples.length&&(i.baseMediaDecodeTime=i.samples[0].dts),o.samples.length&&(o.baseMediaDecodeTime=o.samples[0].pts*o.timescale/9e4)}}},{key:"_fixVideo",value:function(e){var t,r,n=this,o=e.samples;if(o.length){if(o.forEach(function(e){e.dts-=n._baseDts,e.pts-=n._baseDts}),void 0===this._videoNextDts){var s=o[0];this._videoNextDts=s.dts}var a=o.length,c=0,u=o[0],l=o[1],d=this._videoNextDts-u.dts;if(Math.abs(d)>45e3&&(u.dts+=d,u.pts+=d,e.warnings.push({type:i.Bc.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts,firstSampleDts:u.dts,nextSampleDts:null===(t=o[1])||void 0===t?void 0:t.dts,sampleDuration:d}),l&&Math.abs(l.dts-u.dts)>9e4&&(this._videoTimestampBreak=!0,o.forEach(function(e,t){0!==t&&(e.dts+=d,e.pts+=d)}))),e.fpsNum&&e.fpsDen)r=e.timescale*(e.fpsDen/e.fpsNum);else{var h=e.samples[0],f=e.samples[a-1];r=1===a?9e3:Math.floor((f.dts-h.dts)/(a-1))}for(var p=0;p<a;p++){var v=o[p].dts,g=o[p+1];if((c=p<a-1?g.dts-v:o[p-1]?Math.min(v-o[p-1].dts,r):r)>9e4||c<0){this._videoTimestampBreak=!0,c=this._audioTimestampBreak?r:Math.max(c,2700);var _=this._audioNextPts||0;g&&g.dts>_&&(c=r),e.warnings.push({type:i.Bc.LARGE_VIDEO_GAP,time:v/e.timescale,dts:v,originDts:o[p].originDts,nextDts:this._videoNextDts,sampleDuration:c,refSampleDuration:r})}o[p].duration=c,this._videoNextDts+=c}}}},{key:"_fixAudio",value:function(e){var t=this,r=e.samples;r.length&&(r.forEach(function(e){e.pts-=t._baseDts,e.dts=e.pts}),this._doFixAudioInternal(e,r,9e4))}},{key:"_calculateBaseDts",value:function(e,t){var r=e.samples,n=t.samples;if(!r.length&&!n.length)return!1;var o=1/0,s=1/0;r.length&&(e.baseDts=o=r[0].pts),n.length&&(t.baseDts=s=n[0].dts),this._baseDts=Math.min(o,s);var a=s-o;return Number.isFinite(a)&&Math.abs(a)>45e3&&t.warnings.push({type:i.Bc.LARGE_AV_SHIFT,videoBaseDts:s,audioBasePts:o,baseDts:this._baseDts,delta:a}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){this._baseDtsInited&&this._videoTimestampBreak&&this._audioTimestampBreak&&this._calculateBaseDts(this.audioTrack,this.videoTrack)&&(this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts),this._audioLastSample=null,this._videoLastSample=null,this._videoTimestampBreak=!1,this._audioTimestampBreak=!1)}},{key:"_doFixAudioInternal",value:function(e,t,r){e.sampleDuration||(e.sampleDuration=a.W.getFrameDuration(e.timescale,r));var n=e.sampleDuration;if(void 0===this._audioNextPts){var u=t[0];this._audioNextPts=u.pts}for(var l=0;l<t.length;l++){var d=this._audioNextPts,h=t[l],f=h.pts-d;if(!this._audioTimestampBreak&&f>=3*n&&f<=9e4&&!s.G6){var p=a.W.getSilentFrame(e.codec,e.channelCount)||t[0].data.subarray(),v=Math.floor(f/n);Math.abs(h.pts-this._lastAudioExceptionGapDot)>c&&(this._lastAudioExceptionGapDot=h.pts),e.warnings.push({type:i.Bc.AUDIO_FILLED,pts:h.pts,originPts:h.originPts,count:v,nextPts:d,refSampleDuration:n});for(var g=0;g<v;g++){var _=new o.X(Math.floor(d),p);_.originPts=Math.floor(this._baseDts+d),t.splice(l,0,_),this._audioNextPts+=n,l++}l--}else f<=-3*n&&f>=-9e4?(Math.abs(h.pts-this._lastAudioExceptionOverlapDot)>c&&(this._lastAudioExceptionOverlapDot=h.pts,e.warnings.push({type:i.Bc.AUDIO_DROPPED,pts:h.pts,originPts:h.originPts,nextPts:d,refSampleDuration:n})),t.splice(l,1),l--):(Math.abs(f)>=9e4&&(this._audioTimestampBreak=!0,Math.abs(h.pts-this._lastAudioExceptionLargeGapDot)>c&&(this._lastAudioExceptionLargeGapDot=h.pts,e.warnings.push({type:i.Bc.LARGE_AUDIO_GAP,time:h.pts/1e3,pts:h.pts,originPts:h.originPts,nextPts:d,sampleDuration:f,refSampleDuration:n}))),h.dts=h.pts=d,this._audioNextPts+=n)}}}]),e}()},884135:function(e,t,r){"use strict";r.d(t,{TL:function(){return u},ZM:function(){return d},j1:function(){return l},j_:function(){return function e(t,r){if(t===r)return!0;if(void 0===t||void 0===r)return!1;if((0,s.HD)(t)||(0,s.HD)(r))return t===r;var n=Object.keys(t),i=Object.keys(r);return n.length===i.length&&n.every(function(n){return e(t[n],r[n])})}}});var n=r(188389),i=r(527548),o=r(110242),s=r(404382),a=r(508386),c=r(853459);function u(e){return"object"==typeof e&&null!==e&&"value"in e&&"_event"in e}function l(e,t){var r=e.exec;return(0,n.pi)((0,n.pi)({},e),{exec:void 0!==r?function(){return r(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0})}var d=function(){function e(e){var t,r=this;this.actions=[],this.activities=i.qP,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||i.qP,this.meta=(0,c.xZ)(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(t=Array.isArray(e.tags)?new Set(e.tags):e.tags)&&void 0!==t?t:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return(0,c.nJ)(r.configuration)}})}return e.from=function(t,r){return t instanceof e?t.context!==r?new e({value:t.value,context:r,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new e({value:t,context:r,_event:a.bf,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,r){if(t instanceof e){if(!t.actions.length)return t;var n=a.bf;return new e({value:t.value,context:r,_event:n,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,r)},e.prototype.toStrings=function(e,t){var r=this;if(void 0===e&&(e=this.value),void 0===t&&(t="."),(0,s.HD)(e))return[e];var i=Object.keys(e);return i.concat.apply(i,(0,n.ev)([],(0,n.CR)(i.map(function(n){return r.toStrings(e[n],t).map(function(e){return n+t+e})})),!1))},e.prototype.toJSON=function(){this.configuration,this.transitions;var e=this.tags,t=(this.machine,(0,n._T)(this,["configuration","transitions","tags","machine"]));return(0,n.pi)((0,n.pi)({},t),{tags:Array.from(e)})},e.prototype.matches=function(e){return(0,s.W)(e,this.value)},e.prototype.hasTag=function(e){return this.tags.has(e)},e.prototype.can=function(e){o.M&&(0,s.ZK)(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var t,r=null===(t=this.machine)||void 0===t?void 0:t.getTransitionData(this,e);return!!(null==r?void 0:r.transitions.length)&&r.transitions.some(function(e){return void 0!==e.target||e.actions.length})},e}()},763470:function(e,t,r){"use strict";e.exports=r.p+"static/image/loading.43d5515f.webp"},889190:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(69984),i=r(764112),o=r(772322);r(218571);var s=e=>(0,o.jsxs)("svg",(0,i._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),{children:[(0,o.jsx)("path",{fill:"#00C17C",d:"M13.628 8.385a.417.417 0 0 0 0-.59l-.59-.589a.417.417 0 0 0-.589 0l-2.866 2.866-1.616-1.616a.417.417 0 0 0-.59 0l-.588.59a.417.417 0 0 0 0 .589l2.5 2.5a.417.417 0 0 0 .589 0z"}),(0,o.jsx)("path",{fill:"#00C17C",fillRule:"evenodd",d:"M17.5 8.334c0 7.917-7.5 10-7.5 10s-7.5-2.083-7.5-10V4.167L10 .834l7.5 3.333zm-13.333 0V5.25L10 2.658l5.833 2.592v3.084c0 3.345-1.552 5.401-3.129 6.67A10.5 10.5 0 0 1 10 16.572q-.207-.079-.483-.204a10.5 10.5 0 0 1-2.221-1.362c-1.577-1.27-3.13-3.326-3.13-6.671m6.286 8.396h-.003zm-.904 0h.001-.003z",clipRule:"evenodd"})]}))},839977:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(69984),i=r(764112),o=r(772322);r(218571);var s=e=>(0,o.jsxs)("svg",(0,i._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:24,height:25,fill:"none",viewBox:"0 0 24 25"},e),{children:[(0,o.jsx)("path",{fill:"#24A3FF",fillRule:"evenodd",d:"M3.45 3.633a1.95 1.95 0 0 0-1.95 1.95v11.7a1.95 1.95 0 0 0 1.95 1.95h7.746l.031-1.375c.016-.71.168-1.43.567-2.059a3.4 3.4 0 0 1 1.461-1.283 4.1 4.1 0 0 1 1.758-.383c.662 0 1.345.112 1.953.445q.093.051.182.107h1.902v1.31H21V5.584a1.95 1.95 0 0 0-1.95-1.95zm.003 1.951h2.925v2.6H3.453zm0 4.55h2.925v2.6H3.453zm2.925 4.55H3.453v2.6h2.925zm9.747-9.1h2.925v2.6h-2.925zm0 4.55h2.925v2.6h-2.925zm-1.96 9.153-1.647 1.566v1.143h4.536v-1.314h-2.412l.927-.846q.54-.495.837-.855.297-.369.414-.702.126-.342.126-.747 0-.513-.225-.945a1.67 1.67 0 0 0-.702-.693q-.477-.261-1.233-.261-.612 0-1.125.243a1.9 1.9 0 0 0-.828.729q-.315.495-.333 1.287h1.512q.009-.306.099-.504a.67.67 0 0 1 .243-.306.6.6 0 0 1 .351-.108q.324 0 .486.17.162.163.162.469 0 .252-.117.477-.108.225-.369.504-.252.27-.702.693m5.193-1.791h-1.746l1.602 2.232-1.602 2.268h1.746l.783-1.224.774 1.224h1.746l-1.602-2.268 1.602-2.232h-1.746l-.774 1.224z",clipRule:"evenodd"}),(0,o.jsx)("path",{stroke:"#FAFBFF",d:"M0 .133h24v24H0z"})]}))},377961:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(69984),i=r(764112),o=r(772322);r(218571);var s=e=>(0,o.jsx)("svg",(0,i._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:24,height:25,fill:"none",viewBox:"0 0 24 25"},e),{children:(0,o.jsx)("path",{fill:"#16161D",fillRule:"evenodd",d:"M4 4.8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-12a2 2 0 0 0-2-2zm11.332 11.207h.44a3.229 3.229 0 0 0 0-6.457h-3.496l1.02 2.153h2.475a1.075 1.075 0 0 1 0 2.15h-1.458zM5 16.011 8.012 9.55h2.391l3.21 6.46h-2.405L9.23 12.033 7.376 16.01z",clipRule:"evenodd"})}))},67775:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(69984),i=r(764112),o=r(772322);r(218571);var s=e=>(0,o.jsxs)("svg",(0,i._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32"},e),{children:[(0,o.jsxs)("g",{clipPath:"url(#audio-play_svg__a)",children:[(0,o.jsx)("circle",{cx:16,cy:16,r:16,fill:"#FAFBFF"}),(0,o.jsx)("path",{fill:"#090C14",d:"M23.916 15.28a.833.833 0 0 1 0 1.443l-11.25 6.496a.833.833 0 0 1-1.25-.722V9.507a.833.833 0 0 1 1.25-.722z"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"audio-play_svg__a",children:(0,o.jsx)("path",{fill:"#fff",d:"M0 0h32v32H0z"})})})]}))},690012:function(e,t,r){"use strict";var n=r(772322);r(232257);var i=r(676635),o=r(167224),s=r(532625),a=(0,i.s)();(0,s.Z)(a,()=>(0,o.s)((0,n.jsx)(a,{}),"root"))},969240:function(e,t,r){"use strict";var n=r(772322);r(67961);var i=r(676635),o=r(167224),s=r(932350),a=(0,i.s)();(0,s.Z)(a,()=>(0,o.s)((0,n.jsx)(a,{}),"root"))},498603:function(e,t,r){"use strict";var n=r(46395),i=r(741159);(0,n.cE)({App:i.Z})},72484:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(461228),i=new Map;function o(){return(o=(0,n._)(function*(e,t){var{cacheKey:r,maxAge:n=36e5}=t,o=i.get(r);if(o&&new Date().getTime()-o.cacheStartTime<o.maxAge)try{return yield o.promise,o.promise}catch(e){}var s=e();return i.set(r,{promise:s,cacheStartTime:new Date().getTime(),maxAge:n}),s})).apply(this,arguments)}let s=function(e,t){return o.apply(this,arguments)}},127574:function(e,t,r){"use strict";r.d(t,{h:function(){return _}});var n=r(772322);r(525889),r(459360),r(529114);var i=r(812298),o=r(401725),s=r(595051),a=r(158065),c=r(123951),u=r(659179),l=r(282893),d=r(793676),h=r(152155),f=r.n(h),p=r(218571),v=r(124337),g=r(749146),_=e=>{var{renderService:t,shareModalHideCallback:r,showHideUi:h,handleCloseCallback:_}=e,[m,y]=(0,l.L)(t),b=m.matches("open.save.saving"),w=m.matches("open.rendering"),k=m.matches("open.renderFailed")||m.matches("open.renderSuccess.requestFailed")||m.matches("open.save.fail"),[E,S]=(0,p.useState)(!1),x=m.context.allowCloseWindow,T=(0,d.v)(t,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.customText}),I=(0,d.v)(t,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.hideHeaderBtn}),A=(0,n.jsx)(o.Z,{className:"lv_render-tooltip",position:"top",trigger:"hover",content:c.oc.t("web_ttam_feedback"),children:(0,n.jsx)(u.CgH,{className:"right-feedback",size:24,onClick:()=>{(0,a.Cj)().report({action:a.s7.feedback}),(0,g.S)({})}})}),P=(0,n.jsx)(o.Z,{className:"lv_render-tooltip",position:"top",trigger:"hover",content:c.oc.t("hide_to_taskbar"),children:(0,n.jsx)(u.HrH,{size:24,onClick:()=>{var e,t,n,i;_(),y("CLOSE"),null==r||r(),(0,a.Cj)().report({action:a.s7.hide,current_page:null===(t=(0,v.H7)())||void 0===t?void 0:null===(e=t.extraData)||void 0===e?void 0:e.currentPage,enter_from:null===(i=(0,v.H7)())||void 0===i?void 0:null===(n=i.extraData)||void 0===n?void 0:n.enterFrom})}})}),C=(0,n.jsx)(o.Z,{className:"lv_render-tooltip",position:"top",trigger:"hover",content:c.oc.t("web_ttam_close"),children:(0,n.jsx)(u.xcW,{size:24,onClick:()=>{var e,t,r,n;_(),y("CLOSE"),(0,a.Cj)().report({action:a.s7.close,current_page:null===(t=(0,v.H7)())||void 0===t?void 0:null===(e=t.extraData)||void 0===e?void 0:e.currentPage,enter_from:null===(n=(0,v.H7)())||void 0===n?void 0:null===(r=n.extraData)||void 0===r?void 0:r.enterFrom})}})}),R=(0,p.useMemo)(()=>!!b||!!w&&!x,[b,w,x]);return(0,p.useEffect)(()=>{R||S(!1)},[R]),(0,n.jsxs)("div",{className:"lv_render-container-header",children:[(0,n.jsx)("div",{className:"lv_render-container-header-left",children:(null==T?void 0:T.title)!==void 0?(0,n.jsx)("div",{className:"lv_render-container-header-left-text",style:{marginLeft:0},children:T.title}):m.matches("open.renderSuccess.requestSuccess")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.civ,{size:20,color:"#2DD196"}),(0,n.jsx)("div",{className:"lv_render-container-header-left-text",children:c.oc.t("web_sharereview_text_video_is_ready",{},"Your video is ready!")})]})}),(0,n.jsxs)("div",{className:"lv_render-container-header-right",children:[!I&&(0,n.jsxs)(n.Fragment,{children:[A,R&&(0,n.jsx)(i.Z,{showArrow:!0,arrowProps:{className:"hideModalIcon-arrow"},popupVisible:E&&R,position:"br",getPopupContainer:e=>{var t;return null!==(t=document.querySelector(".lv_render-container-header-right"))&&void 0!==t?t:e},popup:()=>(0,n.jsxs)("div",{className:"hideModalIcon-trigger",style:{width:280},children:[(0,n.jsx)("div",{className:"title",children:c.oc.t("web_not_hide")}),(0,n.jsx)("div",{className:"content",children:c.oc.t("web_not_hide_window")}),(0,n.jsx)("div",{className:"footer",children:(0,n.jsx)(s.Z,{type:"primary",onClick:()=>S(e=>!e),children:c.oc.t("web_got_it")})})]}),children:(0,n.jsx)(o.Z,{className:"lv_render-tooltip",position:"top",trigger:"hover",content:c.oc.t("hide_to_taskbar"),children:(0,n.jsx)(u.HrH,{className:f()({"hideModalIcon-disable":!R}),size:24,onClick:()=>{var e,t,r,n;S(e=>!e),(0,a.Cj)().report({action:a.s7.hide,panel_page:a.Vp.saving,current_page:null===(t=(0,v.H7)())||void 0===t?void 0:null===(e=t.extraData)||void 0===e?void 0:e.currentPage,enter_from:null===(n=(0,v.H7)())||void 0===n?void 0:null===(r=n.extraData)||void 0===r?void 0:r.enterFrom})}})})}),!R&&(h?P:C)]}),I&&k&&C]})]})}},465712:function(e,t,r){"use strict";r.d(t,{h:function(){return o}});var n=r(772322),i=r(793676);r(218571),r(18299);var o=e=>{var{renderService:t}=e,r=(0,i.v)(t,e=>e.context.fileInfo.previewImageUrl);return(0,n.jsx)("section",{className:"lv_render-Img",children:(0,n.jsx)("img",{src:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(r,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),crossOrigin:"anonymous"})})}},762525:function(e,t,r){"use strict";r.d(t,{U:function(){return S}});var n=r(772322);r(459360);var i=r(401725),o=r(158065),s=r(123951),a=r(208282),c=r(585025),u=r(935316),l=r(956238),d=r(95269),h=r(85322),f=r(282893),p=r(793676),v=r(152155),g=r.n(v),_=r(218571),m=r(173383),y=r(703034),b=r(523972),w=r(124337),k=r(462802),E=r(363650),S=e=>{var t,r,v,S,x,T,I,A,P,C,R,D,L,N,O,F,B,j,M,H,U,Z,V,G,{renderService:W,handleCloseCallback:K,shareModalHideCallback:z}=e,[q,Y]=(0,f.L)(W),J=q.matches("open.save"),X=q.matches("open.save.fail"),Q=q.matches("open.save.saving"),$=(0,p.v)(W,e=>e.context.isSaveStateInit),ee=(0,p.v)(W,e=>e.context.presetProgressLimit),et=["open.rendering","open.renderSuccess","open.renderFailed"].some(q.matches)&&!q.matches("open.renderSuccess.requestSuccess"),er=q.matches("open.renderSuccess"),en=q.matches("open.renderSuccess.requestSuccess"),ei=(0,p.v)(W,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.errorTitle}),eo=(0,p.v)(W,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.customContent}),es=(0,p.v)(W,e=>e.context.fileInfo.coverImg),ea=(0,p.v)(W,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.errorCode}),ec=(0,p.v)(W,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.errorMessage}),{spaceInfo:eu}=q.context,el=(0,p.v)(W,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.saveStateOperatesCallback}),ed=(0,p.v)(W,e=>e.context.taskId),eh=(0,c._)(),[ef,ep]=(0,_.useState)(void 0),ev=(0,p.v)(W,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.customText}),eg=(0,p.v)(W,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.customResultView}),e_=(0,p.v)(W,e=>{var t;return null===(t=e.context)||void 0===t?void 0:t.disableCancelConfirm}),em=J||et||!!eg&&en,ey=eg&&en,eb=!eg&&en;(0,_.useEffect)(()=>{var e,t,r;null===(r=(0,w.H7)())||void 0===r||null===(t=r.expandInstanceInfo)||void 0===t||null===(e=t.expandModal)||void 0===e||e.isSupportExpand().then(e=>{ep(e)})},[]);var[ew,ek]=(0,_.useState)();return(0,_.useEffect)(()=>{et&&!ew&&ek(new l.K)},[et,J]),(0,n.jsxs)("div",{className:g()("lv_render-container-body-render",eb&&"success"),children:[(0,n.jsxs)("div",{className:"lv_render-container-body-render-video",children:[em&&(0,n.jsx)("div",{className:"coverImg",children:(0,n.jsx)("img",{src:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(es,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),crossOrigin:"anonymous",alt:""})}),J&&(0,n.jsx)(y.S,{isSaveFail:X,isSaving:Q,errorCode:ea,errorTitle:ei,errorMessage:ec,isSupportExpand:ef,process:q.context.renderProgress,precision:q.context.precision,handleClose:()=>{K(),Y({type:"CLOSE",reportHide:!1})},saveStateOperatesCallback:el,disableCancelConfirm:e_}),et&&(0,n.jsx)(m.p,{taskId:ed,customContent:eo,renderSimulateProgress:ew,isSaveStateInit:$,allowCloseWindow:q.context.allowCloseWindow,presetProgressLimit:ee,isRenderSuccess:er,handleRenderCancel:e=>{Y({type:"CANCEL_RENDER",cancelExportPromiseResolve:e})},handleIgnoreRenderingErr:()=>{var e=q.context.renderPendingInfo.errCode;e&&Y({type:"IGNORE_RENDERING_PROCESS_ERR",errCode:e})},type:(()=>{if(q.matches("open.renderSuccess.requesting"))return u.q.load;if(q.matches("open.renderFailed.normal"))return u.q.failed;if(q.matches("open.renderFailed.hadCancel"))return u.q.hadCancel;if(q.matches("open.renderFailed.fallSpace"))return u.q.spaceFull;if(q.matches("open.renderSuccess.requestFailed"))return u.q.loadFileFailed;if(q.matches("open.rendering")){var{errCode:e,ignoreErrCodeSet:t}=q.context.renderPendingInfo;if(e===E.Fm.UploadFailed&&!t.has(e))return u.q.exportWithUploadFailed}return u.q.export})(),errorCode:ea,renderStateOperatesCallback:q.context.renderStateOperatesCallback,renderPendingErrCode:q.context.renderPendingInfo.errCode,ignoreErrCodeSet:q.context.renderPendingInfo.ignoreErrCodeSet,createTime:q.context.createTime,expectFinishTime:q.context.expectFinishTime,process:q.context.renderProgress,allowCancelRender:q.context.allowCancelRender,coverImg:null===(r=q.context)||void 0===r?void 0:null===(t=r.fileInfo)||void 0===t?void 0:t.coverImg,precision:q.context.precision,retry:()=>{ed?Y("RETRY_RENDER"):(K(),Y("CLOSE"),null==z||z())},duplicate:()=>{ed?Y("DUPLICATE_RENDER"):(K(),Y("CLOSE"),null==z||z())},goToCloud:()=>{(0,o.Cj)().report({action:o.s7.cloud}),location.href=globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(eh("".concat(location.origin).concat(a.l.WORKSPACE.CHILD.MY_CLOUD.PATH,"/").concat(null==eu?void 0:eu.workspaceId)),null,{logType:"js.href/src",mode:"black",reportOnly:"all"})},handlePureTransitionRenderSuccess:()=>{Y("PURE_TRANSITION_RENDER_SUCCESS")},isSupportExpand:ef,customText:null==ev?void 0:ev.progress,disableCancelConfirm:e_,handleProcessChange:q.context.exportProcessCb,reportInfo:q.context.exportReportExtra}),ey&&(0,_.cloneElement)(eg,{loadingIcon:(0,n.jsx)(k.I,{})}),eb&&(0,n.jsx)(b.n,{renderService:W})]}),(0,n.jsx)("div",{className:"lv_render-container-body-render-divider"}),(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo",children:[(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo-item",children:[(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo-item-key",children:[s.oc.t("filename_web"),":"]}),(0,n.jsx)(i.Z,{className:"lv_render-tooltip",position:"bottom",trigger:"hover",content:null!==(Z=null===(S=q.context)||void 0===S?void 0:null===(v=S.fileInfo)||void 0===v?void 0:v.fileName)&&void 0!==Z?Z:"-",children:(0,n.jsx)("div",{className:"lv_render-container-body-render-fileInfo-item-value",children:null!==(V=null===(T=q.context)||void 0===T?void 0:null===(x=T.fileInfo)||void 0===x?void 0:x.fileName)&&void 0!==V?V:"-"})})]}),(0,n.jsx)("div",{className:"segmentation"}),(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo-item",children:[(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo-item-key",children:[s.oc.t("format"),":"]}),(0,n.jsx)("div",{className:"lv_render-container-body-render-fileInfo-item-value",children:(null===(A=q.context)||void 0===A?void 0:null===(I=A.fileInfo)||void 0===I?void 0:I.format)?(0,d.z)(null===(C=q.context)||void 0===C?void 0:null===(P=C.fileInfo)||void 0===P?void 0:P.format).toLocaleUpperCase():"-"})]}),(0,n.jsx)("div",{className:"segmentation"}),(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo-item",children:[(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo-item-key",children:[s.oc.t("resolution"),":"]}),(0,n.jsx)("div",{className:"lv_render-container-body-render-fileInfo-item-value",children:(null===(D=q.context)||void 0===D?void 0:null===(R=D.fileInfo)||void 0===R?void 0:R.resolution)&&(null===(N=q.context)||void 0===N?void 0:null===(L=N.fileInfo)||void 0===L?void 0:L.resolution)!=="-"?null===(B=q.context)||void 0===B?void 0:null===(F=B.fileInfo)||void 0===F?void 0:null===(O=F.resolution)||void 0===O?void 0:O.toLocaleUpperCase():"-"})]}),(0,n.jsx)("div",{className:"segmentation"}),(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo-item",children:[(0,n.jsxs)("div",{className:"lv_render-container-body-render-fileInfo-item-key",children:[s.oc.t("size_web_capcut"),":"]}),(0,n.jsx)("div",{className:"lv_render-container-body-render-fileInfo-item-value",children:Number(null===(M=q.context)||void 0===M?void 0:null===(j=M.fileInfo)||void 0===j?void 0:j.size)&&null!==(G=(0,h.ys)(Number(null===(U=q.context)||void 0===U?void 0:null===(H=U.fileInfo)||void 0===H?void 0:H.size)))&&void 0!==G?G:s.oc.t("calculating")})]})]})]})}},270913:function(e,t,r){"use strict";r.d(t,{Lk:function(){return b},_C:function(){return y}});var n=r(772322);r(822289),r(529114);var i=r(5622),o=r(595051),s=r(218571),a=r(282893),c=r(793676),u=r(123951),l=r(659179),d=r(454078);r(975516);var h=r(130814),f=r(283659),p=r(50751),v=r(539),g=r(91933),_=r(364262),m=r(743160),y=()=>(0,n.jsxs)("div",{className:"lv_brand_notice_panel_wide-footer",children:[(0,n.jsx)(_.Z,{className:"loading-icon",style:{marginRight:4.2}}),(0,n.jsx)("span",{children:u.ZP.t("web_feedback_button_account_account",{},"Account")})]}),b=e=>{var{brandLogo:t,brandName:r,theme:_=p.Q.Light,brandNameIcon:b,hideLogo:w,onClose:k,appId:E}=e,[S,x]=(0,s.useState)(!1),T=(0,d.t)(),[I]=(0,a.L)(T),{isFirstLogin:A,timeStampForCc4b:P}=(0,c.v)(T,e=>e.context);(0,s.useEffect)(()=>{if(A&&0!==P){var e,t,r=f.m.getString(v.g.LOGIN_TYPE_FOR_FIRST_LOGIN_NOTICE);new h.F().report({action:"authorize_popup_show",login_type:r||(null===(e=I.context.loginReportParams)||void 0===e?void 0:e.type),enter_from:null===(t=I.context.loginReportParams)||void 0===t?void 0:t.pageEnterFrom}),x(!0)}},[A,P]);var C=e=>{x(!1),localStorage.removeItem("show_branch_rel"),E===g._S.commerce?e?T.send({type:"CONTINUE_TO_BUSINESS_LOGIN",isConfirmToBusinessLogin:e}):T.send({type:"ABORT_TO_BUSINESS_LOGIN",isConfirmToBusinessLogin:e}):T.send({type:"UPDATE_FIRST_LOGIN_NOTICE_CLOSE",isFirstLoginNoticeClose:!0}),null==k||k()},R=[{desc:u.ZP.t("web_accounts_text_personal_info",{},"The email address and account password"),name:"info"},{desc:u.ZP.t("web_accounts_text_3rd_party_platforms",{},"Third-party bound account relationship"),name:"bind"},{desc:u.ZP.t("web_accounts_text_account_uid",{},"Your account name and other personal information"),name:"account"}];return(0,n.jsx)(i.Z,{maskStyle:{zIndex:1990},wrapStyle:{zIndex:1990},visible:S,footer:null,closeIcon:null,focusLock:!1,className:"lv_brand_notice_panel_wide-modal",children:(0,n.jsxs)("div",{className:"lv_brand_notice_panel_wide-wrapper","data-lv-theme-force":_===p.Q.Dark?"dark":"light",children:[(0,n.jsx)("div",{className:"lv_brand_notice_panel_wide-content",children:(0,n.jsxs)("div",{className:"lv_brand_notice_panel_wide-detail",children:[(0,n.jsxs)("div",{className:"lv_brand_notice_panel_wide-branches",children:[(0,n.jsxs)("div",{className:"lv_brand_notice_panel_wide-branches-item",children:[t&&(0,n.jsx)("div",{className:"account-icon",children:t})||!w&&(0,n.jsx)(l.yr6,{className:"account-icon"}),(0,n.jsx)("span",{className:"brand-name",children:null!=b?b:r})]}),(0,n.jsx)(l.VpD,{size:24}),(0,n.jsxs)("div",{className:"lv_brand_notice_panel_wide-branches-item",children:[(0,n.jsx)(l.yr6,{className:"account-icon"}),(0,n.jsxs)("div",{className:"brand-name",children:[(0,n.jsx)(m.i,{className:"brand-capcut-logo"}),(0,n.jsx)("span",{className:"brand-capcut-name-text",children:u.ZP.t("web_feedback_button_account_account",{},"Account")})]})]})]}),(0,n.jsxs)("div",{className:"lv_brand_notice_panel_wide-notification",children:[(0,n.jsx)("div",{className:"lv_brand_notice_panel_wide-notification-title",children:u.ZP.t("web_accounts_text_capcut_accounts_info",{string0:(0,n.jsx)(n.Fragment,{children:r})},"You can manage CapCut account:")}),(0,n.jsx)("div",{className:"lv_brand_notice_panel_wide-notification-a",children:R.map(e=>(0,n.jsx)("div",{className:"lv_brand_notice_panel_wide-notification-item",children:(0,n.jsx)("span",{children:e.desc})},e.name))})]}),(0,n.jsx)(o.Z,{className:"lv_brand_notice_panel_wide-primary-button",type:"primary",onClick:()=>C(!0),children:u.ZP.t("web_accounts_btn_ok_authorization",{},"Got it")}),(0,n.jsx)(l.sSQ,{className:"lv_brand_notice_panel_wide-close",onClick:()=>C(!1),fill:"currentColor"})]})}),(0,n.jsx)(y,{})]})})}},518496:function(e,t,r){"use strict";r.d(t,{T:function(){return h}});var n=r(772322),i=r(218571),o=r(152155),s=r.n(o),a=r(282893),c=r(123951),u=r(124656),l=r(722169),d=r(4103);r(912601);var h=e=>{var{thirdPartList:t,service:r,handleClick:o,signType:h=d.ki.logIn,showGoogleBtn:f}=e,[p,v]=(0,a.L)(r),[g,_]=(0,i.useState)(f);return(0,i.useEffect)(()=>{var e,t,r,n,i;(null===(e=document)||void 0===e?void 0:e.getElementById("g_id_onload"))||(0,l.isNil)(null===(i=window)||void 0===i?void 0:null===(n=i.google)||void 0===n?void 0:null===(r=n.accounts)||void 0===r?void 0:null===(t=r.id)||void 0===t?void 0:t.renderButton)||_(!1)},[]),(0,i.useEffect)(()=>{var e,t,r,n,i=document.getElementById("signinDiv");i&&(null===(n=window)||void 0===n||null===(r=n.google)||void 0===r||null===(t=r.accounts)||void 0===t||null===(e=t.id)||void 0===e||e.renderButton(i,{theme:"outline",size:"large",type:"standard",shape:"rectangular",width:i.clientWidth,text:"continue_with",logo_alignment:"left",click_listener:()=>{v({type:"REPORT_SIGN_IN_ACTION",action:"google",source:h===d.ki.logIn?u.C.LoginIn:u.C.SignUp})},locale:c.ZP.language}))},[g,v,h]),(0,n.jsxs)("div",{className:"lv_third_part_sign_in_expand-wrapper",children:[g?(0,n.jsx)("div",{className:"lv_google_sign_in_btn-expand-wrapper",children:(0,n.jsx)("div",{id:"signinDiv"})}):(0,n.jsxs)("div",{className:s()("lv_third_part_sign_in_expand_new-button"),onClick:()=>o(t[0]),children:[t[0].icon,(0,n.jsx)("span",{className:"lv_third_part_sign_in_expand-label",children:t[0].label})]},t[0].platformAppId),null==t?void 0:t.slice(1).map(e=>(0,n.jsxs)("div",{className:s()("lv_third_part_sign_in_expand_new-button"),onClick:()=>o(e),children:[e.icon,(0,n.jsx)("span",{className:"lv_third_part_sign_in_expand-label",children:e.label})]},e.platformAppId))]})}},335091:function(e,t,r){"use strict";r.d(t,{B:()=>v});let n=r("569526"),i=r("114276"),o=r("147966"),s=r("671943"),a=r("725729"),c=r("582693"),u=r("740496"),l=r("604632"),d=r("324132"),h=r("442250"),f=r("583661"),p=r("299306");var v={EVER_CLOUD:n.i,WEB_CUSTOME_CODE:o.k,NO_SIGN_UPLOAD:i.S,COMMENT:s.A,FILM_CODE:a.G,COMMERCE:c.J,SIGN_UP_CODE:u.k,USER_CODE:u.P,CREATE_WORKSPACE_CODE:l.e,PIPO:{REFRESH_USER_SPACE_FAILURE:"34100001"},WORKSPACE_UPLOAD_LINK_CODE:l.u,GROUP:d.o,SHARE:h.D,AUTHORIZED:f.e,SHARE_ERROR_CODE:p.K}},95041:function(e,t,r){"use strict";r.d(t,{ki:function(){return i}});var n,i,o=r(208282);(n=i||(i={}))[n.logIn=0]="logIn",n[n.signUp=1]="signUp",n[n.forgetPwd=2]="forgetPwd",n[n.invite=3]="invite",o.l.LOGIN,o.l.SIGN_UP,o.l.FORGET_PWD,o.l.INVITE},817623:function(e,t,r){"use strict";r.d(t,{BM:function(){return s.B},NL:function(){return i.N},RY:function(){return n.R},cv:function(){return o.c}});var n=r(7671),i=r(149318),o=r(956830),s=r(907581)},936146:function(e,t,r){"use strict";r.d(t,{u:function(){return s}});var n=r(722169),i=r(554269),o={isUserLogin:!1,checkLoginStartTime:0,hasInjectUserInfo:!1};class s{updateOptions(e){this.options=(0,n.merge)({},this.options,e)}resetOptions(){this.options=o}report(e){var t={get_user_time:this.options.checkLoginStartTime?e.endTime-this.options.checkLoginStartTime:0,has_inject_user_info:this.options.hasInjectUserInfo,is_user_login:this.options.isUserLogin||!1};this.reporter.reportBecon("lvrd_check_login_time",t)}constructor(){this.reporter=(0,i.y)(),this.options=o}}},109166:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(554269);class i{reportSignIn(e){this.reporter.report("google_signin_popup",e)}constructor(){this.reporter=(0,n.y)()}}},920214:function(e,t,r){"use strict";r.d(t,{H:function(){return i}});var n=r(772322);r(218571);var i=()=>(0,n.jsxs)("svg",{style:{marginRight:4.2},className:"loading-icon",xmlns:"http://www.w3.org/2000/svg",width:"75",height:"16",viewBox:"0 0 75 16",fill:"none",children:[(0,n.jsx)("path",{d:"M28.2142 12.5654C24.8954 12.5654 22.5781 10.4583 22.5781 7.4404C22.5781 4.42246 24.8954 2.31543 28.2142 2.31543C29.0512 2.31543 30.035 2.41016 31.5424 3.0962V5.24279C30.4514 4.63483 29.3729 4.32669 28.3371 4.32669C26.2581 4.32669 24.8059 5.60715 24.8059 7.43936C24.8059 9.27156 26.2581 10.5531 28.3371 10.5531C29.3448 10.5531 30.4524 10.2387 31.5424 9.64425V11.7836C30.0339 12.4696 29.0512 12.5643 28.2142 12.5643V12.5654Z",fill:"currentColor","fill-opacity":"0.4"}),(0,n.jsx)("path",{d:"M35.9866 12.5658C34.0253 12.5658 32.6553 11.0761 32.6553 8.94307C32.6553 6.81001 34.0846 5.30469 36.0532 5.30469C37.1411 5.30469 37.8979 5.63677 38.5058 6.38319L38.5548 6.44253V5.65864H40.4734V12.4107H38.5548V11.4519L38.5048 11.5238C38.0113 12.2348 37.2108 12.5658 35.9866 12.5658ZM36.6497 6.91411C35.5004 6.91411 34.6665 7.76775 34.6665 8.94307C34.6665 10.1184 35.5004 10.9564 36.6497 10.9564C37.799 10.9564 38.6485 10.109 38.6485 8.94307C38.6485 7.77712 37.8083 6.91411 36.6497 6.91411Z",fill:"currentColor","fill-opacity":"0.4"}),(0,n.jsx)("path",{d:"M41.9287 15.3517V5.65766H43.8629V6.50089L43.9129 6.43114C44.2846 5.91063 45.1632 5.30371 46.4187 5.30371C48.3477 5.30371 49.7468 6.83402 49.7468 8.94209C49.7468 11.0502 48.3716 12.5649 46.403 12.5649C45.2288 12.5649 44.3907 12.2265 43.9129 11.5582L43.8629 11.4884V15.3517H41.9287ZM45.7524 6.91314C44.6031 6.91314 43.7703 7.76678 43.7703 8.94209C43.7703 10.1174 44.6041 10.9554 45.7524 10.9554C46.9006 10.9554 47.7199 10.108 47.7199 8.94209C47.7199 7.77615 46.8923 6.91314 45.7524 6.91314Z",fill:"currentColor","fill-opacity":"0.4"}),(0,n.jsx)("path",{d:"M56.5658 12.5654C53.247 12.5654 50.9297 10.4583 50.9297 7.4404C50.9297 4.42246 53.247 2.31543 56.5658 2.31543C57.4028 2.31543 58.3866 2.41016 59.894 3.0962V5.24279C58.803 4.63483 57.7245 4.32669 56.6897 4.32669C54.6108 4.32669 53.1585 5.60715 53.1585 7.43936C53.1585 9.27156 54.6108 10.5531 56.6897 10.5531C57.6974 10.5531 58.805 10.2387 59.894 9.64425V11.7836C58.3855 12.4696 57.4028 12.5643 56.5658 12.5643V12.5654Z",fill:"currentColor","fill-opacity":"0.4"}),(0,n.jsx)("path",{d:"M64.6257 12.566C62.4625 12.566 61.0654 11.5448 61.0654 9.96552V5.45996H62.984V9.40753C62.984 10.3778 63.5982 10.9566 64.6257 10.9566C65.6532 10.9566 66.2372 10.3778 66.2372 9.40753V5.45996H68.1559V9.96552C68.1559 11.5458 66.7702 12.566 64.6257 12.566Z",fill:"currentColor","fill-opacity":"0.4"}),(0,n.jsx)("path",{d:"M72.3912 12.565C70.2665 12.565 69.5117 11.2471 69.5117 10.1186V4.08691H71.4303V5.45794H74.0787V7.02781H71.4303V9.73135C71.4303 10.0947 71.5688 10.94 72.8555 10.94C73.2126 10.94 73.656 10.8452 74.0777 10.6808V12.2985C73.4062 12.5442 72.6181 12.564 72.3902 12.564L72.3912 12.565Z",fill:"currentColor","fill-opacity":"0.4"}),(0,n.jsx)("path",{d:"M18.2841 3.38605V0.634624L14.9747 2.3721V2.26903C14.9747 1.17283 14.1887 0.510742 13.0509 0.510742H2.56151C1.36225 0.510742 0.637695 1.17283 0.637695 2.26903V5.04128L5.2713 7.44085L0.637695 9.86123V12.6335C0.637695 13.7089 1.36225 14.371 2.56151 14.371H13.0498C14.1877 14.371 14.9737 13.7089 14.9737 12.6335V12.4888L18.2831 14.2471V11.454L10.5878 7.44085L18.2831 3.38605H18.2841ZM7.91967 8.80667L13.6089 11.7861H2.20964L7.91967 8.80667ZM13.5672 3.09665L7.91967 6.05524L2.20964 3.09665H13.5672Z",fill:"currentColor","fill-opacity":"0.4"})]})},562947:function(e,t,r){"use strict";r.d(t,{Ek:function(){return a},Jt:function(){return i},af:function(){return u},fN:function(){return c},vE:function(){return s}});var n,i,o=r(525105),s=e=>new Promise((t,r)=>{if(window.fbAsyncInit=()=>{window.FB.init({appId:null!=e?e:o.ye,version:"v19.0",status:!0}),t()},window.FB){window.fbAsyncInit();return}var n=document.createElement("script");n.async=!0,n.addEventListener("error",r),n.src="https://connect.facebook.net/en_US/sdk.js",document.body.appendChild(n)});(n=i||(i={})).connected="connected",n.not_authorized="not_authorized",n.unknown="unknown";var a=()=>new Promise(e=>{window.FB.getLoginStatus(t=>{e(t.status)})}),c=()=>new Promise((e,t)=>{window.FB.login(r=>{r.authResponse?e(r):t(r)})}),u=()=>new Promise(e=>{window.FB.logout(()=>{e()})})},283659:function(e,t,r){"use strict";r.d(t,{m:function(){return s}});var n=r(69984),i=r(764112),o=r(416013);class s{static getString(e){return"undefined"!=typeof window&&navigator.cookieEnabled?localStorage.getItem(e):null}static setString(e,t){if("undefined"!=typeof window&&navigator.cookieEnabled)return localStorage.setItem(e,t)}static getJsonWithEmptyJson(e){var t;try{var r="undefined"!=typeof localStorage&&localStorage.getItem(e)||"{}";t=JSON.parse(r)}catch(e){o.W.error("LocalStorage-getJsonWithEmptyJson()",e)}return t}static getJson(e){if("undefined"!=typeof window&&navigator.cookieEnabled){var t,r="undefined"!=typeof localStorage&&localStorage.getItem(e);if(r){try{t=JSON.parse(r)}catch(e){o.W.error("localStorage-parse(origin)",e)}return t}}}static setJson(e,t){if("undefined"!=typeof window&&navigator.cookieEnabled)try{localStorage.setItem(e,JSON.stringify(t))}catch(e){o.W.error("localStorage-set",e)}}static getNestedJsonItem(e,t){var r;return null!==(r=this.getJsonWithEmptyJson(e)[t])&&void 0!==r?r:{}}static setNestedJsonItem(e,t,r){var s,a=this.getJsonWithEmptyJson(e),c=null!==(s=a[t])&&void 0!==s?s:{},u=(0,i._)((0,n._)({},a),{[t]:(0,n._)({},c,r)});try{this.setJson(e,u)}catch(e){o.W.error("localStorage-set",e)}}static removeItem(e){"undefined"!=typeof window&&navigator.cookieEnabled&&localStorage.removeItem(e)}}},77064:function(e,t,r){"use strict";r.d(t,{XK:function(){return o},_z:function(){return s}});var n=r(538611),i=r(561872),o=()=>{var e,t,r=(0,i.pf)(n.g2.UTM_SOURCE)||(null===(e=window.location.originParams)||void 0===e?void 0:e.utm_source),o=(0,i.pf)("shop")||(null===(t=window.location.originParams)||void 0===t?void 0:t.shop)||"";return!!("shopify"===r&&o)},s=()=>{var e,t,r=(0,i.pf)("shop")||(null===(e=window.location.originParams)||void 0===e?void 0:e.shop)||"",n=(0,i.pf)("product_id")||(null===(t=window.location.originParams)||void 0===t?void 0:t.product_id)||"";return{accountId:r,productId:n?"gid://shopify/Product/".concat(n):""}}},199366:function(e,t,r){"use strict";r.d(t,{PF:function(){return i},Q:function(){return o},p:function(){return n}});var n=1,i="7",o="5.8.0"},151834:function(e,t,r){"use strict";r.d(t,{k:function(){return a}});var n=r(69984),i=r(764112),o=r(850025),s=r(123951);class a extends o.X{constructor(...e){super(...e),this.request={onFulfilled:e=>(Object.assign(e,{headers:(0,i._)((0,n._)({},e.headers),{lan:s.ZP.language})}),e)}}}},493846:function(e,t,r){"use strict";r.d(t,{zW:()=>L,df:()=>N});let n=r("461228"),i=r("69984"),o=r("764112"),s=r("574451"),a=r("789786"),c=r("733730"),u=r("402964"),l=r.n(u),d=r("722169"),h=r("747890"),f=r("117785"),p=r("971063"),v=r("6613"),g=r("903602"),_=r("640712"),m=r("16884"),y=r("461133"),b=r("551502"),w=r("982393");function k(){return function(e,t,r){var i=r.value;return"function"==typeof i&&(r.value=(0,n._)(function*(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=yield i.apply(this,r);return null===this||void 0===this||null===(e=this.emitUserSpaceSizeChange)||void 0===e||e.call(this),o})),r}}let E=r("333108"),S=r("179977"),x=r("158651"),T=r("482309");(C=I||(I={})).Vod="vod",C.Normal="normal";var I,A,P,C,R,D,L={BusDestroy:"destroy",UploadMetaReady:"asset_upload_meta_ready",UploadIdle:"asset_upload_idle",UploadProgress:"asset_upload_progress",UploadFinish:"asset_upload_finish",AssetDownloadIdle:"asset_download_idle",AssetDownloadProgress:"asset_download_progress",AssetDownloaddFinish:"asset_download_finish",VideoInfoEndPullEvent:"video_info_end_pull",ThridPartResourceSyncStateEvent:"thirdpart_resource_sync_state",TrackSendEvent:"track_send_event",SpriteInfoEndPullEvent:"sprite_info_end_pull",PreviewInfoEndPullEvent:"preview_info_end_pull",SpaceMoveProgressEvent:"space_move_progress",SpaceMoveFinishEvent:"space_move_finish",SpaceCopyProgressEvent:"space_copy_progress",SpaceCopyFinishEvent:"space_copy_finish",ImageTranscodeInfoEndPull:"image_transcode_info_end_pull",EverCloudCancelImageTranscode:"ever_cloud_cancel_image_transcode",LogReportEvent:"log_report_event",UploadAnalyze:"import_material_upload_analyze"};(R=A||(A={}))[R.ALL=0]="ALL",R[R.ASSET=1]="ASSET",R[R.PACKAGE=2]="PACKAGE",R[R.FOLDERS=3]="FOLDERS",R[R.CLUSTERS=4]="CLUSTERS",(D=P||(P={})).Log="log",D.Event="event";class N{get getTempId(){var e;return null===(e=this.noSignOptions)||void 0===e?void 0:e.uniqueId}get everUserId(){return this.webUserId}get cachePlugin(){return this.idbPlugin}get isGroupSdk(){return!!_.iH.space&&_.iH.space!==y.qY}get spaceId(){var e;return null===(e=this.options)||void 0===e?void 0:e.space}get netconf(){var e;return null===(e=this.options)||void 0===e?void 0:e.netconf}setCachePlugin(e){this.idbPlugin=e}setTeaReporter(e){this.TeaReporter=e}setSlardarReporter(e){this.slardarReporter=e}setDependencies(e){this.dependencies=e}get hasSetOptions(){return!!this.options}get hasSetNoSignOptions(){return!!this.noSignOptions}setOptions(e){var t=this;return(0,n._)(function*(){yield t._setEverCloudOptions(e),t._defaultUploaderType=(null==e?void 0:e.defaultUploaderType)==="vod"?"vod":"normal"})()}setPermission(e){this.permission=e}setNoSignOptions(e){if(this.noSignOptions){(0,h.cM)("\u53C2\u6570\u91CD\u590D\u8BBE\u7F6E\uFF0C\u8BF7\u786E\u8BA4\u3002 init \u540E\u5C06\u4E0D\u4F1A\u88AB\u8986\u76D6");return}this.noSignOptions=e,(0,h.cM)("\u521D\u59CB\u5316\u53C2\u6570\u5DF2\u8BBE\u7F6E\uFF08\u672A\u767B\u5F55\uFF09: ".concat(JSON.stringify(e)))}getUploader(e,t){return this.dependencies.getUploader(e,t)}getSignUploader(e){return this.dependencies.getSignUploader(e)}emitUserSpaceSizeChange(){this.eventBus.emit(y.Yv.USER_SPACE_SIZE_CHANGE)}onUserSpaceSizeChange(e){return this.eventBus.on(y.Yv.USER_SPACE_SIZE_CHANGE,e)}get uid(){var e;return null===(e=this.options)||void 0===e?void 0:e.user_id}init(){if(this.destroyed)return Promise.reject(Error("SDK destroyed"));if(this.initLocker.hasBeenDone)return this.initLocker.awaitForInit();var e=this.options&&this.options.user_id;if(e||(0,h.cM)("\u672A\u8BBE\u7F6E\u5FC5\u8981\u53C2\u6570, \u7B49\u5F85\u53C2\u6570\u8BBE\u7F6E\u4E2D"),!this.initLocker.isIniting&&e){this.initLocker.startToInit(),this.loadLocker.startToInit();var{timeout:t}=this.options||{},{init:r=3e5}=t||{};setTimeout(()=>{this.initLocker.hasBeenDone||this.initLocker.initDone({reject:new v.lJ})},r),this.initEverCloudSdk({initDoneCb:()=>{this.initLocker.initDone()},loadDoneCb:()=>{this.loadLocker.initDone()},syncDoneCb:e=>{e&&(this.initLocker.hasBeenDone||this.initLocker.initDone(),this.syncLocker.initDone())}})}return this.initLocker.awaitForInit()}startSyncLoop(){var e=this;return(0,n._)(function*(){e.syncLocker.isIniting||e.syncLocker.hasBeenDone||(e.syncLocker.startToInit(),yield e.sdk.start_sync_loop())})()}syncDone(){var e=this;return(0,n._)(function*(){return yield e.startSyncLoop(),yield e.syncLocker.awaitForInit()})()}loadDone(){return this.loadLocker.awaitForInit()}noSignInit(){var e=this;return(0,n._)(function*(){var t,r=e.noSignOptions;return r||(0,h.cM)("\u672A\u8BBE\u7F6E\u5FC5\u8981\u53C2\u6570, \u7B49\u5F85\u53C2\u6570\u8BBE\u7F6E\u4E2D(noSing)"),new Promise((t=(0,n._)(function*(t,n){if(e.syncNoSignInitDone&&t(),e.syncNoSignInitError&&n(Error("Cloud Sdk \u53D1\u751F\u975E\u9884\u671F\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762")),e.initNoSignQueue.push([t,n]),!e.syncNoSignIniting&&r){e.syncNoSignIniting=!0,e.syncNoSignInitDone=!0;var i=e.noSignOptions;if(!i)throw Error("impossible way");e.offlineVideoUploader=e.getUploader(i,"video"),e.offlineFileUploader=e.getUploader(i,"file"),e.initNoSignQueue.forEach(e=>{e[0]()}),e.initNoSignQueue=[]}}),function(e,r){return t.apply(this,arguments)}))})()}destroy(){var e=this;return(0,n._)(function*(){return e.destroyed?(e.sdk=null,e.options=null,e.eventBus.emit(L.BusDestroy),e.eventBus.removeAllListeners(),Promise.resolve()):(e.sdk=null,e.destroyed=!0,e.options=null,e.eventBus.emit(L.BusDestroy),e.eventBus.removeAllListeners(),yield e.tearDown())})()}getFilesListByFloder(e){var t=this;return(0,n._)(function*(){var r=(yield t.getAsset(Object.assign({},{material:!0},e))).filter(e=>{var t;return!(null==e?void 0:null===(t=e.cluster_list)||void 0===t?void 0:t.length)}).map(e=>(0,h.qA)(e,t)),n=yield t.getPackages(),i=[];return t.isOversea()||(i=yield t.getClusters()),[...r,...n,...i].sort((e,t)=>{var r,n;return(null!==(r=e.updatedAt)&&void 0!==r?r:0)-(null!==(n=t.updatedAt)&&void 0!==n?n:0)})})()}getAsset(e){var t=this;return(0,n._)(function*(){var r,n,i=Object.assign({},e);return(null==i?void 0:null===(r=i.ids)||void 0===r?void 0:r.length)||(null==i?void 0:null===(n=i.md5s)||void 0===n?void 0:n.length)?yield t.initLocker.awaitForInit():yield t.syncDone(),yield t.sdk.get_asset(i)})()}getAssets(e){var t=this;return(0,n._)(function*(){return(yield t.getAsset(Object.assign({},{material:!0},e))).filter(e=>{var t;return!(null==e?void 0:null===(t=e.cluster_list)||void 0===t?void 0:t.length)}).map(e=>(0,h.qA)(e,t))})()}asset_preview(e){var t=this;return(0,n._)(function*(){return new Promise(r=>{t.sdk.download_asset({md5:e,preview:"360p"},e=>{e.length<98304&&r(btoa(String.fromCharCode(...new Uint8Array(e))))})})})()}uploadAsset(e){var t=this;return(0,n._)(function*(){return"vod"===(e.uploaderType||t._defaultUploaderType)?t._uploadAssetByVod(e):t._uploadAssetByEverCloud(e)})()}reportUploadAnalyze(e){var t,r,{uploaderType:n,action:i,duration:o,size:s,errorMsg:a,code:c,isInstantlyUpload:u,filename:l}=e,d=null!=a?a:e.action===f.li.Error?"unkown error.":"";this.reportSdkEvent({type:"event",event_name:L.UploadAnalyze,str_params:{uploader_type:null!=n?n:"",action:i,error_msg:null!=a?a:"",code:String(c),filename:l},int_params:{duration:null!=o?o:-1,size:s},float_params:{}}),null===(t=this.slardarReporter)||void 0===t||t.call(this,{type:"event",eventName:L.UploadAnalyze,extra:{event_name:L.UploadAnalyze,event_from:"ever_cloud_sdk",space_id:null!==(r=this.spaceId)&&void 0!==r?r:"unknown",uploader_type:n,is_instantly_upload:u?1:0,action:i,duration:null!=o?o:-1,size:s,error_msg:d,code:String(c),filename:l},content:""})}streamClipUploadAsset(e){var t=this;return(0,n._)(function*(){var{format:r,fileName:n,meta:i,permission:o,extra:s}=e,a=JSON.stringify(i),c=s||{};c.ve&&(c.ve=JSON.stringify(c.ve));var{request_id:u}=yield t.sdk.stream_clip_upload_asset(r,n,a,o,c);return new x.a({requestId:u},t)})()}appendClipToUpload(e,t,r,i){var o=this;return(0,n._)(function*(){return yield o.sdk.append_clip_to_upload(e,t,r,i)})()}uploadVid(e){var t=this;return(0,n._)(function*(){return yield t.sdk.upload_vid(e.vid,e.material,e.folder)})()}syncVideoToEverCloud(e,t){var{resouceType:r=1,fileSize:i,meta:o,imageAsyncResize:s=!0,folderId:a=_.iH.rootFolderId,invisible:c=!1,noTranscode:u=!1,noOccupy:l=!1}=t,f=this;return(0,n._)(function*(){var t,n=new g.$c({id:e},f),p=(0,d.merge)((0,h.m3)(),o);return yield f.sdk.sync_asset({resource:[{resource_id:e,resource_type:r||1,size:i,meta:JSON.stringify(p),region:f.isOversea()?null==f?void 0:null===(t=f.noSignOptions)||void 0===t?void 0:t.userRegion:null,image_async_resize:s,folder_id:a,invisible:c,no_transcode:u,no_occupy:l}]}),n})()}getAssetsByMd5(e){var t=this;return(0,n._)(function*(){var r;return e.length&&null!==(r=(yield t.getAsset({md5s:e})).map(e=>(0,h.qA)(e,t)))&&void 0!==r?r:[]})()}getAssetByMd5(e){var t=this;return(0,n._)(function*(){var r=((yield t.getAsset({md5s:[e]}))||[])[0];if(!r)throw Error("asset not found: md5=".concat(e));return(0,h.qA)(r,t)})()}getAssetByFileId(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return(0,n._)(function*(){var n=(yield r.getAsset({ids:[e]}))[0];if(!n)throw Error("asset not found: assetId=".concat(e));if(t){var i=yield r.getUnencryptedPlayInfo({id:n.id});n.unencryptedPlayInfo=i}return(0,h.qA)(n,r)})()}getAssetsByFileId(e){var t=this;return(0,n._)(function*(){var r;return e.length&&null!==(r=(yield t.getAsset({ids:e})).map(e=>(0,h.qA)(e,t)))&&void 0!==r?r:[]})()}getFileDetailWithTranscode(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return(0,n._)(function*(){var n,i,o,s,a,c=yield r.getVideoAssetTranscodeStatus(e),u=yield c.done();if("success"!==u.status)throw Error("transcode failure: ".concat(JSON.stringify(u.errInfo)));a=r.isOversea()?e.md5?yield r.getAssetByMd5(e.md5):yield r.getAssetByFileId(e.id):e.entryId?yield r.getEntryAsset(e.entryId,!0,t):e.md5?yield r.getAssetByMd5(e.md5):yield r.getEntryAsset(e.id,!0,t);var l=[],d=u.data;if(d){var h=(e,t)=>{if(d[e]){var{primary_url:r,url_key:n}=d[e];r&&n&&l.push({type:t,url:r,key:n})}};d.origin&&h("origin","origin"),h("p360","360p"),h("p480","480p"),h("p720","720p")}return new p.pz({uid:a.author,type:a.type,duration:a.duration,fileName:a.name,size:a.size,assetInfo:a,spritInfo:a.sprit,videoInfo:l,audioInfo:{url:null==u?void 0:null===(i=u.data)||void 0===i?void 0:null===(n=i.audio)||void 0===n?void 0:n.primary_url,key:null===(s=u.data)||void 0===s?void 0:null===(o=s.audio)||void 0===o?void 0:o.url_key}})})()}getFileDetailWithTranscodeNoSign(e,t){var r=this;return(0,n._)(function*(){var n,i,o,s,a,c,u,l,d,h,f=yield r.getVideoAssetTranscodeStatusNoSign(e,t),v=yield f.done();if("success"!==v.status)throw Error(JSON.stringify(v.errInfo));return new p.pz({fileName:null===(i=v.data)||void 0===i?void 0:null===(n=i.video)||void 0===n?void 0:n.file_name,type:p.Gk.VIDEO,size:null===(s=v.data)||void 0===s?void 0:null===(o=s.video)||void 0===o?void 0:o.size,spritInfo:null===(a=v.data)||void 0===a?void 0:a.video.thumb,duration:(null!==(h=null===(c=v.data)||void 0===c?void 0:c.video.duration)&&void 0!==h?h:0)*1e3,videoInfo:null===(l=v.data)||void 0===l?void 0:null===(u=l.video.video_infos)||void 0===u?void 0:u.map(e=>{var t;return{type:null!==(t=e.definition)&&void 0!==t?t:e.defination,url:e.url,key:e.key}}).sort((e,t)=>{var r=["360p","480p","720p"];return r.indexOf(null==e?void 0:e.type)-r.indexOf(null==t?void 0:t.type)}),extInfo:{vid:null===(d=v.data)||void 0===d?void 0:d.video.source}})})()}getVideoAssetTranscodeStatus(e){var t=this;return(0,n._)(function*(){e.md5?(r={id:e.md5,key:"md5"},n={md5s:[e.md5]}):(r={id:e.id,key:"asset_id"},n={ids:[e.id]});var r,n,i=new g.KX(r,t);return yield t.sdk.get_asset_play_info(n),i})()}getAssetsPlayInfo(e){var t=this;return(0,n._)(function*(){return yield t.sdk.get_asset_play_info(e)})()}getVideoAssetTranscodeStatusNoSign(e,t){var r=this;return(0,n._)(function*(){var n;return yield r.noSignInit(),new g.D4({tmp_id:null===(n=r.noSignOptions)||void 0===n?void 0:n.uniqueId,task_id:e,is_support_webp:!0===t?1:0},r)})()}getAssetSpirtInfo(e){var t=this;return(0,n._)(function*(){e.md5?(r={id:e.md5,key:"md5"},n={md5s:[e.md5]}):(r={id:e.id,key:"id"},n={ids:[e.id]});var r,n,i=new g.Dh(r,t);return yield t.sdk.get_asset_sprite_info(n),i})()}getAssetPreviewInfo(e){var t=this;return(0,n._)(function*(){e.md5?(r={id:e.md5,key:"md5"},n={md5s:[e.md5]}):(r={id:e.id,key:"id"},n={ids:[e.id]});var r,n,i=new g.if(r,t);return yield t.sdk.get_asset_preview_info(n),i})()}uploadAssetNoLogin(e){var t=this;return(0,n._)(function*(){yield t.noSignInit();var{file:r,fileName:n,onStart:i}=e,o=n||r.name,s=(0,h.eF)({file:r}),a="video"===s||"audio"===s?t.offlineVideoUploader:t.offlineFileUploader;return yield a.init(),new g.DZ({file:r,fileName:o,fileType:s,uploader:a,onStart:i},t)})()}cancelAllUploadAsset(){var e=this;return(0,n._)(function*(){return yield e.sdk.cancel_upload_all()})()}cancelUploadAsset(e){var t=this;return(0,n._)(function*(){return yield t.sdk.cancel_upload(e)})()}deleteAsset(e){var{ids:t=[],md5s:r=[]}=e,i=this;return(0,n._)(function*(){for(var e=[],n=0;20*n<t.length;n++)e.push(i.sdk.delete_asset({ids:t.slice(20*n,(n+1)*20)}));for(var o=0;20*o<r.length;o++)e.push(i.sdk.delete_asset({md5s:r.slice(20*o,(o+1)*20)}));yield Promise.all(e)})()}renameAsset(e){var t=this;return(0,n._)(function*(){if(yield t.isAssetNameDumplicate({fileName:e.fileName,filterMd5:e.md5}))throw new v.g3;return yield t.sdk.rename_asset({md5:e.md5,file_name:e.fileName})})()}downloadByUrlKey(e){var t=this;return(0,n._)(function*(){if(!(null==e?void 0:e.url))throw Error("[EverSdk] downloadByUrlKey: url can not be empty");var r=(0,o._)((0,i._)({},e),{url:e.url||""}),n=r.skipCache?void 0:yield t.getFromCache(r.url),s=new g.u7({url:r.url},t);if(n&&n instanceof Uint8Array)s.thirdpartDone({buffer:n});else{var a=yield t.sdk.download_url(r,e=>{s.appendChunk(e)});s.setRequestId(a.request_id),s.size=a.size}return s})()}downloadAssetStream(e){var t=this;return(0,n._)(function*(){var r=e.skipCache?void 0:yield t.getFromCache(e.md5),n=new g.u7({},t);if(r&&r instanceof Uint8Array)n.thirdpartDone({buffer:r});else{var i=yield t.sdk.download_asset(e,e=>{n.appendChunk(e)});n.setRequestId(i.request_id),n.size=i.size}return n})()}downloadAssetUrl(e,t,r){var i=this;return(0,n._)(function*(){var n,{token:o}=yield i.dependencies.apiFunc.getEverPhotoToken(null===(n=i.options)||void 0===n?void 0:n.space),{data:s,headers:a}=yield l().get(e,{headers:{"x-everphoto-token":o},responseType:"blob"}),c=new Blob([s],{type:r||a["content-type"]}),u=(a["content-disposition"]||"").split("filename=")[1],d=document.createElement("a"),h=window.URL.createObjectURL(c);d.download=u||t||"",d.href=globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(h,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),d.style.display="none",d.click()})()}getDownloadUrl(e){var t=this;return(0,n._)(function*(){for(var r=null!==(s=null===(o=yield t.sdk.get_asset_dynamic_download_url({ids:e.ids,max_time:e.maxTime,ttl:e.ttl}))||void 0===o?void 0:o.data)&&void 0!==s?s:{},n=[],i=0;i<e.ids.length;i++){var o,s,a,c,u=e.ids[i],l=null!==(c=null==e?void 0:null===(a=e.names)||void 0===a?void 0:a[i])&&void 0!==c?c:"";r[u]?r[u].url=r[u].url+(l?"&target_name=".concat(l):""):n.push(u)}return{urlMap:r,noDownloadLink:n}})()}downloadAssetUrlV2(e){var t=this;return(0,n._)(function*(){for(var r=null!==(s=null===(o=yield t.sdk.get_asset_dynamic_download_url({ids:e.ids,max_time:e.maxTime,ttl:e.ttl}))||void 0===o?void 0:o.data)&&void 0!==s?s:{},n=[],i=0;i<e.ids.length;i++){var o,s,a,c,u=e.ids[i],l=null!==(c=null==e?void 0:null===(a=e.names)||void 0===a?void 0:a[i])&&void 0!==c?c:"";r[u]?"anchor"===e.downloadMode?(0,h.$A)(r[u].url+(l?"&target_name=".concat(l):"")):(0,h.BH)(r[u].url+(l?"&target_name=".concat(l):"")):n.push(u)}return n})()}getPackages(){var e=this;return(0,n._)(function*(){var t=(yield e.sdk.get_package(null)).map(e=>new p.kd(e)),r=[p.vN.EDIT,p.vN.SCRIPT,p.vN.TEMPLATE,p.vN.GRAPHIC];return t.filter(e=>e.isValid).filter(e=>r.includes(e.subType)).sort((e,t)=>{var r,n;return(null!==(r=t.updatedAt)&&void 0!==r?r:0)-(null!==(n=e.updatedAt)&&void 0!==n?n:0)})})()}getPackageById(e){var t=this;return(0,n._)(function*(){return t.getPackageByKey(e)})()}getPackageByKey(e){var t=this;return(0,n._)(function*(){var r=yield t.sdk.get_package([e]);if(r.length)return new p.kd(r[0]);throw Error("\u8349\u7A3Fkey(".concat(e,")\u4E0D\u5B58\u5728"))})()}savePackage(e){var t=this;return(0,n._)(function*(){var r,{draftId:n,draftMeta:i,assets:o,isForceReplace:s=!1,permission:a=null!==(r=t.permission)&&void 0!==r?r:f.y3.PUBLIC,folderId:c,name:u,draftType:l=p.dP.NORMAL}=e,d=e.prePkgId||null;return s&&(d=(yield t.getPackageByKey(n)).id),yield t.sdk.save_package({key:n,meta:JSON.stringify(i),package_assets:o.map(e=>({md5:e.md5,size:e.size,path:e.path,entry_ids:e.entryIds,meta:JSON.stringify(e.meta)})),base_package_id:d,permission:a,folder_id:c,draft_type:l,name:u})})()}sharePackage(e){var t=this;return(0,n._)(function*(){var{entryId:r,spaceId:n,draftMeta:i,packageId:o,folderId:s,name:a,packageKey:c,overwrite:u,permission:l}=e;yield t.sdk.share_package({overwrite:u,permission:l,name:a,package_id:o,entry_id:r,meta:JSON.stringify(i),folder_id:s,package_key:c,to_space_id:n})})()}deletePackageById(e){var t=this;return(0,n._)(function*(){yield t.sdk.delete_package(e)})()}renamePackages(e){var{key:t,name:r}=e,i=this;return(0,n._)(function*(){var e=yield i.getPackageByKey(t),n=(0,d.merge)({},e.meta,{draft:{name:r,updateTime:new Date().valueOf()}}),o=yield i.sdk.rename_package({package_id:e.id,meta:JSON.stringify(n)});return new p.kd(o.package)})()}updatePackageMeta(e){var{id:t,key:r,meta:i,autoMergeMeta:o=!1}=e,s=this;return(0,n._)(function*(){var e=t,n=i;if(r)try{var a=yield s.getPackageByKey(r);e=e||a.id,o&&(n=(0,d.merge)({},a.meta,n))}catch(e){if(o)throw Error("Not found local meta info, could not merge")}if(!e)throw Error("params id or key is required at least one.");var c=yield s.sdk.rename_package({package_id:e,meta:JSON.stringify(n)});return new p.kd(c.package)})()}validateWebEditorSupportPkg(e){var t=this;return(0,n._)(function*(){var r,n,i=Object.assign({},{platform:["browser"]},e),o=yield t.getPackageByKey(i.draftId);return!!o&&i.platform.includes(null!==(n=null===(r=o.meta)||void 0===r?void 0:r.uploadSource.platform)&&void 0!==n?n:"")})()}forceSyncPullUpdates(){var e=this;return(0,n._)(function*(){yield e.sdk.sync_pull_updates({})})()}getClusters(){var e=this;return(0,n._)(function*(){var t=(yield e.sdk.get_clusters({})).filter(e=>e.n_asset).map(e=>new p.Mf({cluster:e})),r=t.map(e=>e.lastAssetId),n=(yield e.getAssetsByFileId(r)).reduce((e,t)=>(e[t.id]=t,e),{});return t.forEach(e=>e.updateLastAsset(n[e.lastAssetId])),t})()}getClusterLastAsset(e){var t=this;return(0,n._)(function*(){var r=(yield t.getAssetsFromCluster({clusterId:e.id,sortByRelation:!0}))||[];return r[r.length-1]})()}getClusterById(e){var t=this;return(0,n._)(function*(){var r=(yield t.sdk.get_clusters({cluster_ids:[e.clusterId]}))[0];if(!(r&&r.n_asset))throw Error("cluster invalid");var n=new p.Mf({cluster:r});if(e.needLastAsset){var i=yield t.getClusterLastAsset(n);n.updateLastAsset(i)}return n})()}createCluster(e){var t=this;return(0,n._)(function*(){var r;return yield t.sdk.create_cluster((0,o._)((0,i._)({},e),{relation:JSON.stringify(null!==(r=e.relation)&&void 0!==r?r:[]),meta:JSON.stringify(e.meta)}))})()}delCluster(e){var t=this;return(0,n._)(function*(){return yield t.sdk.delete_cluster({cluster_id:e.id,delete_resource:e.deleteAsset})})()}addAssetToCluster(e){var{clusterId:t,assetIds:r,relation:i}=e,o=this;return(0,n._)(function*(){if(!i){var e=yield o.getClusterById({clusterId:t});if(!e)throw Error("cluster id is not found: ".concat(t));null==(i=e.relation)||i.push(...r)}return yield o.sdk.add_cluster_resource({cluster_id:t,ids:r,relation:JSON.stringify(i)})})()}delAssetFromCluster(e){var{clusterId:t,assetIds:r=[],relation:i,delAsset:o}=e,s=this;return(0,n._)(function*(){if(!i){var e=yield s.getClusterById({clusterId:t});if(!e)throw Error("cluster id is not found: ".concat(t));i=null==(i=e.relation)?void 0:i.filter(e=>!r.includes(e))}yield s.sdk.remove_cluster_resource({cluster_id:t,ids:r,relation:JSON.stringify(i)}),o&&(yield s.deleteByEntry(r))})()}updateCluster(e){var{clusterId:t,meta:r,relation:i}=e,o=this;return(0,n._)(function*(){yield o.sdk.update_cluster({cluster_id:t,meta:r?JSON.stringify(r):void 0,relation:i?JSON.stringify(i):void 0})})()}getAssetsFromCluster(e){var t=this;return(0,n._)(function*(){var r,n=yield t.sdk.get_asset_from_cluster({cluster_id:e.clusterId}),i=null!==(r=null==n?void 0:n.map(e=>(0,h.qA)(e,t)))&&void 0!==r?r:[];if(e.sortByRelation){var o=yield t.getClusterById({clusterId:e.clusterId});(null==o?void 0:o.relation)&&(i=t.sortArrayByRelation({exists:i,relation:o.relation||[],getter:e=>e.notOnlyId}))}return i})()}createFolder(e){var t=this;return(0,n._)(function*(){var r=yield t.sdk.create_folder({name:e.name,parent_id:e.parentId,permission:e.permission,meta:JSON.stringify((0,d.merge)((0,h.m3)(),e.meta||{}))});return new p.FS(r.folder)})()}deleteFolder(e){var t=this;return(0,n._)(function*(){if(e&&e.length)return yield t.sdk.delete_folder({ids:e})})()}moveTo(e){var t=this;return(0,n._)(function*(){var{ids:r,target:n}=e,i={ids:e.ids,parent_id:e.target};try{t.cacheCurrentFolders(e.target)}catch(e){}var o=!t.isGroupSdk;if(_.iH.isRootFolderId(n))return yield t.sdk.move_to_folder(i);var s=yield t.getFolderPaths({folderId:n}),a=s.length,c=s.pop();if(!c)throw Error("[EverSDK] moveTo: target folder not exist");var u=yield t.getFolders(r);if((yield Promise.all(u.map(e=>t.getFolderMaxDepth(e.id)))).some(e=>e.depth>_.iH.maxFolderDepth-a))throw new v.WK(_.iH.maxFolderDepth);if(o||c.permission===f.y3.PUBLIC)return yield t.sdk.move_to_folder(i);if([...yield t.getEntryAssets(r),...u].some(e=>e.isPublic))throw new v.dy;return yield t.sdk.move_to_folder(i)})()}updateFolder(e){var t=this;return(0,n._)(function*(){return yield t.sdk.update_folder((0,o._)((0,i._)({},e),{folderId:e.folderId,access_time:e.access?1:0}))})()}getFolders(e){var t=this;return(0,n._)(function*(){if(!e||!(null==e?void 0:e.length))return[];if(e.some(e=>_.iH.isRootFolderId(e)))throw Error("[EverSDK] getFolders: can not get root folder info ");var r=yield t.sdk.get_folders({ids:e});return((null==r?void 0:r.folders)||[]).map(e=>new p.FS(e))})()}getFolder(e,t){var r=this;return(0,n._)(function*(){if(!_.iH.isRootFolderId(e)){var n=(yield r.getFolders([e]))[0];if(!n||void 0===t||!r.isGroupSdk)return n;var[i]=yield r.getFolderPaths({folderId:e},t);return t===f.y3.PERSONAL&&(null==i?void 0:i.author)===_.iH.everUserId||t===f.y3.PUBLIC&&i.isPublic?n:null}})()}getFolderPaths(e,t){var r=this;return(0,n._)(function*(){if(!e||!e.folderId)throw Error("[EverSDK] getFolderPaths: folder_id can not be empty");if(_.iH.isRootFolderId(e.folderId))throw Error("[EverSDK] getFolders: can not get root folder info ");var n=yield r.sdk.get_folder_path({folder_id:e.folderId}),i=((null==n?void 0:n.path)||[]).map(e=>new p.FS(e));return i.length&&r.isGroupSdk&&void 0!==t&&(t!==f.y3.PUBLIC||!i[0].isPublic)&&(t!==f.y3.PERSONAL||i[0].author!==r.everUserId)?[]:i})()}getAssetsByFolder(e,t){var r=this;return(0,n._)(function*(){var i,{folderId:o,filter:s}=e,a=yield r.sdk.get_folder_items({folder_id:o,filter:s||0}),c=(a.assets||[]).filter(e=>{var t;return!(null==e?void 0:null===(t=e.cluster_list)||void 0===t?void 0:t.length)}).map(e=>(0,h.qA)(e,r)),u=(a.packages||[]).map(e=>new p.kd(e)).filter(e=>e.isValid),l=u.filter(e=>e.subType===p.vN.EDIT).sort((e,t)=>{var r,n;return(null!==(r=t.updatedAt)&&void 0!==r?r:0)-(null!==(n=e.updatedAt)&&void 0!==n?n:0)}),d=u.filter(e=>e.subType===p.vN.SCRIPT).sort((e,t)=>{var r,n;return(null!==(r=t.updatedAt)&&void 0!==r?r:0)-(null!==(n=e.updatedAt)&&void 0!==n?n:0)}),v=[];r.isOversea()||(v=(a.clusters||[]).filter(e=>e.n_asset).map(e=>new p.Mf({cluster:e})),yield Promise.all(v.map((i=(0,n._)(function*(e){var t=yield r.getClusterLastAsset(e);e.updateLastAsset(t)}),function(e){return i.apply(this,arguments)}))));var g=(a.folders||[]).map(e=>new p.FS(e));if(!r.isGroupSdk||void 0===t)return{assets:c,packages:l,clusters:v,folders:g,scripts:d};if(_.iH.isRootFolderId(o))return{assets:c.filter(e=>(0,h.P_)(t,e)),packages:l.filter(e=>(0,h.P_)(t,e)),clusters:v.filter(e=>(0,h.P_)(t,e)),folders:g.filter(e=>(0,h.P_)(t,e)),scripts:d.filter(e=>(0,h.P_)(t,e))};var m=yield r.getFolderPaths({folderId:o},t);if(!m.length)return{};var y=m[0];return t===f.y3.PERSONAL&&y.author===_.iH.everUserId||t===f.y3.PUBLIC&&y.isPublic?{assets:c,packages:l,clusters:v,folders:g,scripts:d}:{}})()}copyAsset(e){var t=this;return(0,n._)(function*(){if(!e||!e.entryId)throw Error("[EverSDK] copyAsset: entry_id can not be empty");try{t.cacheCurrentFolders(e.parentId)}catch(e){}var r=yield t.sdk.copy_asset({entry_id:e.entryId,name:e.name,parent_id:e.parentId});return(0,h.qA)(r.asset,t)})()}copyPackage(e){var t=this;return(0,n._)(function*(){if(!e||!e.src_package_id)throw Error("[EverSDK] copyPackage: src_package_id can not be empty");var{owner:r,platform:n,appVersion:i,systemVersion:o}=(0,h.m3)().uploadSource,s={owner:r,platform:n,appVersion:i,systemVersion:o,createTime:Date.now()},a=yield t.sdk.copy_package({src_package_id:e.src_package_id,target_name:e.target_name,target_package_key:e.target_package_key,target_meta:JSON.stringify((0,d.merge)((0,h.m3)(),e.target_meta,{createSource:s,uploadSource:s}))});return new p.kd(a.package)})()}copyAndRename(e){var t=this;return(0,n._)(function*(){var{file:r,parent:n}=e,s=yield _.iH.getAssetsByFolder({folderId:n,filter:0}),a=[...s.assets||[],...s.clusters||[],...s.folders||[],...s.packages||[],...s.scripts||[]].map(e=>e.name),c=t.dependencies.getFileCopyName(r.name,a);if(r.type===p.Gk.PACKAGE){var{meta:u}=r,l=(0,o._)((0,i._)({},u),{uploadSource:(0,o._)((0,i._)({},null==u?void 0:u.uploadSource,(0,h.m3)().uploadSource),{platform:"browser"}),createSource:(0,o._)((0,i._)({},null==u?void 0:u.createSource,(0,h.m3)().uploadSource),{platform:"browser"}),draft:(0,o._)((0,i._)({},null==u?void 0:u.draft),{name:c})});return _.iH.copyPackage({src_package_id:r.id,target_name:c,target_package_key:(0,h.U7)(),target_meta:l})}return _.iH.copyAsset({entryId:r.id,parentId:n,name:c})})()}cacheCurrentFolders(e){if(!_.iH.isRootFolderId(e)){var t=[e,...this.getCacheCurrentFolderIds().filter(t=>t!==e)].slice(0,this.cacheFoldersNum);window.localStorage.setItem(this.getCacheFolderKey(),JSON.stringify(t))}}getCacheCurrentFolderIds(){var e=[];try{var t=JSON.parse(window.localStorage.getItem(this.getCacheFolderKey())||"");Array.isArray(t)&&(e=t)}catch(e){}return e}getCurrentFolders(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=this;return(0,n._)(function*(){var r=t.getCacheCurrentFolderIds(),n=yield t.getFolders(r.filter(e=>!_.iH.isRootFolderId(e))),i=t.sortArrayByRelation({exists:n,relation:r,getter:e=>e.id}),o=i.map(e=>e.id);return window.localStorage.setItem(t.getCacheFolderKey(),JSON.stringify(o)),i.slice(0,e)})()}updateEntry(e){var t=this;return(0,n._)(function*(){if(!e||!e.id)throw Error("[EverSDK] updateEntry: entry_id can not be empty");var r={id:e.id};if(e.name&&(r.name=e.name),e.access&&(r.access_time=e.access),null!==e.permission&&void 0!==e.permission&&(r.permission=e.permission===f.y3.PERSONAL?1:0),e.meta)try{r.meta=JSON.stringify(e.meta)}catch(e){}return yield t.sdk.update_entry(r)})()}getEntryAssets(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return(0,n._)(function*(){return((yield r.sdk.get_entry_asset({ids:e,allow_cluster:!!t}))||[]).map(e=>(0,h.qA)(e,r))})()}getEntryAsset(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;return(0,n._)(function*(){var n=(yield i.sdk.get_entry_asset({ids:[e],allow_cluster:!!t}))[0];if(!n)throw Error("asset not found: entryId=".concat(e));var o=(0,h.qA)(n,i);if(r){var s=yield i.getUnencryptedPlayInfo({id:o.notOnlyId});o._sourceData.unencryptedPlayInfo=s}return o})()}deleteByEntry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this;return(0,n._)(function*(){for(var r=[],n=0;20*n<e.length;n++)r.push(t.sdk.delete_entry({ids:e.slice(20*n,(n+1)*20)}));return yield Promise.all(r)})()}getFolderMaxDepth(e){var t=this;return(0,n._)(function*(){return yield t.sdk.get_folder_max_depth({folder_id:e})})()}resetSpaceStorage(e){var t=this;return(0,n._)(function*(){var{quota:r,usage:n}=yield t.dependencies.apiFunc.getEverPhotoUserSpace(e);return r-n})()}sortArrayByRelation(e){var t,r=function(e){var t=i.findIndex(t=>n(t)===e);o.push(...i.splice(t,t<0?0:1))},n=(null==e?void 0:e.getter)||(e=>e),i=e.exists.slice(),o=[];for(var s of null!==(t=e.relation)&&void 0!==t?t:[])r(s);return o.push(...i),o}tearDown(){var e=this;return(0,n._)(function*(){return e.sdk?e.sdk.tear_down():Promise.resolve()})()}updatePermission(e){var t=this;return(0,n._)(function*(){var r,{permission:n=null!==(r=t.permission)&&void 0!==r?r:f.y3.PUBLIC,assetIds:i=[],assetMd5s:o=[],packageIds:s=[]}=e;return yield t.sdk.update_permission({permission:n,asset_ids:i,asset_md5s:o,package_ids:s})})()}getUnencryptedPlayInfo(e){var t=this;return(0,n._)(function*(){return yield t.sdk.get_asset_unencrypted_play_info(e)})()}moveFromSpace(e){var t=this;return(0,n._)(function*(){var r,n,i,o={from_space:e.fromSpace||"0",resource_id:e.resourceId,resource_type:e.resourceType,to_space:e.toSpace||(null===(r=t.options)||void 0===r?void 0:r.space)||"0",meta:JSON.stringify(e.meta)};(null===(n=t.options)||void 0===n?void 0:n.is_boe)||(o.from_idc=e.fromIdc,o.to_idc=null!==(i=e.toIdc)&&void 0!==i?i:t.idc);var s=yield t.sdk.move_from_space(o);return new g.nE(s.process_id,t)})()}copyFromSpace(e){var t=this;return(0,n._)(function*(){var r,n,i,o={from_space:e.fromSpace||"0",resource_id:e.resourceId,resource_type:e.resourceType,to_space:e.toSpace||(null===(r=t.options)||void 0===r?void 0:r.space)||"0",meta:JSON.stringify(e.meta),package_key:e.packageKey};(null===(n=t.options)||void 0===n?void 0:n.is_boe)||(o.from_idc=e.fromIdc,o.to_idc=null!==(i=e.toIdc)&&void 0!==i?i:t.idc);var s=yield t.sdk.copy_from_space(o);return new g.su(s.process_id,t)})()}getImagesTranscodeStatus(e){var t=this;return(0,n._)(function*(){var r=new g.sS(e,t);return yield t.sdk.get_image_transcode_info({listeners:e.map(e=>(0,o._)((0,i._)({},e),{transcode_type:y.py[e.resolution]}))}),r})()}triggerImageResize(e){var t=this;return(0,n._)(function*(){for(var{ids:r=[],md5s:n=[]}=e,i=[],o=0;50*o<r.length;o++)i.push(t.sdk.trigger_image_resize({ids:r.slice(50*o,(o+1)*50)}));for(var s=0;50*s<n.length;s++)i.push(t.sdk.trigger_image_resize({md5s:n.slice(50*s,(s+1)*50)}));return yield Promise.all(i)})()}cancelImagesTranscodeStatus(e,t){var r=this;return(0,n._)(function*(){yield r.sdk.cancel_image_transcode_info_loop({listeners:e.map(e=>(0,o._)((0,i._)({},e),{transcode_type:y.py[e.resolution]})),cancel_all:t}),r.eventBus.emit(L.EverCloudCancelImageTranscode,{options:e,cancelAll:t})})()}getImagePreviewInfo(e,t){var r=this;return(0,n._)(function*(){var n=e.imageTranscodeInfo,i=t||y.bF,o={},s=[];if(i.forEach(e=>{n[e]?o[e]=n[e]:s.push(e)}),!s.length)return o;var a=yield r.getImagesTranscodeStatus(s.map(t=>({ids:[e.id],resolution:t})));if(!e.imageAsyncResize){var c=yield r.triggerImageResize({ids:[e.id]});(0,h.cM)("EverCloud triggerImageResize ".concat(e.id," ").concat(JSON.stringify(c)))}try{return yield a.done(),(yield r.getAssetByFileId(e.id)).imageTranscodeInfo}catch(e){return o}})()}getImagesPreviewInfo(e){var t=this;return(0,n._)(function*(){var r,{resolutions:n,ids:i,md5s:o}=e,s=null==n?void 0:n.map(e=>({ids:i,md5s:o,resolution:e})),a=yield t.getImagesTranscodeStatus(s),c=yield t.triggerImageResize({ids:i,md5s:o});(0,h.cM)("EverCloud triggerImageResize: \n ids-[".concat(i,"] \n md5s-[").concat(o,"]: \n").concat(JSON.stringify(c))),yield a.done();var u=null!==(r=(yield t.getAsset({ids:i,md5s:o})).map(e=>(0,h.qA)(e,t)))&&void 0!==r?r:[],l={};u.forEach(e=>{l[e.id]=e,l[e.md5]=e});var d={};return null==i||i.forEach(e=>{l[e]&&(d[e]=l[e].imageTranscodeInfo)}),null==o||o.forEach(e=>{l[e]&&(d[e]=l[e].imageTranscodeInfo)}),d})()}throttlingGetUpdatesTrigger(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throttle:2e3},t=this;return(0,n._)(function*(){if(t._getUpdatesTriggerLastTime)Date.now()-t._getUpdatesTriggerLastTime>e.throttle&&(t._getUpdatesTriggerLastTime=Date.now(),t.sdk.trigger_pull_updates());else{t._getUpdatesTriggerLastTime=Date.now(),t.sdk.trigger_pull_updates();return}})()}initEverCloudSdk(e){var t=this;return(0,n._)(function*(){if(t.sdk){(0,h.cM)("this has been init",{type:"warn"});return}var a=Date.now(),c=(0,h.XD)();if((null==c?void 0:c.ever_photo.token)&&(null==c?void 0:c.ever_photo.web_user_id))f=c.ever_photo.token,p=c.ever_photo.web_user_id;else{var u,l,d,f,p,v,g=yield t.dependencies.apiFunc.getEverPhotoToken(null===(v=t.options)||void 0===v?void 0:v.space);f=g.token,p=g.ever_photo_user.web_user_id}t.initEverCloudSdkReporter.addParams({getToken:Date.now()-a}),t.webUserId=p;var{EverCloudSdk:_}=yield Promise.all([r.e("8583"),r.e("3173"),r.e("7716"),r.e("9680")]).then(r.bind(r,293958)),{timeout:m}=t.options||{},y=m||{},{init:b=3e5}=y,w=(0,s._)(y,["init"]),k=new _((0,o._)((0,i._)({token:f,ep_uid:t.webUserId,source_from:t.dependencies.constant.sourceFrom,level:"error"},t.options),{event_conf:{enable_asset_status_event:!1,enable_package_status_event:!1},common_params:{aid:t.dependencies.constant.aid},headers:(0,i._)({},null===(u=t.options)||void 0===u?void 0:u.headers),backup_conf:(0,i._)({max_count_of_concurrent_upload:5,chunk_size:5},null===(l=t.options)||void 0===l?void 0:l.backup_conf),timeout:(0,i._)({general:30,upload:120,download:120},w)}),(0,n._)(function*(){var e,r=yield t.dependencies.apiFunc.getEverPhotoToken(null===(e=t.options)||void 0===e?void 0:e.space);return t.webUserId=r.ever_photo_user.web_user_id,{new_token:r.token,ep_uid:t.webUserId,third_party_uid:t.options.user_id}}));t.sdk=k;try{yield k.init()}catch(e){t.initLocker.initDone({reject:e})}(null===(d=t.options)||void 0===d?void 0:d.disable_start_sync_loop)||(yield t.startSyncLoop()),e.initDoneCb(),k.set_event_callback(r=>{var n=JSON.parse(r),i=n.type;if((0,h.cM)("this receive event: ".concat(i," data: ").concat(r)),"sync_load_done"===i&&e.loadDoneCb(),"sync_init_done"===i){e.syncDoneCb(0===n.code,r),t.initEverCloudSdkReporter.addParams({sdkInit:t.initLocker.costTimes,sdkSync:t.syncLocker.costTimes,total:Date.now()-a});var o,{reportData:s}=t.initEverCloudSdkReporter;null===(o=t.TeaReporter)||void 0===o||o.event(s.event,s.data)}i===L.TrackSendEvent&&t.reportSdkEvent(n),i===L.LogReportEvent&&t._reportSlardarLog(n),t.eventBus.emit(i,n)})})()}isAssetNameDumplicate(e){var{fileName:t,filterMd5:r}=e,i=this;return(0,n._)(function*(){return Object.keys((yield i.getFilesListByFloder({})).reduce((e,t)=>{if(t.type!==p.Gk.PACKAGE){var n;if(r&&t.md5===r)return e;e[null!==(n=t.name)&&void 0!==n?n:""]=!0}return e},{})).includes(t)})()}reportSdkEvent(e){if(this.TeaReporter){var t,{event_name:r,str_params:n,int_params:i,float_params:o}=e;null===(t=this.TeaReporter)||void 0===t||t.event(r,Object.assign({},n,i,o))}}getFromCache(e){var t=this;return(0,n._)(function*(){if(e&&t.idbPlugin)return yield t.idbPlugin.tryGetSource(e)})()}isOversea(e){return 13===((null==e?void 0:e.source_from)||this.dependencies.constant.sourceFrom)}getCacheFolderKey(){var e;return"current_folder_".concat(this.webUserId,"_").concat((null===(e=this.options)||void 0===e?void 0:e.space)||"")}_reportSlardarLog(e){var t,r;null===(t=this.slardarReporter)||void 0===t||t.call(this,{type:"log",content:e.content,level:e.level,extra:{event_name:L.LogReportEvent,event_from:"ever_cloud_sdk",space_id:null!==(r=this.spaceId)&&void 0!==r?r:"unknown"}})}_setEverCloudOptions(e){var t=this;return(0,n._)(function*(){if(!t.hasSetOptions){if(!e.netconf){if(t.isOversea(e)&&e.is_boe)Object.assign(e,{netconf:{base:"everphoto-".concat("b","oei18n.").concat("b","ytein").concat("t","l.ne").concat("t"),media:"everphoto-".concat("b","oei18n.").concat("b","ytein").concat("t","l.ne").concat("t"),is_https:!0}}),(0,h.cM)("\u5E94\u7528\u6D77\u5916\u7248\u672C sdk");else if(!t.isOversea(e)){var r,n={base:"everphoto-lv-".concat("b","oe.").concat("b").concat("y").concat("t","edance.ne").concat("t"),media:"everphoto-lv-".concat("b","oe.").concat("b").concat("y").concat("t","edance.ne").concat("t"),is_https:!0};Object.assign(e,{netconf:e.is_boe?n:{base:"lv-everphoto-bcdn.".concat("u","like").concat("c","am.com"),media:"lv-everphoto-bcdn.".concat("u","like").concat("c","am.com"),is_https:!0}})}}var i=t.dependencies.overwriteSDKInitOptions&&(yield t.dependencies.overwriteSDKInitOptions(e))||e;i.netconf=Object.assign({is_https:!0},i.netconf),t.options=i,t.idc=null!==(r=y.cN[e.dc_name])&&void 0!==r?r:e.dc_name}})()}_uploadAssetByEverCloud(e){var t=this;return(0,n._)(function*(){var r,n,{file:i,fileName:o,permission:s=null!==(r=t.permission)&&void 0!==r?r:f.y3.PUBLIC,folderId:a}=e,c=o||i.name;if(!(null==e?void 0:e.skipDuplicate)&&(yield t.isAssetNameDumplicate({fileName:c})))throw new v.g3;var u=(0,d.merge)((0,h.m3)(),null==e?void 0:e.meta),{fileType:l}=e;l||(l=null!==(n=(0,h.eF)({file:i}))&&void 0!==n?n:"file");var p=yield t.sdk.upload_asset(i,l,c,JSON.stringify(u),s===f.y3.PERSONAL?"personal":"",null==e?void 0:e.flags,a,e.isMultiDefTranscode,e.transcodeTemplateType);return new g.H1({requestId:p.request_id,fileType:l,autoPromote:!!e.autoPromote,workspaceId:e.workspaceId},t)})()}_uploadAssetByVod(e){var t=this;return(0,n._)(function*(){t.reportUploadAnalyze({action:f.li.Start,size:-1,uploaderType:"vod",filename:e.file.name});var r,n,i=Date.now(),o=e.fileName||e.file.name,s=r=>{t.reportUploadAnalyze({action:f.li.Error,size:e.file.size||-1,uploaderType:"vod",errorMsg:r.msg,filename:e.file.name})};if(!(null==e?void 0:e.skipDuplicate)){try{r=yield t.isAssetNameDumplicate({fileName:o})}catch(e){var a="[error]asset name dumplicate error: ".concat(e.msg||e.message);throw s({code:e.code,msg:a}),Error(e)}if(r)throw new v.g3}t.vodUploader||(t.vodUploader=t.getSignUploader({workspaceId:e.workspaceId}));var c=(0,d.merge)((0,h.m3)(),null==e?void 0:e.meta),u=(0,h.eF)({file:e.file});try{yield t.vodUploader.init()}catch(e){var l="[error]init vod uploader error: ".concat(e.msg||e.message);throw s({code:e.code,msg:l}),Error(e)}var p=Date.now()-i;t.reportUploadAnalyze({action:f.li.Init,size:e.file.size||0,duration:p,uploaderType:"vod",filename:e.file.name});var g=!1,_=()=>{t._concurrencyLockForVod.release(),g=!0,clearTimeout(n)};return yield t._concurrencyLockForVod.acquire(),new T.e({file:e.file,fileName:o,fileType:u,uploader:t.vodUploader,workspaceId:e.workspaceId,flags:e.flags,folderId:e.folderId,meta:c,isMultiDefTranscode:e.isMultiDefTranscode,autoPromote:e.autoPromote,transcodeTemplateType:e.transcodeTemplateType,permission:e.permission||t.permission||f.y3.PUBLIC,startTime:i,onStart:e.onStart,onCancel:_,onFinish:_,onProgress:()=>{!g&&n&&(clearTimeout(n),n=setTimeout(()=>{g||(t._concurrencyLockForVod.release(),g=!0)},18e4))}},t)})()}constructor(){this.eventBus=new c.Z,this._defaultUploaderType="normal",this.noSignOptions=null,this.options=null,this.initLocker=new E.G,this.syncLocker=new E.G,this.loadLocker=new E.G,this._concurrencyLockForVod=new h.td(5),this.syncNoSignInitDone=!1,this.syncNoSignIniting=!1,this.syncNoSignInitError=!1,this.initNoSignQueue=[],this.cacheFoldersNum=10,this.initEverCloudSdkReporter=new S.q}}(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Query?Object:Query]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getFilesListByFloder",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Query?Object:Query]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssets",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String]),(0,a.w6)("design:returntype",Promise)],N.prototype,"asset_preview",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof StreamUploadParams?Object:StreamUploadParams]),(0,a.w6)("design:returntype",Promise)],N.prototype,"streamClipUploadAsset",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String,Number,"undefined"==typeof File?Object:File,Boolean]),(0,a.w6)("design:returntype",Promise)],N.prototype,"appendClipToUpload",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"uploadVid",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String,Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"syncVideoToEverCloud",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetsByMd5",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetByMd5",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String,void 0]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetByFileId",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Array?Object:Array]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetsByFileId",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object,void 0]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getFileDetailWithTranscode",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getVideoAssetTranscodeStatus",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetsPlayInfo",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetSpirtInfo",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetPreviewInfo",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",Promise)],N.prototype,"cancelAllUploadAsset",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String]),(0,a.w6)("design:returntype",Promise)],N.prototype,"cancelUploadAsset",null),(0,a.gn)([(0,w.l)(),k(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"deleteAsset",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"renameAsset",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"downloadByUrlKey",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof DonwloadAssetParams?Object:DonwloadAssetParams]),(0,a.w6)("design:returntype",Promise)],N.prototype,"downloadAssetStream",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String,String,String]),(0,a.w6)("design:returntype",Promise)],N.prototype,"downloadAssetUrl",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof IBrowserDownload?Object:IBrowserDownload]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getDownloadUrl",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"downloadAssetUrlV2",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getPackages",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getPackageByKey",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"savePackage",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"sharePackage",null),(0,a.gn)([(0,w.l)(),k(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String]),(0,a.w6)("design:returntype",Promise)],N.prototype,"deletePackageById",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"renamePackages",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"updatePackageMeta",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",Promise)],N.prototype,"forceSyncPullUpdates",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getClusters",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===p.Mf?Object:p.Mf]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getClusterLastAsset",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getClusterById",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"createCluster",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"delCluster",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"addAssetToCluster",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"delAssetFromCluster",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"updateCluster",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetsFromCluster",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"createFolder",null),(0,a.gn)([(0,b.K)(),k(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array]),(0,a.w6)("design:returntype",Promise)],N.prototype,"deleteFolder",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"moveTo",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"updateFolder",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getFolders",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object,void 0===f.y3?Object:f.y3]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getFolderPaths",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object,void 0===f.y3?Object:f.y3]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getAssetsByFolder",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"copyAsset",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"copyPackage",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"updateEntry",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array,void 0]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getEntryAssets",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String,void 0,void 0]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getEntryAsset",null),(0,a.gn)([(0,b.K)(),k(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array]),(0,a.w6)("design:returntype",Promise)],N.prototype,"deleteByEntry",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[String]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getFolderMaxDepth",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"updatePermission",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getUnencryptedPlayInfo",null),(0,a.gn)([(0,w.l)(),k(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof IMoveFromSpaceOption?Object:IMoveFromSpaceOption]),(0,a.w6)("design:returntype",Promise)],N.prototype,"moveFromSpace",null),(0,a.gn)([(0,w.l)(),k(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof IMoveFromSpaceOption?Object:IMoveFromSpaceOption]),(0,a.w6)("design:returntype",Promise)],N.prototype,"copyFromSpace",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getImagesTranscodeStatus",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"triggerImageResize",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array,Boolean]),(0,a.w6)("design:returntype",Promise)],N.prototype,"cancelImagesTranscodeStatus",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===m.o?Object:m.o,Array]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getImagePreviewInfo",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"getImagesPreviewInfo",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"throttlingGetUpdatesTrigger",null),(0,a.gn)([(0,b.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],N.prototype,"isAssetNameDumplicate",null),(0,a.gn)([(0,w.l)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof UploadParams?Object:UploadParams]),(0,a.w6)("design:returntype",Promise)],N.prototype,"_uploadAssetByEverCloud",null)},281982:function(e,t,r){"use strict";r.d(t,{k:function(){return l}});var n=r(69984),i=r(764112),o=r(722169),s=r(117785),a=r(747890),c=r(282560),u=r(640712);class l extends c.bF{get isValid(){return!(0,o.isEmpty)(this._sourceData._meta)}get id(){return this.notOnlyId}get notOnlyId(){return this._sourceData.id}get author(){return this._sourceData.creator}get key(){return this._sourceData.key}get name(){var e,t,r,n;return null!==(n=null===(r=this._sourceData)||void 0===r?void 0:null===(t=r._meta)||void 0===t?void 0:null===(e=t.draft)||void 0===e?void 0:e.name)&&void 0!==n?n:""}get size(){var e,t,r;return(null===(r=this._sourceData)||void 0===r?void 0:null===(t=r._meta)||void 0===t?void 0:null===(e=t.draft)||void 0===e?void 0:e.size)||0}get sizeStr(){return this.size?(0,a.ys)(this.size):void 0}get type(){return c.Gk.PACKAGE}get subType(){var e,t;return null===(t=this._sourceData._meta)||void 0===t?void 0:null===(e=t.draft)||void 0===e?void 0:e.type}get updatedAt(){var e,t,r,n,i;return(null===(e=this.entry)||void 0===e?void 0:e.access_at_ts)?(null===(t=this.entry)||void 0===t?void 0:t.access_at_ts)*1e3:null===(i=this._sourceData)||void 0===i?void 0:null===(n=i._meta)||void 0===n?void 0:null===(r=n.draft)||void 0===r?void 0:r.updateTime}get createdAt(){var e,t,r,n,i;return null!==(i=null===(t=this._sourceData._meta)||void 0===t?void 0:null===(e=t.createSource)||void 0===e?void 0:e.createTime)&&void 0!==i?i:null===(n=this._sourceData._meta)||void 0===n?void 0:null===(r=n.uploadSource)||void 0===r?void 0:r.createTime}get meta(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e._meta}get coverMd5(){var e,t,r;return null===(r=this._sourceData)||void 0===r?void 0:null===(t=r.assets)||void 0===t?void 0:null===(e=t.find(e=>{var t,r;return e.path===(null===(r=this._sourceData)||void 0===r?void 0:null===(t=r._meta)||void 0===t?void 0:t.draft.cover)}))||void 0===e?void 0:e.md5}get allCoverMd5(){if(!(null===(t=this._sourceData)||void 0===t?void 0:null===(e=t._meta)||void 0===e?void 0:e.draft.cover))return[];var e,t,r,n,i=[...null===(r=this._sourceData)||void 0===r?void 0:r.assets].reverse();return null===(n=(0,o.uniqBy)(i,"path").reverse())||void 0===n?void 0:n.filter(e=>/^cover(_[0-9]+)?\.(jpe?g|png)$/.test(e.path)).map(e=>e.md5)}get duration(){var e,t;return null===(t=this._sourceData)||void 0===t?void 0:null===(e=t._meta)||void 0===e?void 0:e.draft.duration}get assets(){return(this._sourceData.assets||[]).map(e=>{var t=e.meta||"",r={};try{r=JSON.parse(t)}catch(e){}return(0,i._)((0,n._)({},e),{entryIds:e.entry_ids,meta:r,_meta:t})})}get creator(){return this._sourceData.creator}get status(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e.status}get permission(){return u.iH.isGroupSdk?this._sourceData.permission||s.y3.PUBLIC:s.y3.PERSONAL}get isPublic(){return this.permission===s.y3.PUBLIC}get isPersonal(){return this.permission===s.y3.PERSONAL}get owner(){var e,t,r,n,i,o;return(null===(r=this._sourceData)||void 0===r?void 0:null===(t=r._meta)||void 0===t?void 0:null===(e=t.createSource)||void 0===e?void 0:e.owner)||(null===(o=this._sourceData)||void 0===o?void 0:null===(i=o._meta)||void 0===i?void 0:null===(n=i.uploadSource)||void 0===n?void 0:n.owner)||""}get entryId(){return this._sourceData.entry_id}get entry(){return this._sourceData.entry}constructor(e){var t=(0,a.Wg)({obj:e,serializeKey:"meta",targetKey:"_meta"});super((0,i._)((0,n._)({},e),{_meta:t._meta,entry:t}))}}},157002:function(e,t,r){"use strict";r.d(t,{n:function(){return a}});var n,i,o=r(640712),s=r(37754);(n=i||(i={}))[n.INITIAL=0]="INITIAL",n[n.PROCESSING=1]="PROCESSING",n[n.CLEANUP=2]="CLEANUP",n[n.SUCCESS=3]="SUCCESS",n[n.FAILED=4]="FAILED";class a extends s.Z{done(){return new Promise((e,t)=>{this.result&&("success"===this.result.status?e(this.result):t(this.result)),this.finishListenQueue.push([e,t])})}destroy(){super.destroy(),this.finishListenQueue=[],this.sdk.eventBus.removeListener(o.zW.PreviewInfoEndPullEvent,this.onDoneHandler)}_onProgressHandler(e){if(e.process_id=this.requestId){var t;null===(t=this.onProgress)||void 0===t||t.call(this,e.progress)}}_onDoneHandler(e){var t,r,{process_id:n,status:i}=e;if(n===this.requestId){if(3===i){this.result={status:"success",data:e},this._onFinishHandler(),null===(t=this.onProgress)||void 0===t||t.call(this,100);return}if(4===i){this.result={status:"error",data:e},this._onFinishHandler(),null===(r=this.onProgress)||void 0===r||r.call(this,100);return}}}_onFinishHandler(){for(var e of this.finishListenQueue){var t;(null===(t=this.result)||void 0===t?void 0:t.status)==="success"?e[0](this.result):e[1](this.result)}this.destroy()}constructor(e,t){super(e,t),this.finishListenQueue=[],this.onDoneHandler=this._onDoneHandler.bind(this),this.onProgressHandler=this._onProgressHandler.bind(this),this.sdk.eventBus.addListener(o.zW.SpaceMoveProgressEvent,this.onProgressHandler),this.sdk.eventBus.addListener(o.zW.SpaceMoveFinishEvent,this.onDoneHandler)}}},218775:function(e,t,r){"use strict";var n,i;r.d(t,{y:function(){return n}}),(i=n||(n={}))[i.PERSONAL=1]="PERSONAL",i[i.PUBLIC=0]="PUBLIC"},629446:function(e,t,r){"use strict";r.d(t,{X:function(){return a}});var n=r(461228),i=r(280480),o=r(963473),s=r(432019);class a{calcFileCrc(e){var t=this;return(0,n._)(function*(){try{if(yield t._awaitInitLocker.awaitForInit(),!t._workerWrapper)throw Error("worker not init");var r=yield t._workerWrapper.calcFileCrc(e);return(0,o.oW)(r)}catch(e){return(0,o.wf)(-1,"calc file crc error",e)}})()}_bootstrap(){this._awaitInitLocker.startToInit(),fetch(this._options.workerCDN).then(e=>{e.arrayBuffer().then(e=>{var t=URL.createObjectURL(new Blob([new Uint8Array(e)],{type:"text/javascript"}));this._workerWrapper=(0,i.Ud)(new Worker(t)),this._awaitInitLocker.initDone()}).catch(e=>{this._awaitInitLocker.initDone({reject:e})})}).catch(e=>{this._awaitInitLocker.initDone({reject:e})})}constructor(e){this._options=e,this._workerWrapper=null,this._awaitInitLocker=new s.G,this._bootstrap()}}},747890:function(e,t,r){"use strict";r.d(t,{U7:()=>h.U,m3:()=>f.m,Gt:()=>i.Gt,Wg:()=>o.W,H1:()=>i.H1,eF:()=>i.eF,XD:()=>v.X,cM:()=>l.c,P_:()=>d.P,AH:()=>u.A,$A:()=>p.$,BH:()=>p.B,td:()=>g.t,NF:()=>i.NF,ys:()=>n.y,qA:()=>c});let n=r("960935"),i=r("595386"),o=r("322586"),s=r("461133"),a=r("971063");function c(e,t){switch((0,i.Gt)(e.mime)){case"video":if((e.filter_list||[]).includes(s.VW.FILM_ASSET))return new a.ZB(e);return new a.qZ(e);case"audio":return new a.Lt(e);case"image":if("livephoto"===e.sub_type)return new a.w6(e);return new a.or(e,t);default:return new a.Is(e)}}let u=r("614155"),l=r("489808"),d=r("327951"),h=r("546690"),f=r("629652");r("477495");let p=r("608230");r("349559");let v=r("39988"),g=r("730314")},946609:function(e,t,r){"use strict";r(701227),r(974414)},901814:function(){"use strict";var e,t;(t=e||(e={})).FONT="text",t.FILTER="filter",t.YK_IMAGE="yk_image",t.IMAGE_X_FILE="cutout",t.EFFECT="image_effect",t.POST_EFFECT="post_process_effect",t.FIGURE_FACE_EFFECT="figure_face",t.FIGURE_MAKEUP_EFFECT="figure_makeup",t.FIGURE_BODY_EFFECT="figure_body",t.FIGURE_RESHAPE_EFFECT="figure_reshape",t.IMAGE_CONTAINER="image_container",t.EVER_PHOTO="everphoto",t.TEXT_GLOW="text_glow",t.STICKER="sticker",t.YK_STICKER="yk_sticker",t.SVG_STICKER="svg_sticker",t.BRAND_IMAGE="brand_image",t.BRAND_FONT="brand_font",t.BRAND_STICKER="brand_sticker",t.IMAGE_X_SVG="image_x_svg",t.PHOTO_DREMINA="ai_generate_image",t.TEXT_ART="text_art"},30276:function(e,t,r){"use strict";r.d(t,{LO:function(){return c},Lq:function(){return s},yh:function(){return a}});var n=new Map,i="$di$target",o="$di$dependencies";function s(e){return e[o]||[]}function a(e){if(n.has(e))return n.get(e);var t=function(e,r,n){if(3!=arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");e[i]===e?e[o].push({id:t,index:n}):(e[o]=[{id:t,index:n}],e[i]=e)};return t.toString=()=>e,n.set(e,t),t}function c(e){return e}},339873:function(e,t,r){"use strict";r.d(t,{h:function(){return i}});var n=r(769564);class i extends n.S{unshiftAndGetDisposableNode(e){this.unshift(e);var t=this._first,r=!1;return()=>{r||(r=!0,super._remove(t))}}pushAndGetDisposableNode(e){this.push(e);var t=this._last,r=!1;return()=>{r||(r=!0,super._remove(t))}}}},664753:function(e,t,r){"use strict";r.d(t,{eI:function(){return i}});var n=r(676113);function i(e){return n.Z.create(e)}n.Z.defaults.transformRequest},855523:function(e,t,r){"use strict";r.d(t,{I:function(){return v}});var n=r(461228),i=r(789786);r(822289);var o=r(5622),s=r(577729),a=r(980014),c=r(658742),u=r(818351),l=r(111954),d=r(810381),h=r(656322),f=r(781440),p=r(123951);class v extends s.JT{get workspaceId(){return(0,a.ZB)(this._workspaceId,"draft workspaceId shouldn't empty."),this._workspaceId}updateWorkspaceId(e){var t=this;return(0,n._)(function*(){(0,a.ZB)(t._workspaceId,"draft workspaceId shouldn't empty."),t._workspaceId!==e&&(yield t._mutex.lock(),t._updateWorkspaceId(e),yield t._changeBaseEvercloud(e),t._onDidWorkspaceChange.fire(),t._mutex.unLock())})()}getWorkspaceName(e){var t=this;return(0,n._)(function*(){if(t._externalInfo.workspaceName)return t._externalInfo.workspaceName;var{workspaceName:r}=yield t._updateWorkspaceExternalInfo(e);return r})()}getIsApplyAllowed(e){var t=this;return(0,n._)(function*(){if(t._externalInfo.applyAllowed)return t._externalInfo.applyAllowed;var{applyAllowed:r}=yield t._updateWorkspaceExternalInfo(e);return r})()}getIsWorkspaceMember(e){var t=this;return(0,n._)(function*(){if(t._externalInfo.isWorkspaceMember)return t._externalInfo.isWorkspaceMember;var{isWorkspaceMember:r}=yield t._updateWorkspaceExternalInfo(e);return r})()}_updateWorkspaceExternalInfo(e){var t=this;return(0,n._)(function*(){var r=t._workspaceId,[n,i]=(yield t._permissionDataService.getWorkspaceInfoExternal({packageKey:e,workspaceId:r,sourceType:4})).pair();return n||(t._externalInfo={workspaceName:i.workspace_name,applyAllowed:i.apply_allowed,isWorkspaceMember:i.is_workspace_member}),t._externalInfo})()}_changeBaseEvercloud(e){var t=this;return(0,n._)(function*(){if(e){var r=Date.now(),n=t._workspaceService.getWorkspace(e);if(n&&t._baseEvercloud.spaceId!==n.space_id)try{yield t._baseEvercloud.changeSpace({spaceId:n.space_id,dcName:n.space_idc,netconf:{base:n.space_host,media:n.space_res_host}})}catch(i){throw t._reportService.reportDevError("draftWorkspaceManager",i,{workspaceId:e,spaceId:n.space_id,timeout:(Date.now()-r).toString()}),o.Z.error({title:p.ZP.t("service_wrong",{},"Service error"),content:p.ZP.t("some_mistakes_retry",{},"An error occurred. Refresh and try again."),okText:p.ZP.t("REFRESH",{},"Refresh"),okButtonProps:{style:{backgroundColor:"var(--lvv-color-main-default)"}},onOk:()=>{window.location.reload()},escToExit:!1,maskClosable:!1,closable:!1}),i}}})()}_updateWorkspaceId(e){this._externalInfo={},this._workspaceId=e}constructor(e,t,r,n,i){super(),this._workspaceId=e,this._userMaterialsService=t,this._workspaceService=r,this._reportService=n,this._permissionDataService=i,this._onDidWorkspaceChange=this._store.add(new c.Q),this._externalInfo={},this._mutex=new u.L,this._baseEvercloud=this._userMaterialsService.getBaseEvercloud(),this.onDidWorkspaceChange=this._onDidWorkspaceChange.event,this._mutex.tryLock(),this._changeBaseEvercloud(this._workspaceId).then(()=>{this._mutex.unLock()})}}v=(0,i.gn)([(0,i.fM)(1,f.b),(0,i.fM)(2,l.W),(0,i.fM)(3,d.m),(0,i.fM)(4,h.q),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[String,void 0===f.b?Object:f.b,void 0===l.W?Object:l.W,void 0===d.m?Object:d.m,void 0===h.q?Object:h.q])],v)},247869:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var n=r(227114);function i(e,t){return t?t():e.invokeFunction(e=>e.get(n.lT))}},489306:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var n=r(69984),i=r(764112),o=e=>e.reduce((e,t)=>{var{authType:r,account:o}=t,s=e[r];return s?(s.push(o),e):(0,i._)((0,n._)({},e),{[r]:[o]})},{})},506878:function(e,t,r){"use strict";r.d(t,{Q:function(){return v}});var n=r(69984),i=r(772322),o=r(235137),s=r(612197),a=r(123951),c=r(218571),u=r(439409),l=r(283602),d=r(938546),h=r(336462),f=r(390104),p=r(280839),v=e=>{var{onClose:t,isTempDebugger:r=!1}=e,{downloadManager:v,exportManager:g,params:_}=(0,c.useContext)(u.bi),m=(0,c.useRef)(null),{isModalCloseDisable:y,exportStatus:b}=(0,o.k)(g,e=>({isModalCloseDisable:e.observableData.isModalCloseDisable,exportStatus:e.observableData.taskStatus}))||{},w=e=>{var r;t(),null==_||null===(r=_.handleClose)||void 0===r||r.call(_,e)};return(0,i.jsxs)("div",{className:p.Z.mediaPublishContainer,ref:m,children:[(0,i.jsx)(h.h,{title:a.ZP.t("web_download",{},"Download"),onClose:()=>w("manual-close"),allowHide:!y,actions:b===s.t.Failure?[f.Y.close]:[f.Y.hide],containerRef:m}),(0,i.jsx)("div",{className:p.Z.downloadExportBody,children:g?(0,i.jsx)(l.h,{downloadManager:v,exportManager:g,onClose:w}):(0,i.jsx)(d.$,(0,n._)({downloadManager:v,handleDownloadDialogClose:w},_))})]})}},147165:function(e,t,r){"use strict";r(772322),r(459360),r(676509),r(123951)},676509:function(){"use strict";var e,t;(t=e||(e={}))[t.ExportSuccess=0]="ExportSuccess",t[t.ExportFail=1]="ExportFail",t[t.ExportLackSpace=2]="ExportLackSpace",t[t.Download=3]="Download"},361843:function(e,t,r){"use strict";var n=r(461228),i=r(69984),o=r(789786),s=r(548459),a=r(1564),c=r(461644),u=r(248176),l=r(164840),d=r(842651),h=r(810381),f=r(781440),p=r(254845),v=r(722169),g=r(529961),_=r(360822),m=r(215146);(0,o.gn)([(0,o.fM)(0,c.t),(0,o.fM)(1,f.b),(0,o.fM)(2,u.Gw),(0,o.fM)(3,l.m),(0,o.fM)(4,d.hv),(0,o.fM)(5,m.J0),(0,o.fM)(6,h.m),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===c.t?Object:c.t,void 0===f.b?Object:f.b,void 0===u.Gw?Object:u.Gw,void 0===l.m?Object:l.m,void 0===d.hv?Object:d.hv,void 0===m.J0?Object:m.J0,void 0===h.m?Object:h.m])],class{_updateTaskListProgress(e){(0,p.z)(()=>{this.observableData.mockInstanceList=e||this.observableData.mockInstanceList})}assignProgress(e,t){if(t){var r=this.mockInstanceList.findIndex(e=>e.render_task_id===t);"number"==typeof r&&r>=0&&this.mockInstanceList.length>r&&(this.mockInstanceList[r].progress=e)}}_mock(e){var t=e.map(e=>e.renderInfo).filter(e=>!!(e&&(null==e?void 0:e.renderTaskStatus)===a.S_.Underway));this.mockInstanceList=this.mockInstanceList.map(e=>{var{instance:r}=e,n=null===(i=t.find(t=>(null==t?void 0:t.renderTaskId)===(null==e?void 0:e.render_task_id)))||void 0===i?void 0:i.progress;if(n&&100===n)return{render_task_id:e.render_task_id,instance:r,progress:100};var i,o,s,a,c,u=Math.floor(new Date().getTime()/1e3);return e.expect_finish_time&&u>e.expect_finish_time?{render_task_id:e.render_task_id,instance:r,progress:99}:(r.setOption({initProgress:0,maxProgress:99,createTime:Number(null!==(o=e.create_time)&&void 0!==o?o:0),expectFinishTime:Number(null!==(s=e.expect_finish_time)&&void 0!==s?s:0),callback:t=>{this.assignProgress(t,null==e?void 0:e.render_task_id),this._updateTaskListProgress(this.mockInstanceList)}}),{render_task_id:e.render_task_id,instance:r,progress:e.progress,create_time:Number(null!==(a=e.create_time)&&void 0!==a?a:0),expect_finish_time:Number(null!==(c=e.expect_finish_time)&&void 0!==c?c:0)})});var r=(0,v.differenceBy)(t,this.mockInstanceList,"render_task_id");this.mockInstanceList=[...r.map(e=>{var t,r,n,i,o,s,a=new g.K;return a.setOption({initProgress:0,maxProgress:99,createTime:Number(null!==(t=null==e?void 0:e.createTime)&&void 0!==t?t:0),expectFinishTime:Number(null!==(r=null==e?void 0:e.expectFinishTime)&&void 0!==r?r:0),callback:t=>{this.assignProgress(t,null==e?void 0:e.renderTaskId),this._updateTaskListProgress(this.mockInstanceList)}}),{render_task_id:null!==(n=null==e?void 0:e.renderTaskId)&&void 0!==n?n:"0",instance:a,progress:null!==(i=null==e?void 0:e.progress)&&void 0!==i?i:0,create_time:Number(null!==(o=null==e?void 0:e.createTime)&&void 0!==o?o:0),expect_finish_time:Number(null!==(s=null==e?void 0:e.expectFinishTime)&&void 0!==s?s:0)}}),...this.mockInstanceList]}fetchSuccess(){return this._exportTaskService.getExportTask({status:[a.qb.Success],cursor:0,count:5})}fetchUnderwayAndFail(){return this._exportTaskService.getExportTask({status:[a.qb.Underway,a.qb.Fail],cursor:0,count:100})}shouldNotice(e,t){if(t)return!1;var r=e.reduce((e,t)=>{var r;return e[null==t?void 0:null===(r=t.baseInfo)||void 0===r?void 0:r.id]=t,e},{});return this.observableData.underwayAndFailList.some(e=>{var t,n,i,o=r[null==e?void 0:null===(t=e.baseInfo)||void 0===t?void 0:t.id];return!o||(null==e?void 0:null===(n=e.baseInfo)||void 0===n?void 0:n.status)===a.qb.Underway&&(null==o?void 0:null===(i=o.baseInfo)||void 0===i?void 0:i.status)===a.qb.Fail})}shouldAssignUpdateTaskListAndListCount(e,t){try{if(JSON.stringify((0,_.f)(this.observableData.successList))===JSON.stringify((0,_.f)(e))&&JSON.stringify((0,_.f)(this.observableData.underwayAndFailList))===JSON.stringify((0,_.f)(t)))return!1}catch(e){this._reportService.reportDevError("shouldAssignUpdateTaskListAndListCount",e instanceof Error?e:Error(e.message))}return!0}fetchFn(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return(0,n._)(function*(){var[r,n]=yield Promise.all([t.fetchSuccess(),t.fetchUnderwayAndFail()]);if((null==r?void 0:r.ok)&&(null==n?void 0:n.ok)){var i=n.value.list;t._mock(i);var o=n.value.interval;o&&(t.intervalTime=1e3*o),t.enableWebsocket=!0,i.some(e=>{var t,r;return(null===(t=e.baseInfo)||void 0===t?void 0:t.status)===a.qb.Underway&&(null===(r=e.baseInfo)||void 0===r?void 0:r.taskType)===a.UA.Long2Short})&&(t.intervalTime=s.z,t.enableWebsocket=!1);var c=r.value.list,u=t.shouldNotice(i,e);t.observableData.isClose&&u?t.fetchSuccessOrFailTaskList(i):t.shouldAssignUpdateTaskListAndListCount(c,i)&&(0,p.z)(()=>{t.observableData.underwayAndFailList=(0,_.E)(t.observableData.underwayAndFailList,i),t.observableData.successList=(0,_.E)(t.observableData.successList,c),t.observableData.showEntrance=(null==i?void 0:i.length)>0||(null==c?void 0:c.length)>0})}})()}fetchSuccessOrFailTaskList(e){var t=this;return(0,n._)(function*(){var{underwayAndFailList:r}=t.observableData,n=new Set(e.map(e=>{var t;return null==e?void 0:null===(t=e.baseInfo)||void 0===t?void 0:t.id})),o=r.reduce((e,t)=>{var r;return e[null==t?void 0:null===(r=t.baseInfo)||void 0===r?void 0:r.id]=t,e},{}),s=r.filter(e=>{var t;return!n.has(null==e?void 0:null===(t=e.baseInfo)||void 0===t?void 0:t.id)}),c=[];if(s.length>0){var u=yield t._exportTaskService.batchGetTask({taskIds:s.map(e=>{var t;return null==e?void 0:null===(t=e.baseInfo)||void 0===t?void 0:t.id})});if(u.ok){var{value:{list:l}}=u;c=s.map(e=>{var t=l.find(t=>{var r,n;return(null===(r=t.baseInfo)||void 0===r?void 0:r.id)===(null==e?void 0:null===(n=e.baseInfo)||void 0===n?void 0:n.id)});return t?(0,i._)({},t):null}).filter(e=>null!==e)}}var d=e.filter(e=>{var t,r,n,i=o[null==e?void 0:null===(t=e.baseInfo)||void 0===t?void 0:t.id];return(null==i?void 0:null===(r=i.baseInfo)||void 0===r?void 0:r.status)===a.qb.Underway&&(null==e?void 0:null===(n=e.baseInfo)||void 0===n?void 0:n.status)===a.qb.Fail});(0,p.z)(()=>{t.observableData.underwayAndFailList=(0,_.E)(r,e),t.observableData.notifyTaskList=c.concat(d)})})()}invokePolling(){var e=this;this.timer=setTimeout((0,n._)(function*(){yield e.fetchFn(),e.invokePolling()}),this.intervalTime)}_getTaskList(){return this.fetchFn(!0),this._websocketService.registerCallback(m.h1.TaskListRefresh,()=>{this.enableWebsocket&&this.fetchFn()}),this.invokePolling(),()=>{this.timer&&clearTimeout(this.timer)}}_init(){this._initUserProfile(),this._initEverCloud(),this._getTaskList()}_initUserProfile(){this._updateUserProfile(this._accountService.userProfile),this._accountService.onDidChangeProfile(e=>{this._updateUserProfile(e)})}_initEverCloud(){this._userMaterialsService.isReady&&this._updatEeverCloudInstanceInited(!0),this._userMaterialsService.onReady(()=>{this._updatEeverCloudInstanceInited(!0)})}_updatEeverCloudInstanceInited(e){(0,p.z)(()=>{this.observableData.everCloudInstanceInited=e})}_updateExpandModalInstance(){}_updateIsSupportPay(e){(0,p.z)(()=>{this.observableData.isSupportPay=e})}_updateUserProfile(e){(0,p.z)(()=>{this.observableData.userProfile=e})}get _draftWorkspaceId(){return""}get _baseEvercloud(){return this._userMaterialsService.getBaseEvercloud()}get _isTemplate(){return!1}cancel(e){return this._exportDataService.cancelExportTask({task_id:e})}retry(e){return this._exportDataService.retryExportTask({task_id:e})}constructor(e,t,r,n,i,o,a){this._containerService=e,this._userMaterialsService=t,this._accountService=r,this._exportTaskService=n,this._exportDataService=i,this._websocketService=o,this._reportService=a,this.observableData=(0,p.LO)({everCloudInstanceInited:!1,isSupportPay:!1,userProfile:{},mockInstanceList:[],underwayAndFailList:[],successList:[],showEntrance:!1,isClose:!0,notifyTaskList:[]}),this.mockInstanceList=[],this.intervalTime=s.z,this.enableWebsocket=!0,this.timer=null,this._handleUnderwayTaskCountChange=(e,t)=>{},this._handleFailTaskCountChange=(e,t)=>{},this._init()}})},562190:function(e,t,r){"use strict";r.d(t,{Bv:function(){return i.B},Wi:function(){return i.W},X2:function(){return n.X},hY:function(){return o.hY},oY:function(){return o.oY}}),r(488914);var n=r(435420),i=r(164360),o=r(32742);r(681348),r(752781)},910723:function(e,t,r){"use strict";r.d(t,{D:function(){return s},Y:function(){return u}});var n,i,o,s,a=r(69984),c=r(285348);(n=o||(o={})).schedule="schedule",n.options="options";var u=(0,a._)({},c.NS,o);(i=s||(s={})).BELOW_VERSION="40008",i.INSUFFICIENT_SPACE="20113",i.INVALID_NAME="40031",i.INVALID_MATERIAL_NAME="24001",i.DELETED_PACKAGE="40004",i.DELETED_MATERIAL="10000",i.INVALID_MATERIAL="40006",i.INVALID_FORMAT="200206",i.INVALID_MATERIAL_INFORMATION="200204",i.INVALID_TOKEN="20127",i.SAVE_TIMEOUT="CUSTOM_SAVE_TIMEOUT"},955400:function(e,t,r){"use strict";r.d(t,{A:function(){return i},W:function(){return d}});var n,i,o=r(461228),s=r(789786),a=r(461644),c=r(254845),u=r(422558),l=r(342077);(n=i||(i={})).Computer="Upload from computer",n.Phone="From phone",n.Cloud="Select from cloud",n.Google="Google Drive",n.Dropbox="Dropbox",n.Empty="Empty";class d{get videoKey(){return this.observableData.videoKey}get videoUrl(){return this.observableData.videoUrl}get uploadType(){return this.observableData.uploadType}get scheduleDisabled(){var e=this.uploadManager.observableData.uploadStatus===u.L.Success,t=this.observableData.videoKey&&this.observableData.videoUrl,{isLoadError:r,isLoading:n}=this.assetVideoPlayerManager.observableData;return"Upload from computer"===this.observableData.uploadType&&!e||!t||r||n}_selectWithFetchAssetInfo(){var e=this;return(0,o._)(function*(){var t,r,n=yield null===(t=(r=e._options).onSelectAssetId)||void 0===t?void 0:t.call(r),i=!!n;return n&&e.assetVideoPlayerManager.getVideoPlayer(n),i})()}selectUploadType(e,t){var r=this;return(0,o._)(function*(){if("Empty"===e){(0,c.z)(()=>{r.observableData.uploadType=e});return}var n=!1;"Upload from computer"===e&&(n=yield r.uploadManager.uploadFromComputer(t)),"Select from cloud"===e&&(n=yield r._selectWithFetchAssetInfo()),n&&(0,c.z)(()=>{r.observableData.uploadType=e})})()}setVideoAsset(e){this.assetVideoPlayerManager.getVideoPlayer(e),this.observableData.uploadType="Select from cloud"}destroy(){this._disposers.forEach(e=>{e.dispose()}),this.uploadManager.destroy()}constructor(e,t){this._options=e,this._containerService=t,this._disposers=[],this.observableData=(0,c.LO)({uploadType:"Empty",videoKey:"",videoUrl:""}),this.uploadManager=this._containerService.createInstance(u.c);var r=this._containerService.createInstance(l.M);this.assetVideoPlayerManager=r;var n=this.observableData,i=this.assetVideoPlayerManager.onChangeAssetVideo(e=>{(0,c.z)(()=>{n.videoKey=e.videoKey,n.videoUrl=e.videoUrl})}),o=this.uploadManager.onSuccess(e=>{(0,c.z)(()=>{r.getVideoPlayer(e.assetId)})});this._disposers.push(i,o)}}d=(0,s.gn)([(0,s.fM)(1,a.t),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[Object,void 0===a.t?Object:a.t])],d)},779667:function(e,t,r){"use strict";r.d(t,{K:function(){return D}});var n=r(69984),i=r(772322);r(822289);var o=r(5622),s=r(218571),a=r(247130),c=r(429188),u=r(813727),l=r(105789),d=r.n(l),h=r(910009),f=r(565523),p=r(744152),v=r(164837),g=r(515824),_=r(202659),m=r(583741),y=r(13617),b=r(909599),w=r(405859),k=r(904878),E=r(506814),S=r(527114),x=r(73172),T=r(204999),I=r(642506),A=r(653986),P=e=>{var{title:t,onClick:r}=e;return(0,i.jsxs)("div",{className:A.Z.header,children:[(0,i.jsx)("div",{className:A.Z.header_title,children:t}),(0,i.jsx)("div",{className:A.Z.header_icon,onClick:r,children:(0,i.jsx)(a.x8P,{})})]})},C=e=>{var{onClick:t}=e,{i18n:r}=(0,u.$)(),{ttsManager:n}=(0,f.G)(b.Y),o=""===n.generateTTSVal.name;return(0,i.jsxs)("div",{className:A.Z.footer,children:[(0,i.jsxs)("div",{className:A.Z.tips,children:[(0,i.jsx)(k.r,{className:A.Z.tips_icon}),(0,i.jsx)("span",{className:A.Z.tips_text,children:r.t("web_whatisnew_text_only_english",{},"Currently the audio in the video can only be generated from the English scripts.")})]}),(0,i.jsx)(h.H,{type:"normal",className:A.Z.submit,onClick:t,disabled:o,children:r.t("web_textvideo_button_generate_video",{},"Generate video")})]})},R=(0,c.Pi)(()=>{var{i18n:e}=(0,u.$)(),t=(0,f.G)(w.J),r=(0,m.B)(),{pageLifeCycle:o}=t,a=(0,f.G)(b.Y),{aiGenerateType:c,aiGenerateVideoRatio:l,ttsManager:h,queryErrorCode:k}=a,{generateTTSVal:R}=h,D=(0,s.useRef)(!0),L=(0,s.useMemo)(()=>({materialSource:c===p.xt.AI?"smart_match":"upload",aspectRatio:y.UR[l],tone:R.name}),[c,l,R]);(0,s.useEffect)(()=>()=>{a.resetAIGenerate()},[]),(0,s.useEffect)(()=>{D.current&&L.tone&&((0,g.v)(r,{action:"show"}),D.current=!1)},[L]);var N=o===v.jp.Generating,O=o===v.jp.GenerateFailed,F=!N&&!O,B=O&&!a.isGenerationNetworkError;return(0,i.jsxs)("div",{className:d()(A.Z.container,"ai-video-modal-wrapper"),children:[(0,i.jsx)(P,{title:F?e.t("web_textvideo_text_generation_settings",{},"Video settings"):"",onClick:function(){a.setAiGeneratePopupVisible(!1),a.handleCancelGenerate(),(0,g.v)(r,{action:"close"})}}),(0,i.jsxs)("div",{className:d()(A.Z.main,{[A.Z["hide-form"]]:!F}),children:[(0,i.jsxs)("div",{className:A.Z.form,children:[(0,i.jsx)(S.x,{label:e.t("web_textvideo_toast_how_to_generate",{},"How to generate videos"),style:{marginBottom:20},children:(0,i.jsx)(x.U,{})}),(0,i.jsx)(S.x,{label:e.t("web_textvideo_dimensional_scaling",{},"Aspect ratio"),style:{marginBottom:20},children:(0,i.jsx)(T.Y,{})}),(0,i.jsx)(S.x,{label:e.t("web_textvideo_script_reading_tones",{},"Voice"),children:(0,i.jsx)(E.U,{})})]}),(0,i.jsx)(C,{onClick:function(){a.handleStartGenerate(),(0,g.v)(r,(0,n._)({action:"generate"},L))}}),(N||O)&&(0,i.jsx)("div",{className:A.Z.processing,children:(0,i.jsx)(I.Z,{status:N?"loading":B?"failedServer":"failed",errorCode:k,onCancel:()=>{(0,_.z)(r,{action:"generate_cancel"}),a.handleCancelGenerate()},onRetry:()=>{(0,_.z)(r,{action:"retry"}),a.handleRetryGenerate(),(0,g.v)(r,{action:"retry"})},onBackToEdit:()=>{a.handleBackToEdit()}})})]})]})}),D=(0,c.Pi)(()=>{var e=(0,f.G)(b.Y);return(0,i.jsx)(o.Z,{visible:e.aiGeneratePopupVisible,className:d()(A.Z.modal,"ai-video-wrapper"),closeIcon:null,title:null,footer:null,unmountOnExit:!0,focusLock:!1,children:(0,i.jsx)(R,{})})})},922002:function(e,t,r){"use strict";r.d(t,{$:function(){return v}});var n=r(772322);r(218571);var i=r(429188),o=r(813727),s=r(917761),a=r(565523),c=r(405859),u=r(909599),l=r(910009),d=r(744152),h=r(41054),f=r(696031),p=r(24866),v=(0,i.Pi)(e=>{var{onGotIt:t}=e,r=(0,a.G)(c.J),i=(0,a.G)(u.Y),{i18n:v}=(0,o.$)(),{theme:g}=r,{smartWriterManager:_}=i;return(0,n.jsxs)("div",{className:p.Z.container,children:[(0,n.jsx)("div",{className:p.Z.left,children:g===s.h.Light?(0,n.jsx)(h.r,{className:p.Z.icon}):(0,n.jsx)(f.r,{className:p.Z.icon})}),(0,n.jsxs)("div",{className:p.Z.body,children:[(0,n.jsx)("div",{className:p.Z.title,children:v.t("web_textvideo_toast_fail_to_generate",{},"Failed to generate")}),(0,n.jsx)("div",{className:p.Z.content,children:_.fetchSmartWriterResultsError===d.KA.Sensitive?v.t("web_textvideo_toast_enter_something_inappropriate",{},"Your script may contain words that violate our Community Guidelines."):v.t("web_textvideo_toast_exception_occurred",{},"Something went wrong")})]}),(0,n.jsx)("div",{className:p.Z.right,children:(0,n.jsx)(l.H,{type:"info",onClick:function(){_.retryFetchResultsError(),null==t||t()},children:v.t("web_textvideo_button_go_back",{},"Go Back")})})]})})},982442:function(e,t,r){"use strict";r.d(t,{$_:function(){return f},W2:function(){return d},h4:function(){return h}});var n=r(772322),i=r(218571),o=r(105789),s=r.n(o),a=r(429188),c=r(565523),u=r(909599),l=r(45875),d=(0,a.Pi)(e=>{var{className:t,style:r,children:o}=e,{smartWriterManager:a,promptSuggestionManager:d}=(0,c.G)(u.Y),{visible:h}=d,{focus:f}=a,p=(0,i.useRef)(null);return(0,i.useEffect)(()=>{var e=document.querySelector(".".concat(l.Z.children)),t=new ResizeObserver(t=>{for(var r of t){var n=r.contentRect.height;e.style.height="".concat(n,"px")}});return t.observe(p.current),()=>{t.disconnect()}},[]),(0,n.jsx)("div",{className:s()(l.Z.container,{[l.Z.container__focus]:f}),onClick:function(){h&&d.closePromptList()},children:(0,n.jsx)("div",{className:s()(l.Z.children,t),style:r,children:(0,n.jsx)("div",{ref:p,children:o})})})}),h=e=>{var{className:t,style:r,children:i}=e;return(0,n.jsx)("div",{className:s()(l.Z.header,t),style:r,children:i})},f=e=>{var{className:t,style:r,children:i}=e;return(0,n.jsx)("div",{className:s()(l.Z.footer,t),style:r,children:i})}},763740:function(e,t,r){"use strict";r.d(t,{Z:function(){return H}});var n=r(69984),i=r(764112),o=r(772322);r(733501),r(822289),r(529114);var s=r(47525),a=r(638432),c=r(921195),u=r(5622),l=r(595051),d=r(429188),h=r(218571),f=r(123951),p=r(105789),v=r.n(p),g=r(247130),_=r(256755),m=r(170883),y=r(195291),b=r(496138),w=r(910009),k=r(341705),E=r(592693),S=r(355997),x=r(329724),T=r(423824),I=r(565523),A=r(405859),P=r(909599),C=r(461644),R=r(621002),D=r(786261),L=r(202659),N=r(886656),O=r(736326),F=r(747151),B=r(507792),j=r(164837),{rawSupportHls:M}=(0,E.g4)();let H=(0,d.Pi)(()=>{var e,t,r,d=(0,I.G)(C.t),p=(0,I.G)(A.J),E=(0,I.G)(P.Y),{exportManager:H,aiScriptText:U,trackData:Z,videoGenerateType:V}=E,G=(0,h.useMemo)(()=>"view-result-xg-player-".concat((0,m.Z)()),[]),W=null===(t=E.generatedResult)||void 0===t?void 0:null===(e=t.playInfo)||void 0===e?void 0:e.url,K=(0,h.useRef)(null),z=(0,h.useRef)(d.createInstance(R.u,{})),q=(0,h.useMemo)(()=>({textCnt:U.length||0,editedScript:U,aspectRatioSource:Z.textToVideoAspectRatioSource,toneSource:Z.toneSource,toneGender:Z.toneGender,aiWriterTemplateName:Z.aiWriterTemplateName,textToVideoRequestId:Z.textToVideoRequestId,textToVideoResultVideourl:null!=W?W:"",videoGenerateType:V}),[U,Z.aiWriterTemplateName,Z.textToVideoAspectRatioSource,Z.textToVideoRequestId,Z.toneGender,Z.toneSource,W,V]);(0,h.useEffect)(()=>{z.current.initPlayer({playerConfig:(0,i._)((0,n._)({id:G,url:W},M?{}:{plugins:[S.$],isLive:!1}),{autoplay:!0})})},[G,W]);var Y=z.current.playerState,J=z.current.playerInstance,{editMorePrepareLoading:X,exportModalVisible:Q}=H;(0,h.useEffect)(()=>{(Q||X)&&!Y.paused&&(null==J||J.pause())},[Q,X,J,Y.paused]),(0,h.useEffect)(()=>{Y.duration&&E.updateVideoDuration(Y.duration)},[Y.duration]);var $=(0,a.default)(!1),ee=e=>{switch(e.type){case"play":(0,L.z)(d,{action:"play"}),(0,D.w)(d,(0,n._)({action:"play"},q));break;case"pause":(0,D.w)(d,(0,n._)({action:"pause"},q))}},et=()=>{(null==J?void 0:J.fullscreen)?J.exitFullscreen():(null==J||J.getFullscreen(K.current),(0,D.w)(d,(0,n._)({action:"fullscreen"},q)))},er=!!Y.error||!Y.everCanPlay,en=Y.error&&(null===(r=E.generatedResult)||void 0===r?void 0:r.status)!=="querying",ei=(0,h.useMemo)(()=>{if(Y.dataLoaded||Y.everCanPlay){var e=null==J?void 0:J.video;return e?[e.videoWidth,e.videoHeight]:[0,0]}return[0,0]},[null==J?void 0:J.video,Y.dataLoaded,Y.everCanPlay]),eo=()=>en||!Y.buffering?null:(0,o.jsxs)("div",{className:v()(B.Z["content__player-loading"],{[B.Z["no-mask"]]:(!(null==ei?void 0:ei[0])||!(null==ei?void 0:ei[1]))&&!Y.isFullscreen}),children:[(0,o.jsx)(c.Z,{}),(0,o.jsx)("div",{className:B.Z.text,children:f.oc.t("web_the_material_is_loading",{},"Loading...")})]});return(0,s.default)(()=>{(0,D.w)(d,(0,n._)({action:"show"},q))}),(0,o.jsxs)("div",{className:B.Z["ttv-view-result-page"],children:[(0,o.jsxs)("div",{className:B.Z.main,children:[(0,o.jsxs)("div",{className:B.Z.header,children:[(0,o.jsx)("img",{className:B.Z.header__icon,src:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(k,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),alt:f.oc.t("web_textvideo_toast_video_generated",{},"Your video is ready to share!")}),(0,o.jsx)("div",{className:B.Z.header__title,children:f.oc.t("web_textvideo_toast_video_generated",{},"Your video is ready to share!")})]}),(0,o.jsxs)("div",{className:B.Z.content,children:[(0,o.jsx)("div",{className:B.Z["content__player-canvas-container"],ref:K,children:(0,o.jsxs)("div",{className:B.Z["content__player-canvas"],children:[(0,o.jsxs)(b.Z,{width:ei[0],height:ei[1],children:[(0,o.jsx)("div",{id:G}),eo(),(0,o.jsx)(T.Z,{player:J,playerState:Y,onEvent:ee})]}),(0,o.jsx)(o.Fragment,{children:(!(null==ei?void 0:ei[0])||!(null==ei?void 0:ei[1]))&&eo()}),(0,o.jsx)(o.Fragment,{children:en&&(0,o.jsx)(x.Z,{onRetry:()=>{E.handleReloadVideo()}})})]})}),(0,o.jsx)("div",{className:B.Z["content__player-controls"],children:(0,o.jsx)(_.$,{player:J,playerState:Y,disabled:er,onSwitchFullscreen:et,onEvent:ee,theme:"light"})}),Y.isFullscreen&&K.current&&(0,y.createPortal)((0,o.jsx)("div",{className:v()(B.Z["content__player-controls"],B.Z.fullscreen),children:(0,o.jsx)(_.$,{player:J,playerState:Y,disabled:er,onSwitchFullscreen:et,isFullScreen:!0,onEvent:ee})}),K.current)]}),(0,o.jsxs)("div",{className:B.Z.footer,children:[(0,o.jsx)(l.Z,{icon:(0,o.jsx)(g.s$$,{size:16}),type:"secondary",size:"default",onClick:()=>{(0,D.w)(d,(0,n._)({action:"go_back_edit_script"},q)),(0,L.z)(d,{action:"edit_script"}),$.setTrue()},children:f.oc.t("web_textvideo_button_edit_script",{},"Edit script")}),(0,o.jsx)("div",{className:B.Z["footer__auto-padding"]}),(0,o.jsx)(l.Z,{icon:(0,o.jsx)(g.qhl,{}),type:"secondary",size:"default",onClick:()=>{(0,D.w)(d,(0,n._)({action:"edit_more"},q)),(0,L.z)(d,{action:"editor"}),H.handleEditMore()},loading:X,children:f.oc.t("web_textvideo_text_edit_in_editor",{},"Edit in editor")}),(0,o.jsx)(w.H,{type:"normal",style:{height:"36px"},onClick:()=>{(0,L.z)(d,{action:"export"}),(0,N.I)(d,{actionType:"show"}),H.setExportWorkspace(H.currentWorkspace),H.setExportModalVisible(!H.exportModalVisible)},children:f.oc.t("web_textvideo_button_export",{},"Export")})]})]}),(0,o.jsx)(u.Z,{title:null,footer:null,closeIcon:null,focusLock:!1,visible:H.exportModalVisible,className:"material-export-modal",children:(0,o.jsx)(O.Z,{onExport:()=>{(0,D.w)(d,(0,n._)({action:"export_confirm"},q))}})}),(0,o.jsx)(u.Z,{title:f.oc.t("web_textvideo_toast_return_editing_script",{},"Go back to edit script?"),okText:f.oc.t("web_textvideo_button_leave",{},"Go back"),okButtonProps:{status:"danger"},cancelText:f.oc.t("web_textvideo_button_cancel",{},"Cancel"),visible:$.state,onOk:()=>p.transitionToPageLifeCycle(j.jp.DefaultEmpty),onCancel:()=>$.setFalse(),maskClosable:!1,children:f.oc.t("web_textvideo_toast_generated_video_notsaved",{},"The generated video will be saved to space.")}),(0,o.jsx)(F.t,{})]})})},13617:function(e,t,r){"use strict";r.d(t,{$c:function(){return i},Gs:function(){return s},UR:function(){return a}});var n,i,o=r(744152),s=["American Male","American Female","British Male","British Female","Male Storyteller","Female Storyteller","Adorable Girl","Cute Boy","Energetic Male","Energetic Female","Chill Girl","Normal Male","Normal Female","Serious Male","Serious Female","Charming Female","Charming Male","Narrative Female","Narrative Male","Male Professor","Male Scientist","Confident Male","Empathetic Female","Peaceful Female","Peaceful Male","Wacky","Jessie","Trickster","Good Guy","Joey","jeff","Bestie","Alfred","Jennifer","modern blogger","Navigator","Kawaii Vocalist","Female Vocalist","Kids Vocalist","Hip-hop Man","Cottagecore","open mic","quirky time","opera","Cozy","classic electric","pop lullaby","Euphoric","Hypetrain"],a={[o.ME.Canvas169]:"16:9",[o.ME.Canvas43]:"4:3",[o.ME.Canvas21]:"2:1",[o.ME.Canvas11]:"1:1",[o.ME.Canvas916]:"9:16",[o.ME.Canvas34]:"3:4"};(n=i||(i={}))[n.Success=0]="Success",n[n.Fail=1]="Fail",n[n.Cancel=2]="Cancel"},790233:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(772322);r(334033),r(529114);var i=r(196123),o=r(595051),s=r(218571),a=r(294823),c=r(659179),u=r(813727),l=r(882406),d=r(135692),h=r(287453),f=r(96159),p=r(760335),v=r(449871),g=r(64845),_=r(167154),m={},y=e=>{var t,{item:r,index:i,value:o,setValue:a,onDelete:u}=e,[p,v]=(0,s.useState)(!1),{cover:y}=r,{imgSrc:b}=(0,l.j)({tokenKey:null!==(t=null==y?void 0:y.url)&&void 0!==t?t:"",srcKey:null==y?void 0:y.key,src:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(null==y?void 0:y.url,null,{logType:"js.href/src",mode:"black",reportOnly:"all"})}),[{isDragging:w},k]=(0,h.c)({item:{index:i,type:"item"},type:"item",collect:e=>({isDragging:e.isDragging()})}),[,E]=(0,f.L)({accept:"item",hover:(0,s.useCallback)((e,t)=>{var r=e.index;if(r!==i){var n=[...o||[]];[n[r],n[i]]=[n[i],n[r]],null==a||a([...n]),t.getItem().index=i}},[i,o]),collect:e=>({isOver:!!e.isOver()})});return!m[r.md5]&&r.md5&&b&&(m[r.md5]=b),(0,n.jsxs)("div",{ref:e=>k(E(e)),className:g.Z["selected-item"],style:{backgroundImage:"url(".concat(m[r.md5],")"),opacity:w?.5:1},onMouseEnter:()=>{v(!0)},onMouseLeave:()=>{v(!1)},children:[p&&(0,n.jsx)("div",{className:g.Z.closeIcon,onClick:()=>{null==u||u(r.md5||"")},children:(0,n.jsx)(c.xcW,{color:"white",size:12})}),r.fileType===_.YB.Video&&(0,n.jsx)("div",{className:g.Z["selected-item-time"],children:(0,d.ci)(1e3*r.duration)})]},r.md5)};let b=e=>{var{multiple:t,selectedMaterialList:r,loading:s,onConfirm:c,value:l,setValue:d,onDelete:h}=e,{i18n:f}=(0,u.$)(),_=t&&r.length>0;return(0,n.jsxs)("div",{className:g.Z["selector-footer"],children:[_&&(0,n.jsx)("div",{className:g.Z["selected-file-wrap"],children:(0,n.jsx)(a.l,{gap:10,children:(0,n.jsx)(p.W,{backend:v.PD,context:window,children:r.map((e,t)=>(0,n.jsx)(y,{item:e,index:t,value:l,setValue:d,onDelete:h},t))},Math.random())})}),(0,n.jsxs)("div",{className:g.Z["action-bar"],children:[(0,n.jsx)("div",{className:g.Z["selected-file-text"],children:_&&(0,n.jsxs)("span",{children:[f.t("web_folder_text_number_items_selected",{number0:r.length},"{number0} selected"),(0,n.jsx)(i.Z,{className:g.Z["selected-file-text-divider"],type:"vertical"}),f.t("web_folder_desc_drag_to_reorder",{},"Drag to reorder the selected items")]})}),(0,n.jsx)(o.Z,{className:g.Z["selector-footer-button"],type:"primary",loading:s,disabled:!r.length,onClick:c,children:f.t("web_tool_continue",{},"continue")})]})]})}},729201:function(e,t,r){"use strict";r.d(t,{$:function(){return l},V_:function(){return u},bO:function(){return c}});var n=r(772322);r(529114);var i=r(595051),o=r(659179),s=r(60674),a=r(123951),c=()=>(0,n.jsxs)("div",{className:s.Z.emptyContainer,children:[(0,n.jsx)(o.mhl,{size:40,className:s.Z.icon}),(0,n.jsx)("div",{className:s.Z.title,children:a.ZP.t("web_folder_emptystate_no_items_yet",{},"No items yet")})]}),u=e=>{var{onRetry:t}=e;return(0,n.jsxs)("div",{className:s.Z.errorContainer,children:[(0,n.jsx)("div",{className:s.Z.title,children:a.ZP.t("web_folder_text_network_error_move_failed",{},"Couldn\u2019t move. Connect to the internet and try again.")}),(0,n.jsxs)(i.Z,{size:"small",className:s.Z.button,onClick:()=>{null==t||t()},children:[(0,n.jsx)(o.Pez,{size:16}),a.ZP.t("web_smart_tools_button_retry",{},"")]})]})},l=e=>{var{isGrid:t}=e;return(0,n.jsx)("div",{className:t?s.Z.gridContainer:s.Z.listContainer,children:Array(8).fill(1).map((e,r)=>(0,n.jsxs)("div",{className:t?s.Z.gridLoading:s.Z.listLoading,children:[!t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:s.Z.header}),(0,n.jsx)("div",{className:s.Z.content})]}),(0,n.jsx)("div",{className:s.Z.title})]}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:s.Z.content}),(0,n.jsx)("div",{className:s.Z.title})]})]},r))})}},861472:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var n=r(526599);class i{getEventParams(){return{action:this._params.action,tool_type:this._params.tool_type,current_page:this._params.current_page}}constructor(e){this._params=e,this.eventName="smart_tool_language_restrictions_popup"}}function o(e,t){(0,n.K)(e,i,[t])}},6090:function(e,t,r){"use strict";r.d(t,{h:()=>T});let n=r("69984"),i=r("574451"),o=r("772322"),s=r("61585"),a=r("547149"),c=r("499930"),u=r("216518"),l=r("735778"),d=r("389306"),h=r("161788"),f=r("93598"),p=r("399501"),v=r("798081"),g=r("131906"),_=r("863825"),m=r("978232");r("861441");let y=r("783401");r("649888");var b="";y.Z.isMac||y.Z.isIPad?b="mac":y.Z.isWindows?b="windows":y.Z.isLinux&&(b="linux");var w=function(e){function t(t){var r=t.editor,n=t.shortcutsMap,i=e.call(this)||this;return i.name="KeyboardShortcuts",i.handleKeydown=function(e){var t=e.evt,r=i.getHotKeyName(t);if(r){var n=r.key,o=r.value;return i.editor.execCommand(n,o?{value:o}:void 0),t.preventDefault(),!0}return!1},i.editor=r,i.shortcutToCommandMap=i.normalizeShortCutsMap(n),i.editor.on("keydown",i.handleKeydown),i}(0,_.d)(t,e);var r=t.prototype;return r.getShortCutID=function(e){var t=e.metaKey,r=e.altKey,n=e.shiftKey,i=e.ctrlKey,o=e.keyCode;return[t?"meta":"",r?"alt":"",n?"shift":"",i?"ctrl":"",null!=o?o:""].filter(Boolean).join("-")},r.normalizeShortCutsMap=function(e){var t,r,n,i,o={};try{for(var s=(0,_.c)(e),a=s.next();!a.done;a=s.next()){var c=a.value,u=c.key,l=c.value,d=c.shortcut,h=void 0;h=Array.isArray(d)?d:[d];try{for(var f=(n=void 0,(0,_.c)(h)),p=f.next();!p.done;p=f.next()){var v=p.value[b];v&&(o[this.getShortCutID(v)]={key:u,value:l})}}catch(e){n={error:e}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},r.getHotKeyName=function(e){var t=this.getShortCutID(e);return this.shortcutToCommandMap[t]},t}(m.S);let k=r("640595"),E=r("218571");r("196380");var S=[{key:l.$l,shortcut:{windows:{ctrlKey:!0,keyCode:90},mac:{metaKey:!0,keyCode:90}}},{key:l.zq,shortcut:[{windows:{ctrlKey:!0,keyCode:90,shiftKey:!0},mac:{metaKey:!0,keyCode:90,shiftKey:!0}},{windows:{ctrlKey:!0,keyCode:89}}]}],x={[s.h.ContentState]:a.M,[s.h.ZoneState]:c.i,[s.h.Range]:u.e,[s.h.UndoModule]:l.j0,[s.h.InputModel]:d.Z},T=e=>{var{getPlugins:t,onInit:r,businessKey:s,schema:a,data:c,onChange:u}=e,l=(0,i._)(e,["getPlugins","onInit","businessKey","schema","data","onChange"]),d=(0,E.useRef)();(0,E.useEffect)(()=>{var e,t="string"==typeof c;if(c||t){var r=c.replace(/\\n/g,"\n").split("\n").map(e=>({insert:"".concat(e,"\n")})).filter(Boolean),n=new k.I({zoneId:"0",ops:r});null===(e=d.current)||void 0===e||e.getContentState().setContent(n)}},[c]);var _=()=>{var e,t=(null===(e=d.current)||void 0===e?void 0:e.getText())||"";null==u||u(t)};return(0,E.useEffect)(()=>{if(d.current)return d.current.on(p.r.CONTENT_CHANGE,_),()=>{var e;null===(e=d.current)||void 0===e||e.off(p.r.CONTENT_CHANGE,_)}},[]),(0,o.jsx)(v.o,(0,n._)({editable:!0,businessKey:s,modules:x,onInit:e=>{d.current=e,null==r||r(e)},register:e=>{var r=t?t(e):[];return[new h.r,new f.u,new g.f,new w({editor:e,shortcutsMap:S}),...r]},schema:a},l))}},466928:function(e,t,r){"use strict";r.d(t,{b:function(){return n},s:function(){return i}});var n="INSERT_AI_WRITER_TOOLBAR_COMMAND",i="AI_WRITER_TOOLBAR_MARK"},30019:function(e,t,r){"use strict";r.d(t,{x:()=>a,Y:()=>c});let n=r("978232"),i=r("950544"),o=r("105789"),s=r.n(o);class a extends n.S{match(e,t){return e===i.IT&&"true"===t}render(e){return e.style.padding="1.5px 0",e.style.backgroundColor="var(--lvv-color-main-02, rgba(0, 202, 224, 0.2))",e.children}}class c extends n.S{match(e,t){return e===i.IT&&"true"===t}render(e){return e.class=s()(e.class,"mark-PI_qK9"),e.children}}},234132:function(e,t,r){"use strict";r.d(t,{X:function(){return s},w:function(){return o}});var n=r(640595),i=r(312745),o=e=>{var t={};return e.forEach((e,r)=>{var{ops:n}=e;t[r]=n}),t},s=e=>{var t=Object.keys(e);if(!t.length)return null;var r=t.reduce((t,r)=>{var i=e[r],o=new n.I({zoneId:r,ops:i});return t[r]=o,t},{});return new i.D(r)}},620967:function(e,t,r){"use strict";r.d(t,{b:function(){return c}});var n=r(69984),i=r(789786),o=r(723394),s=r(810381),a=r(400324);class c{report(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=(0,a._)(this._toolType),i=(0,a.f)(),s=(0,n._)({},r,i,t);o.S4.reportAppLog({eventName:e,params:s}),this.reportService.reportDevEvent(e,s)}constructor(e,t){this._toolType=e,this.reportService=t}}c=(0,i.gn)([(0,i.fM)(1,s.m),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof AllToolType?Object:AllToolType,void 0===s.m?Object:s.m])],c)},266501:function(e,t,r){"use strict";r.d(t,{d:function(){return o},o:function(){return i}});var n=r(153898),i={[n.qB.wav]:"audio/x-wav",[n.qB.mp3]:"audio/mpeg",[n.qB.aac]:"audio/aac",[n.qB.ogg_opus]:'audio/ogg; codecs="opus"',[n.qB.pcm]:"audio/l16; rate=44100; channels=2"};function o(e){try{return MediaSource.isTypeSupported(e)}catch(e){return!1}}},735972:function(e,t,r){"use strict";r.d(t,{A:function(){return y}});var n=r(461228),i=r(789786),o=r(618230),s=r(963473),a=r(47533),c=r(980014),u=r(327736),l=r(89772),d=r(669403),h=r(897317),f=r(889650),p=r(358588),v=r(366339),g=r(545791),_=r(872345),m=r(414938);class y{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new u.yk().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,l.mH)(e),(0,o.V)(e,{retries:2}),(0,d.e_)(e),e)}return this._networkClientInstance}getMaterials(e){var t=this;return(0,n._)(function*(){var{count:r,assetSource:n,orderBy:i,order:o,workspaceId:a,spaceId:c}=e.config;try{var{assets:u,has_more:l,new_cursor:d}=yield t._networkClient.request({method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.GET_MATERIAL_LIST}),data:{count:r,asset_source:n,order_by:i,order:o,cursor:"".concat(e.offset),workspace_id:a,space_id:c},withCredentials:!0}),p=(null!=u?u:[]).map(m.M);return(0,s.oW)((0,f.ib)(e.config,p,{hasMore:l,offset:Number(d)}))}catch(e){return(0,s.wf)(-1,null==e?void 0:e.message)}})()}getUserAssets(e){var t=this;return(0,n._)(function*(){var{count:r,orderBy:n,order:i,workspaceId:o,parentId:a,assetTypes:c,isCrossFolder:u,offset:l,entryIds:d}=e.config;try{var{assets:v,has_more:_}=yield t._networkClient.request({method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.GET_ASSET_QUERY}),data:{count:r,asset_types:c,parent_id:a,is_cross_folder:u,order_by:n,order:i,offset:l,workspace_id:o,entry_ids:d},withCredentials:!0}),m=(null!=v?v:[]).map(e=>(0,p.y)(e));return(0,s.oW)((0,f.ib)(e.config,m,{hasMore:_,offset:l+r}))}catch(e){return(0,s.wf)(-1,null==e?void 0:e.message)}})()}getMaterialsByIds(e){var t=this;return(0,n._)(function*(){var r,n,i=t._splitArray(e.assetIds,100);try{var o=(yield Promise.all(i.map(r=>t._networkClient.request({withCredentials:!0,method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.GET_MATERIALS_BY_IDS}),data:{workspace_id:e.workspaceId,space_id:e.spaceId,asset_ids:r}})))).reduce((e,t)=>e.concat(t.assets.map(m.M)),[]);if(e.assetIds.length>o.length)return(0,s.wf)(-1,"not found all assets");return(0,s.oW)(o)}catch(e){return(0,s.wf)(Number(null!==(r=null==e?void 0:e.ret)&&void 0!==r?r:-1),null!==(n=null==e?void 0:e.errmsg)&&void 0!==n?n:null==e?void 0:e.message)}})()}tryGetMaterialsByIds(e){var t=this;return(0,n._)(function*(){var r,n,i=t._splitArray(e.assetIds,100);try{var o=(yield Promise.all(i.map(r=>t._networkClient.request({withCredentials:!0,method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.GET_MATERIALS_BY_IDS}),data:{workspace_id:e.workspaceId,space_id:e.spaceId,asset_ids:r}})))).reduce((e,t)=>e.concat(t.assets.map(m.M)),[]);return(0,s.oW)(o)}catch(e){return(0,s.wf)(Number(null!==(r=null==e?void 0:e.ret)&&void 0!==r?r:-1),null!==(n=null==e?void 0:e.errmsg)&&void 0!==n?n:null==e?void 0:e.message)}})()}copyMaterialToWorkspace(e){var t=this;return(0,n._)(function*(){var r,{fromWorkspaceId:i,toWorkspaceId:o,meta:c,assetId:u}=e;try{var l,d=yield t._networkClient.request({method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.COPY_MATERIAL_TO_WORKSPACE}),data:{from_workspace_id:i,to_workspace_id:o,meta:c,asset_id:u},withCredentials:!0}),f=0,p=(l=(0,n._)(function*(){var e=yield t._checkAsyncTaskProcess({workspace_id:o,process_id:d.process_id});return e.ok?e.value.isProcess?(f=0,yield(0,a.D)(500),p()):e.value.isSuccess?e:(0,s.wf)(-3,"server copy asset task failure"):++f>10?(0,s.wf)(-2,"process task fetch failure"):(yield(0,a.D)(500),p())}),function(){return l.apply(this,arguments)});return yield p()}catch(e){return(0,s.wf)((null==e?void 0:e.ret)?Number(null==e?void 0:e.ret):-1,null!==(r=null==e?void 0:e.errmsg)&&void 0!==r?r:null==e?void 0:e.message)}})()}deleteMaterials(e){var t=this;return(0,n._)(function*(){var{workspaceId:r,assetIds:n}=e;try{return yield t._networkClient.request({method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.DELETE_MATERIALS}),data:{workspace_id:r,asset_ids:n},withCredentials:!0}),(0,s.ly)()}catch(e){return(0,s.Mx)(Number(e.ret)||-1,(null==e?void 0:e.errmsg)||e.message,e)}})()}createAsset(e){var t=this;return(0,n._)(function*(){var{name:r,assetType:n,parentId:i,workspaceId:o,enableOverDeep:a}=e;try{var c=yield t._networkClient.request({method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.CREATE_ASSET}),data:{name:r,asset_type:n,parent_id:i,workspace_id:o,enable_over_deep:a},withCredentials:!0});return(0,s.oW)((0,p.y)(c))}catch(e){if(e.ret===String(_.Zj.HitSensitiveWord))return(0,s.wf)(_.Zj.HitSensitiveWord,e.errmsg);if(e.ret===String(_.Zj.DirectoryExceedMaxDepth))return(0,s.wf)(_.Zj.DirectoryExceedMaxDepth,e.errmsg);if(e.ret===String(_.Zj.FolderNotExist))return(0,s.wf)(_.Zj.FolderNotExist,e.errmsg);return(0,s.wf)(-1,null==e?void 0:e.message)}})()}labelAssetsAsExported(e){var t=this;return(0,n._)(function*(){try{var r,n,i=yield t._networkClient.request({method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.LABEL_AS_EXPORTED}),data:(0,v.X)(e),withCredentials:!0});if("0"!==i.ret)return(0,s.wf)(Number(i.ret),i.errmsg);return(0,s.ly)()}catch(e){return(0,s.wf)(Number(null!==(r=null==e?void 0:e.ret)&&void 0!==r?r:-1),null!==(n=null==e?void 0:e.errmsg)&&void 0!==n?n:null==e?void 0:e.message)}})()}promoteAsset(e){var t=this;return(0,n._)(function*(){try{var r,n,i=yield t._networkClient.request({method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.PROMOTE_ASSET}),data:(0,v.X)(e),withCredentials:!0});if("0"!==i.ret)return(0,s.wf)(Number(i.ret),i.errmsg);return(0,s.ly)()}catch(e){return(0,s.wf)(Number(null!==(r=null==e?void 0:e.ret)&&void 0!==r?r:-1),null!==(n=null==e?void 0:e.errmsg)&&void 0!==n?n:null==e?void 0:e.message)}})()}_checkAsyncTaskProcess(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.request({method:"POST",url:t._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:g.b.QUERY_PROCESS}),data:e,withCredentials:!0});switch(r.status){case _.tQ.Initial:case _.tQ.Process:return(0,s.oW)({isProcess:!0,isSuccess:!1});case _.tQ.CleanUp:case _.tQ.Failure:return(0,s.oW)({isProcess:!1,isSuccess:!1});case _.tQ.Success:return(0,s.oW)({isProcess:!1,isSuccess:!0,newId:r.new_id_str});default:(0,c.bP)(r.status)}}catch(e){return(0,s.wf)(-1,null==e?void 0:e.message)}})()}_splitArray(e,t){for(var r=[],n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}constructor(e){this._httpApiSettingService=e}}y=(0,i.gn)([(0,i.fM)(0,h.x),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===h.x?Object:h.x])],y)},467425:function(e,t,r){"use strict";function n(e){if(e){var t=e.lastIndexOf(".");if(-1!==t)return e.substr(t+1)}}r.d(t,{m:function(){return n}})},227114:function(e,t,r){"use strict";r.d(t,{DT:function(){return s},lT:function(){return a},zb:function(){return i}});var n,i,o=r(30276);(n=i||(i={})).Success="success",n.Info="info",n.Warning="warning",n.Error="error",n.Normal="normal",n.Loading="loading";var s=3,a=(0,o.yh)("notification")},444133:function(e,t,r){"use strict";r.d(t,{q:function(){return a}});var n=r(461228),i=r(442317),o=r(818351),s={appId:"app_id",appVersion:"app_version",userId:"user_id",hasLogin:"user_is_login",stagingFlag:"_staging_flag",enableTTWid:"enable_ttwebid",userType:"user_type"};class a{setConfig(e){var t=this._transformToTeaConfig(e);this._sdk.config(t),(void 0!==t.user_unique_id||void 0!==t.user_id)&&(this._abReady=!1)}getTeaConfig(){return this._sdk.getConfig()}reportPv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,{forceReport:r}=t||{};if(!this._canReport()){this._needReportPv=e;return}if(r){this._sdk.predefinePageView(e);return}this._canReportPv&&(this._canReportPv=!1,this._needReportPv=void 0,this._sdk.predefinePageView(e))}disableReportPv(){this._canReportPv=!1}setCustomParams(e){Object.assign(this._customParams,e),this._sdk.config({custom:this._customParams})}getCustomParams(){return this._customParams}setCommonEventParams(e){Object.assign(this._evtParams,e),this._sdk.config({evtParams:this._evtParams})}getCommonEventParams(){return this._evtParams}track(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._canReport()&&(r?this._reportBecon(e,t):this._report(e,t))}ensureTrack(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._canReport()){this._pendingEventQueue.push({event:e,params:t,immediately:r});return}r?this._reportBecon(e,t):this._report(e,t)}getABConfig(){return new Promise(e=>{this._sdk.getABConfig?this._sdk.getABConfig({},e):this._sdk.getABconfig({},e)})}getABTestVar(e,t){var r=this;return(0,n._)(function*(){return yield r._checkAbReady(),new Promise(n=>{if(r._canReport())return r._sdk.getVar(e,t,n);n(t)})})()}getWebId(){return(0,n._)(function*(){return yield Promise.resolve(),"null"})()}_flush(){for(var e of(this._needReportPv&&this.reportPv(this._needReportPv),this._pendingEventQueue))e.immediately?this._reportBecon(e.event,e.params):this._report(e.event,e.params)}_transformToTeaConfig(e){var t={};return Object.entries(e).forEach(e=>{var[r,n]=e;t[s[r]?s[r]:r]=n}),e.userId?t.user_unique_id=e.userId:""===e.userId&&(t.user_unique_id=void 0),t}_report(e,t){this._sdk.event(e,t)}_reportBecon(e,t){this._sdk.beconEvent(e,t)}_checkAbReady(){var e=this;return(0,n._)(function*(){yield e._abMutex.lock();try{if(e._abReady)return;yield(0,i.Hp)(()=>e.getABConfig(),3e3),e._abReady=!0}finally{e._abMutex.unLock()}})()}constructor(){this._customParams={},this._evtParams={},this._abReady=!1,this._abMutex=new o.L,this._canReportPv=!0,this._pendingEventQueue=[]}}},678041:function(e,t,r){"use strict";r.d(t,{S:function(){return s}});var n=r(461228),i=r(789786),o=r(226134);class s{getVar(){var e=this;return(0,n._)(function*(){var t;try{t=yield e._teaAdapterService.getABTestVar("ever_cloud_use_vod_uploader_when_sign",!1)}catch(e){t=!1}return t})()}constructor(e){this._teaAdapterService=e}}s=(0,i.gn)([(0,i.fM)(0,o.w),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===o.w?Object:o.w])],s)},743321:function(e,t,r){"use strict";var n;r.d(t,{o:function(){return n}}),(n||(n={})).NewTransitionEffectEnabled="enable_new_engine_transition"},100412:function(e,t,r){"use strict";r.d(t,{w:function(){return i}});var n=r(808979);class i{getConfigValue(e){return this._configuration.getValue(e)}constructor(e){this._configuration=new n.V(e)}}},663534:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var n=r(461228),i=r(69984),o=r(980014),s=r(577729),a=r(963473),c=r(658742),u=r(398118);class l extends s.JT{_getTaskProgress(){var e=this;return(0,n._)(function*(){var t;switch(e._scene){case u.dZ.SmartTool:t=yield e._aiToolRepository.getAiTaskProcess((0,i._)({taskId:e.value.taskId},e._queryParams));break;case u.dZ.GraphEditor:t=yield e._aiToolRepository.getGraphicAiTaskProcess((0,i._)({taskId:e.value.taskId},e._queryParams));break;default:(0,o.bP)(e._scene)}t.ok?(e._getTaskProgressErrorCount=0,e._taskStauts=t.value.status,e._taskStauts===u.gF.Processing?e._onProgress.fire(t.value):e._taskStauts===u.gF.Fail?e._onError.fire((0,a.wf)(u.gF.Fail,"ai task failed")):e._taskStauts===u.gF.Success&&e._onSuccess.fire(t.value)):e._getTaskProgressErrorCount++,e._getTaskProgressErrorCount>=10&&(e._taskStauts=u.gF.Fail,e._onError.fire((0,a.wf)(t.code,t.msg)))})()}_startPollingProgress(){var e=this;return(0,n._)(function*(){yield e._getTaskProgress(),e._taskStauts!==u.gF.Processing||e._canceled||setTimeout(()=>{e._startPollingProgress()},500)})()}cancel(){this._canceled||(this._canceled=!0,this._onCancel.fire())}constructor(e,t,r,n){super(),this._aiToolRepository=e,this.value=t,this._queryParams=r,this._scene=n,this._onProgress=this._store.add(new c.Q),this.onProgress=this._onProgress.event,this._onError=this._store.add(new c.Q),this.onError=this._onError.event,this._onSuccess=this._store.add(new c.Q),this.onSuccess=this._onSuccess.event,this._onCancel=this._store.add(new c.Q),this.onCancel=this._onCancel.event,this._taskStauts=u.gF.Processing,this._getTaskProgressErrorCount=0,this._canceled=!1,this.value.taskId&&this._startPollingProgress()}}},284676:function(e,t,r){"use strict";r.d(t,{e:function(){return u}});var n=r(461228),i=r(577729),o=r(658742),s=r(963473),a=r(333205),c=Math.floor(2.5);class u extends i.JT{get error(){return this._error}get status(){return this._taskStatus}get value(){return this._result}cancel(){this._taskStatus=a.L.Cancel}_fetchPromptResult(){var e=this;return(0,n._)(function*(){var t=yield e.promptToTextPromise;t.ok?(e._taskStatus=a.L.Success,e._result=t.value,e._onSuccess.fire(e._result)):(e._taskStatus=a.L.Failure,e._error=t,e._onError.fire(t))})()}_mockUpdateProcess(){this._taskStatus===a.L.Process?(this._currentProcess=Math.min(this._currentProcess+c,99),this._onProgress.fire({process:this._currentProcess,status:a.L.Process}),setTimeout(()=>{this._mockUpdateProcess()},500)):this._onProgress.fire({process:100,status:this._taskStatus})}constructor(e){super(),this.promptToTextPromise=e,this._onProgress=this._store.add(new o.Q),this.onProgress=this._onProgress.event,this._onError=this._store.add(new o.Q),this.onError=this._onError.event,this._onSuccess=this._store.add(new o.Q),this.onSuccess=this._onSuccess.event,this._taskStatus=a.L.Process,this._error=(0,s.ly)(),this._currentProcess=0,this._fetchPromptResult(),this._mockUpdateProcess()}}},532461:function(e,t,r){"use strict";r.d(t,{u:function(){return _}});var n=r(461228),i=r(69984),o=r(764112),s=r(618230),a=r(963473),c=r(327736),u=r(669403),l=r(339788),d=r(89772),h=r(816752),f=r(356180),p=r(123951),v=r(980134),g={businessHeader:{loc:"sg",appSDKVesion:v.Mr,lan:"en",pf:"7",appVersion:v.$U,tdid:"web",signVer:1}};class _{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new c.yk().build((0,o._)((0,i._)({},c.kk),{timeout:9e4})),(0,u.i3)(e),(0,l.V)(e,(0,o._)((0,i._)({},g.businessHeader),{lan:p.ZP.language})),(0,d.mH)(e),(0,s.V)(e),e)}return this._networkClientInstance}get _api(){return"".concat(h._L.getVar("web_domain")).concat(f.b.REPORT)}report(e){var t=this;return(0,n._)(function*(){try{var r=t._formatParams(e),n=yield t._networkClient.post(t._api,r,{withCredentials:!0});return(0,a.oW)(n.data)}catch(e){var i,o,s=null!==(i=e.ret)&&void 0!==i?i:-1;return(0,a.Mx)(Number(s),null!==(o=e.errmsg)&&void 0!==o?o:"report error.",e)}})()}_formatParams(e){var t=this._generateRandomId();return{id:t,reason:e.reason,reason_key:e.reasonKey,reason_type:e.reasonType,report_type:9,extra:{ai_material:[{object_id:t,type:"text",gen_text:e.genText,prompt_text:e.promptText}]}}}_generateRandomId(){return String(Math.floor(Math.random()*(4294967294+1))+1)}}},764699:function(e,t,r){"use strict";r.d(t,{s:function(){return s}});var n=r(808637),i=r(211941),o=r(619398);function s(e,t,r){var s,a,c,u,l,d,h,f,p,v,g,_=(0,n.D)(t.Extra),m=(0,n.D)(t.SdkExtra),y=(0,n.D)(null!==(f=t.ContentFile)&&void 0!==f?f:""),b=null!=r?r:"".concat((0,i.X)(null===(s=t.FileUrl.UrlList)||void 0===s?void 0:s[0]),"/"),w=(h=null!==(d=null!==(l=null!==(u=null!==(c=null!==(a=_.web_icon)&&void 0!==a?a:_.hover_icon)&&void 0!==c?c:_.preview_cover)&&void 0!==u?u:_.track_thumbnail)&&void 0!==l?l:_.canvas_cover)&&void 0!==d?d:"")?"".concat(b).concat(h):"",k=(t.Labels?(0,n.D)(t.Labels):[]).map(e=>String(e.id)),E=Object.values(t.ModelNames?JSON.parse(t.ModelNames):{}).reduce((e,t)=>[...e,...t],[]);return{common:{key:function(e,t){var{ResourceId:r,EffectId:n}=t;return e===o._g.TextGlow?"".concat(e,"_").concat(r.toString(),"_").concat(r.toString()):"".concat(e,"_").concat(r.toString(),"_").concat(n.toString())}(e,t),resourceId:t.ResourceId.toString(),effectId:t.EffectId.toString(),name:t.Name,isBusiness:null!==(p=_.is_business)&&void 0!==p&&p,md5:t.FileUrl.Uri,isVip:null!==(v=_.is_vip)&&void 0!==v&&v,package:{uri:t.FileUrl.Uri,urlList:t.FileUrl.UrlList},icon:{uri:t.IconUrl.Uri,urlList:t.IconUrl.UrlList},sdkVersion:t.SdkVersion,requirements:t.Requirements,modelNames:E,previewUrl:w||t.IconUrl.UrlList[0],source:t.Source,panel:t.Panel,isPrefab:null!==(g=_.is_prefab)&&void 0!==g&&g,labels:k},extra:_,sdkExtra:m,urlPrefix:b,contentFile:y}}},283268:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var n=r(446176);function i(){return{params:{aid:n.k},withCredentials:!0}}},171389:function(e,t,r){"use strict";r.d(t,{W:()=>_});let n=r("461228"),i=r("577729"),o=r("963473"),s=r("69984"),a=r("327736"),c=r("669403"),u=r("89772"),l=r("816752"),d=r("618230"),h=r("821448"),f=r("530487"),p=r("798486");class v{get _createTaskApi(){return"".concat(l._L.getVar("web_domain")).concat(h.b.CREATE_COPY_TASK)}get _getTaskDetailApi(){return"".concat(l._L.getVar("web_domain")).concat(h.b.GET_COPY_TASK_DETAIL)}get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new a.yk().build({headers:{"Content-Type":"application/json"}}),(0,c.mK)(e),(0,u.mH)(e),(0,d.V)(e),e)}return this._networkClientInstance}createDraftCopyTask(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._createTaskApi,(0,s._)({},e),{withCredentials:!0});if("0"!==r.ret)return(0,p.EA)(r.ret,r.errmsg);return(0,o.oW)(r.data.process_id)}catch(e){return(0,f.m)(e,-1,"createCopyDraft api error.")}})()}getDraftCopyTask(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getTaskDetailApi,e,{withCredentials:!0});if("0"!==r.ret)return(0,o.wf)(Number(r.ret),r.errmsg);return(0,o.oW)(r.data)}catch(e){return(0,f.m)(e,-1,"getDraftCopyDetail api error.")}})()}}let g=r("49448");class _ extends i.JT{createCopyTask(e){var t=this;return(0,n._)(function*(){var r=yield t._draftCopyRepository.createDraftCopyTask({from_workspace_id:e.fromWorkspaceId,to_workspace_id:e.toWorkspaceId,package_key:e.packageKey,new_package_key:e.newPackageKey,meta:e.meta,resource_type:e.resourceType});return r.ok?(0,o.oW)(new g.m(6e4,t._draftCopyRepository,e.toWorkspaceId,r.value,e.needVisible)):r})()}constructor(){super(),this._draftCopyRepository=new v}}},961180:function(e,t,r){"use strict";r.d(t,{s:function(){return c}});var n=r(789786),i=r(577729),o=r(37011),s=r(133291),a=r(823894);class c extends i.JT{getEffectAbTest(){return this._effectAbTestRepository.getEffectAbTest()}constructor(e){super(),this._instantiationService=e,this._effectAbTestRepository=this._instantiationService.createInstance(s.E)}}(0,n.gn)([(0,a.o)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],c.prototype,"getEffectAbTest",null),c=(0,n.gn)([(0,n.fM)(0,o.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o.T?Object:o.T])],c)},920396:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});var n=(0,r(30276).yh)("integration-data-service")},847025:function(e,t,r){"use strict";r.d(t,{n:function(){return n}});var n=(0,r(30276).yh)("mask-data-service")},101930:function(e,t,r){"use strict";r.d(t,{Y:function(){return o}});var n=r(619398),i=r(898378);class o extends i.L{buildCustomRequest(e){return{region:e.region,enter_from:e.enter_from}}get resourceType(){return n._g.Tone}}},853057:function(e,t,r){"use strict";function n(e){try{if(!e)return{};return JSON.parse(e)}catch(e){return{}}}r.d(t,{m:function(){return n}})},309522:function(e,t,r){"use strict";r.d(t,{f:function(){return a}});var n=r(789786),i=r(577729),o=r(609841),s=r(823894);class a extends i.JT{getToken(){return this._textToSpeechRepository.getToken()}constructor(){super(),this._textToSpeechRepository=new o.$}}(0,n.gn)([(0,s.o)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],a.prototype,"getToken",null)},610306:function(e,t,r){"use strict";r.d(t,{Y:function(){return n}});var n=(0,r(30276).yh)("environment")},349901:function(e,t,r){"use strict";r.d(t,{in:function(){return i},jd:function(){return s},yR:function(){return a}});var n,i,o=r(30276);(n=i||(i={}))[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error";var s=1,a=(0,o.yh)("logger")},285558:function(e,t,r){"use strict";r.d(t,{v:function(){return c}});var n=r(789786),i=r(251164),o=r(701789),s=r(963730),a=r(37011);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new s.M(o.z,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,n.gn)([(0,n.fM)(0,a.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===a.T?Object:a.T])],c)},318920:function(e,t,r){"use strict";r.d(t,{x:function(){return c}});var n=r(789786),i=r(251164),o=r(648250),s=r(963730),a=r(37011);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new s.M(o.d,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,n.gn)([(0,n.fM)(0,a.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===a.T?Object:a.T])],c)},998733:function(e,t,r){"use strict";r.d(t,{R:function(){return c}});var n=r(789786),i=r(251164),o=r(590185),s=r(963730),a=r(37011);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new s.M(o.F,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,n.gn)([(0,n.fM)(0,a.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===a.T?Object:a.T])],c)},704595:function(e,t,r){"use strict";r.d(t,{Y:function(){return u}});var n=r(789786),i=r(762134),o=r(211928),s=r(466477),a=r(980014),c=r(250047);class u extends i.B{getCover(e){return e.coverUrl}doFetch(){(0,a.ss)("dreamina user ai video should not trigger doFetch ")}getVideoResourceToken(){return this._getResourceTokenSync(this._createDreaminaAiVideoResourceToken.bind(this),()=>this._dreaminaAiVideoResourceToken,e=>this._dreaminaAiVideoResourceToken=e)}_createDreaminaAiVideoResourceToken(e){(0,a.Y2)((0,s.R)(e));var t=e.video.originVideo.videoUrl,{key:r}=e;return this._dreaminaAiVideoResourceToken=(0,c.MZ)({key:r,url:t},this._downloadService),this._dreaminaAiVideoResourceToken}constructor(e,t,r){super(e,t,r),this.key=e,this._downloadService=r}}u=(0,n.gn)([(0,n.fM)(2,o.tx),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IDreaminaAiVideoMeta?Object:IDreaminaAiVideoMeta,void 0===o.tx?Object:o.tx])],u)},200776:function(e,t,r){"use strict";r.d(t,{u:function(){return d}});var n=r(69984),i=r(789786),o=r(980014),s=r(762134),a=r(211928),c=r(250047),u=r(466477),l=r(610306);class d extends s.B{getVideoResolutionInfo(){var e,t;return(0,o.Y2)((0,u.R)(this.value)),{url:null!==(t=null===(e=this.value.video)||void 0===e?void 0:e.originVideo.videoUrl)&&void 0!==t?t:"",resolution:"origin"}}getThumbResourceTokens(){return this._getResourceTokenAsync(this._createUserVideoThumbTokens.bind(this),()=>this._dreaminaVideoThumbResourceTokens,e=>this._dreaminaVideoThumbResourceTokens=e)}getCover(e){return e.coverUrl}doFetch(){(0,o.ss)("dreamina user ai video should not trigger doFetch ")}getVideoResourceToken(){return this._getResourceTokenSync(this._createDreaminaUserAiVideoResourceToken.bind(this),()=>this._dreaminaUserAiVideoResourceToken,e=>this._dreaminaUserAiVideoResourceToken=e)}_createDreaminaUserAiVideoResourceToken(e){(0,o.Y2)((0,u.R)(e)),(0,o.Y2)(null==e?void 0:null===(r=e.video)||void 0===r?void 0:null===(t=r.originVideo)||void 0===t?void 0:t.videoUrl);var t,r,n=e.video.originVideo.videoUrl,{key:i}=e,s=this._getVideoResourceKey(i,n);return this._dreaminaUserAiVideoResourceToken=(0,c.MZ)({key:s,url:n},this._downloadService),this._dreaminaUserAiVideoResourceToken}_getVideoResourceKey(e,t){return"".concat(e,"_").concat(t)}_getThumbResourceKey(e){return"".concat(this.key?"".concat(this.key,"_"):"","thumb_").concat(e)}_createUserVideoThumbTokens(e){(0,o.Y2)(null===(t=e.video)||void 0===t?void 0:t.thumb);var t,r,i,{singleFrameWidth:s,singleFrameHeight:a}=null===(r=e.video)||void 0===r?void 0:r.thumb.thumbCommonInfo;return this._dreaminaVideoThumbResourceTokens=null===(i=e.video)||void 0===i?void 0:i.thumb.detailInfos.map(e=>{var t=this._getThumbResourceKey(e.url),r={frameCount:e.frameCount,singleFrameWidth:s,singleFrameHeight:a,imageWidth:e.imageWidth,imageHeight:e.imageHeight};return(0,c.MZ)((0,n._)({key:t,url:e.url},r),this._downloadService)}),this._dreaminaVideoThumbResourceTokens}constructor(e,t,r,n){super(e,t,r),this.key=e,this._downloadService=r,this._environmentService=n,(0,u.K)(this.value)}}d=(0,i.gn)([(0,i.fM)(2,a.tx),(0,i.fM)(3,l.Y),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IDreaminaUserAiVideoMeta?Object:IDreaminaUserAiVideoMeta,void 0===a.tx?Object:a.tx,void 0===l.Y?Object:l.Y])],d)},605735:function(e,t,r){"use strict";r.d(t,{B:function(){return n}});var n=(0,r(30276).yh)("sticker-resource-service")},360933:function(e,t,r){"use strict";r.d(t,{R:function(){return E}});var n=r(461228),i=r(69984),o=r(764112),s=r(789786),a=r(619398),c=r(632980),u=r(211928),l=r(980014),d=r(466477),h=r(49978),f=r(436184),p=r(46306),v=r(528512),g=r(515029),_=r(605735),m=r(656090),y=r(686551),b=r(514567),w=r(806797),k=r(738935);class E extends h.${getCover(e){return e.icon.urlList[0]}getContentUrl(e){return e.package.urlList[0]}doFetch(){var e=this;return(0,n._)(function*(){(0,l.Y2)(!(0,d.R)(e.value));var[t,r]=(yield e._subtitleTemplateDataService.getSubtitleTemplateByIds({enterFrom:e._configurationService.editorCategory,ids:[e.value.resourceId]})).pair();if(t)throw Error("doFetch error-".concat(t.code,"-").concat(t.msg));return(0,i._)({type:e.value.type},r.list[0])})()}_getResourceKey(e){return"".concat(e.type,"_").concat(e.key)}_doResourceReady(e){super._doResourceReady(e),this.parseAndInitChildResources()}parseAndInitChildResources(){for(var e of this.dependencyResources)switch(e.type){case a._g.Font:this._fontResourceService.add(this._getResourceKey(e),(0,o._)((0,i._)({},e),{key:this._getResourceKey(e),resourceId:e.key}));break;case a._g.TextMotion:this._textMotionResourceService.add(this._getResourceKey(e),(0,o._)((0,i._)({},e),{key:this._getResourceKey(e),resourceId:e.key}));break;case a._g.StickerMotion:this._stickerMotionResourceService.add(this._getResourceKey(e),(0,o._)((0,i._)({},e),{key:this._getResourceKey(e),resourceId:e.key}));break;case a._g.Sticker:this._stickerResourceService.add(this._getResourceKey(e),(0,o._)((0,i._)({},e),{key:this._getResourceKey(e),resourceId:e.key}));break;case a._g.TextPreset:this._textPresetResourceService.add(this._getResourceKey(e),(0,o._)((0,i._)({},e),{key:this._getResourceKey(e),resourceId:e.key}));break;case a._g.ShapeAnimation:this._shapeAnimationResourceService.add(this._getResourceKey(e),(0,o._)((0,i._)({},e),{key:this._getResourceKey(e),resourceId:e.key}));break;case a._g.SystemFonts:break;default:(0,l.ss)("unsupported child resource type in text template resource!")}}getBuiltinContentTokens(){return this.dependencyResources.map(e=>{switch(e.type){case a._g.Font:var t=this._fontResourceService.get(this._getResourceKey(e));return(0,l.Y2)(t),t.getContentResourceToken();case a._g.TextMotion:var r=this._textMotionResourceService.get(this._getResourceKey(e));return(0,l.Y2)(r),r.getContentResourceToken();case a._g.StickerMotion:var n=this._stickerMotionResourceService.get(this._getResourceKey(e));return(0,l.Y2)(n),n.getContentResourceToken();case a._g.Sticker:var i=this._stickerResourceService.get(this._getResourceKey(e));return(0,l.Y2)(i),i.getContentResourceToken();case a._g.TextPreset:var o=this._textPresetResourceService.get(this._getResourceKey(e));return(0,l.Y2)(o),o.getContentResourceToken();case a._g.ShapeAnimation:var s=this._shapeAnimationResourceService.get(this._getResourceKey(e));return(0,l.Y2)(s),s.getContentResourceToken();case a._g.SystemFonts:return;default:(0,l.ss)("unsupported child resource type in text template resource!")}}).filter(e=>void 0!==e)}get dependencyResources(){var e;return(0,l.Y2)((0,d.R)(this.value),"resource is not ready yet! please call this function after resource ready."),(null!==(e=this.value.dependentResources)&&void 0!==e?e:[]).filter(e=>e.type!==a._g.SystemFonts).map(e=>((0,l.Y2)(e.resourceId,"dependency resource should have a resource id"),{type:(0,b.e)(k.hR[e.type]||e.type,this._configurationService.resourcePanel),source:e.source,key:e.resourceId}))}constructor(e,t,r,n,i,o,s,a,c,u,l,d){super(e,t,u),this.key=e,this._fontResourceService=r,this._stickerResourceService=n,this._textPresetResourceService=i,this._textMotionResourceService=o,this._videoMotionResourceService=s,this._stickerMotionResourceService=a,this._shapeAnimationResourceService=c,this._downloadService=u,this._subtitleTemplateDataService=l,this._configurationService=d}}E=(0,s.gn)([(0,s.fM)(9,u.tx),(0,s.fM)(10,c.B),(0,s.fM)(11,w.Ui),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof ISubtitleTemplateMeta?Object:ISubtitleTemplateMeta,void 0===g.I?Object:g.I,void 0===_.B?Object:_.B,void 0===m.V?Object:m.V,void 0===f.n?Object:f.n,void 0===p.B?Object:p.B,void 0===v.p?Object:v.p,void 0===y.X?Object:y.X,void 0===u.tx?Object:u.tx,void 0===c.B?Object:c.B,void 0===w.Ui?Object:w.Ui])],E)},933223:function(e,t,r){"use strict";r.d(t,{o:function(){return c}});var n=r(789786),i=r(251164),o=r(963730),s=r(37011),a=r(560052);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new o.M(a.t,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,n.gn)([(0,n.fM)(0,s.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s.T?Object:s.T])],c)},797323:function(e,t,r){"use strict";r.d(t,{L:function(){return s},T:function(){return i}});var n,i,o=r(30276);(n=i||(i={})).DEBUG="debug",n.INFO="info",n.WARN="warn",n.ERROR="error";var s=(0,o.yh)("slardar-adapter")},448871:function(e,t,r){"use strict";e.exports=r(181088)},618247:function(e,t,r){"use strict";var n=r(64552),i=r(246513);e.exports=function(e){if("number"!=typeof e&&"bigint"!=typeof e)throw new i("argument must be a Number or a BigInt");var t=e<0?-n(-e):n(e);return 0===t?0:t}},47414:function(e){"use strict";e.exports=Number.MAX_SAFE_INTEGER||9007199254740991},171500:function(e,t,r){"use strict";function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{Z:function(){return n}})},865558:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(494649);function i(e,t){if("object"!=(0,n.Z)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=(0,n.Z)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},494649:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{Z:function(){return n}})},457425:function(e,t,r){"use strict";function n(e,t,r,n){let i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;let o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;let a=Object.prototype.hasOwnProperty.bind(t);for(let s=0;s<o.length;s++){let c=o[s];if(!a(c))return!1;let u=e[c],l=t[c];if(!1===(i=r?r.call(n,u,l,c):void 0)||void 0===i&&u!==l)return!1}return!0}r.d(t,{w:function(){return n}})},676113:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var n=r(535591),i=r(833600),o=r(224731),s=r(199550),a=r(531504),c=r(211200),u=r(59421),l=r(497490),d=r(476064),h=r(628225),f=r(543302),p=r(156940),v=r(263850),g=r(909534),_=r(204442),m=r(46209),y=r(244215);let b=function e(t){let r=new o.Z(t),a=(0,i.Z)(o.Z.prototype.request,r);return n.Z.extend(a,o.Z.prototype,r,{allOwnKeys:!0}),n.Z.extend(a,r,null,{allOwnKeys:!0}),a.create=function(r){return e((0,s.Z)(t,r))},a}(a.Z);b.Axios=o.Z,b.CanceledError=u.Z,b.CancelToken=l.Z,b.isCancel=d.Z,b.VERSION=h.q,b.toFormData=f.Z,b.AxiosError=p.Z,b.Cancel=b.CanceledError,b.all=function(e){return Promise.all(e)},b.spread=v.Z,b.isAxiosError=g.Z,b.mergeConfig=s.Z,b.AxiosHeaders=_.Z,b.formToJSON=e=>(0,c.Z)(n.Z.isHTMLForm(e)?new FormData(e):e),b.getAdapter=m.Z.getAdapter,b.HttpStatusCode=y.Z,b.default=b;let w=b},932905:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(535591);let i=r(424507).Z.hasStandardBrowserEnv?{write(e,t,r,i,o,s){let a=[e+"="+encodeURIComponent(t)];n.Z.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.Z.isString(i)&&a.push("path="+i),n.Z.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}}},678656:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(12376),i=r(486591),o=r(44819);let s={isBrowser:!0,classes:{URLSearchParams:n.Z,FormData:i.Z,Blob:o.Z},protocols:["http","https","file","blob","url","data"]}},921385:function(e,t,r){"use strict";r.d(t,{u:function(){return c}});var n=r(453740),i=r(301097),o=r(344330);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let a={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function c(e=a,t){let{payload:r}=t;switch(t.type){case n.qu:return s({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case n.js:return s({},e,{isSourcePublic:!0});case n.$T:return s({},e,{targetIds:r.targetIds});case i.IS:if(-1===e.targetIds.indexOf(r.targetId))return e;return s({},e,{targetIds:(0,o.zu)(e.targetIds,r.targetId)});case n.rp:return s({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case n.Bs:return s({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}},48689:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var n=r(218571),i=r(812709);function o(e,t,r){let o=(0,n.useMemo)(()=>new i.O(e,t,r),[t,r]);return(0,n.useEffect)(()=>{o.spec=e},[e]),o}},528792:function(e,t,r){"use strict";r.d(t,{W:function(){return o}});var n=r(218571),i=r(176117);function o(e,t){let r=(0,n.useMemo)(()=>new i.e(e,t),[t]);return(0,n.useEffect)(()=>{r.spec=e},[e]),r}}}]);