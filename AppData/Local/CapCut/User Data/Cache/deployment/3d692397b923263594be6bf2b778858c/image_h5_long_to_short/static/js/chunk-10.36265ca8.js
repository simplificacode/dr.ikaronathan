/*!
* @ies/filter-xss v3.1.4
* (c) 2024
*/var e,t;e=this,t=function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var r=/[^a-zA-Z0-9\\_:.-]/gim,i=/</g,o=/>/g,s=/&#([a-zA-Z0-9]*);?/gim,a=/&quot;/g,c=/&colon;?/gim,l=/&newline;?/gim,u=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,d=/u\s*r\s*l\s*\(.*/gi,h=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,p=/"/g,f=function(e){return e.replace(i,"&lt;").replace(o,"&gt;")},m={indexOf:function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1},forEach:function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},some:function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return!0;return!1},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},includes:function(e,t){if("string"==typeof e)return -1!==e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},uniq:function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(n.push(e[r]),t[e[r]]=!0);return n},from:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},keys:function(e){var t=[];for(var n in e)t.push(n);return t}};function v(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]?e.substr(1,e.length-2):e}function g(e){var t,n,r,i,o,s,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u=0;for(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?t+=String.fromCharCode(r>>6|192)+String.fromCharCode(63&r|128):t+=String.fromCharCode(r>>12|224)+String.fromCharCode(r>>6&63|128)+String.fromCharCode(63&r|128)}return t}(e);u<e.length;)i=(t=e.charCodeAt(u++))>>2,o=(3&t)<<4|(n=e.charCodeAt(u++))>>4,s=(15&n)<<2|(r=e.charCodeAt(u++))>>6,a=63&r,isNaN(n)?s=a=64:isNaN(r)&&(a=64),l=l+c.charAt(i)+c.charAt(o)+c.charAt(s)+c.charAt(a);return l}function _(e){var t,n,r,i,o,s,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");l<e.length;)t=a.indexOf(e.charAt(l++))<<2|(i=a.indexOf(e.charAt(l++)))>>4,n=(15&i)<<4|(o=a.indexOf(e.charAt(l++)))>>2,r=(3&o)<<6|(s=a.indexOf(e.charAt(l++))),c+=String.fromCharCode(t),64!==o&&(c+=String.fromCharCode(n)),64!==s&&(c+=String.fromCharCode(r));return function(e){for(var t="",n=0,r=0,i=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(t+=String.fromCharCode((31&r)<<6|63&e.charCodeAt(n+1)),n+=2):(t+=String.fromCharCode((15&r)<<12|(63&e.charCodeAt(n+1))<<6|63&e.charCodeAt(n+2)),n+=3);return t}(c)}function y(e,t,n){var r="",i=0,o=!1,s=!1,a=0,c=e.length,l="",u="";e:for(a=0;a<c;a++){var d=e.charAt(a);if(!1===o){if("<"===d){o=a;continue}}else if(!1===s){if("<"===d){r+=n(e.slice(i,a)),o=a,i=a;continue}if(">"===d||a===c-1){r+=n(e.slice(i,o)),l=function(e){var t,n=m.spaceIndex(e);return t=-1===n?e.slice(1,-1):e.slice(1,n+1),"/"===(t=m.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}(u=e.slice(o,a+1)),r+=t(o,r.length,l,u,"</"===u.slice(0,2)),i=a+1,o=!1;continue}if('"'===d||"'"===d)for(var h=1,p=e.charAt(a-h);""===p.trim()||"="===p;){if("="===p){s=d;continue e}p=e.charAt(a-++h)}}else if(d===s){s=!1;continue}}return i<c&&(r+=n(e.substr(i))),r}function S(e,t){var n=0,i=0,o=[],s=!1,a=e.length;function c(e,n){if(!((e=(e=m.trim(e)).replace(r,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&o.push(i)}}for(var l=0;l<a;l++){var u=e.charAt(l),d=void 0;if(!1!==s||"="!==u){if(!1===s||l!==i){if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===s){if(-1===(d=function(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}return -1}(e,l))){c(m.trim(e.slice(n,l))),s=!1,n=l+1;continue}l=d-1;continue}if(-1===(d=function(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}return -1}(e,l-1))){c(s,v(m.trim(e.slice(n,l)))),s=!1,n=l+1;continue}}}else{if(-1===(d=e.indexOf(u,l+1)))break;c(s,m.trim(e.slice(i+1,d))),s=!1,n=(l=d)+1}}else s=e.slice(n,l),n=l+1,i='"'===e.charAt(n)||"'"===e.charAt(n)?n:function(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"'"===n||'"'===n?t:-1}return -1}(e,l+1)}return n<e.length&&(!1===s?c(e.slice(n)):c(s,v(m.trim(e.slice(n))))),m.trim(o.join(" "))}function b(e,t,n){var r,i;if(n=function(e){for(var t="",n=0,r=e.length;n<r;n++)t+=32>e.charCodeAt(n)?" ":e.charAt(n);return m.trim(t)}(n.replace(a,'"').replace(s,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}).replace(c,":").replace(l," ")),"href"===t||"src"===t){if("#"===(n=m.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(u.lastIndex=0,u.test(n))return""}else if("style"===t&&(h.lastIndex=0,h.test(n)||(d.lastIndex=0,d.test(n)&&(u.lastIndex=0,u.test(n)))))return"";return n=f(n.replace(p,"&quot;"))}var T=function(e){return"string"==typeof e?e.replace(/'/g,'"').replace('=""',"").replace(/\s+/g,"").toLowerCase():""},E=function(){function e(e){var t=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{});t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=function(){return""}),t.whiteList={},t.onTag=function(){},t.onTagAttr=function(){},t.onIgnoreTag=function(){},t.onIgnoreTagAttr=function(){},t.safeAttrValue=b,t.escapeHtml=f,this.options=Object.assign(t,e)}return e.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t,n,r,i,o,s=this.options,a=s.whiteList,c=s.onTag,l=s.onIgnoreTag,u=s.onTagAttr,d=s.onIgnoreTagAttr,h=s.safeAttrValue,p=s.escapeHtml;s.stripBlankChar&&(e=e.split("").filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}).join("")),s.allowCommentTag||(e=function(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(-1===r){t+=e.slice(n);break}t+=e.slice(n,r);var i=e.indexOf("-->",r);if(-1===i)break;n=i+3}return t}(e));var f=!1;s.stripIgnoreTagBody&&(t=s.stripIgnoreTagBody,"function"!=typeof(n=l)&&(n=function(){}),r=!Array.isArray(t),i=[],o=!1,l=(f={onIgnoreTag:function(e,s,a){if(r||-1!==m.indexOf(t,e)){if(a.isClosing){var c=a.position+10;return i.push([!1!==o?o:a.position,c]),o=!1,"[/removed]"}return o||(o=a.position),"[removed]"}return n(e,s,a)},remove:function(e){var t="",n=0;return m.forEach(i,function(r){t+=e.slice(n,r[0]),n=r[1]}),t+=e.slice(n)}}).onIgnoreTag);var v=y(e,function(e,t,n,r,i){var o={sourcePosition:e,position:t,isClosing:i,isWhite:Object.prototype.hasOwnProperty.call(a,n)},s=c(n,r,o);if(null!=s)return s;if(o.isWhite){if(o.isClosing)return"</".concat(n,">");var f=function(e){var t=m.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=m.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=m.trim(e.slice(0,-1))),{html:e,closing:n}}(r),v=a[n],g=S(f.html,function(e,t){var r=-1!==m.indexOf(v,e),i=u(n,e,t,r);return null==i?r?(t=h(n,e,t,null))?"".concat(e,'="').concat(t,'"'):e:null==(i=d(n,e,t,r))?void 0:i:i});return r="<".concat(n),g&&(r+=" ".concat(g)),f.closing&&(r+=" /"),r+=">"}return null==(s=l(n,r,o))?p(r):s},p);return f&&(v=f.remove(v)),v},e}(),x=!0,w=function(e){return e&&e.Math==Math&&e},k=w("object"==typeof globalThis&&globalThis)||w("object"==typeof window&&window)||w("object"==typeof self&&self)||w("object"==typeof global&&global)||Function("return this")();try{!0!==(x=!!(x=String(x)).startsWith("<%=")||JSON.parse(x))&&"true"!==x||(k=Function("\nvar _checkXSS = function (it) {\n  return it && it.Math == Math && it;\n};\nreturn _checkXSS(typeof globalThis === 'object' && globalThis) ||\n_checkXSS(typeof window === 'object' && window) ||\n_checkXSS(typeof self === 'object' && self) ||\n_checkXSS(typeof global === 'object' && global) ||\nFunction('return this')();\n")())}catch(e){console.log(e)}var C=new(function(){function e(){var e=this;this.batchData=[],this.uniqKeys=new Set,this.timeout=2e3,this.lock=!1,this.isSetedConfig=!1,this.getSlardarBid=function(){var t,n,r="cc_web_smart_tools";if(!m.includes(r,"bid"))return r;if(e.config&&e.config.bid)return e.config.bid;var i=k;if(i&&i._xssBid)return i._xssBid;if(i&&i.slardar&&"function"==typeof i.slardar.config){var o=(i.slardar.config()||{}).bid;if(o)return o}if(i&&i.Slardar&&"function"==typeof i.Slardar.config){var s=(i.Slardar.config()||{}).bid;if(s)return s}return(null===(n=null===(t=null==i?void 0:i.Slardar)||void 0===t?void 0:t._baseParams)||void 0===n?void 0:n.bid)||"argus"},this.getConfigRegion=function(){var t,n="maliva";return m.includes(n,"region")?e.config&&e.config.region?e.config.region:((null===(t=null==k?void 0:k.gfdatav1)||void 0===t?void 0:t.region)||"cn").toLowerCase():n},this.gerReportUrl=function(){var t={cn:_("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:_("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:_("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:_("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:_("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:_("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:_("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9")}[e.getConfigRegion()];if(t)return t+e.getSlardarBid()}}return e.prototype.setConfig=function(e){this.isSetedConfig||(this.config=e)},e.prototype.upload=function(){var e=this;if(!this.config||!this.config.isCloseSSRReport||(null==k?void 0:k.document)){var t=!1;t=String(!1);try{if((!0===(t=!t.startsWith("<%=")&&JSON.parse(t))||"true"===t)&&!(null==k?void 0:k.document))return}catch(e){console.log(e)}var n=this.gerReportUrl();!this.lock&&n&&0!==this.batchData.length&&(this.lock=!0,setTimeout(function(){var t=e.batchData.slice(0,100);e.batchData=e.batchData.slice(100),k.fetch(n,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).catch(function(e){console.warn("xss defense report error",e)}),e.lock=!1,e.upload()},this.timeout))}},e.prototype.generateKey=function(e){return e.collectKey?[e.collectMode,e.collectKey].join("___"):""},e.prototype.push=function(e){this.batchData.push(e),this.upload()},e.prototype.report=function(e){var t=this.generateKey(e);if(k.fetch&&e.collectKey){var n="SSR";void 0!==k&&void 0!==k.location&&void 0!==k.location.href&&(n=k.location.href),e.documentUrl=n;var r={age:Math.floor(Date.now()),type:"xss",url:n,body:e,"user-agent":""};r.url="".concat(t,"___").concat(e.documentUrl),"SSR"===n&&(r.url="SSR___".concat(r.url),r.body.ssr=!0),this.push(r)}},e}());function R(e,t){return C.setConfig(t),new E(t).process(e)}var I=function(e){return -1===(e=(e=(e=(e=e.replace(/&colon;/gi,":")).replace(/&tab;/gi,"")).replace(/&newline;/gi,"")).replace(/(\t|\n|\r)/g,"")).indexOf("&#")?e.trim().toLowerCase():e.trim().replace(/&#(?:(x)([0-9a-f]+)|([0-9]+));?/gi,function(e,t,n,r){return String.fromCharCode(t?parseInt(n,16):parseInt(r))}).replace(/(\t|\n|\r)/g,"").toLowerCase()};function N(e,t){if(void 0===e&&(e=""),"string"!=typeof e)return!0;if(e=I(e),m.includes(e,"base64")&&!function(e){if(""===e||""===e.trim())return!0;try{return!m.includes(e,"data:text/html;base64")}catch(e){return!0}}(e))return t&&t("data:text/html;base64"),!1;var n=["expression(","behavior:","view-source:"];if(m.some(n,function(t){return -1!==e.indexOf(t)}))return m.forEach(n,function(n){-1!==e.indexOf(n)&&t&&t(n)}),!1;var r=["data:application","data:javascript","data:text/html","data:texthtml"];if(m.some(r,function(t){return -1!==e.indexOf(t)}))return m.forEach(r,function(n){-1!==e.indexOf(n)&&t&&t(n)}),!1;if(e.indexOf("javascript:")>0)return t&&t("javascript:"),!1;if(/^javascript:/i.test(e)){var i=e.slice(11).replace(/\s/g,"").trim();return!!m.some(["void","void(0)","void0","false","undefined",";"],function(e){return e===i})||(t&&t("javascript:"),!1)}return!0}var O=function(e,t){var n,r,i=!1;if(i=String(!1),"string"!=typeof e||(r=Number(1e4),void 0!==n&&(r=n),"NaN"!==r.toString()&&-1!==r&&e.length>=r)||N(e,t))return e;try{if(!0===(i=!i.startsWith("<%=")&&JSON.parse(i))||"true"===i){var o=new URL(e);return o.origin+o.pathname}}catch(e){return console.log(e),"#"}return"#"};function A(e,t,r){if(void 0===e&&(e=""),void 0===t&&(t=[]),"string"!=typeof e)return!0;if(!N(e=I(e)))return!1;var i,o={url:(i=e.match(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/)||[])[0],scheme:i[1],slash:i[2],host:i[3],port:i[4],path:i[5],query:i[6],hash:i[7]},s=o.scheme,a=o.host;return r?!!r(e):!(!s||!a)&&(!m.includes(["http","https","file"],s)||("object"==typeof window&&window&&(t=n(n([],t,!0),[location.host],!1)),m.some(t,function(e){return!!(e instanceof RegExp&&e.test(a))||e===a})))}var M=function(e,t){for(var n={},r=0,i=m.keys(e);r<i.length;r++){var o=i[r];Array.isArray(e[o])?n[o]=m.from(e[o]):n[o]=M({},e[o])}for(var s=0,a=m.keys(t);s<a.length;s++)(o=a[s])in e?Array.isArray(e[o])?n[o]=e[o].concat(t[o]):n[o]=M(e[o],t[o]):Array.isArray(t[o])?n[o]=m.from(t[o]):n[o]=M({},t[o]);return n},L={blackList:{a:["folder"],meta:["content"],iframe:["srcdoc"],input:["pattern"],vmlframe:["xmlns"]},blackTags:["script","xml","embed","isindex","object","base","set","handler","animate","payload","import"],blackAttrs:["charset","ns","namespace","formaction","xlink:href","xmlns:xlink","handler","repeat","repeat-start","repeat-end"],blackAttrRegExps:[/^on/],filterList:{param:["value"],video:["poster"],form:["action"]},filterAttrs:["href","src","background","style","dynsrc","lowsrc","content"],specialContentClosure:["title","style","noscript","textarea","xmp","iframe","noembed","noframes"]};try{var P={};P.blackAttrRegExps&&(P.blackAttrRegExps=P.blackAttrRegExps.map(function(e){return new RegExp(e.toString().slice(1,e.toString().length-1))}));var Z="merge";m.includes(Z,"override")&&(L=P),m.includes(Z,"merge")&&(L=M(L,P))}catch(e){console.log(e)}var j={mode:"black",whiteList:{},blackConfig:L,collect:null,initCollect:function(){j.collect={blackList:{},blackTags:[],blackAttrs:[],blackAttrRegExps:[],filterAttrs:[],filterList:{},filterProtocol:[]}},removeCollect:function(){var e=function(e){for(var t=0,n=function(n){Array.isArray(e[n])?0===e[n].length?delete e[n]:(e[n]=m.from(m.uniq(e[n])),t+=e[n].length):0===m.keys(e[n]).length?delete e[n]:m.keys(e[n]).forEach(function(r){e[n][r]=m.from(m.uniq(e[n][r])),t+=e[n][r].length})},r=0,i=m.keys(e);r<i.length;r++)n(i[r]);return{count:t,ret:e}}(j.collect),t=e.count,n=e.ret;return j.collect=null,{collectKey:0===t?null:JSON.stringify(n),collectMode:"black"}},onIgnoreTag:function(e,t){var n;if(!m.includes(L.blackTags,e))return y(t,function(e,t,n,r,i){if(-1!==n.indexOf("/"))return f(r);if(i)return"</".concat(n,">");var o=function(e){var t,n=(t=/\s|\n|\t/.exec(e))?t.index:-1;if(-1===n)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=e.slice(n+1,-1).trim())[e.length-1];return r&&(e=e.slice(0,-1).trim()),{html:e,closing:r}}(r),s=S(o.html,function(e,t){var r,i,o=0;if(L.blackList[n]&&m.includes(L.blackList[n],e)&&(j.collect.blackList[n]=j.collect.blackList[n]||[],j.collect.blackList[n].push(e),o++),L.blackAttrRegExps.length&&L.blackAttrRegExps.some(function(t){return t.test(e)})&&m.forEach(L.blackAttrRegExps,function(t){t.test(e)&&(j.collect.blackAttrRegExps.push("".concat(t.toString(),"->").concat(e)),o++)}),L.blackAttrs.length&&m.includes(L.blackAttrs,e)&&(L.blackAttrs.push(e),o++),!o){if(Array.isArray(L.specialContentClosure)&&"string"==typeof t&&L.specialContentClosure.find(function(e){return t.includes("</".concat(e,">"))})){null===(r=j.collect)||void 0===r||r.filterAttrs.push(e);var s="#";return t?"".concat(e,"='").concat(s,"'"):e}return L.filterList&&L.filterList[n]&&m.includes(L.filterList[n],e)?((s=O(t,function(e){var t;null===(t=j.collect)||void 0===t||t.filterProtocol.push(e)}))!==t&&(j.collect.filterList[n]=j.collect.filterList[n]||[],j.collect.filterList[n].push(e)),t?"".concat(e,"='").concat(s,"'"):e):L.filterAttrs&&m.includes(L.filterAttrs,e)?((s=O(t,function(e){var t;null===(t=j.collect)||void 0===t||t.filterProtocol.push(e)}))!==t&&(null===(i=j.collect)||void 0===i||i.filterAttrs.push(e)),t?"".concat(e,"='").concat(s,"'"):e):t?"".concat(e,"='").concat(t,"'"):e}});return r="<".concat(n),s&&(r+=" ".concat(s)),o.closing&&(r+=" /"),r+=">"},f);null===(n=j.collect)||void 0===n||n.blackTags.push(e)}},D=function(e){var t=e.reportOnly,n=void 0===t||t,r=e.block;return n&&"all"===n?"report":("string"==typeof n&&("true"===n&&(n=!0),"false"===n&&(n=!1)),r?"enforce":n?"report":"enforce")},U=function(e){return function(n,r,i){if(!n||"string"!=typeof n)return n;var o=r;e===R&&(o=j).initCollect();var s=e(n,o);if(T(s)===T(n))return n;if(!i)return s;var a=i.logType,c=D(i),l=o.removeCollect();return C.report(t(t({type:a,disposition:c},l),{sourceText:g(n.replace(/'/g,'"')),filterText:g(s.replace(/'/g,'"'))})),"enforce"===c?s:n}},G=U(function(e,t){return void 0===t&&(t={}),t&&t.whiteList||(t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}),new E(t).process(e)}),F=U(R),V=function(e,t,n){var r=[],i=O(e,function(e){r.push(e)});if(i===e)return e;r=m.from(m.uniq(r));var o=t||n||{};if(!o)return i;var s=o.logType,a=D(n);return C.report({type:s,disposition:a,collectKey:r.join("___"),collectData:JSON.stringify(r),collectMode:"black",sourceText:g(e),filterText:g(i)}),"enforce"===a?i:e},W=k._xssProject||{},B=k.xssNamespace||{},H="3.1.4",z={FilterXSS:E,version:H,webpackPluginVersion:"3.1.9",reportOnly:"all",filterXSS:G,_filterXSS:F,filterUrl:V,BlackConfig:j,project:W,setProjectName:function(e){W[e]=this,k._xssProjectName=e}};B["lvweb/smart-tools"]=z,k.xssNamespace=B,k.Math&&!k.Math.xssNamespace&&(k.Math.xssNamespace=B),W[H]=z,k.globalThis=k,k.getFilterXss=function(){return void 0!==this._xssProjectName?this._xssProject[this._xssProjectName]:z},k.xss=z,k.isSafeUrl=A,k.isSafeDomain=A,k.isSafeProtocol=N,k._xssProject=W,k._xssProjectName&&(W[k._xssProjectName]=z);var Y=z.setProjectName.bind(z);e.BlackConfig=j,e.FilterXSS=E,e._filterXSS=F,e.filterUrl=V,e.filterXSS=G,e.isSafeDomain=A,e.isSafeProtocol=N,e.isSafeUrl=A,e.project=W,e.setProjectName=Y,e.setXssNamespace=function(e){var t=e.appId,n=e.bid,r=e.region,i=e.isCloseSSRReport;B[t]=z,j.bid=n,j.region=r,j.enabled=!0,j.isCloseSSRReport=i},e.xssNamespace=B,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xss={}),(self.webpackChunksmart_tools=self.webpackChunksmart_tools||[]).push([["9109"],{344621:function(e,t,n){"use strict";n(642470),n(473859)},532413:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var o=n(269001),s=n(471664),a=n(650093);t.default=function(e){var t=this;this.sendCode=function(e){var n=e.mobile,i=e.registerOnly,a=e.extra_params,c=(0,o.encryptParams)(r({mobile:n,type:void 0!==i&&i?16:24},void 0===a?{}:a),["mobile","type"]);return new Promise(function(e,n){t.request({url:s.WEB_URL.SEND_MOBILE_CODE,method:"POST",data:c}).then(function(t){e(t)}).catch(function(e){n(e)})})},this.smsLogin=function(e){var n=e.mobile,i=e.code,a=e.login_only,c=e.extra_params,l=(0,o.encryptParams)(r({mobile:n,code:i},void 0===c?{}:c),["mobile","code"]),u=void 0!==a&&a?s.WEB_URL.SMS_LOGIN_ONLY:s.WEB_URL.SMS_LOGIN;return new Promise(function(e,n){t.request({url:u,method:"POST",data:l}).then(function(t){e(t)}).catch(function(e){n(e)})})},this.smsLoginContinue=function(e){var n=e.mobile,i=e.sms_code_key,a=e.extra_params,c=(0,o.encryptParams)(r({mobile:n,sms_code_key:i},void 0===a?{}:a),["mobile","sms_code_key"]);return new Promise(function(e,n){t.request({url:s.WEB_URL.SMS_LOGIN_CONTINUE,method:"POST",data:c}).then(function(t){e(t)}).catch(function(e){n(e)})})},this.webLogin=function(e){var n=e.platform_app_id,i=e.next,o=e.extra_params,a=void 0===o?{}:o;return new Promise(function(e,o){t.request({url:s.WEB_URL.SMS_LOGIN_CONTINUE,method:"POST",data:r({platform_app_id:n,next:i},a)}).then(function(t){e(t)}).catch(function(e){o(e)})})},this.emailLogin=function(e){var n=e.email,i=e.password,a=e.extra_params,c=(0,o.encryptParams)(r({email:n,password:i},void 0===a?{}:a),["email","password"]);return new Promise(function(e,n){t.request({url:s.WEB_URL.EMAIL_LOGIN,method:"POST",data:c}).then(function(t){e(t)}).catch(function(e){n(e)})})},this.emailCodeLogin=function(e){var n=e.email,i=e.code,a=e.extra_params,c=(0,o.encryptParams)(r({email:n,code:i,ect_type:13},void 0===a?{}:a),["email","code"]);return t.request({url:s.WEB_URL.EMAIL_CODE_LOGIN,method:"POST",data:c})},this.pwdLogin=function(e){var n=e.username,i=e.mobile,a=e.email,c=e.account,l=e.password,u=e.extra_params,d=(0,o.encryptParams)(r({username:n,mobile:i,email:a,account:c,password:l},void 0===u?{}:u),["username","mobile","email","account","password"]);return t.request({url:s.WEB_URL.PWD_LOGIN,method:"POST",data:d})},this.authLogin=function(e){var n=e.platform_app_id,i=e.code,o=e.access_token,a=e.access_token_secret,c=e.openid,l=e.profile_key,u=e.login_only,d=void 0!==u&&u,h=e.extra_params,p=void 0===h?{}:h;return new Promise(function(e,u){t.request({url:d?s.WEB_URL.AUTH_LOGIN_ONLY:s.WEB_URL.AUTH_LOGIN,method:"POST",data:r({platform_app_id:n,code:i,access_token:o,access_token_secret:a,openid:c,profile_key:l},p)}).then(function(t){e(t)}).catch(function(e){u(e)})})},this.webShareLogin=function(e){var n=e.extra_params,o=i(e,["extra_params"]);return t.request({url:s.WEB_URL.WEB_SHARE_LOGIN,method:"POST",data:r(r({},void 0===n?{}:n),o)})},this.getOauthMobile=function(e){var n=e.access_token,i=e.access_token_secret,o=e.code,a=e.expires_in,c=e.openid,l=e.platform_app_id,u=e.platform,d=e.need_plaintext,h=void 0!==d&&d,p=e.profile_key,f=e.extra_params,m=void 0===f?{}:f;return new Promise(function(e,d){t.request({url:s.WEB_URL.MOBILE_OAUTH,method:"POST",data:r({access_token:n,access_token_secret:i,code:o,expires_in:a,openid:c,platform_app_id:l,platform:u,need_plaintext:h,profile_key:p},m)}).then(function(t){e(t)}).catch(function(e){d(e)})})},this.authBindLogin=function(e){var n=e.platform_app_id,i=e.code,a=e.mobile,c=e.sms_code,l=e.sms_code_key,u=e.profile_key,d=e.extra_params,h=(0,o.encryptParams)(r({platform_app_id:n,code:i,mobile:a,sms_code:c,sms_code_key:l,profile_key:u},void 0===d?{}:d),["mobile","sms_code"]);return new Promise(function(e,n){t.request({url:s.WEB_URL.AUTH_BIND_ONLY,method:"POST",data:h}).then(function(t){e(t)}).catch(function(e){n(e)})})},this.mobileBindLogin=function(e){var n=e.code,i=e.mobile,a=e.profile_key,c=e.extra_params,l=(0,o.encryptParams)(r({code:n,mobile:i,profile_key:a},void 0===c?{}:c),["mobile","code"]);return new Promise(function(e,n){t.request({url:s.WEB_URL.MOBILE_BIND_ONLY,method:"POST",data:l}).then(function(t){e(t)}).catch(function(e){n(e)})})},this.logout=function(e){var n,r=e.next,i=e.need_redirect,o=void 0===i?1:i;if(o){var c=(null===(n=(0,a.get)("initProps"))||void 0===n?void 0:n.aid)||"",l=encodeURIComponent(void 0===r?"/":r);window.location.href="".concat(s.WEB_URL.LOGOUT,"?account_sdk_source=web&aid=").concat(c,"&next=").concat(l);return}return t.request({url:s.WEB_URL.LOGOUT,data:{need_redirect:o}})},this.sendEmailCode=function(e){var n=e.email,i=e.next,a=e.password,c=e.extra_params,l=(0,o.encryptParams)(r({email:n,next:i,password:a,type:1},void 0===c?{}:c),["email","password","type"]);return t.request({url:s.WEB_URL.SEND_EMAIL_CODE,method:"POST",data:l})},this.sendEmailLoginCode=function(e){var n=e.email,i=e.next,a=e.extra_params,c=(0,o.encryptParams)(r({email:n,next:i,type:13},void 0===a?{}:a),["email","type"]);return t.request({url:s.WEB_URL.SEND_EMAIL_CODE,method:"POST",data:c})},this.emailRegister=function(e){var n=e.email,i=e.code,a=e.password,c=e.ifLogin,l=e.extra_params,u=(0,o.encryptParams)(r({email:n,code:i,password:a,type:1},void 0===l?{}:l),["email","password","type","code"]);return t.request({url:void 0!==c&&c?s.WEB_URL.EMAIL_REGISTER_LOGIN:s.WEB_URL.EMAIL_REGISTER,method:"POST",data:u})},this.mobileRegister=function(e){var n=e.mobile,i=e.code,a=e.password,c=e.extra_params,l=(0,o.encryptParams)(r({mobile:n,code:i,password:a,type:16},void 0===c?{}:c),["mobile","code","password","type"]);return new Promise(function(e,n){t.request({url:s.WEB_URL.MOBILE_REGISTER,method:"POST",data:l}).then(function(t){e(t)}).catch(function(e){n(e)})})},this.mobileEmailRegister=function(e){var n=e.mobile,i=e.sms_code,a=e.email,c=e.email_code,l=e.password,u=e.verify_ticket,d=e.extra_params,h=(0,o.encryptParams)(r({mobile:n,sms_code:i,email:a,email_code:c,password:l,verify_ticket:u,sms_type:16,ect_type:1},void 0===d?{}:d),["mobile","sms_code","sms_type","email","email_code","ect_type","password"]);return new Promise(function(e,n){t.request({url:s.WEB_URL.MOBILE_EMAIL_REGISTER,method:"POST",data:h}).then(function(t){e(t)}).catch(function(e){n(e)})})},this.checkLogin=function(e){void 0===e&&(e={});var n=e.extra_params;return t.request({url:s.WEB_URL.CHECK_LOGIN,method:"GET",data:void 0===n?{}:n})},this.bindWithMobileLogin=function(e){var n=e.extra_params,o=i(e,["extra_params"]);return t.request({url:s.WEB_URL.BIND_WITH_MOBILE_LOGIN,method:"POST",data:r(r({},void 0===n?{}:n),o)})},this.bindWithEmailLogin=function(e){var n=e.extra_params,o=i(e,["extra_params"]);return t.request({url:s.WEB_URL.BIND_WITH_EMAIL_LOGIN,method:"POST",data:r(r({},void 0===n?{}:n),o)})},this.thirdAuth=function(e){var t,n=e.platform_app_id,r=e.next,i=e.use_local_host,o=e.action,c=(null===(t=(0,a.get)("initProps"))||void 0===t?void 0:t.aid)||"",l=encodeURIComponent(void 0===r?"/":r);window.location.href="".concat(s.WEB_URL.THIRD_AUTH,"?account_sdk_source=web&aid=").concat(c,"&next=").concat(l,"&platform_app_id=").concat(n,"&use_local_host=").concat(void 0===i?0:i,"&action=").concat(o)},this.emailRegisterNoVerifyV2=function(e){var n=e.email,i=e.password,a=e.next_url,c=e.recaptcha_token,l=e.extra_params,u=(0,o.encryptParams)(r({email:n,password:i,next_url:a,recaptcha_token:c},void 0===l?{}:l),["email","password","recaptcha_token"]);return t.request({url:s.WEB_URL.EMAIL_REGISTER_NO_VERIFY_V2,method:"POST",data:u})},this.wapLogin=function(e){var n=e.origin,r=e.type,i=e.use_local_host,o=e.scopes,a=e.next,c=e.url_params,l=e.platform_app_id,u=e.platform,d=e.replace,h=encodeURIComponent(a),p=encodeURIComponent("".concat(t.host,"/auth/login_success/?service=").concat(h)),f={aid:t.aid,type:void 0===r?"web":r,use_local_host:i,scopes:void 0===o?"user_info":o,next:p,url_params:void 0===c?"":c,platform_app_id:l,platform:void 0===u?"":u},m="",v=Object.keys(f).length;Object.keys(f).forEach(function(e,t){v===t+1?m+="".concat(e,"=").concat(f[e]):m+="".concat(e,"=").concat(f[e],"&")});var g="".concat(void 0===n?"":n).concat(s.WEB_URL.AUTH_LOGIN_URL,"?").concat(m);void 0!==d&&d?window.location.href=g:window.open(g,"_blank")},this.bindVerifyInfo=function(e){var n=e.auth_ticket,i=e.verify_ticket,o=e.token,a=e.scene,c=e.user_type,l=e.extra_params;return t.request({url:s.COMMON_URL.BIND_VERIFY_INFO,method:"GET",data:r({auth_ticket:n,verify_ticket:i,token:o,scene:a,user_type:c},void 0===l?{}:l)})};var n=e.request,c=e.host,l=e.aid;this.request=n,this.host=c,this.aid=l}},683627:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var o=n(471664);t.default=function(e){var t=this;this.getOauthProfile=function(e){var n,i=e.access_token,s=e.access_token_secret,a=e.code,c=e.expires_in,l=e.openid,u=e.platform_app_id,d=e.platform,h=e.extra_params;return t.request({url:o.WEB_URL.OAUTH_PROFILE,method:"GET",data:r({aid:null===(n=t.props)||void 0===n?void 0:n.aid,access_token:i,access_token_secret:s,code:a,expires_in:c,openid:l,platform_app_id:u,platform:d},void 0===h?{}:h)})},this.uploadAvatar=function(e){var n=e.avatar,i=e.extra_params,s=new FormData,a=new Blob([n],{type:n.type});s.append("avatar",a);var c=o.WEB_URL.UPLOAD_AVATAR;return t.request({url:c,method:"POST",data:s,params:r({},i),headers:{"Content-Type":"multipart/form-data"}})},this.updateUserInfo=function(e){var n=e.extra_params,s=i(e,["extra_params"]),a=r(r({},s),void 0===n?{}:n);return t.request({url:o.WEB_URL.UPDATE_USERINFO,method:"POST",data:a})},this.checkDefaultInfo=function(e){var n=e.scene,i=e.extra_params;return t.request({url:o.WEB_URL.CHECK_DEFAULT_INFO,method:"GET",params:r({scene:n},void 0===i?{}:i)})},this.getDefaultImageList=function(e){var n=t.props.aid,i=e.extra_params,s=o.WEB_URL.GET_BACKGROUND_LIST.replace("{aid}",String(n));return t.request({url:s,method:"GET",params:r({},void 0===i?{}:i)})},this.getDefaultAvatarList=function(e){var n=t.props.aid,i=e.extra_params,s=o.WEB_URL.GET_DEFAULT_AVATAR_LIST.replace("{aid}",String(n));return t.request({url:s,method:"GET",params:r({},void 0===i?{}:i)})},this.getRecommendName=function(e){var n=e.extra_params;return t.request({url:o.WEB_URL.GET_RECOMMEND_NAME,method:"GET",params:r({},void 0===n?{}:n)})},this.checkRemainTimes=function(e){var n=e.field,i=e.field_namespace,s=e.extra_params;return t.request({url:o.WEB_URL.CHECK_REMAIN_TIMES,method:"GET",params:r({field:n,field_namespace:void 0===i?"":i},void 0===s?{}:s)})},this.uploadPicture=function(e){var n=e.pic,i=e.is_sensitive,s=e.extra_params,a=new FormData,c=new Blob([n],{type:n.type});return a.append("pic",c),t.request({url:o.WEB_URL.UPLOAD_PICTURE,method:"POST",data:a,params:r({is_sensitive:i},void 0===s?{}:s)})},this.downloadImage=function(e){var n=e.key,i=e.extra_params;return t.request({url:o.WEB_URL.DOWNLOAD_IMAGE,method:"GET",params:r({key:n},void 0===i?{}:i)})};var n=e.request;e.aid,this.request=n,this.props=e}},857977:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(511716)),o=n(873815),s=n(650093),a=r(n(735162));t.default=function(){var e=(0,s.get)("initProps")||{},t=e.host,n=e.isBoe,r=e.requestInterceptors,c=e.responseInterceptors,l=i.default.create({baseURL:t||window&&"".concat(void 0!==n&&n?"http":"https","://").concat(window.location.hostname),adapter:(0,a.default)(),withCredentials:!0,transformRequest:[function(e){var t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){console.log(e)}return t}]});return r&&Array.isArray(r)&&r.forEach(function(e){l.interceptors.request.use(function(t){return e(t)},void 0)}),c&&Array.isArray(c)&&c.forEach(function(e){l.interceptors.response.use(function(t){return e(t)},void 0)}),l.interceptors.response.use(o.after,void 0),l}},184620:function(e,t,n){"use strict";t.default=void 0;var r=n(218571);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return"function"==typeof t?t(e):t}t.default=function(e){var t,n=o(void 0,e),s=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(n))||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),2!==n.length);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(t,2)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=s[0],c=s[1],l=(0,r.useRef)(n);return[a,(0,r.useCallback)(function(e){var t=o(l.current,e);l.current=t,c(t)},[]),(0,r.useCallback)(function(){return l.current},[])]}},913736:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHNoaW1JbXBvcnRTY3JpcHRzKHNyYyl7cmV0dXJuIGZldGNoKHNyYykudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUudGV4dCgpfSkpLnRoZW4oKGZ1bmN0aW9uKHRleHQpe3NlbGYuZXhwb3J0cz17fSxldmFsKHRleHQpLHNlbGYubT1leHBvcnRzLm19KSl9dmFyIE1BWF9TVFJFQU1fQlVGRkVSX0xFTkdUSD01MjQyODgwLEJBVENIX0RFQ09ERV9TSVpFPTgsaW5pdFRzPTAsRGVjb2Rlcj1mdW5jdGlvbihlKXt0aGlzLmluaXRlZD0hMSx0aGlzLmluZm9JZD0wLHRoaXMuc2VsZj1lLHRoaXMubWV0YT1lLm1ldGEsdGhpcy50cz0wLHRoaXMuaW5mb2xpc3Q9W10sZS5wYXJfYnJvYWR3YXlPbkJyb2Fkd2F5SW5pdGVkPXRoaXMuYnJvYWR3YXlPbkJyb2Fkd2F5SW5pdGVkLmJpbmQodGhpcyksZS5wYXJfYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkPXRoaXMuYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkLmJpbmQodGhpcyl9LGRlY29kZXI7ZnVuY3Rpb24gb25Qb3N0UnVuKCl7KGRlY29kZXI9bmV3IERlY29kZXIodGhpcykpLmluaXQoKX1EZWNvZGVyLnByb3RvdHlwZS50b1U4QXJyYXk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTW9kdWxlLkhFQVBVOC5zdWJhcnJheShlLGUrdCl9LERlY29kZXIucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtNb2R1bGUuX2Jyb2Fkd2F5SW5pdCgwLDIpLHRoaXMuc3RyZWFtQnVmZmVyUHRyPU1vZHVsZS5fYnJvYWR3YXlDcmVhdGVTdHJlYW0oTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RIKSx0aGlzLnN0cmVhbUJ1ZmZlcj10aGlzLnRvVThBcnJheSh0aGlzLnN0cmVhbUJ1ZmZlclB0cixNQVhfU1RSRUFNX0JVRkZFUl9MRU5HVEgpLHRoaXMuYnVmZmVyU2l6ZXNQdHI9TW9kdWxlLl9tYWxsb2MoNCpCQVRDSF9ERUNPREVfU0laRSksdGhpcy5idWZmZXJTaXplcz10aGlzLnRvVThBcnJheSh0aGlzLmJ1ZmZlclNpemVzUHRyLDQqQkFUQ0hfREVDT0RFX1NJWkUpLHRoaXMuc3RyZWFtQnVmZmVyT2Zmc2V0PTAsdGhpcy5mcmFtZUxlbnNPZmZzZXQ9MCx0aGlzLmZyYW1lTGVuc0J1ZmZlcj1uZXcgVWludDMyQXJyYXkoQkFUQ0hfREVDT0RFX1NJWkUpfSxEZWNvZGVyLnByb3RvdHlwZS5icm9hZHdheU9uUGljdHVyZURlY29kZWQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBzPXRoaXMuaW5mb2xpc3Quc2hpZnQoKSxvPXIsaT1yLzIsbj10LGY9dC8yOyF0aGlzLm1ldGF8fDQ0NCE9PXRoaXMubWV0YS5jaHJvbWFGb3JtYXQmJjQyMiE9PXRoaXMubWV0YS5jaHJvbWFGb3JtYXR8fChpPXIpO3ZhciBhPXRoaXMudG9VOEFycmF5KGUsbipvK2YqaSoyKSxjPW5ldyBVaW50OEFycmF5KGEubGVuZ3RoKTtjLnNldChhKTt2YXIgZD1jLmJ1ZmZlcjt0aGlzLnNlbGYucG9zdE1lc3NhZ2Uoe21zZzoiREVDT0RFRCIsd2lkdGg6dCxoZWlnaHQ6cix5TGluZXNpemU6bix1dkxpbmVzaXplOmYsaW5mbzpzLGJ1ZmZlcjpkfSxbZF0pfSxEZWNvZGVyLnByb3RvdHlwZS5icm9hZHdheU9uQnJvYWR3YXlJbml0ZWQ9ZnVuY3Rpb24oKXtpZighdGhpcy5pbml0ZWQpe3RoaXMuaW5pdGVkPSEwO3ZhciBlPTA7aW5pdFRzJiYoZT1wZXJmb3JtYW5jZS5ub3coKS1pbml0VHMpLHRoaXMuc2VsZi5wb3N0TWVzc2FnZSh7bXNnOiJERUNPREVSX1JFQURZIixjb3N0OmV9KX19LERlY29kZXIucHJvdG90eXBlLnN0b3JlQnVmZmVyPWZ1bmN0aW9uKGUsdCl7dCYmdC5rZXlmcmFtZSYmdGhpcy5mbHVzaCgpLHRoaXMuaW5mb2xpc3QucHVzaCh0KSx0aGlzLnN0cmVhbUJ1ZmZlci5zZXQoZSx0aGlzLnN0cmVhbUJ1ZmZlck9mZnNldCksdGhpcy5mcmFtZUxlbnNCdWZmZXJbdGhpcy5mcmFtZUxlbnNPZmZzZXRdPWUubGVuZ3RoLHRoaXMuc3RyZWFtQnVmZmVyT2Zmc2V0Kz1lLmxlbmd0aCx0aGlzLmZyYW1lTGVuc09mZnNldCs9MSx0aGlzLmJhdGNoRGVjb2RlKCl9LERlY29kZXIucHJvdG90eXBlLmJhdGNoRGVjb2RlPWZ1bmN0aW9uKGUpeyh0aGlzLmZyYW1lTGVuc09mZnNldD49QkFUQ0hfREVDT0RFX1NJWkV8fGUmJnRoaXMuZnJhbWVMZW5zT2Zmc2V0KSYmKHRoaXMuYnVmZmVyU2l6ZXMuc2V0KG5ldyBVaW50OEFycmF5KHRoaXMuZnJhbWVMZW5zQnVmZmVyLmJ1ZmZlciksMCksTW9kdWxlLl9icm9hZHdheVBsYXlTdHJlYW0xKHRoaXMuYnVmZmVyU2l6ZXNQdHIsdGhpcy5mcmFtZUxlbnNPZmZzZXQpLHRoaXMuZnJhbWVMZW5zT2Zmc2V0PTAsdGhpcy5zdHJlYW1CdWZmZXJPZmZzZXQ9MCl9LERlY29kZXIucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbihlKXt0aGlzLnN0cmVhbUJ1ZmZlci5zZXQoZSksTW9kdWxlLl9icm9hZHdheVBsYXlTdHJlYW0oZS5sZW5ndGgsMCl9LERlY29kZXIucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7dGhpcy5iYXRjaERlY29kZSghMCksTW9kdWxlLl9icm9hZHdheUZsdXNoU3RyZWFtKCl9LERlY29kZXIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtNb2R1bGUuX2Jyb2Fkd2F5RXhpdCgpfSxEZWNvZGVyLnByb3RvdHlwZS51cGRhdGVNZXRhPWZ1bmN0aW9uKGUpe3RoaXMubWV0YT1lfTt2YXIgV0FTTV9DRE5fUEFUSF9QUkVGSVg9IiI7ZnVuY3Rpb24gaW5pdChlKXsoV0FTTV9DRE5fUEFUSF9QUkVGSVg9ZS5zcGxpdCgiLyIpLnNsaWNlKDAsLTEpLmpvaW4oIi8iKSxpbml0VHM9cGVyZm9ybWFuY2Uubm93KCksZGVjb2Rlcil8fChzZWxmLmltcG9ydFNjcmlwdHM/bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQscil7c2VsZi5jb25zb2xlfHwoc2VsZi5jb25zb2xlPXtsb2c6ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGluZm86ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fX0pO3RyeXtzZWxmLmltcG9ydFNjcmlwdHMoZSksdCgpfWNhdGNoKHMpe2lmKHMubWVzc2FnZS5pbmNsdWRlcygiTW9kdWxlIHNjcmlwdHMgZG9uJ3Qgc3VwcG9ydCBpbXBvcnRTY3JpcHRzIikpcmV0dXJuIHQoc2hpbUltcG9ydFNjcmlwdHMoZSkpO3Iocyl9fSkpOnNoaW1JbXBvcnRTY3JpcHRzKGUpKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBmZXRjaChXQVNNX0NETl9QQVRIX1BSRUZJWCsiL2RlY29kZXIud29ya2VyLmpzIikudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYmxvYigpfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBzZWxmLm0oe2xvY2F0ZUZpbGU6ZnVuY3Rpb24odCl7cmV0dXJuL1wud29ya2VyXC5qcyQvLnRlc3QodCk/VVJMLmNyZWF0ZU9iamVjdFVSTChlKTovXC53YXNtJC8udGVzdCh0KT9XQVNNX0NETl9QQVRIX1BSRUZJWCsiL2RlY29kZXIud2FzbSI6L1wubWVtJC8udGVzdCh0KT9XQVNNX0NETl9QQVRIX1BSRUZJWCsiL2RlY29kZXIuanMubWVtIjp2b2lkIDB9LG1haW5TY3JpcHRVcmxPckJsb2I6V0FTTV9DRE5fUEFUSF9QUkVGSVgrIi9kZWNvZGVyLmpzIn0pfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3NlbGYuTW9kdWxlPWUsb25Qb3N0UnVuLmNhbGwoc2VsZil9KSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3NlbGYucG9zdE1lc3NhZ2Uoe21zZzoiSU5JVF9GQUlMRUQiLGxvZzplLm1lc3NhZ2V9KX0pKX1zZWxmLm9ubWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD1lLmRhdGE7aWYoImluaXQiPT09dC5tc2d8fCJwcmVsb2FkIj09PXQubXNnfHxkZWNvZGVyKXN3aXRjaCh0Lm1zZyl7Y2FzZSJwcmVsb2FkIjppbml0KHQudXJsKSxCQVRDSF9ERUNPREVfU0laRT10LmJhdGNoRGVjb2RlQ291bnQ7YnJlYWs7Y2FzZSJpbml0IjpzZWxmLm1ldGE9dC5tZXRhLEJBVENIX0RFQ09ERV9TSVpFPXQuYmF0Y2hEZWNvZGVDb3VudCxpbml0KHQudXJsKTticmVhaztjYXNlInVwZGF0ZW1ldGEiOnNlbGYubWV0YT10Lm1ldGEsZGVjb2Rlci51cGRhdGVNZXRhKHQubWV0YSk7YnJlYWs7Y2FzZSJpbml0RGVjb2RlciI6ZGVjb2Rlci5mcmFtZUxlbnNPZmZzZXQmJmRlY29kZXIuYmF0Y2hEZWNvZGUoITApLGRlY29kZXIuZmx1c2goKSxkZWNvZGVyLmRlY29kZSh0LmRhdGEpO2JyZWFrO2Nhc2UiZGVjb2RlIjpkZWNvZGVyLnN0b3JlQnVmZmVyKHQuZGF0YSx0LmluZm8pO2JyZWFrO2Nhc2UiZmx1c2giOmRlY29kZXIuZmx1c2goKTticmVhaztjYXNlImZpbmlzaF9mbGFnIjpzZWxmLnBvc3RNZXNzYWdlKHttc2c6IkJBVENIX0ZJTklTSF9GTEFHIn0pO2JyZWFrO2Nhc2UiZGVzdG9yeSI6ZGVjb2Rlci5kZXN0cm95KCl9fX0pKCk7Cg==",i="undefined"!=typeof window&&window.Blob&&new Blob([atob(r)],{type:"text/javascript;charset=utf-8"});function o(){var e=i&&(window.URL||window.webkitURL).createObjectURL(i);try{return e?new Worker(e,{}):new Worker("data:application/javascript;base64,"+r,{type:"module"})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}},586771:function(e,t,n){"use strict";function r(e,t){t=function(e,t){void 0===t&&(t=!1);var e=e.parentElement,n=[],r=document.scrollingElement||document.documentElement;!t&&e&&(r=e);for(var i=e;i&&i!==r;)(i.offsetHeight<i.scrollHeight||i.offsetWidth<i.scrollWidth)&&n.push([i,i.scrollTop,i.scrollLeft]),i=i.parentElement;return n.push([r,r.scrollTop,r.scrollLeft]),n}(e,t=void 0!==t&&t),e.focus({preventScroll:!0}),function(e){for(var t=0;t<e.length;t++)e[t][0].scrollTop=e[t][1],e[t][0].scrollLeft=e[t][2];e=[]}(t)}n.d(t,{m:function(){return r}})},331951:function(e,t,n){"use strict";n.d(t,{CX:function(){return i}});var r=n(382050);function i(e){try{return JSON.parse(e)}catch(e){console.error("Warning: JSON parse failed. "+e.message)}}Array.prototype.flat||r.Y},479874:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(339225),i=n(649894),o=new function(){var e=this;this.eventTypes=new Map,this.extractEvents=function(t){return e.eventTypes.get(t.type)?new r.U(t,t.target):null},[i._B,i.X_].forEach(function(t){return e.eventTypes.set(t,!0)})}},193968:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(386859),i=function(){function e(e){this.schemas=e}return e.prototype.get=function(e){var t,n;if(this.schemas[e])return this.schemas[e];try{for(var i=(0,r.c)(Object.keys(this.schemas)),o=i.next();!o.done;o=i.next()){var s=o.value;if(new RegExp(s).test(e))return this.schemas[s]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}()},89759:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var r=n(386859),i=n(399501),o=n(218571);function s(e){var t=e.editor,n=e.zoneId,s=e.Context,a=e.contextValue,c=e.children,e=(0,r._)((0,o.useState)(a),2),a=e[0],l=e[1];return(0,o.useEffect)(function(){function e(e){e.zoneId===n&&e.Context===s&&l(e.contextValue)}return t.on(i.r.REACT_CONTEXT_UPDATE,e),function(){t.off(i.r.REACT_CONTEXT_UPDATE,e)}},[t,n,s]),o.createElement(s.Provider,{value:a},c)}function a(e){var t=e.editor,n=e.zoneId,a=e.contextList,c=e.customizedProviderConstructorList,l=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e,o,s,c;if(l.current)try{for(var u=(0,r.c)(a),d=u.next();!d.done;d=u.next()){var h,p=d.value,f=p.Context,m=p.contextValue;l.current.has(f)&&l.current.get(f)!==m&&(h={zoneId:n,Context:f,contextValue:m},t.call(i.r.REACT_CONTEXT_UPDATE,h))}}catch(e){s={error:e}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(s)throw s.error}}else{l.current=new WeakMap;try{for(var v=(0,r.c)(a),g=v.next();!g.done;g=v.next()){var _=g.value,f=_.Context,m=_.contextValue;l.current.set(f,m)}}catch(t){e={error:t}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(e)throw e.error}}}},[t,n,a]),{Provider:function(e){var i;return e=e.children,o.createElement(o.Fragment,null,a.reduce(function(e,r){var i=r.Context,r=r.contextValue;return o.createElement(s,{editor:t,zoneId:n,Context:i,contextValue:r},e)},(i=e,(0,r.e)(c).reduce(function(e,t){return t(e)},i))))}}}},340847:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var r=n(386859),i=n(218571),o=i.forwardRef(function(e,t){return i.createElement("span",(0,r.b)({ref:t,"data-zero-space":!0},e),"\u200B")})},929766:function(e,t,n){"use strict";n.d(t,{$i:function(){return v},F:function(){return a},HA:function(){return c},L3:function(){return s},RM:function(){return f},WC:function(){return h},Xd:function(){return u},Yn:function(){return _},aZ:function(){return l},gS:function(){return o},hb:function(){return g},u1:function(){return d},xi:function(){return p}});var r="V-DOM",i=null,o=new WeakMap,s=[];function a(e){s.push(e)}function c(){return r}function l(e){r=e}var u=[],d=[];function h(){u.length=0}function p(){return i}function f(e){i=e}var m=!1;function v(e){e&&(r="DOM",s.length=0),m=e}function g(){return m}var _={renderToStaticMarkup:function(e){return"\u5916\u90E8\u6CA1\u6709\u4F20\u5165 react-dom/server's renderToStaticMarkup \u65B9\u6CD5\uFF0C\u65E0\u6CD5\u6E32\u67D3 react component"}}},330031:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(86021);function i(e){var t,n,i=[];try{for(var o=(0,r._)(Object.entries(e)),s=o.next();!s.done;s=o.next()){var a=(0,r.a)(s.value,2),c=a[0],l=a[1];i.push([c,l])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}},528694:function(e,t,n){"use strict";function r(e,t,n){var r=null==n?void 0:n.value;return"function"!=typeof r&&console.error("Only methods can be decorated with @Bind. <"+t+"> is not a method!"),{configurable:!0,get:function(){if(this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof r)return r;var n=r.bind(this);return Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),n}}}n.d(t,{W:function(){return r}})},256151:function(e,t,n){"use strict";n.d(t,{P3:()=>m.P3,AR:()=>a.AR,yp:()=>a.yp,Z1:()=>c.Z1,kH:()=>l.k,lg:()=>c.lg,yy:()=>c.yy,Qb:()=>m.Qb,ZP:()=>v});let r=n("880564"),i=n("437008"),o=n("970767"),s=n.n(o),a=n("754048"),c=n("56052"),l=n("953860"),u=n("897863"),d=n("698698"),h={appId:-1,domain:"",entityKeys:[],mode:a.AR.PRODUCTION,isPPE:!1,debug:!1,fetchDataAtInit:!0,region:a.yp.SG,storageType:c.Z1.sessionStorage,modules:{info:new l.k}};class p{constructor(){return this._isInitialized=!1,this._validateInitStatus=()=>!!this._isInitialized||(console.error("[SDK]: SDK is used before init"),!1),this.getConsentRecord=e=>this._validateInitStatus()?(d.Z.info("[SDK]: getConsentRecord",{entityKey:e}),u.Z.getConsentRecord(e)):null,this.getConsentRecords=e=>this._validateInitStatus()?(d.Z.info("[SDK]: getConsentRecords",{entityKeys:e}),u.Z.getConsentRecords(e)):[],this.getConsentEntity=e=>this._validateInitStatus()?(d.Z.info("[SDK]: getConsentEntity",{entityKey:e}),u.Z.getConsentEntity(e)):null,this.getConsentEntities=e=>this._validateInitStatus()?(d.Z.info("[SDK]: getConsentEntities",{entityKeys:e}),u.Z.getConsentEntities(e)):[],this.updateConsentRecords=(e,t,n)=>this._validateInitStatus()?(d.Z.info("[SDK]: updateConsentRecords",{entityKeys:e,status:t,businessFlow:n}),u.Z.updateConsentRecords(e,t,n)):Promise.resolve(),this.removeNotification=e=>{this._validateInitStatus()&&(d.Z.info("[SDK]: removeNotification",{arg:e}),u.Z.removeNotification(e))},this.notify=e=>{this._validateInitStatus()&&(d.Z.info("[SDK]: notify",{arg:e}),u.Z.notify(e))},this.fetch=e=>this._validateInitStatus()?(d.Z.info("[SDK]: fetch",{arg:e}),u.Z.fetch(e)):Promise.resolve(),this.refresh=e=>this._validateInitStatus()?(d.Z.info("[SDK]: refresh",{arg:e}),u.Z.fetch(e)):Promise.resolve(),this.addEventListener=(e,t,n)=>{if(this._validateInitStatus()){if(d.Z.info("[SDK]: addEventListener"),!e||!c.tR[e]||!t||"function"!=typeof n){let e="[SDK]: addEventListener - invalid param for adding new event listener";d.Z.error(e,Error(e));return}u.Z.addEventListener(e,t,n)}},this.removeEventListener=(e,t)=>{this._validateInitStatus()&&(d.Z.info("[SDK]: removeEventListener"),u.Z.removeEventListener(e,t))},this.destruct=()=>{d.Z.info("[SDK]: destruct"),u.Z.destruct(),r.Z.destruct(),i.Z.destruct(),d.Z.destruct(),this._isInitialized=!1},p._instance||(p._instance=this),p._instance}init(e){if("undefined"==typeof window)return console.warn("ConsentClientFrameworkSDK can not be init on server"),Promise.resolve();if(this._isInitialized)throw Error("ConsentClientFrameworkSDK has been initialized");let t=s()({},e,h),{debug:n,fetchDataAtInit:o}=t;return(n&&(window.consentSDK=this,window.consentSDK.storage=i.Z),d.Z.init(t),d.Z.info("[SDK]: init global module"),r.Z.init(t),i.Z.init(t),d.Z.info("[SDK]: init life cycle"),u.Z.init(t),this._isInitialized=!0,o)?u.Z.fetch():Promise.resolve()}isInitialized(){return d.Z.info("[SDK]: isInitialized"),this._isInitialized}}let f=new p,m=n("920522");n("981043");var v=f},909749:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=class{init(e){}getData(){return null}shouldNotify(e){return!0}notify(e){}canNotificationBeRemoved(e){return!1}removeNotification(e){}shouldFetch(){return!0}fetch(...e){return Promise.resolve(null)}destruct(){}}},131194:function(){},709866:function(){},911797:function(){},626616:function(){},738418:function(){},585499:function(){},766132:function(e,t,n){"use strict";var r=n(211996),i=n(618253),o=n(889391),s=n(77274),a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(526261));a.Axios=o,a.CanceledError=n(944792),a.CancelToken=n(6916),a.isCancel=n(274573),a.VERSION=n(527705).version,a.toFormData=n(444353),a.AxiosError=n(75497),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=n(752054),a.isAxiosError=n(226888),e.exports=a,e.exports.default=a},594349:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},444353:function(e,t,n){"use strict";var r=n(966465).Buffer,i=n(211996);e.exports=function(e,t){t=t||new FormData;var n=[];function o(e){return null===e?"":i.isDate(e)?e.toISOString():i.isArrayBuffer(e)||i.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):r.from(e):e}return function e(r,s){if(i.isPlainObject(r)||i.isArray(r)){if(-1!==n.indexOf(r))throw Error("Circular reference detected in "+s);n.push(r),i.forEach(r,function(n,r){if(!i.isUndefined(n)){var a,c=s?s+"."+r:r;if(n&&!s&&"object"==typeof n){if(i.endsWith(r,"{}"))n=JSON.stringify(n);else if(i.endsWith(r,"[]")&&(a=i.toArray(n))){a.forEach(function(e){i.isUndefined(e)||t.append(c,o(e))});return}}e(n,c)}}),n.pop()}else t.append(s,o(r))}(e),t}},814800:function(e,t){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,o=c(e),s=o[0],a=o[1],l=new i((s+a)*3/4-a),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(function(e,t,r){for(var i,o=[],s=t;s<r;s+=3)o.push(n[(i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},13408:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s,a;return n=(t=e.lib).Base,r=t.WordArray,o=(i=e.algo).SHA1,s=i.HMAC,a=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=s.create(n.hasher,e),o=r.create(),a=r.create([1]),c=o.words,l=a.words,u=n.keySize,d=n.iterations;c.length<u;){var h=i.update(t).finalize(a);i.reset();for(var p=h.words,f=p.length,m=h,v=1;v<d;v++){m=i.finalize(m),i.reset();for(var g=m.words,_=0;_<f;_++)p[_]^=g[_]}o.concat(h),l[0]++}return o.sigBytes=4*u,o}}),e.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)},e.PBKDF2},e.exports=r(n(359302),n(866279),n(284278))},220885:function(e,t,n){"use strict";n.d(t,{GV:function(){return s},Gv:function(){return o},Sk:function(){return r},WQ:function(){return a},ZO:function(){return i}});var r="data-focus-lock",i="data-focus-lock-disabled",o="data-no-focus-lock",s="data-autofocus-inside",a="data-no-autofocus"},588967:function(e,t,n){var r=null;let i=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,o=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;e.exports=function(e){"use strict";var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=e){if(!0===e.strict&&(t.strict=!0),!0===e.storeAsString&&(t.storeAsString=!0),t.alwaysParseAsBig=!0===e.alwaysParseAsBig&&e.alwaysParseAsBig,t.useNativeBigInt=!0===e.useNativeBigInt&&e.useNativeBigInt,void 0!==e.constructorAction){if("error"===e.constructorAction||"ignore"===e.constructorAction||"preserve"===e.constructorAction)t.constructorAction=e.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`)}if(void 0!==e.protoAction){if("error"===e.protoAction||"ignore"===e.protoAction||"preserve"===e.protoAction)t.protoAction=e.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`)}}var s,a,c,l,u={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},d=function(e){throw{name:"SyntaxError",message:e,at:s,text:c}},h=function(e){return e&&e!==a&&d("Expected '"+e+"' instead of '"+a+"'"),a=c.charAt(s),s+=1,a},p=function(){var e,i="";for("-"===a&&(i="-",h("-"));a>="0"&&a<="9";)i+=a,h();if("."===a)for(i+=".";h()&&a>="0"&&a<="9";)i+=a;if("e"===a||"E"===a)for(i+=a,h(),("-"===a||"+"===a)&&(i+=a,h());a>="0"&&a<="9";)i+=a,h();if(isFinite(e=+i))return(null==r&&(r=n(218907)),i.length>15)?t.storeAsString?i:t.useNativeBigInt?BigInt(i):new r(i):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(e):new r(e):e;d("Bad number")},f=function(){var e,t,n,r="";if('"'===a)for(var i=s;h();){if('"'===a)return s-1>i&&(r+=c.substring(i,s-1)),h(),r;if("\\"===a){if(s-1>i&&(r+=c.substring(i,s-1)),h(),"u"===a){for(t=0,n=0;t<4&&isFinite(e=parseInt(h(),16));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else if("string"==typeof u[a])r+=u[a];else break;i=s}}d("Bad string")},m=function(){for(;a&&a<=" ";)h()},v=function(){switch(a){case"t":return h("t"),h("r"),h("u"),h("e"),!0;case"f":return h("f"),h("a"),h("l"),h("s"),h("e"),!1;case"n":return h("n"),h("u"),h("l"),h("l"),null}d("Unexpected '"+a+"'")},g=function(){var e=[];if("["===a){if(h("["),m(),"]"===a)return h("]"),e;for(;a;){if(e.push(l()),m(),"]"===a)return h("]"),e;h(","),m()}}d("Bad array")},_=function(){var e,n=Object.create(null);if("{"===a){if(h("{"),m(),"}"===a)return h("}"),n;for(;a;){if(e=f(),m(),h(":"),!0===t.strict&&Object.hasOwnProperty.call(n,e)&&d('Duplicate key "'+e+'"'),!0===i.test(e)?"error"===t.protoAction?d("Object contains forbidden prototype property"):"ignore"===t.protoAction?l():n[e]=l():!0===o.test(e)?"error"===t.constructorAction?d("Object contains forbidden constructor property"):"ignore"===t.constructorAction?l():n[e]=l():n[e]=l(),m(),"}"===a)return h("}"),n;h(","),m()}}d("Bad object")};return l=function(){switch(m(),a){case"{":return _();case"[":return g();case'"':return f();case"-":return p();default:return a>="0"&&a<="9"?p():v()}},function(e,t){var n;return c=e+"",s=0,a=" ",n=l(),m(),a&&d("Syntax error"),"function"==typeof t?function e(n,r){var i,o=n[r];return o&&"object"==typeof o&&Object.keys(o).forEach(function(t){void 0!==(i=e(o,t))?o[t]=i:delete o[t]}),t.call(n,r,o)}({"":n},""):n}}},776132:function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(915944),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),l=a.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),f=function(e){if("undefined"==typeof window||!p)return d(e);try{return d(e)}catch(e){return!1}};r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),r=s(e),a=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!r)throw TypeError("Object.keys called on a non-object");var h=l&&n;if(a&&e.length>0&&!i.call(e,0))for(var p=0;p<e.length;++p)d.push(String(p));if(r&&e.length>0)for(var m=0;m<e.length;++m)d.push(String(m));else for(var v in e)!(h&&"prototype"===v)&&i.call(e,v)&&d.push(String(v));if(c)for(var g=f(e),_=0;_<u.length;++_)!(g&&"constructor"===u[_])&&i.call(e,u[_])&&d.push(u[_]);return d}}e.exports=r},915944:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},194716:function(e,t,n){var r=n(991546);e.exports=function e(t,n,i){var s,a;return(r(n)||(i=n||i,n=[]),i=i||{},t instanceof RegExp)?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return e.keys=t,e}(t,n):r(t)?function(t,n,r){for(var i,o=[],s=0;s<t.length;s++)o.push(e(t[s],n,r).source);return(i=RegExp("(?:"+o.join("|")+")",l(r))).keys=n,i}(t,n,i):(s=n,u(o(t,a=i),s,a))},e.exports.parse=o,e.exports.compile=function(e,t){return a(o(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=u;var i=RegExp("(\\\\.)|([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))","g");function o(e,t){for(var n,r=[],o=0,s=0,a="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var u=n[0],d=n[1],h=n.index;if(a+=e.slice(s,h),s=h+u.length,d){a+=d[1];continue}var p=e[s],f=n[2],m=n[3],v=n[4],g=n[5],_=n[6],y=n[7];a&&(r.push(a),a="");var S=null!=f&&null!=p&&p!==f,b="+"===_||"*"===_,T="?"===_||"*"===_,E=n[2]||l,x=v||g;r.push({name:m||o++,prefix:f||"",delimiter:E,optional:T,repeat:b,partial:S,asterisk:!!y,pattern:x?x.replace(/([=!:$\/()])/g,"\\$1"):y?".*":"[^"+c(E)+"]+?"})}return s<e.length&&(a+=e.substr(s)),a&&r.push(a),r}function s(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e,t){for(var n=Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=RegExp("^(?:"+e[i].pattern+")$",l(t)));return function(t,i){for(var o="",a=t||{},c=(i||{}).pretty?s:encodeURIComponent,l=0;l<e.length;l++){var u,d=e[l];if("string"==typeof d){o+=d;continue}var h=a[d.name];if(null==h){if(d.optional){d.partial&&(o+=d.prefix);continue}throw TypeError('Expected "'+d.name+'" to be defined')}if(r(h)){if(!d.repeat)throw TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(d.optional)continue;throw TypeError('Expected "'+d.name+'" to not be empty')}for(var p=0;p<h.length;p++){if(u=c(h[p]),!n[l].test(u))throw TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(u)+"`");o+=(0===p?d.prefix:d.delimiter)+u}continue}if(u=d.asterisk?encodeURI(h).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):c(h),!n[l].test(u))throw TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+u+'"');o+=d.prefix+u}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e&&e.sensitive?"":"i"}function u(e,t,n){r(t)||(n=t||n,t=[]);for(var i,o,s=(n=n||{}).strict,a=!1!==n.end,u="",d=0;d<e.length;d++){var h=e[d];if("string"==typeof h)u+=c(h);else{var p=c(h.prefix),f="(?:"+h.pattern+")";t.push(h),h.repeat&&(f+="(?:"+p+f+")*"),u+=f=h.optional?h.partial?p+"("+f+")?":"(?:"+p+"("+f+"))?":p+"("+f+")"}}var m=c(n.delimiter||"/"),v=u.slice(-m.length)===m;return s||(u=(v?u.slice(0,-m.length):u)+"(?:"+m+"(?=$))?"),a?u+="$":u+=s&&v?"":"(?="+m+"|$)",i=RegExp("^"+u,l(n)),o=t,i.keys=o,i}},353154:function(e,t,n){"use strict";function r(e){setTimeout(e,1)}n.d(t,{U:function(){return r}})},136190:function(e,t,n){"use strict";e.exports=n(166209)},360432:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(875589),i=n(661135),o=n(171500),s=n(823086),a=n(218571),c=n(401821),l=n(894742),u=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},d=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind((0,o.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,s.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,l.Kg)(e,r):(0,l.Rp)(e,n,r),firstRender:!1}},n.handleExited=function(e,t){var n=(0,l.n)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=(0,i.Z)({},t.children);return delete n[e.key],{children:n}}))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=(0,r.Z)(e,["component","childFactory"]),o=this.state.contextValue,s=u(this.state.children).map(n);return(delete i.appear,delete i.enter,delete i.exit,null===t)?a.createElement(c.Z.Provider,{value:o},s):a.createElement(c.Z.Provider,{value:o},a.createElement(t,i,s))},t}(a.Component);d.propTypes={},d.defaultProps={component:"div",childFactory:function(e){return e}};let h=d},244014:function(e){"use strict";var t={rfc3986:{}};t.generate=function(){var e="[0-9]",n="a-zA-Z";t.rfc3986.cidr=e+"|[1-2]"+e+"|3[0-2]";var r="0-9A-Fa-f",i="["+r+"]",o=n+"0-9-\\._~",s="!\\$&'\\(\\)\\*\\+,;=",a="%"+r,c=o+a+s+":@",l="["+c+"]",u="(?:0?0?"+e+"|0?[1-9]"+e+"|1"+e+e+"|2[0-4]"+e+"|25[0-5])";t.rfc3986.IPv4address="(?:"+u+"\\.){3}"+u;var d=i+"{1,4}",h="(?:"+d+":"+d+"|"+t.rfc3986.IPv4address+")";t.rfc3986.IPv6address="(?:(?:"+d+":){6}"+h+"|::(?:"+d+":){5}"+h+"|"+("(?:"+d+")?::(?:")+d+":){4}"+h+"|"+("(?:(?:"+d+":){0,1}"+d+")?::(?:")+d+":){3}"+h+"|"+("(?:(?:"+d+":){0,2}"+d+")?::(?:")+d+":){2}"+h+"|"+("(?:(?:"+d+":){0,3}"+d+")?::")+d+":"+h+"|"+("(?:(?:"+d+":){0,4}")+d+")?::"+h+"|"+("(?:(?:"+d+":){0,5}")+d+")?::"+d+"|"+("(?:(?:"+d)+":){0,6}"+d+")?::)",t.rfc3986.IPvFuture="v"+i+"+\\.["+o+s+":]+",t.rfc3986.scheme="["+n+"]["+n+"0-9+-\\.]*",t.rfc3986.IPLiteral="\\[(?:"+t.rfc3986.IPv6address+"|"+t.rfc3986.IPvFuture+")\\]";var p="(?:"+t.rfc3986.IPLiteral+"|"+t.rfc3986.IPv4address+"|"+("["+o)+a+s+"]{0,255})",f=l+"+",m="(?:\\/"+l+"*)*";t.rfc3986.hierPart="(?:(?:\\/\\/"+("(?:["+o+a+s+":]*@)?"+p+"(?::")+e+"*)?"+m+")|\\/(?:"+f+m+")?|"+(f+m)+")",t.rfc3986.query="["+c+"\\/\\?]*(?=#|$)",t.rfc3986.fragment="["+c+"\\/\\?]*",t.rfc3986.uri="^(?:"+t.rfc3986.scheme+":"+t.rfc3986.hierPart+")(?:\\?"+t.rfc3986.query+")?(?:#"+t.rfc3986.fragment+")?$"},t.generate(),e.exports=t.rfc3986},103733:function(e,t,n){"use strict";n.d(t,{R:function(){return function e(t,n,f,m){if((0,c.m)(f)&&(m=f,f=void 0),m)return e(t,n,f).pipe((0,l.Z)(m));var v=(0,r.CR)((0,c.m)(t.addEventListener)&&(0,c.m)(t.removeEventListener)?d.map(function(e){return function(r){return t[e](n,r,f)}}):(0,c.m)(t.addListener)&&(0,c.m)(t.removeListener)?u.map(p(t,n)):(0,c.m)(t.on)&&(0,c.m)(t.off)?h.map(p(t,n)):[],2),g=v[0],_=v[1];if(!g&&(0,a.z)(t))return(0,s.z)(function(t){return e(t,n,f)})((0,i.Xf)(t));if(!g)throw TypeError("Invalid event target");return new o.y(function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return g(t),function(){return _(t)}})}}});var r=n(789786),i=n(23423),o=n(110670),s=n(997938),a=n(713287),c=n(882314),l=n(244580),u=["addListener","removeListener"],d=["addEventListener","removeEventListener"],h=["on","off"];function p(e,t){return function(n){return function(r){return e[n](t,r)}}}},620652:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(201834),i=n(637466);function o(e){i.z.setTimeout(function(){var t=r.v.onUnhandledError;if(t)t(e);else throw e})}},600777:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(826637),i=function(){function e(t,n,i){(0,r.PA)(this,e),(0,r._x)(this,"live",void 0),(0,r._x)(this,"id",0),(0,r._x)(this,"bitrate",0),(0,r._x)(this,"width",0),(0,r._x)(this,"height",0),(0,r._x)(this,"name",""),(0,r._x)(this,"url",""),(0,r._x)(this,"audioCodec",""),(0,r._x)(this,"videoCodec",""),(0,r._x)(this,"textCodec",""),(0,r._x)(this,"startCC",0),(0,r._x)(this,"endCC",0),(0,r._x)(this,"startSN",0),(0,r._x)(this,"endSN",-1),(0,r._x)(this,"totalDuration",0),(0,r._x)(this,"targetDuration",0),(0,r._x)(this,"snDiff",null),(0,r._x)(this,"segments",[]),(0,r._x)(this,"audioStreams",[]),(0,r._x)(this,"subtitleStreams",[]),(0,r._x)(this,"closedCaptions",[]),(0,r._x)(this,"currentAudioStream",null),(0,r._x)(this,"currentSubtitleStream",null),this.update(t,n,i)}return(0,r.qH)(e,[{key:"lastSegment",get:function(){return this.segments.length?this.segments[this.segments.length-1]:null}},{key:"segmentDuration",get:function(){var e;return this.targetDuration||(null===(e=this.segments[0])||void 0===e?void 0:e.duration)||0}},{key:"liveEdge",get:function(){return this.endTime}},{key:"endTime",get:function(){var e;return(null===(e=this.lastSegment)||void 0===e?void 0:e.end)||0}},{key:"currentSubtitleEndSn",get:function(){var e;return(null===(e=this.currentSubtitleStream)||void 0===e?void 0:e.endSN)||0}},{key:"clearOldSegment",value:function(e,t){return this.currentAudioStream&&this._clearSegments(e,t),this._clearSegments(e,t)}},{key:"getAudioSegment",value:function(e){if(e&&this.currentAudioStream){var t=e.sn-this.snDiff;return this.currentAudioStream.segments.find(function(e){return e.sn===t})}}},{key:"update",value:function(e,t){this.url=e.url,Array.isArray(e.segments)?((null===this.live||void 0===this.live)&&(this.live=e.live),this._updateSegments(e,this),this.startCC=e.startCC,this.endCC=e.endCC,this.startSN=e.startSN,this.endSN=e.endSN||-1,this.totalDuration=e.totalDuration,this.targetDuration=e.targetDuration,this.live=e.live,t&&this.currentAudioStream&&Array.isArray(t.segments)&&(this._updateSegments(t,this.currentAudioStream),(null===this.snDiff||void 0===this.snDiff)&&e.segments.length&&t.segments.length&&(this.snDiff=e.segments[0].sn-t.segments[0].sn))):(this.id=e.id,this.bitrate=e.bitrate,this.width=e.width,this.height=e.height,this.name=e.name,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.textCodec=e.textCodec,this.audioStreams=e.audioStreams,this.subtitleStreams=e.subtitleStreams,!this.currentAudioStream&&this.audioStreams.length&&(this.currentAudioStream=this.audioStreams.find(function(e){return e.default})||this.audioStreams[0]),!this.currentSubtitleStream&&this.subtitleStreams.length&&(this.currentSubtitleStream=this.subtitleStreams.find(function(e){return e.default})||this.subtitleStreams[0]))}},{key:"updateSubtitle",value:function(e){var t=this;if(e&&this.currentSubtitleStream&&Array.isArray(e.segments)){var n=this._updateSegments(e,this.currentSubtitleStream),r=this.currentSubtitleStream.segments;if(r.length>100&&(this.currentSubtitleStream.segments=r.slice(100)),n)return n.map(function(e){return{sn:e.sn,url:e.url,duration:e.duration,start:e.start,end:e.end,lang:t.currentSubtitleStream.lang}})}}},{key:"switchSubtitle",value:function(e){var t=this.subtitleStreams.find(function(t){return t.lang===e}),n=this.currentSubtitleStream;t&&(this.currentSubtitleStream=t,n.segments=[])}},{key:"_clearSegments",value:function(e,t){for(var n=0,r=this.segments,i=0,o=r.length;i<o;i++)if(r[i].end>=e){n=i;break}return n>t&&(n=t),n&&(this.segments=this.segments.slice(n),this.currentAudioStream&&(this.currentAudioStream.segments=this.currentAudioStream.segments.slice(n))),t-n}},{key:"_updateSegments",value:function(e,t){var n=t.segments;if(this.live){var r=n[n.length-1],i=(null==r?void 0:r.sn)||-1;if(i<e.endSN&&e.segments.length){var o=e.segments.findIndex(function(e){return e.sn===i}),s=o<0?e.segments:e.segments.slice(o+1);if(n.length&&s.length){var a=r.end;s.forEach(function(e){e.start=a,a=e.end});var c=(null==r?void 0:r.cc)||-1;c>s[0].cc&&s.forEach(function(e){return e.cc+=c})}return t.endSN=e.endSN,t.segments=n.concat(s),s}}else t.segments=e.segments}}]),e}()},884532:function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var r=n(11065),i=n(767852),o=n(924723),s=n(537686),a=n(923428),c=function(e){(0,r.XW)(c,e);var t,n=(0,r.WY)(c);function c(){var e;return(0,r.PA)(this,c),e=n.call(this),(0,r._x)((0,r.Lc)(e),"_abortController",null),(0,r._x)((0,r.Lc)(e),"_timeoutTimer",null),(0,r._x)((0,r.Lc)(e),"_reader",null),(0,r._x)((0,r.Lc)(e),"_response",null),(0,r._x)((0,r.Lc)(e),"_aborted",!1),(0,r._x)((0,r.Lc)(e),"_index",-1),(0,r._x)((0,r.Lc)(e),"_range",null),(0,r._x)((0,r.Lc)(e),"_receivedLength",0),(0,r._x)((0,r.Lc)(e),"_running",!1),(0,r._x)((0,r.Lc)(e),"_logger",null),(0,r._x)((0,r.Lc)(e),"_vid",""),(0,r._x)((0,r.Lc)(e),"_onProcessMinLen",0),(0,r._x)((0,r.Lc)(e),"_onCancel",null),(0,r._x)((0,r.Lc)(e),"_priOptions",null),e}return(0,r.qH)(c,[{key:"load",value:function(e){var t,n=this,c=e.url,l=e.vid,u=e.timeout,d=e.responseType,h=e.onProgress,p=e.index,f=e.onTimeout,m=e.onCancel,v=e.range,g=e.transformResponse,_=e.request,y=e.params,S=e.logger,b=e.method,T=e.headers,E=e.body,x=e.mode,w=e.credentials,k=e.cache,C=e.redirect,R=e.referrer,I=e.referrerPolicy,N=e.onProcessMinLen,O=e.priOptions;this._logger=S,this._aborted=!1,this._onProcessMinLen=N,this._onCancel=m,this._abortController="undefined"!=typeof AbortController&&new AbortController,this._running=!0,this._index=p,this._range=v||[0,0],this._vid=l||c,this._priOptions=O||{};var A={method:b,headers:T,body:E,mode:x,credentials:w,cache:k,redirect:C,referrer:R,referrerPolicy:I,signal:null===(t=this._abortController)||void 0===t?void 0:t.signal},M=!1;clearTimeout(this._timeoutTimer),c=(0,o.G7)(c,y);var L=(0,o.Gu)(v);L&&(T=_?_.headers:A.headers=A.headers||(Headers?new Headers:{}),Headers&&T instanceof Headers?T.append("Range",L):T.Range=L),u&&(this._timeoutTimer=setTimeout(function(){if(M=!0,n.cancel(),f){var e=new i.C(c,A,null,"timeout");e.isTimeout=!0,f(e,{index:n._index,range:n._range,vid:n._vid,priOptions:n._priOptions})}},u));var P=Date.now();return this._logger.debug("[fetch load start], index,",p,",range,",v),new Promise(function(e,t){var l;fetch(_||c,_?void 0:A).then((l=(0,r.x)((0,r.l5)().mark(function l(u){var f,m,_,y;return(0,r.l5)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(clearTimeout(n._timeoutTimer),n._response=u,!(n._aborted||!n._running)){r.next=4;break}return r.abrupt("return");case 4:if(g&&(u=g(u,c)||u),u.ok){r.next=7;break}throw new i.C(c,A,u,"bad network response");case 7:if(f=Date.now(),d!==s.U.TEXT){r.next=15;break}return r.next=11,u.text();case 11:case 18:m=r.sent,n._running=!1,r.next=37;break;case 15:if(d!==s.U.JSON){r.next=22;break}return r.next=18,u.json();case 22:if(!h){r.next=29;break}return n.resolve=e,n.reject=t,n._loadChunk(u,h,P,f),r.abrupt("return");case 29:return r.next=31,u.arrayBuffer();case 31:m=new Uint8Array(m=r.sent),n._running=!1,_=Date.now()-P,y=(0,o.pl)(m.byteLength,_),n.emit(a.K.REAL_TIME_SPEED,{speed:y,len:m.byteLength,time:_,vid:n._vid,index:n._index,range:n._range,priOptions:n._priOptions});case 37:n._logger.debug("[fetch load end], index,",p,",range,",v),e((0,o.rO)(m,!0,u,u.headers.get("Content-Length"),u.headers.get("age"),P,f,p,v,n._vid,n._priOptions));case 39:case"end":return r.stop()}},l)})),function(e){return l.apply(this,arguments)})).catch(function(e){var r;clearTimeout(n._timeoutTimer),n._running=!1,(!n._aborted||M)&&((e=e instanceof i.C?e:new i.C(c,A,null,null===(r=e)||void 0===r?void 0:r.message)).startTime=P,e.endTime=Date.now(),e.isTimeout=M,e.options={index:n._index,range:n._range,vid:n._vid,priOptions:n._priOptions},t(e))})})}},{key:"cancel",value:(t=(0,r.x)((0,r.l5)().mark(function e(){return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._aborted){e.next=2;break}return e.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){e.next=14;break}if(e.prev=5,!this._reader){e.next=9;break}return e.next=9,this._reader.cancel();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch(e){}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return e.stop()}},e,this,[[5,11]])})),function(){return t.apply(this,arguments)})},{key:"_loadChunk",value:function(e,t,n,s){var c,l,u,d,h=this;if(!e.body||!e.body.getReader){this._running=!1;var p=new i.C(e.url,"",e,"onProgress of bad response.body.getReader");p.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this.reject(p);return}this._onProcessMinLen>0&&(this._cache=new Uint8Array(2097152),this._writeIdx=0);var f=this._reader=e.body.getReader(),m=(c=(0,r.x)((0,r.l5)().mark(function i(){var c,p,v,g,_,y,S,b;return(0,r.l5)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=Date.now(),r.prev=1,r.next=4,f.read();case 4:l=r.sent,d=Date.now(),r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(1),d=Date.now(),h._aborted||(h._running=!1,r.t0.options={index:h._index,range:h._range,vid:h._vid,priOptions:h._priOptions},h.reject(r.t0)),r.abrupt("return");case 13:if(v=(p=(null===(c=h._range)||void 0===c?void 0:c.length)>0?h._range[0]:0)+h._receivedLength,!h._aborted){r.next=19;break}return h._running=!1,t(void 0,!1,{range:[v,v],vid:h._vid,index:h._index,startTime:u,endTime:d,st:n,firstByteTime:s,priOptions:h._priOptions},e),r.abrupt("return");case 19:g=l.value?l.value.byteLength:0,h._receivedLength+=g,h._logger.debug("\u3010fetchLoader,onProgress call\u3011,task,",h._range,", start,",v,", end,",p+h._receivedLength,", done,",l.done),h._onProcessMinLen>0?h._writeIdx+g>=h._onProcessMinLen||l.done?((_=new Uint8Array(h._writeIdx+g)).set(h._cache.slice(0,h._writeIdx),0),g>0&&_.set(l.value,h._writeIdx),h._writeIdx=0,h._logger.debug("\u3010fetchLoader,onProgress enough\u3011,done,",l.done,",len,",_.byteLength,", writeIdx,",h._writeIdx)):g>0&&h._writeIdx+g<2097152?(h._cache.set(l.value,h._writeIdx),h._writeIdx+=g,h._logger.debug("\u3010fetchLoader,onProgress cache\u3011,len,",g,", writeIdx,",h._writeIdx)):g>0&&(y=new Uint8Array(h._writeIdx+g+2048),h._logger.debug("\u3010fetchLoader,onProgress extra start\u3011,size,",h._writeIdx+g+2048,", datalen,",g,", writeIdx,",h._writeIdx),y.set(h._cache.slice(0,h._writeIdx),0),g>0&&y.set(l.value,h._writeIdx),h._writeIdx+=g,delete h._cache,h._cache=y,h._logger.debug("\u3010fetchLoader,onProgress extra end\u3011,len,",g,", writeIdx,",h._writeIdx)):_=l.value,(_&&_.byteLength>0||l.done)&&t(_,l.done,{range:[h._range[0]+h._receivedLength-(_?_.byteLength:0),h._range[0]+h._receivedLength],vid:h._vid,index:h._index,startTime:u,endTime:d,st:n,firstByteTime:s,priOptions:h._priOptions},e),l.done?(S=Date.now()-n,b=(0,o.pl)(h._receivedLength,S),h.emit(a.K.REAL_TIME_SPEED,{speed:b,len:h._receivedLength,time:S,vid:h._vid,index:h._index,range:h._range,priOptions:h._priOptions}),h._running=!1,h._logger.debug("[fetchLoader onProgress end],task,",h._range,",done,",l.done),h.resolve((0,o.rO)(l,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),n,s,h._index,h._range,h._vid,h._priOptions))):m();case 25:case"end":return r.stop()}},i,null,[[1,8]])})),function(){return c.apply(this,arguments)});m()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return"undefined"!=typeof fetch}}]),c}(n(733730).Z)},374612:function(e,t,n){"use strict";n.d(t,{h:function(){return g}});var r=n(949024),i=n(133239),o=n(2731),s=n(288661),a=n(7518),c=n(597398),l=n(136566),u=n(971921),d=n(927390),h=n(690516),p=n(939858),f=n(400880),m=n(35004),v=new(n(177560)).Y("TsDemuxer"),g=function(){function e(t,n,o){(0,r.PA)(this,e),(0,r._x)(this,"_pmtId",-1),(0,r._x)(this,"_remainingPacketData",null),(0,r._x)(this,"_videoPesData",[]),(0,r._x)(this,"_audioPesData",[]),(0,r._x)(this,"_gopId",0),this.videoTrack=t||new l.q,this.audioTrack=n||new u.W,this.metadataTrack=o||new p.m$,this._fixer=new i.n(this.videoTrack,this.audioTrack,this.metadataTrack)}return(0,r.qH)(e,[{key:"demux",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=this.audioTrack,i=this.videoTrack,o=this.metadataTrack;t&&(this._pmtId=-1,i.reset(),r.reset(),o.reset()),!n||t?(this._remainingPacketData=null,this._videoPesData=[],this._audioPesData=[]):(i.samples=[],r.samples=[],o.seiSamples=[],i.warnings=[],r.warnings=[],this._remainingPacketData&&(e=(0,m.gJ)(this._remainingPacketData,e),this._remainingPacketData=null));var s=e.length,a=s%188;a&&(this._remainingPacketData=e.subarray(s-a),s-=a);for(var c=i.pid,l=r.pid,u=0;u<s;u+=188){if(71!==e[u])throw Error("TS packet did not start with 0x47");var d=!!(64&e[u+1]),h=((31&e[u+1])<<8)+e[u+2],p=(48&e[u+3])>>4,g=void 0;if(p>1){if((g=u+5+e[u+4])===u+188)continue}else g=u+4;switch(h){case 0:d&&(g+=e[g]+1),this._pmtId=(31&e[g+10])<<8|e[g+11];break;case this._pmtId:d&&(g+=e[g]+1);var _=g+3+((15&e[g+1])<<8|e[g+2])-4,y=(15&e[g+10])<<8|e[g+11];for(g+=12+y;g<_;){var S=(31&e[g+1])<<8|e[g+2];switch(e[g]){case 15:r.pid=l=S;break;case 27:if(-1!==c)break;i.codecType=f._e.AVC,i.pid=c=S;break;case 36:if(-1!==c)break;i.codecType=f._e.HEVC,i.pid=c=S;break;default:v.warn("Unsupported stream. type: ".concat(e[g],", pid: ").concat(S))}g+=((15&e[g+3])<<8|e[g+4])+5}break;case c:d&&this._videoPesData.length&&this._parseVideoData(),this._videoPesData.push(e.subarray(g,u+188));break;case l:d&&this._audioPesData.length&&this._parseAudioData(),this._audioPesData.push(e.subarray(g,u+188));break;case 17:case 8191:break;default:v.warn("Unknown pid: ".concat(h))}}return this._parseVideoData(),this._parseAudioData(),r.formatTimescale=i.formatTimescale=i.timescale=o.timescale=9e4,r.timescale=r.sampleRate||0,{videoTrack:i,audioTrack:r,metadataTrack:o}}},{key:"fix",value:function(e,t,n){return this._fixer.fix(e,t,n),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(e,t,n,r){return this.demux(e,t,n),this.fix(r,t,n)}},{key:"_parseVideoData",value:function(){if(this._videoPesData.length){var t=e._parsePES(m.gJ.apply(void 0,(0,r.u)(this._videoPesData)));if(!t){v.warn("Cannot parse video pes",this._videoPesData);return}var n=c.l.parseAnnexB(t.data);n?this._createVideoSample(n,t.pts,t.dts):v.warn("Cannot parse avc units",t),this._videoPesData=[]}}},{key:"_createVideoSample",value:function(e,t,n){var r=this;if(e.length){var i=this.videoTrack,s=i.codecType===f._e.HEVC,l=new d._(t,n);e.forEach(function(e){var n=s?e[0]>>>1&63:31&e[0];switch(n){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!s&&5!==n||s&&5===n)break;l.setToKeyframe(),r._gopId++;break;case 6:case 39:case 40:if(!s&&6!==n||s&&6===n)break;r.metadataTrack.seiSamples.push(new p.FO(c.l.parseSEI(c.l.removeEPB(e),s),t));return;case 32:if(!s)break;if(!i.vps.length){var u=a.V.parseVPS(c.l.removeEPB(e),i.hvcC);i.hvcC=i.hvcC||u,i.vps=[e]}break;case 7:case 33:if(!s&&7!==n||s&&7===n)break;if(!i.sps.length){var d=c.l.removeEPB(e),h=s?a.V.parseSPS(d,i.hvcC):o.x.parseSPS(d);i.sps=[e],i.hvcC=i.hvcC||h.hvcC,i.codec=h.codec,i.width=h.width,i.height=h.height,i.sarRatio=h.sarRatio,i.fpsNum=h.fpsNum,i.fpsDen=h.fpsDen}break;case 8:case 34:if(!s&&8!==n||s&&8===n)break;i.pps.length||(i.pps=[e])}l.units.push(e)}),l.gopId=this._gopId,this._pushVideoSample(i,l)}}},{key:"_pushVideoSample",value:function(e,t){if(t.units.length){if(null===t.pts||void 0===t.pts){v.warn("Video sample no pts",t);var n=e.samples[e.samples.length-1];n?(t.pts=n.pts,t.dts=n.dts):v.warn("Drop video sample",t)}else e.samples.push(t)}}},{key:"_parseAudioData",value:function(){if(this._audioPesData.length){var t=e._parsePES(m.gJ.apply(void 0,(0,r.u)(this._audioPesData)));if(!t){v.warn("Cannot parse audio pes",this._audioPesData);return}this._parseAacData(t),this._audioPesData=[]}}},{key:"_parseAacData",value:function(e){var t,n=this.audioTrack,i=e.pts;if(null==i){if(v.warn("AAC pes not pts",n),!n.samples.length||!n.sampleRate)return;i=n.samples[n.samples.length-1].pts+s.W.getFrameDuration(n.sampleRate)}var o=s.W.parseADTS(e.data,i);o?(n.codec=o.codec,n.channelCount=o.channelCount,n.sampleRate=o.sampleRate,n.objectType=o.objectType,n.sampleRateIndex=o.samplingFrequencyIndex,n.config=o.config,(t=n.samples).push.apply(t,(0,r.u)(o.frames.map(function(e){return new h.X(e.pts,e.data)}))),o.skip&&v.warn("Skip aac adts ".concat(o.skip," bits")),o.remaining&&v.warn("Remaining aac adts ".concat(o.remaining," bits"))):v.warn("Cannot parse aac adts",e)}}],[{key:"probe",value:function(e){return!!e.length&&71===e[0]&&71===e[188]&&71===e[376]}},{key:"_parsePES",value:function(e){var t,n,r=e[8];if(null!=r&&!(e.length<r+9)&&1==(e[0]<<16|e[1]<<8|e[2])){var i=(e[4]<<8)+e[5];if(!i||!(i>e.length-6)){var o=e[7];return 192&o&&(t=(14&e[9])*536870912+(255&e[10])*4194304+(254&e[11])*16384+(255&e[12])*128+(254&e[13])/2,64&o?t-(n=(14&e[14])*536870912+(255&e[15])*4194304+(254&e[16])*16384+(255&e[17])*128+(254&e[18])/2)>60*9e4&&(t=n):n=t),{data:e.subarray(9+r),pts:t,dts:n}}}}}]),e}()},362753:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(58924),i=function(){function e(){(0,r.PA)(this,e),this.buffer=new Uint8Array(0)}return(0,r.qH)(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){t?e.buffer=function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach(function(e){t+=e.length});var o=new e(t),s=0;return r.forEach(function(e){o.set(e,s),s+=e.length}),o}(Uint8Array,e.buffer,t):window.console.warn(t)})}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}()},344856:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var r=n(188389),i=n(84775);function o(e){return(0,r.pi)((0,r.pi)({type:i.dw},e),{toJSON:function(){e.onDone,e.onError;var t=(0,r._T)(e,["onDone","onError"]);return(0,r.pi)((0,r.pi)({},t),{type:i.dw,src:function(e){if("string"==typeof e){var t={type:e};return t.toString=function(){return e},t}return e}(e.src)})}})}},314474:function(e,t,n){"use strict";e.exports=n.p+"static/image/tiktok-video-ad.cd38d0a6.png"},631322:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(69984),i=n(764112),o=n(772322);n(218571);var s=e=>(0,o.jsxs)("svg",(0,i._)((0,r._)({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),{children:[(0,o.jsx)("path",{fill:"url(#icon_svg__a)",fillRule:"evenodd",d:"M4.155 1.442a.165.165 0 0 0-.31 0l-.243.656c-.2.543-.629.97-1.171 1.172l-.656.242a.165.165 0 0 0 0 .31l.656.243c.542.2.97.629 1.171 1.172l.243.656a.165.165 0 0 0 .31 0l.243-.656c.2-.543.629-.971 1.171-1.172l.656-.243a.165.165 0 0 0 0-.31L5.57 3.27c-.542-.201-.97-.63-1.171-1.172zm7.579 2.496.943.942c.26.26.26.683 0 .943l-.956.956-1.886-1.886.956-.955c.26-.26.682-.26.943 0M8.893 5.836l-4.68 4.68v1.911h1.86l4.705-4.705zm4.726-1.898-.942-.943a2 2 0 0 0-2.829 0L3.074 9.768l-.195.196v3.797h3.746l.195-.196 6.8-6.799a2 2 0 0 0 0-2.828m-1.034 6.35a.097.097 0 0 1 .184-.007l.024.067a2.6 2.6 0 0 0 1.583 1.552c.092.032.093.164 0 .194a2.47 2.47 0 0 0-1.573 1.523l-.035.098a.096.096 0 0 1-.182-.007 2.32 2.32 0 0 0-1.58-1.607l-.033-.01a.098.098 0 0 1-.002-.188l.076-.024a2.34 2.34 0 0 0 1.538-1.591",clipRule:"evenodd"}),(0,o.jsx)("defs",{children:(0,o.jsxs)("linearGradient",{id:"icon_svg__a",x1:1.667,x2:14.445,y1:7.556,y2:7.556,gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#04BCE1"}),(0,o.jsx)("stop",{offset:1,stopColor:"#7357FF"})]})})]}))},161667:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(69984),i=n(764112),o=n(772322);n(218571);var s=e=>(0,o.jsxs)("svg",(0,i._)((0,r._)({xmlns:"http://www.w3.org/2000/svg",width:24,height:25,fill:"none",viewBox:"0 0 24 25"},e),{children:[(0,o.jsx)("path",{fill:"#fff",fillOpacity:.01,d:"M0 .133h24v24H0z"}),(0,o.jsx)("path",{fill:"#24A3FF",fillRule:"evenodd",d:"M9 3.133a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-14a2 2 0 0 0-2-2zM3.877 7.672 2.133 4.63l1.734-.995 2 3.487a1 1 0 0 1 .043.913L4.1 12l1.81 3.966a1 1 0 0 1-.028.885l-2 3.751-1.764-.94 1.767-3.315-1.795-3.932a1 1 0 0 1 0-.83zm16.246 0 1.744-3.042-1.734-.995-2 3.487a1 1 0 0 0-.043.913L19.9 12l-1.81 3.966a1 1 0 0 0 .028.885l2 3.751 1.764-.94-1.767-3.315 1.795-3.932a1 1 0 0 0 0-.83z",clipRule:"evenodd"})]}))},51380:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(69984),i=n(764112),o=n(772322);n(218571);var s=e=>(0,o.jsx)("svg",(0,i._)((0,r._)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),{children:(0,o.jsx)("path",{fill:"#090C14",fillRule:"evenodd",d:"M5 12h2v2a3 3 0 0 0 3 3h2v2a3 3 0 0 0 3 3h4a3 3 0 0 0 3-3v-4a3 3 0 0 0-3-3h-2v-2a3 3 0 0 0-3-3h-2V5a3 3 0 0 0-3-3H5a3 3 0 0 0-3 3v4a3 3 0 0 0 3 3m4-8H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h2a3 3 0 0 1 3-3V5a1 1 0 0 0-1-1m5 11a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1z",clipRule:"evenodd"})}))},692082:function(e,t,n){"use strict";var r=n(46395),i=n(622085);(0,r.cE)({App:i.Z})},651056:function(e,t,n){"use strict";let r=n("772322");n("34702"),n("598338");let i=n("676635"),o=n("167224"),s=n("941514");var a=(0,i.s)();(0,s.Z)(a,()=>(0,o.s)((0,r.jsx)(a,{}),"root"))},851633:function(e,t,n){"use strict";var r=n(46395),i=n(578795);(0,r.cE)({App:i.Z})},652189:function(e,t,n){"use strict";n.d(t,{k:function(){return S}});var r,i=n(461228),o=n(69984),s=n(764112),a=n(123951),c=n(121608),l=n.n(c),u=n(722169),d=n(91933),h=n(691716),p=n(555177),f=n(710799),m=n(72484),v={baseURL:"/commerce",method:"POST",headers:{appid:d.yM.APP_ID,loc:d.yM.CHANNEL,lan:a.ZP.language||d.yM.LAN,pf:d.yM.APP_PF,appvr:d.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":d.yM.APP_SDK_VERSION},useCommerceApi:!0},g=h.ZP.createAxios(v);g.interceptors.request.use(e=>{var{pf:t,appvr:n,tdid:r}=v.headers;return Object.assign(e.headers,(0,f.O)({url:"".concat(e.baseURL).concat(e.url),pf:t,appvr:n,tdid:r})),e}),g.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);var t,n,r,i=e.data;return"0"!==i.ret?Promise.reject(e):(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.url)&&e.config.url.indexOf("user_info")>0?Promise.resolve({data:i.data,signContext:{sign:i.sign,ret:i.ret,response:i.response,"device-time":null==e?void 0:null===(r=e.config)||void 0===r?void 0:null===(n=r.headers)||void 0===n?void 0:n["device-time"],systime:null==i?void 0:i.systime}}):Promise.resolve(i.data)}),(0,p.Z)(g,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});var _=e=>{var t=[];return Object.entries(e).forEach(e=>{(0,u.isNil)(e[1])||t.push("".concat(e[0],"=").concat(e[1]))}),t.join("&")},y=(r=(0,i._)(function*(e,t,r){var i=new(yield Promise.all([n.e("8583"),n.e("3173"),n.e("7716"),n.e("9680")]).then(n.bind(n,109670))).default;return i.setPublicKey(r),i.verify(e,t,l().SHA256)}),function(e,t,n){return r.apply(this,arguments)}),S={getSubscriptionUserInfo:e=>(0,i._)(function*(){var{data:t,signContext:n}=yield g({url:"/v1/subscription/user_info",data:{aid:d.yM.APP_ID,scene:"vip",from_db:e}}),r={appid:d.yM.APP_ID,appvr:d.yM.VERSION,"device-time":null==n?void 0:n["device-time"],pf:d.yM.APP_PF,response:null==n?void 0:n.response,ret:n.ret,systime:null==n?void 0:n.systime},{sign:i}=n;if(i){var o=yield y(_(r),i,"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1I/Ml9Qkp6reos86Tjbd1R6q+\nbQwviSEmZzqtrhfGI+iMGKA74XSctUu8ZnWhOKsG5+PujMrIJX2WMRP0E5lhJpCh\nfgK3aiNikvgigORzf0Lz39XS46eAHJrPbMaQiabDfd/+CjkvxbV+LW3oPdoZj9Mn\n38OEHt9qVkUlvpv76wIDAQAB\n-----END PUBLIC KEY-----");if(n.sign&&o)return t}throw Error("Error: Auth sign")})(),getEntrances:()=>(0,i._)(function*(){var e="/lv/v1/commerce/get_entrances",t=(0,f.O)((0,o._)({url:e},v.headers));return yield(0,m.Z)(()=>g({baseURL:"/",url:e,headers:(0,o._)({},t)}),{cacheKey:"promiseCache_getEntrances"})})(),getSpaceList:e=>(0,i._)(function*(){var t="/v1/subscription/workspace/space_list",n=(0,f.O)((0,o._)({url:t},v.headers)),r=yield g({url:t,headers:(0,o._)({},n),data:{aid:Number(d.yM.APP_ID),workspace_id:e}});return{spaceList:r.space_list,isFirstSubscribe:r.is_first_subscribe,isAutoSubscribe:r.is_auto_subscribe,isWebAutoSubscribe:r.is_web_auto_subscribe,isCancelSubscribe:r.is_cancel_subscribe,jointActivitySpaceList:r.joint_activity_space_list}})(),getPriceList:e=>(0,i._)(function*(){var t,n,r,i,a="/v1/subscription/cc_web_price_list",c=(0,f.O)((0,o._)({url:a},v.headers)),l={aid:Number(d.yM.APP_ID),scene:"workspace",region:e},[u,h]=yield(0,m.Z)(()=>Promise.all([g({url:a,headers:(0,o._)({},c),data:l}),g({url:a,headers:(0,o._)({},c),data:(0,s._)((0,o._)({},l),{scene:"web"})})]),{cacheKey:"promiseCache_getPriceList_".concat(JSON.stringify(l))}),p=(null!==(t=u.all_price_list)&&void 0!==t?t:[]).reduce((e,t)=>(e[t.product_id]=t,e),{}),_=(null!==(n=u.tab_list)&&void 0!==n?n:[]).map(e=>({as_default:e.as_default,products:e.product_ids.map(e=>p[e])}));return{allPriceList:[...null!==(r=u.all_price_list)&&void 0!==r?r:[],...null!==(i=h.all_price_list)&&void 0!==i?i:[]],groupProductList:_,ccWebDisplayInfo:u.cc_web_display_info}})(),getSubscriptionList:e=>(0,i._)(function*(){return yield g({url:"/v1/subscription/order_record_list",data:{aid:Number(d.yM.APP_ID),workspace_id:e,cursor:0,count:1}})})(),getVipPriceList(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return(0,i._)(function*(){var n,r,i={aid:d.yM.APP_ID,scene:"vip",region:e,language:t},o=yield(0,m.Z)(()=>g({url:"/v1/subscription/cc_price_list",data:i}),{cacheKey:"promiseCache_getSubscriptionPriceList_".concat(JSON.stringify(i))}),s={month:[],year:[]};return(null!==(n=o.all_price_list)&&void 0!==n?n:[]).forEach(e=>{var{cycle_unit:t,subscribe_cycle:n}=e;"MONTH"===t&&12!==n?s.month.push(e):s.year.push(e)}),{allVipPriceList:null!==(r=o.all_price_list)&&void 0!==r?r:[],vipGroupProductList:s,ccWebDisplayInfo:o.cc_web_display_info}})()},getSubscribeInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return(0,i._)(function*(){return yield g({url:"/v1/subscription/get_subscribe_info",data:{language:e}})})()}}},803497:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(461228),i=n(474250),o=n(500854),s=n(582021);function a(e){var t,n,r={url:e.baseURL&&e.url?(0,o.bV)(e.baseURL,e.url):"",method:null==e?void 0:null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),params:"string"==typeof e.params?JSON.parse(e.params):e.params,data:"string"==typeof e.data?JSON.parse(e.data):e.data,needCommonParams:!0,responseType:null!==(n=e.responseType)&&void 0!==n?n:"json"};return s.ZP.app.fetch(r)}function c(e){return l.apply(this,arguments)}function l(){return(l=(0,r._)(function*(e){var t=yield a(e);return new Promise((n,r)=>{if(1!==t.code)r(t);else try{var o={data:JSON.parse(t.data.response),status:t.data.status,config:e,request:a};(0,i.W)(n,r,o)}catch(e){r(e)}})})).apply(this,arguments)}},77587:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(772322);n(218571);var i=n(282893),o=n(793676),s=n(152155),a=n.n(s),c=n(454078),l=n(709650),u=n(123951),d=n(91933),h=n(434334),p=n(412784);n(843110);let f=e=>{var{thirdPartSignIn:t,isFromModal:n,showTeamInviteInfo:s,title:f,toEmailSignIn:m,toEmailLogIn:v}=e,g=(0,c.t)(),[_]=(0,i.L)(g);_.context.thirdPartSignInRef;var y=_.context.emailSignInRef,[,S]=(0,i.L)(y),b=(0,o.v)(y,e=>e.context.email),T=_.context.teamInviteRef,[E]=(0,i.L)(T),{workspaceInfo:x}=E.context,w=_.context.userInviteRef,[k]=(0,i.L)(w),{isInvitePage:C,invitedCode:R,inviteDetail:I}=k.context,N=C&&R,{isFromTeamInvite:O,isFromTeamApply:A}=(0,l.p)();return(0,r.jsx)("div",{className:a()("lv_sign_in_panel_wide_base_page",{modal:n}),children:(0,r.jsxs)("div",{className:"lv_sign_in_panel_wide_base_page-content",children:[!n&&(0,r.jsx)("img",{className:"lv_sign_in_panel_wide_base_page-logo",src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/capcut-logo-dark.png",width:119,height:"auto",draggable:!1,crossOrigin:"anonymous"}),(0,r.jsxs)("div",{className:"lv_sign_in_panel_wide_base_page-main-content",children:[(0,r.jsx)(()=>N?(0,r.jsx)(p.k,{inviterImg:null==I?void 0:I.inviterImg,invitedSpaceCap:null==I?void 0:I.invitedSpaceCap,inviterName:null==I?void 0:I.inviterName}):O?(0,r.jsx)(p.Z,{type:"invite",joinInfo:{workspaceName:null==x?void 0:x.name,inviterNickName:null==x?void 0:x.inviter_nickname}}):A?(0,r.jsx)(p.Z,{type:"apply"}):(0,r.jsx)("h2",{className:"lv_sign_in_panel_wide_base_page-title",children:(null==f?void 0:f.length)?f:u.oc.t("web_signin_title_signin_capcut",{},"Welcome to CapCut")}),{}),!n&&!s&&!N&&(0,r.jsx)("div",{className:"lv_sign_in_panel_wide_base_page-subtitle",children:u.oc.t("web_signin_desc_signin_capcut",{},"Sign in to unlock all features")}),t,(0,r.jsx)("div",{className:"lv_sign_in_panel_wide_base_page-or-line",children:(0,r.jsx)("div",{className:"lv_sign_in_panel_wide_base_page-or-line-label",children:u.oc.t("web_signin_text_other_ways_signin",{},"OR")})}),(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{send:S,email:b,toEmailSignIn:m,toEmailLogIn:v})})]}),(0,r.jsx)("div",{className:"lv_sign_in_panel_wide-policy",children:u.oc.t("web_signin_text_continue_agreement",{strong0:e=>e,href0:e=>{var t;return(0,r.jsx)("a",{target:"__blank",id:"termsOfCapCut",href:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(d.yM.TERMS_OF_CAPCUT({region:null===(t=_.context.userInfo)||void 0===t?void 0:t.region,lang:u.oc.language}),null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),className:"policy",children:e},"terms-of-user")},href1:e=>{var t;return(0,r.jsx)("a",{target:"_blank",id:"privacyPolicy",href:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(d.yM.PRIVACY_POLICY({region:null===(t=_.context.userInfo)||void 0===t?void 0:t.region,lang:u.oc.language}),null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),className:"policy",rel:"noreferrer",children:e},"privacy-policy")}},"By clicking <strong0>Continue</strong0>, you accept the <href0>Terms of Use</href0> and <href1>Privacy Policy</href1>.")})]})})}},269836:function(e,t,n){"use strict";n.d(t,{z:function(){return r}}),n(772322),n(907488),n(218571),n(948233);var r="js-ssr-user-avatar"},275986:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(772322);n(445175),n(529114);var i=n(429907),o=n(595051),s=n(218571),a=n(123951),c=n(152155),l=n.n(c),u=n(123688),d=n(437069);n(603026);var h=n(282893),p=n(793676),f=n(454078);let m=e=>{var{send:t,email:n,onBack:c}=e,[m,v]=(0,s.useState)(0),[g,_]=(0,s.useState)(""),[y,S]=(0,s.useState)(!1),b=(0,s.useRef)(null),T=(0,f.t)(),[E]=(0,h.L)(T),x=E.context.newEmailSignInRef,w=(0,p.v)(x,e=>e.context.resendEmailCodeCountDown);return(0,s.useEffect)(()=>{S(0!==m&&0!==w)},[m,w]),(0,s.useEffect)(()=>{var e,t;null===(t=b.current)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t)},[]),(0,r.jsxs)("div",{className:l()("lv_new_forget_pwd_panel-content","lv_new_forget_pwd_panel_email_fill"),children:[(0,r.jsx)(d.Z,{onClick:c,text:a.oc.t("web_accounts_title_forgot_password",{},"Forget Password")}),(0,r.jsx)("div",{className:"lv_new_forget_pwd_panel-title lv_new_forget_pwd_panel-title-reset",children:a.oc.t("web_signin_title_reset_password",{},"Reset password")}),(0,r.jsx)("div",{className:"lv_new_forget_pwd_panel-description lv_new_forget_pwd_panel-description-reset",children:a.oc.t("web_signin_desc_reset_password",{},"We\u2019ll email you a link to reset your password.")}),(0,r.jsx)(i.Z,{ref:b,value:n,onChange:e=>{t({type:"SAVE_EMAIL",email:e})},onBlur:()=>{n&&!u.s9.test(n)?_(a.oc.t("web_signin_error_text_invalid_email",{},"Enter a valid email")):_("")},className:l()("lv_new_forget_pwd_panel-input",{"lv_new_sign_in_panel_wide-input-warn":""!==g}),placeholder:a.oc.t("web_signin_placeholder_enter_email_reset",{},"Enter email")}),""!==g?(0,r.jsx)("div",{className:"lv_new_forget_pwd_panel-warn",children:g}):null,(0,r.jsx)(o.Z,{disabled:y,onClick:()=>{if(!n||!u.s9.test(n.trim())){_(a.oc.t("email_contain_at"));return}S(!0),v(m+1),t({type:"INIT_RESET_EMAIL_ERROR_CB",func:e=>{_(e.description),v(0)}}),t({type:"SEND_EMAIL",email:n,emailNotRegisterCb:()=>{_(a.oc.t("email_contain_at"))},onError:()=>{S(!1)}})},type:"primary",className:l()("lv_new_forget_pwd_panel-btn lv_new_forget_pwd_panel-btn-reset lv_new_sign_in_panel_wide-primary-button",{"lv_new_forget_pwd_panel-email-warn":""!==g}),children:a.oc.t("web_signin_button_confirm_password",{},"Confirm")})]})}},382838:function(e,t,n){"use strict";n.d(t,{uL:function(){return u}});var r=n(69984),i=n(208282),o=n(174800),s=n(593062),a=n(722169),c="capcut_locale";function l(){var e={};return function t(n){if(n instanceof Array){n.forEach(e=>t(e));return}if(n instanceof Object){if(n.PATH&&void 0!==n.HAS_LOCALE_PREFIX){e[n.PATH]={matcher:n.MATCHER,hasLocalePrefix:n.HAS_LOCALE_PREFIX};return}t(Object.values(n))}}(i.l),e}class u{static setQueryLocale(e,t){if(null==t?void 0:t.fuzzyMatch){var n=u.getMachLocale(e);n&&(u.queryLocale=n);return}u.validateLocale(e)&&(u.queryLocale=e)}static getLocalPrefix(e){var t;for(var{locale:n,pathPrefix:r}of this.getSupportLocales()){var i="/".concat(r,"/");if(e.startsWith(i)){t=n;break}}return t}static getPathPrefix(e){var t;for(var{pathPrefix:n}of this.getSupportLocales()){var r="/".concat(n,"/");if(e.startsWith(r))return n}return t}static isValidLocalPath(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forceLocal:!1},n=this.getPathPrefix(e),r=Object.entries(l()).map(e=>{var[t,{matcher:n,hasLocalePrefix:r}]=e;return{hasLocalePrefix:r,route:t,matcher:(0,s.EQ)(t,{decode:decodeURIComponent}),localMatcher:(0,s.EQ)(n,{decode:decodeURIComponent})}}),i=0;i<r.length;i++){var o=r[i];if(o.matcher(e)&&!n){if(t.forceLocal)return o.hasLocalePrefix;return!0}if(o.hasLocalePrefix&&o.localMatcher(e))return!!n}return!1}static formatRoutePath(e){var t,{locale:n,path:r,forceAddLocalePrefix:i=!1}=e,a=!1;"en"===n||(null==n?void 0:n.includes("-"))?n===o.Gp&&(n=o.zE.Spanish.key):n=Object.values(o.zE).map(e=>e.key).find(e=>e.startsWith(n))||n;var c=this.getSupportLocales();if(!o.gE[n]&&"en"!==n)return r;for(var{pathPrefix:u}of c)if(u){var d="/".concat(u,"/");if(r.startsWith(d)){r=r.replace(d,"/"),a=!0;break}}if(i||a)return o.gE[n]?"/".concat(o.gE[n]).concat(r):r;for(var h=l(),p=Object.keys(h),f=p.map(e=>(0,s.EQ)(e,{decode:decodeURIComponent})),m=0;m<f.length;m++)if(f[m](null==r?void 0:null===(t=r.split("?"))||void 0===t?void 0:t[0])){if(h[p[m]].hasLocalePrefix)return o.gE[n]?"/".concat(o.gE[n]).concat(r):r;break}return r}static getOriginalPath(e){var t=this.getPathPrefix(e);return t?e.replace(new RegExp("^/".concat(t)),""):e}static getOriginalUrl(e){for(var{pathPrefix:t}of this.getSupportLocales())if(t&&e.includes(t))return e.replace(new RegExp("/".concat(t)),"");return e}static getSupportLocales(){return Object.values(o.zE).filter(e=>!e.disable).map(e=>{var{key:t,text:n,pathPrefix:r,matcher:i}=e;return{locale:t,pathPrefix:r,text:n,matcher:i}})}static getHreflangLocales(){var e=u.getSupportLocales(),t={[o.zE.Spanish.key]:o.Gp,[o.zE.Filipino.key]:"tl-PH",[o.zE.TraditionalChinese.key]:"zh-TW"};return(0,a.flatten)(e.map(e=>{var n={locale:e.locale,hreflang:e.locale},r=[];return t[n.locale]&&(n.hreflang=t[e.locale]),n.hreflang.includes("-")&&r.push({locale:n.locale,hreflang:n.hreflang.substring(0,n.hreflang.indexOf("-"))}),r.push(n),r}))}static validateLocale(e,t){return!!e&&!!u.getSupportLocales().find(n=>!!((null==t?void 0:t.fuzzyMatch)&&n.matcher.test(e.toLowerCase()))||n.locale===e)}static getMachLocale(e){var t;return null===(t=u.getSupportLocales().find(t=>t.matcher.test(e.toLowerCase())))||void 0===t?void 0:t.locale}getCurrentLocale(){var{localeFix:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{localeFix:!1};return u.queryLocale?u.queryLocale:e||this.locale!==o.Gp?e&&this.locale===o.zE.Spanish.key?o.Gp:this.locale:o.zE.Spanish.key}setCurrentLocale(e,t){(null==t?void 0:t.disableCookie)||this._setCookie(e),this.locale=e}getSupportLocales(){return u.getSupportLocales()}formatLocalePath(e){var t={forceAddLocalePrefix:!1,locale:this.getCurrentLocale()},n=(0,r._)({},t,e),{path:i}=n;if(!i.startsWith("/"))throw Error("path invalid, please confirm its startsWith /");var{locale:o,forceAddLocalePrefix:s}=n;return u.formatRoutePath({locale:o,path:i,forceAddLocalePrefix:s})}_initLocale(){var{cookieName:e,defaultLocale:t,getBrowserLang:n,cookieGetter:r}=this.options;if(this.isBrowser()){var i=u.getLocalPrefix(window.location.pathname);if(i){this.locale=i===o.Gp?o.zE.Spanish.key:i,r(e)||this._setCookie(i);return}}var s=r(e);if(s&&u.validateLocale(s)){this.locale=s;return}var a=this._formatLocale(n());a||(a=t),this.locale=a,this._setCookie(a)}_setCookie(e){var{cookieName:t,cookieSetter:n,isServer:r}=this.options;n(t,e,r?{maxAge:34128e6,httpOnly:!1,secure:!1,overwrite:!0}:{expires:395})}_formatLocale(e){if(!e||u.validateLocale(e))return e;for(var t of Object.values(o.zE)){var{key:n,matcher:r}=t;if(n===e||e.match(r))return n}}_listenCookieChange(){}isBrowser(){return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement}constructor(e){this.options=Object.assign({},{defaultLocale:"en",isServer:!1},e,{cookieName:c}),this.options.locale&&u.validateLocale(this.options.locale)?this.locale=this.options.locale:this._initLocale(),this._listenCookieChange()}}u.CookieName=c,u.queryLocale=void 0},37055:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthThirdPartyPlatform:function(){return x.BM},BindPassport:function(){return x.cv},CancelPassport:function(){return x.RY},SEND_CODE_TYPE:function(){return i},VerifyPassport:function(){return x.NL},default:function(){return w}});var r,i,o=n(461228),s=n(69984),a=n(764112),c=n(123951),l=n(89212),u=n(232146),d=n.n(u),h=n(593553),p=n(208282),f=n(91933),m=n(829303),v=n(269466),g=n(639680),_=n(7671),y=n(149318),S=n(956830),b=n(892949),T=n(638175),E=n(676113),x=n(817623);(r=i||(i={}))[r.REGISTER=1]="REGISTER",r[r.REGISTER_RETRY=2]="REGISTER_RETRY";class w{checkLogin(){var e=this;return(0,o._)(function*(){return yield e.sdk.login.checkLogin({})})()}checkEmailHasRegister(e){var t=this;return(0,o._)(function*(){return yield t._domainHelper.updateRegionByEmail(e),yield t.sdk.extra.checkEmailRegistered({email:e})})()}sendEmailCode(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this;return(0,o._)(function*(){return yield r._domainHelper.updateRegionByEmail(e),yield r.sdk.login.sendEmailCode({email:e,password:t,extra_params:{type:n}})})()}emailCodeVerify(e,t){var n=this;return(0,o._)(function*(){return yield n.sdk.request({url:"/passport/web/email/register/code_verify",method:"POST",data:(0,l.J4)({email:e,code:t,type:1},["email","code","type"])})})()}emailRegister(e,t,n,r,i,a){var c=this;return(0,o._)(function*(){yield c._domainHelper.updateRegionByEmail(e);var o=c.regionExtraParams();return yield c.sdk.login.emailRegister({email:e,password:t,code:n,extra_params:(0,s._)({email_ticket:null==a?void 0:a.emailTicket,birthday:r,force_user_region:i,biz_param:{invite_code:null==a?void 0:a.invitedCode}},o),ifLogin:!0})})()}emailLogin(e,t){var n=this;return(0,o._)(function*(){yield n._domainHelper.updateRegionByEmail(e);var r=n.regionExtraParams();return yield n.sdk.login.emailLogin({email:e,password:t,extra_params:(0,s._)({},r)})})()}cancelLogin(e,t){var n=this;return(0,o._)(function*(){return yield n.sdk.request({url:"/passport/web/cancel/login",method:"POST",data:{token:e,restoreType:t}})})()}sendForgetPwdEmailCode(e,t){var n=this;return(0,o._)(function*(){return yield n._domainHelper.updateRegionByEmail(e),yield n.sdk.verify.notLoginSendEmailCode({email:e,extra_params:{type:4,next:t}})})()}validateForgetPwdCode(e,t){var n=this;return(0,o._)(function*(){return yield n._domainHelper.updateRegionByEmail(e),yield n.sdk.verify.notLoginValidateEmail({email:e,code:t,extra_params:{type:4}})})()}resetForgetPwd(e,t){var n=this;return(0,o._)(function*(){return yield n.sdk.forgetPwd.resetPwdByEmailTicket({ticket:e,password:t})})()}getQRCode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.sdk.qrcodeLogin.getQrcode({next:e})}checkQrconnect(e){var t=this;return(0,o._)(function*(){e.extra_params=t.regionExtraParams();try{return yield t.sdk.qrcodeLogin.checkQrconnect(e)}catch(e){var{country_code:n,domain:r}=e;if("us"===n&&"string"==typeof r)return t._domainHelper.updateRegionByQR({country_code:n,domain:r}),{status:"new"};throw e}})()}uploadAvatar(e){var t=this;return(0,o._)(function*(){return yield t.sdk.request({url:"/user/update/upload_avatar",method:"POST",data:e})})()}signin(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,window.location.href=globalThis.xssNamespace["lvweb/smart-tools"].filterUrl("".concat(window.location.origin).concat(p.l.LOGIN.PATH),null,{logType:"js.window.location",mode:"black",reportOnly:"all"})}signinWithWindow(e,t,n){var r=window.screen.height,i=window.screen.width,o="".concat(location.origin,"/passport/web/web_login"),s="".concat(location.origin,"/lv/v1/user/web/login/third_callback"),a="".concat(s).concat((null==n?void 0:n.isInvitePage)?"?invite_code=".concat(null==n?void 0:n.invitedCode):"");return window.open("".concat(o,"?account_sdk_source=web&aid=").concat(null!=t?t:f.yM.APP_ID,"&next=").concat(encodeURIComponent(a),"&platform_app_id=").concat(e,"&use_local_host=1&action=").concat((null==n?void 0:n.loginOnly)?"login_only":"undefined","&scopes=email"),"name=login","fullscreen=1,width=".concat(800,",height=").concat(600,",top=").concat((r-30-600)/2,",left=").concat((i-800)/2))}signinWithCode(e){var t=this;return(0,o._)(function*(){var n=t.regionExtraParams();if(e.extra_params=(0,s._)({},e.extra_params,n),"tiktok"===e.name&&e.code){var{access_token:r}=yield(0,m.hP)({code:e.code,appName:e.appName});if(!r)throw Error("[passport] bad access_token");var{user:i}=yield(0,m.$W)(r);if(!i)throw Error("[passport] bad tt user info");var{union_id:o,open_id:a}=i;if(!o)throw Error("[passport] bad tt union_id");yield t._domainHelper.updateRegionByOpenId(o),delete e.code,e.access_token=r;var c={access_token:r,openid:a,platform_app_id:e.platform_app_id};return t.authSignIn(c,e)}if("google"===e.name&&e.access_token_secret){var{sub:l}=(0,h.o)(e.access_token_secret);if(!l)throw Error("[passport] bad jwt");yield t._domainHelper.updateRegionByOpenId(l);var u={access_token_secret:e.access_token_secret,platform_app_id:e.platform_app_id};return t.authSignIn(u,e)}if("facebook"===e.name&&e.access_token&&e.openid){yield t._domainHelper.updateRegionByOpenId(e.openid);var d={access_token:e.access_token,openid:e.openid,platform_app_id:e.platform_app_id};return t.authSignIn(d,e)}return t.authSignIn(e,e)})()}scanLoginWithWindow(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.screen.height,r=window.screen.width,i="".concat(location.origin).concat(p.l.SCAN_QR_CODE.PATH).concat((0,v.n)((0,a._)((0,s._)({},t),{scan_type:e})));return window.open(i,"name=login","fullscreen=1,width=".concat(680,",height=").concat(513,",top=").concat((n-30-513)/2,",left=").concat((r-680)/2))}transferTokenAuth(e){var t=this;return(0,o._)(function*(){yield t._domainHelper.updateDomainByRegion(e.country_code);var n=new FormData;n.append("aid",f.yM.APP_ID),n.append("token",e.token),n.append("state",e.state);var r=yield E.Z.request({url:"/passport/transfer/token_auth/",baseURL:t._domainHelper.baseURL,method:"POST",data:n,params:t.regionExtraParams()});if(200!==r.status)throw Error("[passport] status:".concat(r.status));return r.data})()}signout(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;this.sdk.login.logout({next:e})}getAccountInfo(){return this.sdk.account.getAccountInfo({})}regionExtraParams(){var e;return(null===(e=window._libra_abtest_uuid)||void 0===e?void 0:e.enable_looki_passport)===!0?{check_region:"1"}:{}}constructor(e){var t,n=this;this.authSignIn=(t=(0,o._)(function*(e,t){if(t.login_only)return n.sdk.login.authLogin(t);try{return yield n.bindPassportSdk.thirdpartySignInWithBindEmail(e)}catch(e){return n.sdk.login.authLogin(t)}}),function(e,n){return t.apply(this,arguments)});var r=this.regionExtraParams();this.aid=e.aid||Number(f.yM.APP_ID);var i=new(d())((0,a._)((0,s._)({},e),{aid:this.aid,scene:e.scene||"normal",region:f.yM.CHANNEL,captchaHost:e.isBoe?"//boei18n-verify.".concat((0,g.vK)(),"/"):"",language:c.ZP.language||f.yM.LAN,requestInterceptors:[e=>((null==e?void 0:e.url)==="/passport/web/region/"?e.baseURL=this._domainHelper.defaultBaseURL:(e.params=(0,s._)({},e.params,r),e.baseURL=this._domainHelper.baseURL),Promise.resolve(e))]}));this.sdk=i,this.cancelPassportSdk=new _.R(i),this.verifyPassportSdk=new y.N(i),this.bindPassportSdk=new S.c(i,this.aid),this.affPassportSdk=new b.a(i,this.aid),this._domainHelper=new T.C(i)}}},901058:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r,i=n(334274);class o{start(){(0,i.$3)(),this.setGtag("accept_cookie"),this.sendCache()}report(e,t,n){if(!e.checkEnableReport()&&(0,i.cb)()){this.cachedEvents.add({eventName:t,options:n});return}this.cachedEvents.size>0&&this.sendCache(),this.setGtag(t,n)}sendCache(){this.cachedEvents.forEach(e=>{this.setGtag(e.eventName,null==e?void 0:e.options)}),this.cachedEvents.clear()}setGtag(e,t){(0,i.k7)("event",e,t)}constructor(){this.cachedEvents=new Set}}var s=()=>(r||(r=new o),r)},635272:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(554269);class i{report(e,t){var{immediately:n}=t||{};n?this.reporter.reportBecon("aigc_report_entrance",e):this.reporter.report("aigc_report_entrance",e)}constructor(){this.reporter=(0,r.y)()}}},453154:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(554269);class i{report(e){this.reporter.report("edm_status",e)}constructor(){this.reporter=(0,r.y)()}}},123688:function(e,t,n){"use strict";n.d(t,{GH:function(){return v},Jt:function(){return R},L4:function(){return m},lI:function(){return C},s9:function(){return k},tF:function(){return w}});var r,i,o,s,a,c,l,u,d,h,p,f,m,v,g=n(461228),_=n(69984),y=n(806061),S=n(736951),b=n(37055),T=n(124656),E=n(911632),x=n(208282);(r=m||(m={}))[r.FILL_IN_BASE_INFO=0]="FILL_IN_BASE_INFO",r[r.ENTER_BIRTHDAY=1]="ENTER_BIRTHDAY",r[r.ENTER_VERIFICATION_CODE=2]="ENTER_VERIFICATION_CODE",r[r.FORGET_PWD_INFO=3]="FORGET_PWD_INFO",(i=v||(v={}))[i.FillInEmail=0]="FillInEmail",i[i.ResendEmail=1]="ResendEmail",i[i.ResetPwd=2]="ResetPwd";var w=60,k=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,C=/^[\w ~!@#$%^&*()+,.:;=<>?/|\-[\]\\]{6,20}$/,R=(0,y.C)({id:"emailSignIn",initial:"signUp",context:{isBOE:!1,passport:()=>Promise.resolve(null),isNewSignupUser:!1,source:T.C.SignUp,currentWindow:0,email:"",password:"",birthday:"",region:"",code:"",ticket:"",sendCodetype:b.SEND_CODE_TYPE.REGISTER,resendEmailCodeCountDown:w,emailHasRegisterCb:void 0,sendEmailCodeErrorCb:void 0,sendEmailCodeSuccessCb:void 0,verificationCodeErrorCb:void 0,registerErrorCb:void 0,loginErrorCb:void 0,pageEnterFrom:"",currentPage:""},entry:"start",states:{signUp:{entry:"saveSignUpType",initial:"fillInRegisterInfo",states:{fillInRegisterInfo:{entry:(0,S.f0)({currentWindow:0}),on:{NEXT:{target:"checkingEmailHasRegister",actions:["reportSignUpAction"]},SKIP_TO_ENTER_BIRTHDAY:{target:"enterBirthday"},SAVE_EMAIL:{actions:"saveEmail"},SAVE_PASSWORD:{actions:"savePassword"}}},checkingEmailHasRegister:{entry:"saveSignInInfo",invoke:{id:"fetchEmailNotRegister",src:"fetchEmailNotRegister",onDone:{target:"enterBirthday"},onError:{target:"fillInRegisterInfo"}}},enterBirthday:{entry:(0,S.f0)({currentWindow:1}),on:{CONFIRM_BIRTHDAY:{target:"sendingEmailCode",actions:["updateBirthday"]},RETURN_SIGN_IN:{target:"fillInRegisterInfo",actions:["clearBirthday"]}}},sendingEmailCode:{id:"sendingEmailCode",invoke:{id:"fetchSendEmailCode",src:"fetchSendEmailCode",onDone:{actions:["initCountDown"],target:"enterVerificationCode"},onError:{actions:"notifySendEmailCodeError"}},on:{BACK_TO_ENTER_CODE:"enterVerificationCode",BACK_TO_FILL_REGISTER_INFO:"fillInRegisterInfo"}},enterVerificationCode:{entry:(0,S.f0)({currentWindow:2}),initial:"countingDown",states:{countingDown:{invoke:{id:"execCountingDown",src:"execCountingDown"},on:{UPDATE_COUNT_DOWN:{actions:"updateCountDown"},COUNT_DOWN_ZERO:{target:"allowResendVerificationCode"}}},allowResendVerificationCode:{on:{RESEND:{target:"#sendingEmailCode"}}}},on:{CONFIRM_REGISTER:{target:"registering",actions:["reportComfirmAction"]},BACK_TO_LOGIN:{target:"fillInRegisterInfo"},BACK_TO_BIRTHDAY:{target:"enterBirthday"}}},registering:{invoke:{id:"fetchEmailCodeRegister",src:"fetchEmailCodeRegister",onDone:{actions:["notifySignSuccess","storeIsNewSignupUser"],target:"#signInSuccess"},onError:{actions:["notifyRegisterError",(0,S.lj)((e,t)=>{var n,r;return{type:"SIGN_IN_FAIL",params:{source:T.C.SignUp,type:"email",errorCode:null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.errro_code,errorMsg:null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description}}})],target:"enterVerificationCode"}}}}},signIn:{entry:"saveSignInType",initial:"fillInSignInInfo",states:{fillInSignInInfo:{entry:(0,S.f0)({currentWindow:0}),on:{CONFIRM_SIGN:{target:"signing",actions:["reportLoginAction"]},SAVE_EMAIL:{actions:"saveEmail"},RESTORE_ACCOUNT:{target:"restore"}}},signing:{entry:"saveSignInInfo",invoke:{id:"fetchEmailCodeLogin",src:"fetchEmailCodeLogin",onDone:{actions:["notifySignSuccess"],target:"#signInSuccess"},onError:{actions:["notifyLogInError",(0,S.lj)((e,t)=>{var n,r,i;return{type:"SIGN_IN_FAIL",params:{source:T.C.LoginIn,type:"email",errorCode:null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.error_code,errorMsg:null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description,verifyTicket:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.verify_ticket}}})],target:"fillInSignInInfo"}}},restore:{entry:"saveSignInInfo",invoke:{id:"fetchRestoreAccount",src:"fetchRestoreAccount",onDone:{actions:["notifySignSuccess"],target:"#signInSuccess"},onError:{actions:["notifyLogInError"],target:"fillInSignInInfo"}}}}},signInSuccess:{id:"signInSuccess",type:"final",entry:(0,S.lj)(e=>({type:"SIGN_IN_SUCCESS",params:{source:e.source,type:"email",isLoginNewUser:e.isNewSignupUser?1:0},extra:{isNewSignupUser:e.isNewSignupUser}}))},forgetPwd:{entry:"saveForgetType",initial:"idle",states:{idle:{on:{TO_SEND_RESET_EMAIL_INFO:{target:"fillInResetEmailInfo",actions:["reportFillInResetEmailInfo","initSendEmailInfo"]},TO_RESET_PASSWORD:{actions:"initResetEmailCodeErrorCb",target:"checkResetCode"},SAVE_PWD_CODE:{actions:["initSaveCodeAndEmail"]}}},fillInResetEmailInfo:{id:"fillInResetEmailInfo",on:{SEND_EMAIL:{actions:["reportSendEmail"],target:"checkingResetEmailHasRegister"},SAVE_EMAIL:{actions:["saveEmail"]},BACK_SIGN_IN:{actions:["reportBack"]},INIT_RESET_EMAIL_ERROR_CB:{actions:["initResetEmailErrorCb"]}}},checkingResetEmailHasRegister:{entry:"syncGetParentContext",id:"checkingResetEmailHasRegister",invoke:{id:"checkingResetEmailHasRegister",src:"fetchEmailRegister",onDone:{target:"sendResetEmailCode"},onError:{target:"fillInResetEmailInfo"}}},sendResetEmailCode:{id:"sendResetEmailCode",invoke:{id:"fetchSendResetEmailCode",src:"fetchSendResetEmailCode",onDone:{actions:["intoResendEmailProcess"],target:"resetTimeCounting"},onError:{target:"fillInResetEmailInfo"}}},resetTimeCounting:{initial:"countingDown",entry:"initCountDown",states:{countingDown:{invoke:{id:"execCountingDown",src:"execCountingDown"},on:{UPDATE_COUNT_DOWN:{actions:"updateCountDown"},COUNT_DOWN_ZERO:{target:"allowResendResetEmail"},BACK_SIGN_IN:{actions:["reportBack"]},TO_SEND_RESET_EMAIL_INFO:{target:"#fillInResetEmailInfo",actions:["reportFillInResetEmailInfo","initSendEmailInfo"]}}},allowResendResetEmail:{on:{RESEND:{actions:["reportResendEmail"],target:"#sendResetEmailCode"},BACK_SIGN_IN:{actions:["reportBack"]}}}},on:{BACK_SIGN_IN:{actions:["reportBack"]}}},checkResetCode:{invoke:{id:"checkResetCode",src:"checkResetCode",onDone:{target:"resetPassword",actions:["intoResetPwdProcess","saveTicket"]},onError:{actions:["cleanEmail","notifyCheckResetCodeError"]}}},resetPassword:{on:{CONFIRM_PASSWORD:{target:"sendConfirmReset"},BACK_SIGN_IN:{actions:["cleanEmail","reportBack"]},INIT_RESET_SUCCESS_CB:{actions:["initResestSuccessCb"]}}},sendConfirmReset:{invoke:{id:"execSendConfirmReset",src:"execSendConfirmReset",onDone:{target:"#signInSuccess",actions:["reportSendConfirmResetPwd","notifyResetSuccessCb"]},onError:{actions:"notifySendConfirmResetError"}}}}}},on:{CHECK_EMAIL_HAS_REGISTER:{actions:"checkEmailHasRegister"},MOBILE_TO_SIGN_IN:{target:"signIn",actions:["reportChangeToLoginPage","reportLoginPageShow"]},MOBILE_TO_SIGN_UP:{target:"signUp",actions:["reportChangeToSignUpPage","reportSignUpPageShow"]},MOBILE_TO_SIGN_IN_EMAIL:{target:"signIn"},MOBILE_TO_SIGN_UP_EMAIL:{target:"signUp"},TO_SIGN_IN:{target:"signIn",actions:["reportLoginPageShow"]},TO_SIGN_UP:{target:"signUp",actions:["reportSignUpPageShow"]},TO_FORGET_PWD:{target:"forgetPwd"},INIT_REGISTER_ERROR_CB:{actions:"initRegisterErrorCb"},INIT_LOGIN_ERROR_CB:{actions:"initLoginErrorCb"},INIT_SEND_CODE_ERROR_CB:{actions:"initSendEmailCodeErrorCb"},INIT_LOGIN_SUCCESS_CB:{actions:"initLoginSuccessCb"},INIT_EMAIL_SEND_PARAMS:{actions:"initEmailSendParams"},REPORT_SIGN_IN_ACTION:{actions:(0,S.lj)((e,t)=>({type:"SIGN_IN_ACTION",params:{source:e.source,action:t.action}}))},CHANGE_CONTEXT:{actions:["changeContext"]}}},{actions:{start:()=>{},saveSignInType:(0,S.f0)({source:e=>T.C.LoginIn}),saveSignUpType:(0,S.f0)({source:e=>T.C.SignUp}),saveForgetType:(0,S.f0)({source:e=>T.C.LoginIn,currentWindow:e=>3}),saveSignInInfo:(0,S.f0)({email:(e,t)=>{var n;return null===(n=t.email)||void 0===n?void 0:n.trim()},password:(e,t)=>t.password}),saveEmail:(0,S.f0)({email:(e,t)=>{var n;return null===(n=t.email)||void 0===n?void 0:n.trim()}}),savePassword:(0,S.f0)({password:(e,t)=>t.password}),saveStep:(0,S.f0)({step:(e,t)=>t.step}),saveTicket:(0,S.f0)({ticket:(e,t)=>t.data.ticket}),storeIsNewSignupUser:(0,S.f0)({isNewSignupUser:(e,t)=>!0}),initSaveCodeAndEmail:(0,S.f0)({code:(e,t)=>t.code,email:(e,t)=>{var n;return null===(n=t.email)||void 0===n?void 0:n.trim()}}),initRegisterErrorCb:(0,S.f0)({registerErrorCb:(e,t)=>t.func}),initLoginErrorCb:(0,S.f0)({loginErrorCb:(e,t)=>t.func}),initSendEmailCodeErrorCb:(0,S.f0)({sendEmailCodeErrorCb:(e,t)=>t.func}),initLoginSuccessCb:(0,S.f0)({loginSuccessCb:(e,t)=>t.func}),initResetEmailErrorCb:(0,S.f0)({sendResetEmailErrorCb:(e,t)=>t.func}),initResestSuccessCb:(0,S.f0)({sendResetSuccessCb:(e,t)=>t.func}),initResetEmailCodeErrorCb:(0,S.f0)({validateResetEmailCodeCb:(e,t)=>t.func}),initEmailSendParams:(0,S.f0)({pageEnterFrom:(e,t)=>t.pageEnterFrom,currentPage:(e,t)=>t.currentPage}),initSendEmailInfo:(0,S.f0)({step:e=>0}),notifyResetSuccessCb:e=>{var t;null===(t=e.sendResetSuccessCb)||void 0===t||t.call(e)},notifySendResetEmailCodeError:()=>{},notifySendEmailCodeError:(e,t)=>{var n;null===(n=e.sendEmailCodeErrorCb)||void 0===n||n.call(e,{data:Error(t.data.error_code)})},notifySendEmailCodeSuccess:e=>{var t;null===(t=e.sendEmailCodeSuccessCb)||void 0===t||t.call(e)},initCountDown:(0,S.f0)({resendEmailCodeCountDown:()=>w}),notifyVerificationCodeError:e=>{var t;null===(t=e.verificationCodeErrorCb)||void 0===t||t.call(e)},notifyLogInError:(e,t)=>{var n,r;null==e||null===(r=e.loginErrorCb)||void 0===r||r.call(e,{data:Error(t.data.error_code)},null===(n=t.data)||void 0===n?void 0:n.token)},notifyRegisterError:(e,t)=>{var n;null==e||null===(n=e.registerErrorCb)||void 0===n||n.call(e,{data:Error(t.data.error_code)})},notifySignSuccess:e=>{var t;null==e||null===(t=e.loginSuccessCb)||void 0===t||t.call(e)},notifyCheckResetCodeError:e=>{var t;null==e||null===(t=e.validateResetEmailCodeCb)||void 0===t||t.call(e)},updateCountDown:(0,S.f0)({resendEmailCodeCountDown:(e,t)=>t.data}),reportLoginPageShow:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.LoginIn,action:"show"}}),reportSignUpPageShow:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.SignUp,action:"show"}}),reportChangeToLoginPage:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.SignUp,action:"log_in"}}),reportChangeToSignUpPage:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.LoginIn,action:"sign_up"}}),changeContext:(0,S.f0)((e,t)=>(0,_._)({},e,t.context)),reportLoginAction:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.LoginIn,action:"log_in"}}),reportSignUpAction:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.SignUp,action:"sign_up"}}),reportComfirmAction:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.SignUp,action:"confirm"}}),reportFillInResetEmailInfo:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.LoginIn,action:"forgot_password"}}),reportSendEmail:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.LoginIn,action:"confirm_email"}}),reportBack:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.LoginIn,action:"back"}}),reportResendEmail:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.LoginIn,action:"resend_email"}}),reportSendConfirmResetPwd:(0,S.lj)({type:"SIGN_IN_ACTION",params:{source:T.C.LoginIn,action:"confirm_password"}}),syncGetParentContext:(0,S.lj)({type:"SYNC_CONTEXT"}),updateBirthday:(0,S.f0)({birthday:(e,t)=>t.value,region:(e,t)=>t.region}),clearBirthday:(0,S.f0)({birthday:()=>""}),cleanEmail:(0,S.f0)({email:()=>""}),intoResendEmailProcess:(0,S.f0)({step:e=>1}),intoResetPwdProcess:(0,S.f0)({step:e=>2}),checkEmailHasRegister:(o=(0,g._)(function*(e,t){var n,{passport:r}=e,{email:i,checkEmailHasRegisterCb:o,onError:s}=t;null===(n=yield r())||void 0===n||n.checkEmailHasRegister(i).then(e=>{if((null==e?void 0:e.is_registered)===void 0)throw Error("checkEmailHasRegister error");null==o||o(!!(null==e?void 0:e.is_registered))}).catch(()=>{null==s||s()})}),function(e,t){return o.apply(this,arguments)})},services:{fetchEmailNotRegister:(s=(0,g._)(function*(e,t){var n,{passport:r,emailHasRegisterCb:i}=e;return null===(n=yield r())||void 0===n?void 0:n.checkEmailHasRegister(t.email).then(e=>{var n,r;if((null==e?void 0:e.is_registered)===0)return null==t||null===(n=t.emailNotRegisterCb)||void 0===n||n.call(t),!0;throw null==t||null===(r=t.emailHasRegisterCb)||void 0===r||r.call(t),null==i||i(),Error()},e=>{var n;throw null==t||null===(n=t.onError)||void 0===n||n.call(t,e),Error()})}),function(e,t){return s.apply(this,arguments)}),fetchEmailRegister:(a=(0,g._)(function*(e,t){var n,{passport:r,emailHasRegisterCb:i}=e;return null===(n=yield r())||void 0===n?void 0:n.checkEmailHasRegister(t.email).then(e=>{var n,r;if((null==e?void 0:e.is_registered)!==0)return null==t||null===(r=t.emailHasRegisterCb)||void 0===r||r.call(t),null==i||i(),!0;throw null==t||null===(n=t.emailNotRegisterCb)||void 0===n||n.call(t),Error()},e=>{var n;throw null==t||null===(n=t.onError)||void 0===n||n.call(t,e),Error()})}),function(e,t){return a.apply(this,arguments)}),fetchSendEmailCode:(c=(0,g._)(function*(e,t){var n,{email:r,password:i,passport:o}=e;return null===(n=yield o())||void 0===n?void 0:n.sendEmailCode(r,i,null==t?void 0:t.code)}),function(e,t){return c.apply(this,arguments)}),fetchEmailCodeRegister:(l=(0,g._)(function*(e,t){var n,{email:r,password:i,birthday:o,region:s,passport:a,invitedCode:c}=e;return null===(n=yield a())||void 0===n?void 0:n.emailRegister(r,i,null==t?void 0:t.code,o,s,{invitedCode:c})}),function(e,t){return l.apply(this,arguments)}),fetchEmailCodeLogin:(u=(0,g._)(function*(e){var t,{email:n,password:r,passport:i}=e;return null===(t=yield i())||void 0===t?void 0:t.emailLogin(n,r)}),function(e){return u.apply(this,arguments)}),fetchRestoreAccount:(d=(0,g._)(function*(e,t){var n,r,{passport:i,currentPage:o}=e;try{yield null===(n=yield i())||void 0===n?void 0:n.cancelLogin(null==t?void 0:t.token,null==t?void 0:t.restoreType),new E.g().report({status:"success",current_page:o||"login"})}catch(e){throw new E.g().report({status:"failed",current_page:o||"login",fail_reason:null!==(r=null==e?void 0:e.description)&&void 0!==r?r:void 0}),Error(e)}}),function(e,t){return d.apply(this,arguments)}),execCountingDown:e=>{var{resendEmailCodeCountDown:t}=e;return e=>{var n=t;if(0===n){e("COUNT_DOWN_ZERO");return}var r=setInterval(()=>{e({type:"UPDATE_COUNT_DOWN",data:--n}),0===n&&(clearInterval(r),e("COUNT_DOWN_ZERO"))},1e3);return()=>{clearInterval(r)}}},fetchSendResetEmailCode:(h=(0,g._)(function*(e){var t,{email:n,passport:r,sendResetEmailErrorCb:i,pageEnterFrom:o,currentPage:s}=e,a="".concat(window.location.origin).concat(x.l.FORGET_PWD.PATH,"?enter_from=").concat(null!=o?o:"","&current_page=").concat(null!=s?s:"");return null===(t=yield r())||void 0===t?void 0:t.sendForgetPwdEmailCode(n,a).then(e=>e,e=>{throw null==i||i(e),Error()})}),function(e){return h.apply(this,arguments)}),checkResetCode:(p=(0,g._)(function*(e){var t,{email:n,code:r,passport:i}=e;return null===(t=yield i())||void 0===t?void 0:t.validateForgetPwdCode(n,r||"")}),function(e){return p.apply(this,arguments)}),execSendConfirmReset:(f=(0,g._)(function*(e,t){var n,{ticket:r,passport:i}=e;return null===(n=yield i())||void 0===n?void 0:n.resetForgetPwd(r,t.pwd)}),function(e,t){return f.apply(this,arguments)})}})},328536:function(e,t,n){"use strict";n.d(t,{m:function(){return h}});var r=n(461228),i=n(772322);n(822289),n(349601);var o=n(5622),s=n(781494);n(218571);var a=n(659179),c=n(106502),l=n(911632),u=n(123951),d=(e,t)=>{new c.S().report({action:e,current_page:null!=t?t:""})},h=e=>new Promise((t,n)=>{var c=o.Z.confirm({focusLock:!1,className:"lv_sign_in_panel_wide-restore-account",title:(0,i.jsxs)("div",{className:"lv_sign_in_panel_wide-restore-account-title",children:[(0,i.jsx)(a.rLP,{size:24,color:"#2668FF"}),u.ZP.t("web_deactivate_button_delete_restore",{},"Restore deleted account")]}),content:(0,i.jsx)("div",{className:"lv_sign_in_panel_wide-restore-account-content",children:u.ZP.t("web_deactivate_text_trying_sign_into",{},"You\u2019re trying to sign into a deleted account. By signing in, your account will be restored. If you don\u2019t restore the account, it will be permanently deleted in 30 days.")}),maskStyle:{zIndex:1103},wrapStyle:{zIndex:1103},onOk:(0,r._)(function*(){var r,i,o;d("restore",null==e?void 0:e.currentPage);try{c.update({okButtonProps:{loading:!0}}),yield e.onOk(),c.close(),new l.g().report({status:"success",current_page:null!==(r=null==e?void 0:e.currentPage)&&void 0!==r?r:""}),t()}catch(t){s.Z.error("API error"),new l.g().report({status:"failed",current_page:null!==(i=null==e?void 0:e.currentPage)&&void 0!==i?i:"",fail_reason:null!==(o=null==t?void 0:t.description)&&void 0!==o?o:void 0}),n(t)}finally{c.update({okButtonProps:{loading:!1}})}}),onCancel:()=>{var t;null==e||null===(t=e.onCancel)||void 0===t||t.call(e),d("cancel",null==e?void 0:e.currentPage)},okText:u.ZP.t("web_deactivate_button_restore_confirm",{},"Restore account"),cancelText:u.ZP.t("web_deactivate_button_cancel_restore",{},"Cancel"),okButtonProps:{type:"primary"},icon:null,closeIcon:(0,i.jsx)(a.bMz,{size:20,onClick:()=>{var t;null==e||null===(t=e.onCancel)||void 0===t||t.call(e),d("cancel",null==e?void 0:e.currentPage)}})})})},980546:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var r=n(460198),i={GetModelSourceList:{hostNameType:r.b_.Default,url:"/lv/v1/editor/image/ai_model/materials"},getClothMaskInfo:{hostNameType:r.b_.Default,url:"/lv/v1/editor/image/ai_model/create_cloth_mask"},submitModelTask:{hostNameType:r.b_.Default,url:"/lv/v1/editor/image/ai_model/submit_task"},getModelGenerateResult:{hostNameType:r.b_.Default,url:"/lv/v1/editor/image/ai_model/batch_get_results"}}},823381:function(e,t,n){"use strict";var r,i,o,s;n.d(t,{S:function(){return i}}),(o=r||(r={}))[o.beta=0]="beta",o[o.online=1]="online",(s=i||(i={}))[s.SUCCESS=0]="SUCCESS",s[s.COMMON_ERROR=1]="COMMON_ERROR",s[s.PARAM_ERROR=400]="PARAM_ERROR",s[s.MODEL_VERSION_MAP_ERROR=401]="MODEL_VERSION_MAP_ERROR",s[s.SDK_ERROR=1001]="SDK_ERROR",s[s.NOT_EXSIT=1002]="NOT_EXSIT",s[s.VERSION_MAP_EMPTY=2e3]="VERSION_MAP_EMPTY"},135125:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var r={GetEnableList:{hostNameType:n(460198).b_.Default,url:"/lv/v1/ad_maker/user/get_enable_list"}}},260667:function(e,t,n){"use strict";n.d(t,{I:function(){return m}});var r=n(461228),i=n(69984),o=n(764112),s=n(789786),a=n(677684),c=n(111265),l=n(968822),u=n(855548),d=n(135125),h=n(727133),p=n(145014),f=n(123951);class m{getEnableList(){var e=this;return(0,r._)(function*(){return(yield e.axiosInstance.post(d.e.GetEnableList.url,void 0,{[p.Tf]:d.e.GetEnableList.hostNameType})).enable_list})()}constructor(){var e;this.axiosInstance=new a.Z().setDefaultConfig((0,o._)((0,i._)({},c.s0),{headers:(0,o._)((0,i._)({},c.s0.headers),{lan:null!==(e=f.ZP.language)&&void 0!==e?e:"en",tdid:""}),withCredentials:!0})).addInterceptor([new l.$,new u.b]).build()}}(0,s.gn)([(0,h.V)(),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[]),(0,s.w6)("design:returntype",Promise)],m.prototype,"getEnableList",null)},609418:function(e,t,n){"use strict";n.d(t,{vz:function(){return v}});var r,i,o,s,a=n(69984),c=n(764112),l=n(574451),u=n(234075),d=n.n(u),h=n(738935);(r=o||(o={}))[r.MetaTypeNone=0]="MetaTypeNone",r[r.MetaTypeVideo=1]="MetaTypeVideo",r[r.MetaTypePhoto=2]="MetaTypePhoto",r[r.MetaTypeGif=3]="MetaTypeGif",r[r.MetaTypeMusic=4]="MetaTypeMusic",r[r.MetaTypeExtractMusic=5]="MetaTypeExtractMusic",r[r.MetaTypeSound=6]="MetaTypeSound",r[r.MetaTypeRecord=7]="MetaTypeRecord",r[r.MetaTypeImage=8]="MetaTypeImage",r[r.MetaTypeText=9]="MetaTypeText",r[r.MetaTypeSubtitle=10]="MetaTypeSubtitle",r[r.MetaTypeLyrics=11]="MetaTypeLyrics",r[r.MetaTypeSticker=12]="MetaTypeSticker",r[r.MetaTypeFilter=13]="MetaTypeFilter",r[r.MetaTypeLUT=14]="MetaTypeLUT",r[r.MetaTypeReshape=15]="MetaTypeReshape",r[r.MetaTypeBeauty=16]="MetaTypeBeauty",r[r.MetaTypeVideoEffect=17]="MetaTypeVideoEffect",r[r.MetaTypeBrightness=18]="MetaTypeBrightness",r[r.MetaTypeContrast=19]="MetaTypeContrast",r[r.MetaTypeSaturation=20]="MetaTypeSaturation",r[r.MetaTypeSharpen=21]="MetaTypeSharpen",r[r.MetaTypeHighlight=22]="MetaTypeHighlight",r[r.MetaTypeShadow=23]="MetaTypeShadow",r[r.MetaTypeTemperature=24]="MetaTypeTemperature",r[r.MetaTypeHue=25]="MetaTypeHue",r[r.MetaTypeFade=26]="MetaTypeFade",r[r.MetaTypeLightSensation=27]="MetaTypeLightSensation",r[r.MetaTypeVignetting=28]="MetaTypeVignetting",r[r.MetaTypeParticle=29]="MetaTypeParticle",r[r.MetaTypeSegCanvas=30]="MetaTypeSegCanvas",r[r.MetaTypeCanvasColor=31]="MetaTypeCanvasColor",r[r.MetaTypeCanvasImage=32]="MetaTypeCanvasImage",r[r.MetaTypeCanvasBlur=33]="MetaTypeCanvasBlur",r[r.MetaTypeTransition=34]="MetaTypeTransition",r[r.MetaTypeAudioEffect=35]="MetaTypeAudioEffect",r[r.MetaTypeAudioFade=36]="MetaTypeAudioFade",r[r.MetaTypeBeats=37]="MetaTypeBeats",r[r.MetaTypeTailLeader=38]="MetaTypeTailLeader",r[r.MetaTypeAnimation=39]="MetaTypeAnimation",r[r.MetaTypeVideoAnimation=40]="MetaTypeVideoAnimation",r[r.MetaTypeTextEffect=41]="MetaTypeTextEffect",r[r.MetaTypeTextShape=42]="MetaTypeTextShape",r[r.MetaTypeTextToAudio=43]="MetaTypeTextToAudio",r[r.MetaTypeVideoMix=44]="MetaTypeVideoMix",r[r.MetaTypeAdjust=45]="MetaTypeAdjust",r[r.MetaTypeVideoMask=46]="MetaTypeVideoMask",r[r.MetaTypeSpeed=47]="MetaTypeSpeed",r[r.MetaTypeChroma=48]="MetaTypeChroma",r[r.MetaTypeTextTemplate=49]="MetaTypeTextTemplate",r[r.MetaTypeVideoOriginalSound=50]="MetaTypeVideoOriginalSound",r[r.MetaTypeStretchLeg=51]="MetaTypeStretchLeg",r[r.MetaTypeRealtimeDenoise=52]="MetaTypeRealtimeDenoise",r[r.MetaTypeFigure=53]="MetaTypeFigure",r[r.MetaTypeFaceEffect=54]="MetaTypeFaceEffect",r[r.MetaTypeVideoTracking=55]="MetaTypeVideoTracking",r[r.MetaTypeHsl=56]="MetaTypeHsl",r[r.MetaTypeColorCurves=57]="MetaTypeColorCurves",r[r.MetaTypeAudioBalance=58]="MetaTypeAudioBalance",r[r.MetaTypeComposition=59]="MetaTypeComposition",r[r.MetaTypeCover=60]="MetaTypeCover",r[r.MetaTypeLeader=61]="MetaTypeLeader",r[r.MetaTypeTailer=62]="MetaTypeTailer",r[r.MetaTypePrimaryColorWheels=63]="MetaTypePrimaryColorWheels",r[r.MetaTypeLogColorWheels=64]="MetaTypeLogColorWheels",r[r.MetaTypeHandwriteImage=65]="MetaTypeHandwriteImage",r[r.MetaTypeHandwriteRes=66]="MetaTypeHandwriteRes",r[r.MetaTypeCombination=67]="MetaTypeCombination",r[r.MetaTypeManualDeformation=68]="MetaTypeManualDeformation",r[r.MetaTypePluginEffect=69]="MetaTypePluginEffect",r[r.MetaTypeAdCube=70]="MetaTypeAdCube",r[r.MetaTypeAll=71]="MetaTypeAll",(i=s||(s={}))[i.EffectPlatformLoki=0]="EffectPlatformLoki",i[i.EffectPlatformArtist=1]="EffectPlatformArtist",i[i.EffectPlatformBrand=2]="EffectPlatformBrand";var p=e=>{switch(e){case h.U_.TextTemplate:return 49;case h.U_.Flower:return 41;default:return 71}},f=e=>{if(!e)return"";var t,n=null===(t=e.ImageURLList)||void 0===t?void 0:t.map(e=>({width:e.Width,height:e.Height,url:e.URL}));return{imageWidth:e.ImageWidth,imageHeight:e.ImageHeight,imageUrlList:n,uri:e.URI,url:e.URL,md5:e.Md5}},m=e=>(null==e?void 0:e.length)?e.map(e=>{var t,n=null===(t=e.ImageURLList)||void 0===t?void 0:t.map(e=>({width:e.Width,height:e.Height,url:e.URL}));return{imageWidth:e.ImageWidth,imageHeight:e.ImageHeight,imageUrlList:n,uri:e.URI,url:e.URL,md5:e.Md5,imageSize:e.ImageSize,path:e.Path,name:e.Name,mime:e.Mime,imageFormat:e.ImageFormat}}):[],v=(e,t)=>{var n=Object.values(e.ModelNames?JSON.parse(e.ModelNames):{}).reduce((e,t)=>[...e,...t],[]),r={md5:e.FileUrl.Uri,url:e.FileUrl.UrlList[0],name:e.Name,previewUrl:e.IconUrl.UrlList[0],animatedUrl:e.IconUrl.UrlList[0],metaType:p(e.Panel),effectId:e.EffectId.toString(),resourceId:e.ResourceId.toString(),relatedId:"",sourcePlatform:0,requirements:e.Requirements,modelNames:n,isBusiness:!1,author:"",duration:0,extra:{},sdkExtra:{},contentJSON:e.ContentJson,contentFile:e.ContentFile,dependency:(null===(s=e.DependResourceList)||void 0===s?void 0:s.map(e=>{var{ResourceId:t}=e,n=(0,l._)(e,["ResourceId"]);return(0,c._)((0,a._)({},n),{ResourceId:t.toString()})}))||[],panel:e.Panel,stickerImage:f(e.StickerImage),reportTimestamp:null!==(h=e.UseReportMs)&&void 0!==h?h:Date.now(),childEffects:null===(u=e.ChildEffects)||void 0===u?void 0:u.map(e=>v(e)),sdkVersion:e.SdkVersion,imageFiles:m(e.ImageFiles),tags:e.Tags};try{var i=/^[{].*[}]$/.test(e.Extra)?e.Extra:"{}";r.extra=JSON.parse(i)}catch(e){}try{var o=/^[{].*[}]$/.test(e.SdkExtra)?e.SdkExtra:"{}";r.sdkExtra=JSON.parse(o)}catch(e){}if(Object.keys(r.extra).length>0){var s,u,h,g,{Resources:_,canvas_cover:y,video_duration:S,hover_icon:b,preview_cover:T,track_thumbnail:E,is_business:x,web_icon:w}=r.extra;if(x&&(r.isBusiness=!0),S&&(r.duration=1e3*S),void 0===t&&(null===(g=e.FileUrl)||void 0===g?void 0:g.UrlList.length)>0&&(t=d().dirname(e.FileUrl.UrlList[0])),(b||T||E)&&(r.previewUrl="".concat(t,"/").concat(b||T||E)),w&&(r.previewUrl="".concat(t).concat(w)),_||y){var k=_||y;r.md5=d().basename(k,d().extname(k)),r.url="".concat(t,"/").concat(k)}}return r}},108419:function(e,t,n){"use strict";n.d(t,{x:function(){return l}});var r=n(460198),i=n(403189),o=n(659610),s=n(609418),a=n(818398),c=n.n(a),l=e=>{if(e){var{effects:t=[],local_images:n,replaceable_images:a,yk_images:l}=e;return{effects:t.map(e=>{var t,n=c().parse(e);return n.Source===r.UI.HeyPan?{name:n.Name,md5:n.FileUrl.Uri,url:n.FileUrl.UrlList[0],resourceId:n.ResourceId.toString(),panel:null!==(t=(0,i.j)(n.EffectType))&&void 0!==t?t:"",effectId:n.EffectId.toString()}:(0,s.vz)(n)}),localImages:n,replaceableImages:a,ykImages:null==l?void 0:l.map(e=>{try{return JSON.parse(e)}catch(t){o.t.warn("template-api","parse yk image error",e)}return null}).filter(e=>!!e)}}}},509912:function(e,t,n){"use strict";n.d(t,{$3:function(){return s}});var r=n(69984),i=n(764112),o=n(460198),s="Internal_Filter";[o.vA.SATURATION,o.vA.BRIGHTNESS,o.vA.CONTRAST,o.vA.LIGHT_SENSATION,o.vA.EXPOSURE,o.vA.FADE,o.vA.HIGHLIGHT,o.vA.SHADOW,o.vA.TEMPERATURE,o.vA.TONE,o.vA.VIBRANCE,o.vA.OLITEXTURE,o.vA.GRAIN].reduce((e,t)=>(0,i._)((0,r._)({},e),{[t]:void 0}),{});var a={colorScheme:{id:"53061813",resourceId:"7259669436393591297"},lumiHub:{id:"75349634",resourceId:"7272983534673859074"},faceRect:{id:"153058216",resourceId:"7207391969436242434"},makeupRoot:{id:"153093534",resourceId:"7280056145232794113"}};Object.keys(a).reduce((e,t)=>(0,i._)((0,r._)({},e),{[a[t].resourceId]:t}),{})},747893:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});class r{get hasBeenDone(){return this._hasBeenDone}get costTimes(){if(this._initCostTimes){var{start:e,end:t}=this._initCostTimes;return(null!=t?t:Date.now())-e}}get initResult(){if(this._hasBeenDone)return{resolve:this._resolveResult,reject:this._rejectResult}}get isIniting(){return this._isIniting}awaitForInit(){var e,t,{key:n,timeout:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._hasBeenDone&&this.initResult){var{resolve:i,reject:o}=this.initResult;return o?Promise.reject(o):Promise.resolve(i)}if(n&&this._waitingResolverMap.has("key"))return this._waitingResolverMap.get("key");if(!r){var s=new Promise((e,t)=>{this._waitingResolvers.add([e,t])});return n&&this._waitingResolverMap.set(n,s),s}var a=Promise.race([new Promise((n,r)=>{e=[()=>{clearTimeout(t),n()},r],this._waitingResolvers.add(e)}),new Promise((n,i)=>{t=setTimeout(()=>{this._waitingResolvers.delete(e),i(Error("Timed out waiting for init"))},r)})]);return n&&this._waitingResolverMap.set(n,a),a}startToInit(){return!this._hasBeenDone&&!this._isIniting&&(this._isIniting=!0,this._initCostTimes={start:Date.now()},!0)}initDone(e){if(this._hasBeenDone)throw Error("Cannot release an inited locker");this._initCostTimes&&(this._initCostTimes.end=Date.now());var t=!1;for(var n of((null==e?void 0:e.reject)?(t=!0,this._rejectResult=e.reject):this._resolveResult=null==e?void 0:e.resolve,this._waitingResolvers))t?n[1](this._rejectResult):n[0](this._resolveResult);this._waitingResolverMap.clear(),this._waitingResolvers.clear(),this._hasBeenDone=!0,this._isIniting=!1}constructor(){this._hasBeenDone=!1,this._isIniting=!1,this._initCostTimes=void 0,this._waitingResolvers=new Set,this._waitingResolverMap=new Map}}},544611:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(42202),i=n(301882),o=n(535801);class s{get md5(){return this._md5}get crc(){return this._crc}analyzeFileInfo(e){var{file:t,onError:n}=e,r=this._fileCrcCalculator.calcFileCrc(t),i=this._fileMd5Calculator.calcFileMd5(t);r.then(e=>{if(e.ok){var t,n;this._crc=e.value,null===(t=(n=this._options).onCrcReady)||void 0===t||t.call(n),this._fileCrcDefer.resolve()}else this._fileCrcDefer.reject({code:-1,msg:"[error]file crc cal failed, ".concat(e.msg)})}).catch(e=>{this._fileCrcDefer.reject({code:-1,msg:"[error]file crc cal failed, ".concat(e.message)})}),i.then(e=>{if(e.ok){var n,r;this._md5=e.value,null===(n=(r=this._options).onMd5Ready)||void 0===n||n.call(r),this._fileMd5Defer.resolve()}else this._fileCrcDefer.reject(Error(JSON.stringify({code:-1,msg:"[error]file md5 cal failed, file name is ".concat(t.name," and file size is ").concat(t.size," ]}")})))}).catch(e=>{this._fileCrcDefer.reject({code:-1,msg:"[error]file md5 cal failed, ".concat(e.message)})}),Promise.all([this._fileMd5Defer.promise,this._fileCrcDefer.promise]).then(()=>{var e,t;null===(e=(t=this._options).onAllReady)||void 0===e||e.call(t)}).catch(e=>{null==n||n(e)})}constructor(e){this._options=e,this._fileCrcDefer=(0,r.P)(),this._fileMd5Defer=(0,r.P)(),this._fileCrcCalculator=o.s.getInstance(),this._fileMd5Calculator=i.M.getInstance()}}},989649:function(e,t,n){"use strict";n.d(t,{AF:()=>i,iJ:()=>r.iJ});let r=n("154134");var i=348188;n("5141")},811366:function(e,t,n){"use strict";var r,i,o,s,a,c,l,u,d,h,p,f;n.d(t,{F5:function(){return r},vA:function(){return s}}),(l=r||(r={})).PAGE="PAGE",l.GROUP_LAYER="GROUP_LAYER",l.TEXT="TEXT",l.IMAGE="IMAGE",l.LINE="LINE",l.SHAPE="SHAPE",l.IMAGE_CONTAINER="IMAGE_CONTAINER",l.GRID="GRID",l.SVG_IMAGE="SVG_IMAGE",l.PAINT="PAINT",(u=i||(i={})).SOURCE_OVER="source-over",u.SOURCE_IN="source-in",u.SOURCE_OUT="source-out",u.SOURCE_ATOP="source-atop",u.DESTINATION_OVER="destination-over",u.DESTINATION_IN="destination-in",u.DESTINATION_OUT="destination-out",u.DESTINATION_ATOP="destination-atop",u.LIGHTER="lighter",u.COPY="copy",u.XOR="xor",u.MULTIPLY="multiply",u.SCREEN="screen",u.OVERLAY="overlay",u.DARKEN="darken",u.LIGHTEN="lighten",u.COLOR_DODGE="color-dodge",u.COLOR_BURN="color-burn",u.HARD_LIGHT="hard-light",u.SOFT_LIGHT="soft-light",u.DIFFERENCE="difference",u.EXCLUSION="exclusion",u.HUE="hue",u.SATURATION="saturation",u.COLOR="color",u.LUMINOSITY="luminosity",(d=o||(o={})).FILTER="filter",d.EFFECT="effect",(h=s||(s={})).LIGHT_SENSATION="lightSensation",h.BRIGHTNESS="brightness",h.CONTRAST="contrast",h.BRILLIANCE="brilliance",h.SATURATION="saturation",h.OLITEXTURE="oilTexture",h.SHARP="sharp",h.STRUCTURE="structure",h.HIGHLIGHT="highlight",h.SHADOW="shadow",h.TEMPERATURE="temperature",h.TONE="tone",h.GRAIN="grain",h.FADE="fade",h.EXPOSURE="exposure",h.VIBRANCE="vibrance",h.SHADOW_NEGATIVE="shadow_negative",(p=a||(a={}))[p.ERASE_ALGO_NONE=0]="ERASE_ALGO_NONE",p[p.ERASE_ALGO_INTELLIGENT=1]="ERASE_ALGO_INTELLIGENT",p[p.ERASE_ALGO_INTELLIGENT_INVERT=2]="ERASE_ALGO_INTELLIGENT_INVERT",p[p.ERASE_ALGO_NORMAL=3]="ERASE_ALGO_NORMAL",(f=c||(c={})).Template="template",f.TextTemplate="textTemplate",f.TextToDraft="text2draft",f.ColorCard="colorCard",f.AiModel="aiModel",f.AiBackground="aiBackground",f.TextSearch="textSearch",f.ImageSearch="imageSearch",f.Similar="similar",f.AiWriterRewrite="aiWriterRewrite",f.AiWriterLonger="aiWriterLonger",f.AiWriterShorter="aiWriterShorter",f.AiWriterGenerateText="aiWriterGenerateText",f.AiWriterGenerateTitle="aiWriterGenerateTitle"},858287:function(){"use strict";var e;(e||(e={})).SPACE_NOT_ENOUGH="200406"},701227:function(){"use strict";var e,t;(t=e||(e={}))[t.init=0]="init",t[t.edit=1]="edit"},197737:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var r=n(719265),i=n(658742),o=Object.freeze(function(e,t){var n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}});class s{get reason(){return this._reason}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?o:(this._emitter||(this._emitter=new i.Q),this._emitter.event)}cancel(e){!this._isCancelled&&(this._reason=e,this._isCancelled=!0,this._emitter&&(this._emitter.fire(),this.dispose()))}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}constructor(){this._isCancelled=!1,this._emitter=null}}class a{}a.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:()=>r.G}),a.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o}),a.Make=e=>Object.freeze({isCancellationRequested:!0,onCancellationRequested:o,reason:e});class c{get token(){return this._token||(this._token=new s),this._token}get signal(){var e;return this._abortController||(this._abortController=new AbortController,(null===(e=this._token)||void 0===e?void 0:e.isCancellationRequested)&&this._abortController.abort()),this._abortController.signal}cancel(e){this._token?this._token instanceof s&&this._token.cancel(e):this._token=void 0===e?a.Cancelled:a.Make(e),this._abortController&&this._abortController.abort(e)}dispose(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.cancel(),null===(e=this._parentListener)||void 0===e||e.dispose(),this._token?this._token instanceof s&&this._token.dispose():this._token=a.None}constructor(e){this._token=void 0,this._parentListener=void 0,this._abortController=void 0,this._parentListener=null==e?void 0:e.onCancellationRequested(this.cancel,this)}}},548946:function(e,t,n){"use strict";var r,i;n.d(t,{VM:function(){return s},_y:function(){return o},fC:function(){return a},zO:function(){return r}}),(i=r||(r={}))[i.Entry=0]="Entry",i[i.Event=1]="Event",i[i.UserInput=2]="UserInput",i[i.Task=3]="Task";class o{background(){return new o(this.type)}setValue(e,t){this._store.set(e,t)}getValue(e){return this._store.get(e)}constructor(e=3){this.type=e,this._store=new Map}}function s(){return new o(2)}function a(){return new o}},179667:function(e,t,n){"use strict";n.d(t,{PX:function(){return c},dX:function(){return s},hO:function(){return a},pY:function(){return i}});var r,i,o=n(295233);(r=i||(i={}))[r.Ok=0]="Ok",r[r.Cancelled=1]="Cancelled",r[r.TimedOut=2]="TimedOut",r[r.PermissionDenied=3]="PermissionDenied",r[r.AlreadyExists=4]="AlreadyExists",r[r.NotSupported=5]="NotSupported",r[r.ResourceUnavailable=6]="ResourceUnavailable",r[r.OutOfRange=7]="OutOfRange",r[r.InvalidArgument=8]="InvalidArgument",r[r.NetworkFailed=9]="NetworkFailed",r[r.Interrupted=10]="Interrupted",r[r.ResultNil=11]="ResultNil";var s=(0,o.i)(1,"operation(s) cancelled."),a=(0,o.i)(2,"operation(s) timed out.");(0,o.i)(3,"permission denied."),(0,o.i)(4,"already exists."),(0,o.i)(5,"operation(s) not supported."),(0,o.i)(6,"resource is unavailable."),(0,o.i)(7,"out of range."),(0,o.i)(8,"invalid arguments."),(0,o.i)(9,"network failed."),(0,o.i)(10,"interrupted.");var c=(0,o.i)(11,"result is nil.")},226603:function(e,t,n){"use strict";n.d(t,{D:function(){return i}});var r=n(980014);function i(e){if(!e)return{};try{return(0,r.Y2)("string"==typeof e),JSON.parse(e)}catch(e){return{}}}},85482:function(e,t,n){"use strict";n.d(t,{V5:function(){return l},YX:function(){return d},gn:function(){return u},vU:function(){return h}});var r,i=!1,o=!1,s=!1,a=!1,c=!1;"object"==typeof navigator&&((r=navigator.userAgent).indexOf("Windows"),o=(r.indexOf("Macintosh")>=0||r.indexOf("iPad")>=0||r.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,r.indexOf("Linux"),s=r.indexOf("Mobi")>=0,a=r.indexOf("iPad")>=0,i=!s&&r.indexOf("Macintosh")>=0,c=/firefox/i.test(r),/chrome/i.test(r),/^((?!chrome|android).)*safari/i.test(r));var l=i,u=o,d=a,h=c},433803:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(262518),i=n(774502),o=n(510872),s=n(980014),a=n(896719),c=new class{get taskQueue(){return this._taskQueue}get executor(){return this._executor}setEnableInputPending(e){this._enableInputPending=e}addTask(e){var t=(0,o.Xn)();e.getStartTime()>t?(e.setSortIndex(e.getStartTime()),this._taskQueue.timerTasks.insert(e),null===this._taskQueue.waitingTasks.peek()&&e===this._taskQueue.timerTasks.peek()&&(this._isHostTimeoutScheduled?this._executor.cancelHostTimeout():this._isHostTimeoutScheduled=!0,this._executor.requestHostTimeout(this._handleHostTimeout,e.getStartTime()-t))):(e.setSortIndex(e.getExpirationTime()),this._taskQueue.waitingTasks.insert(e),this._isHostCallbackScheduled||this._isWorking||(this._isHostCallbackScheduled=!0,this._executor.requestHostCallback(this._handleHostCallback)))}requestHostTimeout(e){this._requestHostTimeout(e)}_requestHostTimeout(e){(0,s.Y2)(!this._isHostCallbackScheduled&&!this._isHostTimeoutScheduled);var t=this._taskQueue.timerTasks.peek();null!==t&&(this._isHostTimeoutScheduled=!0,this._executor.requestHostTimeout(this._handleHostTimeout,t.getStartTime()-e))}constructor(){this._isHostTimeoutScheduled=!1,this._isHostCallbackScheduled=!1,this._isWorking=!1,this._enableInputPending=!0,this._executor=(0,a.Q)(),this._taskQueue=new i.w,this._actuator=new r.h(this._taskQueue,this),this.shouldYieldToHost=(()=>{if((null===(t=n.g.navigator)||void 0===t?void 0:null===(e=t.scheduling)||void 0===e?void 0:e.isInputPending)===void 0)return e=>(0,o.Xn)()>=e;var e,t,{scheduling:r}=n.g.navigator;return e=>!!(this._enableInputPending&&r.isInputPending())||(0,o.Xn)()>=e})(),this._handleHostTimeout=()=>{this._isHostTimeoutScheduled=!1;var e=(0,o.Xn)();if(this._taskQueue.advance(e),!this._isHostCallbackScheduled){if(null!==this._taskQueue.waitingTasks.peek()){this._isHostCallbackScheduled=!0,this._executor.requestHostCallback(this._handleHostCallback);return}this._isHostTimeoutScheduled=!0,this._requestHostTimeout(e)}},this._handleHostCallback=(e,t,n)=>{this._isHostCallbackScheduled=!1,this._isHostTimeoutScheduled&&(this._isHostTimeoutScheduled=!1,this._executor.cancelHostTimeout()),this._isWorking=!0;try{return this._actuator.workLoop(e,t,n)}finally{this._isWorking=!1}}}}},247093:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(69984),i=n(764112),o=n(772322);n(349601);var s=n(781494),a=n(195291),c=n(83860),l=n(499518),u=(e,t,n)=>{var u=null==n?void 0:null===(h=n.getContainer)||void 0===h?void 0:h.call(n);if(!u){var h,p,f="string"==typeof t?t:(0,r._)({icon:"loading"===e?(0,o.jsx)(c.Z,{wrapperStyle:{width:20,height:20}}):void 0},t);return null===s.Z||void 0===s.Z?void 0:null===(p=s.Z[e])||void 0===p?void 0:p.call(s.Z,f)}var m="string"==typeof t?{content:t,type:e}:(0,i._)((0,r._)({},t),{type:e}),v="",g=(e,t)=>{if(e){Array.isArray(t)&&(t=t.join(" "));var{top:n,left:r,width:i}=u.getBoundingClientRect();e.style.width="".concat(i,"px"),e.style.top="".concat(n+24,"px"),e.style.left="".concat(r,"px"),e.className="".concat(e.className," ").concat(t)}};if(d.instances.has(u)){var _=d.instances.get(u);v=null==_?void 0:_.add(m),g(null==_?void 0:_.__dom,m.className)}else{var y=document.createElement("div");y.classList.add(l.Z["ve-message-wrapper"]),(0,a.render)((0,o.jsx)(s.Z,{ref:e=>{v=(null==e?void 0:e.add(m))||"",e.__dom=y,d.instances.set(u,e)},icon:"loading"===e?(0,o.jsx)(c.Z,{wrapperStyle:{width:20,height:20}}):void 0}),y),g(y,m.className),document.body.appendChild(y)}return()=>{var e;v&&(null===(e=d.instances.get(u))||void 0===e||e.remove(v))}};class d extends s.Z{}d.instances=new Map,d.success=(e,t)=>u("success",e,t),d.info=(e,t)=>u("info",e,t),d.warning=(e,t)=>u("warning",e,t),d.error=(e,t)=>u("error",e,t),d.loading=(e,t)=>u("loading",e,t),d.normal=(e,t)=>u("normal",e,t);let h=d},674683:function(e,t,n){"use strict";n.d(t,{R:function(){return v}});var r=n(461228),i=n(789786),o=n(820106),s=n(924846),a=n(963473),c=n(980014),l=n(548946),u=n(215135),d=n(781440),h=n(199297),p=n(248176),f=n(461644),m=n(818516);class v{getOrCreateThirdpartyHelper(e,t,n){var i=this;return(0,r._)(function*(){if(!i._capcutAccountService.hasLogin)return i._capcutAccountService.login({reportParams:{pageEnterFrom:t.pageEnterFrom}}),(0,a.wf)(-1,"no login");(0,c.ZB)(e,"un expect undefined for workspaceId when login");var r="".concat(e,"-").concat(JSON.stringify(n)),o=i._thirdpartyUploaderMap.get(r);if(o)return(0,a.oW)(o);var s=yield i._initHelper(e,n);return i._thirdpartyUploaderMap.set(r,s),(0,a.oW)(s)})()}_initHelper(e,t){var n=this;return(0,r._)(function*(){var{_options:r}=n,i=yield n._payinPayoutService.getInstance(e),a=(yield n._idleThirdpartyUploadService.getInstance((0,l.fC)())).getOrCreateUploader("".concat(n._uploaderUniqueId,"-").concat(e,"-").concat(JSON.stringify(t)),{draftId:r.draftId,workspaceId:e,acceptMime:r.acceptMime,multiple:r.multiple,showTips:r.showTips,currentPage:r.currentPage,toolType:r.toolType,accept:r.accept,videoTypeId:null==t?void 0:t.videoTypeId,expandModalInstance:i,countLimit:r.countLimit,maxUploadSize:r.maxUploadSize,validateMaxUploadSize:r.validateMaxUploadSize});return a.onAddUploadFile(i=>{var c,l,d=(0,o.J)({tasks:[i],fromWorkspaceId:e,toWorkspaceId:e,thirdpartyUploader:a,containerService:n._containerService,payinPayoutHelper:n._options.payinPayoutHelper}),h={[u.b.GOOGLE_DRIVE]:s.O9.GOOGLE_DRIVE,[u.b.DROPBOX]:s.O9.DROP_BOX,[u.b.SHOPIFY]:s.O9.SHOPIFY,[u.b.TTLIVE]:s.O9.TTLIVE}[i.platform]||"";for(var p of(null===(c=r.onBeforeCreated)||void 0===c||c.call(r,d,h),d))null===(l=r.onCreated)||void 0===l||l.call(r,{directoryNodeType:m.t.File,material:p,fromWorkspaceId:e,uploadReportParams:Object.assign({},t,{material_source:h})})}),a})()}constructor(e,t,n,r,i,o){this._options=e,this._idleThirdpartyUploadService=t,this._userMaterialsService=n,this._capcutAccountService=r,this._containerService=i,this._payinPayoutService=o,this._uploaderUniqueId="upload-material-manager-".concat(Date.now().valueOf(),"-").concat(Math.floor(1e3*Math.random())),this._thirdpartyUploaderMap=new Map}}v=(0,i.gn)([(0,i.fM)(1,u.E),(0,i.fM)(2,d.b),(0,i.fM)(3,p.Gw),(0,i.fM)(4,f.t),(0,i.fM)(5,h.sX),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof IUploadMaterialFromThirdparty?Object:IUploadMaterialFromThirdparty,void 0===u.E?Object:u.E,void 0===d.b?Object:d.b,void 0===p.Gw?Object:p.Gw,void 0===f.t?Object:f.t,void 0===h.sX?Object:h.sX])],v)},294823:function(e,t,n){"use strict";n.d(t,{l:function(){return m}});var r=n(772322),i=n(958444),o=n(218571),s=n(968508),a=n(34153),c=n(415155);n(623978);var l=n(123951),u=n(105789),d=n.n(u),h=n(260370),p={childList:!0,subtree:!0},f={box:"border-box"},m=(0,o.forwardRef)((e,t)=>{var{gap:n=8,children:u,onViewAllClick:m,isShowViewAll:v=!1,className:g,onLayout:_,style:y,isColumnFlex:S,rowCount:b=1,rowHeight:T,activeIndex:E}=e,x=(0,o.useRef)(!1),w=(0,o.useRef)(null),k=(0,o.useRef)(null),C=(0,o.useRef)(null),[R,I]=(0,o.useState)([]),[N,O]=(0,o.useState)(0),[A,M]=(0,o.useState)(0),[L,P]=(0,o.useState)(0),[Z,j]=(0,o.useState)(!1),D=(0,o.useMemo)(()=>{for(var e=0;e<R.length&&R[e].end<L;)e++;var t=R[e];return{index:e,offset:t?t.width-(t.end-L):0}},[R,L]),U=(0,o.useCallback)(e=>{var{index:t,offset:r,smooth:i=!0}=e;j(!!i),P((t?R[t-1].end+n:0)+r)},[R,n]),G=(0,o.useMemo)(()=>R.length&&L+A<R[R.length-1].end,[A,R,L]),F=(0,o.useCallback)(()=>{var e=k.current;if(!e)return[];I([...e.children].reduce((e,t,r)=>{var{width:i}=t.getBoundingClientRect(),o=e[r-1],s=o?o.end+n:0;if(S&&b){var a=Math.floor(r/b);s=a*i+a*n}return[...e,{width:i,end:s+i}]},[]))},[n]),V=(0,o.useCallback)(e=>{var{width:t}=e[0].contentRect;M(t),F()},[F]);(0,h.y)(w,V,f),(0,s.I)(k,F,p);var W=(0,o.useCallback)(e=>{e[0].isIntersecting&&F()},[F]);(0,a.S)(C,W);var B=(0,o.useRef)();(0,o.useEffect)(()=>(B.current=setTimeout(()=>{var e,t=null===(e=R.slice(-1)[0])||void 0===e?void 0:e.end;if(A&&t){var n=Math.max(t-A,0);n<L&&(j(!0),P(n))}B.current=void 0},100),()=>{B.current&&clearTimeout(B.current)}),[L,A,R]);var H=(0,o.useCallback)((e,t)=>{var n,r=0,i=0,o=R.length,s=null===(n=R[o-1])||void 0===n?void 0:n.end;if(s){for(;r<e;){var{width:a,end:c}=R[r],l=s-c;if(l<A){i=a-(A-l);break}r++}U({index:Math.min(r,o),offset:i,smooth:null==t?void 0:t.smooth})}},[R,A,U]);(0,o.useEffect)(()=>{var e;null==_||_({nodeList:R,overflow:(null===(e=R[R.length-1])||void 0===e?void 0:e.end)>A})},[_,R,A]),(0,o.useEffect)(()=>{if(k.current){var e=e=>{x.current=!0},t=e=>{x.current=!1},r=null==k?void 0:k.current;return r.addEventListener("transitionend",t),r.addEventListener("transitionstart",e),S&&b&&T&&O(2*T+n),()=>{r.removeEventListener("transitionend",t),r.removeEventListener("transitionstart",e)}}},[]);var z=(0,o.useCallback)((e,t)=>{if(e.x){t.preventDefault(),t.stopImmediatePropagation();var n,r=(null===(n=R[R.length-1])||void 0===n?void 0:n.end)-A;j(!1),P(t=>Math.max(Math.min(t+e.x,r),0))}},[A,R]),Y=(0,o.useCallback)(()=>{j(!1)},[]);return(0,c.v)({align:"left",direction:"horizontal",isScrollable:!0,containerRef:C,preventDefault:!1,onScrollChange:z,currentOffset:0}),(0,o.useEffect)(()=>{void 0!==E&&H(E,{smooth:!1})},[E]),(0,r.jsxs)("div",{ref:e=>{w.current=e,t&&(t.current=e)},className:d()("graphic-carousel-container",g),style:y,children:[(0,r.jsx)("div",{className:"graphic-carousel",children:(0,r.jsx)("div",{className:"carousel-sliding-wrapper",ref:C,children:(0,r.jsxs)("div",{ref:k,className:d()("carousel-sliding-window",Z?"scrolling":null,S?"carousel-sliding-window-column":null),onTransitionEnd:Y,style:{gap:n,transform:"translateX(".concat(-L,"px)"),height:N?"".concat(N,"px"):"auto"},children:[u,v?(0,r.jsxs)("div",{className:"carouse-see-all",onClick:m,children:[(0,r.jsx)(i.Zay,{size:"16"}),(0,r.jsx)("span",{className:"carouse-see-all-text",children:l.ZP.t("web_graphic_material_title_see_all",{},"See all")})]}):null]})})}),R.length&&R[R.length-1].end>A?(0,r.jsxs)(r.Fragment,{children:[L?(0,r.jsx)("div",{className:"arrow arrow-left",onClick:()=>{for(var e=D.offset>0?D.index:D.index-1,t=e,r=0,i=0;t>=0;){var{width:o}=R[t];if(r+o>A&&t!==e){if(S&&b){if(t%b==0){i=r+o-A;break}}else{i=r+o-A;break}}S&&b?t%b==0&&(r+=o+(t?n:0)):r+=o+(t?n:0),t--}t<0&&(t=0,i=0),U({index:t,offset:i})},children:(0,r.jsx)(i.MVz,{size:"12"})}):null,G?(0,r.jsx)("div",{className:"arrow arrow-right",onClick:()=>{for(var e=D.index,t=0,r=R.length;e<r;){var{width:i}=R[e];if(t+i>A&&e!==D.index){if(S&&b){if(e%b==0)break}else break}S&&b?e%b==0&&(t+=i+(e===r-1?0:n)):t+=i+(e===r-1?0:n),e++}H(e)},children:(0,r.jsx)(i.VlG,{size:"12"})}):null]}):null]})})},239766:function(e,t,n){"use strict";n.d(t,{H:()=>x,u:()=>w});let r=n("664753"),i=n("963730"),o=n("922813"),s=n("320044"),a=n("868874"),c=n("816752"),l=n("446176"),u=n("916417"),d=n("810381"),h=n("248176"),p=n("770027"),f=n("523474"),m=n("108659"),v=n("361223"),g=n("922735"),_=n("461228"),y=n("789786"),S=n("226134"),b=n("723394");class T extends p.r{login(e){var t,n=this,r=()=>super.loginWithAuthToken;new Promise((t=(0,_._)(function*(t){try{var i,{token:o,state:s}=(yield b.S4.login({showLoginDialog:null===(i=null==e?void 0:e.showLoginDialog)||void 0===i||i})).data;r().call(n,{token:o,state:s}).then(t=>{if(t.ok){var r;n._onDidLogin.fire(),null===(r=e.execAfterLogin)||void 0===r||r.call(e)}}),t()}catch(e){t()}}),function(e){return t.apply(this,arguments)}))}constructor(e,t,n){super(e,t,n),this._currentPage=e,this.teaReportService=t}}function E(){var e=(0,r.eI)({headers:{"Content-Type":"application/json"}});(0,o.V)(e,{appVersion:"999.999.999"});var t=new s.w(a.c);return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{header:o,user:s,evtParams:a}=i;e.request({method:"POST",url:t.url("EVENT_REPORT"),data:{event_name:n,custom_info:JSON.stringify({header:o,client_ip:"",params:a,user:s}),params:JSON.stringify(r),region:c._L.getVar("country_code"),app_id:l.k},withCredentials:!0})}}function x(e,t,n){var r=new u.r(E(),t,n);e.registerInstance(d.m,r),e.register(h.Gw,new i.M(p.r,["smart_tool_page"],!1)),e.register(f.S,new i.M(m.K,void 0,!1)),e.register(v.c,g.c)}function w(e,t,n){var r=new u.r(E(),t,n);e.registerInstance(d.m,r),e.register(h.Gw,new i.M(T,["smart_tool_page"],!1)),e.register(f.S,new i.M(m.K,void 0,!1)),e.register(v.c,g.c)}T=(0,y.gn)([(0,y.fM)(1,S.w),(0,y.fM)(2,f.S),(0,y.w6)("design:type",Function),(0,y.w6)("design:paramtypes",[String,void 0===S.w?Object:S.w,void 0===f.S?Object:f.S])],T)},82399:function(e,t,n){"use strict";n(772322),n(463844),n(387346),n(529114),n(246708),n(466344),n(824483)},320330:function(e,t,n){"use strict";var r=n(789786),i=n(461644),o=n(810381),s=n(349901);class a{build(){return{log_name:this._loggerName}}constructor(){this._loggerName="cc4b_user_track"}}(0,r.gn)([(0,r.fM)(0,i.t),(0,r.fM)(1,o.m),(0,r.fM)(2,s.yR),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===i.t?Object:i.t,void 0===o.m?Object:o.m,void 0===s.yR?Object:s.yR])],class{reportBySlardar(e,t){this._notNeedReportToSlardarEvents.includes(e)||(this._logger.info("".concat(e," %v"),t),this._reportService.reportDevEvent(e,t))}constructor(e,t,n){this._containerService=e,this._reportService=t,this._loggerService=n,this._notNeedReportToSlardarEvents=[],this._logger=this._loggerService.createLogger("cc4b-tea-to-slardar",{contextParams:this._containerService.createInstance(a)})}})},466344:function(e,t,n){"use strict";n.d(t,{AK:function(){return u}});var r,i,o=n(772322),s=n(123951),a=n(247130),c=n(659179),l=n(285348),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36;return{[l.NS.TikTok]:{id:l.NS.TikTok,logo:(0,o.jsx)(c.mm4,{size:e}),name:s.ZP.t("web_embedcode_text_tiktok",{},"TikTok"),disabled:!1},[l.NS.FacebookPage]:{id:l.NS.FacebookPage,logo:(0,o.jsx)(a.Xfi,{size:e}),name:s.ZP.t("web_postfb_text_share_facebook_page",{},"Facebook Page"),disabled:!1},[l.NS.Instagram]:{id:l.NS.Instagram,logo:(0,o.jsx)(a.VBC,{size:e}),name:s.ZP.t("web_ytb_ins_text_ins_reel",{},"Instagram Reels"),disabled:!1}}};(r=i||(i={})).MP4="mp4",r.MOV="mov",l.NS.TikTok,l.NS.TikTok,l.NS.FacebookPage,l.NS.FacebookPage,l.NS.Instagram,l.NS.Instagram},763898:function(e,t,n){"use strict";n.d(t,{G:function(){return w}});var r=n(772322);n(459360),n(119485);var i=n(401725),o=n(384850),s=n(818843),a=n(291982),c=n(878954),l=n(342544),u=n(193320),d=n(830566),h=n(636771),p=n(950059),f=n(917923),m=n(218571),v=n(285348),g=n(439409),_=n(771268),y=n(254845),S=n(105789),b=n.n(S),T=n(123951),E=n(659179),x=n(851023),w=(0,u.Pi)(e=>{var{showMenuKeys:t,safeZoneType:n=v.NS.Unknown,assetId:u,onAssetIdChange:S,readonly:w,onWillUpload:k,mediaValidateResult:C}=e,{scheduleReportManager:R,containerService:I,chooseAsset:N,exportManager:O,closeModal:A}=(0,g.QZ)(),{taskStatus:M}=O.observableData,{validateStatus:L,validateFail:P}=null!=C?C:{},Z=(0,m.useMemo)(()=>I.createInstance(l.R,{chooseAsset:N}),[]),j={mediaMime:T.ZP.t("bulk_post_video_upload_error_message_subject1"),mediaSize:T.ZP.t("bulk_post_video_upload_error_message_subject2"),mediaDuration:T.ZP.t("bulk_post_video_upload_error_message_subject3"),mediaRatio:T.ZP.t("bulk_post_video_upload_error_message_subject4"),mediaResolution:T.ZP.t("bulk_post_video_upload_error_message_subject5")},{uploadType:D,videoUrl:U,videoKey:G}=Z,[F,V]=(0,m.useState)(!1),W=(0,m.useMemo)(()=>{var e;return n&&F?null===(e=h.c[n])||void 0===e?void 0:e.cover:""},[F,n]),B=(0,m.useMemo)(()=>{var e;return null===(e=h.c[n])||void 0===e?void 0:e.text()},[n]);return((0,m.useEffect)(()=>{var e=Z.assetVideoPlayerManager.onChangeAssetVideo(e=>{u!==e.assetId&&(null==S||S(e.assetId))}),t=O.onExported(e=>{var t,n;Z.setVideoAsset(null!==(n=null===(t=e.data)||void 0===t?void 0:t.assetId)&&void 0!==n?n:"")});return()=>{e.dispose(),t.dispose()}},[]),(0,m.useEffect)(()=>(0,y.U5)(()=>{var{uploadManager:{observableData:e}}=Z;return e.uploadProgress},e=>{0===e&&(null==k||k())}),[]),(0,m.useEffect)(()=>{u?Z.setVideoAsset(u):Z.selectUploadType(l.A.Empty)},[u]),M!==_.tN.Success&&M!==_.tN.Idle)?(0,r.jsxs)("div",{className:p.Z.exportVideo,children:[O.renderExportProcessMask(A),O.renderExportFailureMask(A)]}):D===l.A.Empty?(0,r.jsx)(c.f,{onClick:e=>{Z.selectUploadType(e)},showMenuKeys:t,onDragFile:e=>{Z.selectUploadType(l.A.Computer,e)}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:b()(p.Z.assetVideo,{[p.Z.error]:L}),children:[(0,r.jsx)(f.j,{src:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(U,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),videoKey:G,wrapperStyle:{width:"100%"},safeZoneCover:W,centerElement:w?null:(0,r.jsx)(d.h,{showMenuKeys:t,onClick:e=>{Z.selectUploadType(e)},onClickButton:()=>{R.reportSchedulePostPage("replace_media")}})}),(0,r.jsx)(s.C,{uploadManager:Z.uploadManager,onCancel:()=>{Z.selectUploadType(l.A.Empty)}}),(0,r.jsx)(a.J,{assetVideoPlayerManager:Z.assetVideoPlayerManager}),L&&n&&(0,r.jsxs)("div",{className:p.Z.errorInfo,children:[T.ZP.t("bulk_post_video_upload_error_message",{video_spec:(()=>{if(!P||0===P.length)return null;var e=P.map(e=>j[e]||"");return 1===P.length?e[0]:"".concat(e[0],", ").concat(e.slice(1).map(e=>e.toLowerCase()).join(", "))})(),num:null==P?void 0:P.length},"{video_spec} do not meet the requirements"),(0,r.jsx)(i.Z,{content:"".concat(T.ZP.t("bulk_post_video_upload_error_tooltip",{},"Please check here")),style:{zIndex:1002},children:(0,r.jsx)(E.$vp,{className:p.Z.errorInfoIcon,onClick:()=>new x.c().show(n)})})]})]}),(0,r.jsxs)("div",{className:p.Z.switchContainer,children:[(0,r.jsx)("span",{className:b()(p.Z.text,{[p.Z.disable]:!n}),children:B}),n?(0,r.jsx)(o.Z,{checked:F,onChange:V}):(0,r.jsx)(r.Fragment,{})]})]})})},785710:function(e,t,n){"use strict";n.d(t,{Mp:function(){return p},QW:function(){return d},Vo:function(){return l},aJ:function(){return u},kQ:function(){return h}});var r=n(608476),i=n(182033),o=n(370652),s=n(824769),a=n(41723),c=n.n(a);function l(){return"/schedule-publish"===window.location.pathname}function u(){l()||(window.location.href="/schedule-publish")}function d(e,t){var{formSaver:n,formSuite:r}=e,i=Array.from(r.values()),{batchDealResultTaskList:o}=n,s=[];return o.forEach((e,n)=>{var r=null;if(!e.ok){var o,a,c,l,u=null==i?void 0:null===(c=i[n])||void 0===c?void 0:null===(a=c.formData)||void 0===a?void 0:null===(o=a.selectedAccounts)||void 0===o?void 0:o[0],d=t.find(e=>e.id===u);d&&(r={id:d.id,username:d.username,uniqueName:null!==(l=d.uniqueName)&&void 0!==l?l:"",failReason:e.msg,type:d.type},s.push(r))}}),{total:o.length,failList:s}}function h(e,t){var n,r,a=(null==t?void 0:t.id)?o.q.modify:o.q.add,l=null==t?void 0:t.formInfo.authType,u=null==t?void 0:t.status,{loadingStatus:d}=e,h=d===i.dh.Loading,p=c()().add(5,"minute").valueOf();return{mode:a,authType:l,resultStatus:u,operational:h,scheduleTime:(n=null!==(r=null==t?void 0:t.scheduleTime)&&void 0!==r?r:p)<Date.now()?(0,s.MV)(Date.now()):(0,s.MV)(n),failedReason:null==t?void 0:t.failedReason}}function p(e,t){if(!t)return!1;var{status:n}=t;return n===r.Qc.Done||n===r.Qc.Failed||e.loadingStatus!==i.dh.Loading&&e.loadingStatus!==i.dh.Idle&&n===r.Qc.Pending}},441468:function(e,t,n){"use strict";n.d(t,{DR:function(){return r.D},HM:function(){return o.H},Oj:function(){return i.O}});var r=n(795988),i=n(375023),o=n(366519)},32742:function(e,t,n){"use strict";n.d(t,{hY:function(){return i.h},oY:function(){return r.o}});var r=n(565141),i=n(145193)},12465:function(e,t,n){"use strict";n.d(t,{Gb:function(){return a},Lc:function(){return s},b:function(){return i},o1:function(){return o}});var r=n(860884),i={name:"edit_type",description:"\u7F16\u8F91\u7C7B\u578B",paramType:r.Rs.String},o={name:"tab_name",description:"tab\u540D\u79F0",paramType:r.Rs.String},s={name:"sub_tab",description:"\u5B50tab\u540D\u79F0",paramType:r.Rs.String},a={name:"template_id",description:"\u6A21\u677Fid",paramType:r.Rs.String}},917923:function(e,t,n){"use strict";n.d(t,{j:function(){return g}});var r=n(461228),i=n(69984),o=n(772322);n(334033);var s=n(196123),a=n(218571),c=n(659179),l=n(105789),u=n.n(l),d=n(459737),h=n(566819);n(302387);var p=n(830512),f=n(771502);function m(e){var t=Math.floor(e/60);return"".concat(t>=10?t:"0".concat(t),":").concat("00".concat(Math.floor(e%60)).slice(-2))}var v=(e,t)=>e*t,g=e=>{var{src:t,wrapperStyle:l,videoKey:g,curTime:_=0,volumeValue:y=.6,getDuration:S,onPlay:b,onPause:T,onFullScreen:E,onVolume:x,centerElement:w,safeZoneCover:k}=e,[C,R]=(0,a.useState)(!1),[I,N]=(0,a.useState)({dragging:!1,playStatus:!1,duration:0,currentTimeStamp:_,isFullScreen:!1,volume:y}),O=(0,a.useRef)(null),A=(0,a.useRef)(null),M=(0,a.useRef)(null),L=(0,a.useRef)(null),P=(0,a.useRef)(null),Z=(0,a.useRef)(0),{playStatus:j,duration:D,dragging:U,currentTimeStamp:G}=I,F=e=>{N(t=>(0,i._)({},t,e))},V=(0,a.useMemo)(()=>(G/D*100).toString(),[D,G]),W=e=>{P.current&&P.current.seek(e)},B=(0,a.useCallback)((0,r._)(function*(){var{default:e}=yield Promise.resolve().then(n.bind(n,500377)),{default:r}=yield Promise.all([n.e("8583"),n.e("3173"),n.e("7716"),n.e("9680")]).then(n.bind(n,929241)),i=new r({width:"100%",height:"100%",videoFillMode:"auto",autoplay:!1,loop:!0,controls:!1,url:t,el:M.current,plugins:[e],Mp4EncryptPlayer:{keyValue:g,useEME:!1,switchBitRateWay:!0,disableBufferBreakCheck:!0},ignores:[w?"start":""],icons:{play:c.wfm,pause:c.QHi}});F({playStatus:!1,currentTimeStamp:0}),i.on(d.LOADED_METADATA,()=>{P.current&&F({duration:P.current.duration,currentTimeStamp:P.current.currentTime>P.current.duration?P.current.duration:P.current.currentTime})}),i.on(d.TIME_UPDATE,()=>{P.current&&F({duration:P.current.duration,currentTimeStamp:P.current.currentTime>P.current.duration?P.current.duration:P.current.currentTime})}),i.on(d.PLAY,()=>{F({playStatus:!0})}),i.on(d.PAUSE,()=>{F({playStatus:!1})}),i.on(d.FULLSCREEN_CHANGE,e=>{F({isFullScreen:e})}),P.current&&P.current.destroy(),P.current=i}),[t,g]);return(0,a.useEffect)(()=>{if(t&&M.current)return B(),()=>{var e;null===(e=P.current)||void 0===e||e.destroy(),P.current=null}},[B,t,g]),(0,a.useEffect)(()=>{var e,t,n;(null==P?void 0:null===(e=P.current)||void 0===e?void 0:e.duration)&&(null==S||S(null==P?void 0:null===(t=P.current)||void 0===t?void 0:t.duration),F({duration:(null==P?void 0:null===(n=P.current)||void 0===n?void 0:n.duration)||0}))},[P]),(0,o.jsxs)("section",{ref:L,style:l,className:u()("universal_video",p.Z.dropmenuContainer),onMouseEnter:()=>{clearTimeout(O.current),R(!0)},onMouseLeave:()=>{O.current=setTimeout(()=>{R(!1)},500)},children:[(0,o.jsx)("div",{className:"video",ref:M}),w?(0,o.jsx)("section",{className:u()(p.Z.centerPosition,p.Z.dropmenu),onClick:e=>e.stopPropagation(),children:w}):null,(0,o.jsx)(f.U.Cover,{safeZoneCover:k,visible:!!k}),(0,o.jsxs)("section",{className:u()("controls",C&&"show"),children:[(0,o.jsxs)("div",{className:"progress",children:[(0,o.jsx)("div",{className:"progress-played",style:{width:"".concat(V,"%")},children:(0,o.jsx)("span",{className:"progress-btn"})}),(0,o.jsx)("div",{className:"progress-seek-area",ref:A,onClick:e=>{W(v((e.clientX-A.current.getBoundingClientRect().left+1)/A.current.offsetWidth,D))},onMouseMove:e=>{var t=e.clientX-A.current.getBoundingClientRect().left+1;U&&W(v(t/A.current.offsetWidth,D))},onMouseUp:()=>{F({dragging:!1})},onMouseEnter:e=>{var t=e.clientX-A.current.getBoundingClientRect().left+1;U&&W(v(t/A.current.offsetWidth,D))},onMouseLeave:()=>{F({dragging:!1})},onMouseDown:e=>{var t=e.clientX-A.current.getBoundingClientRect().left+1;F({dragging:!0}),W(v(t/A.current.offsetWidth,D)),Z.current=1}})]}),(0,o.jsxs)("div",{className:"action",children:[(0,o.jsxs)("div",{className:"action-left",children:[(0,o.jsx)("div",{className:"action-play",children:j?(0,o.jsx)(c.QHi,{onClick:()=>{var e;null==T||T(),null==P||null===(e=P.current)||void 0===e||e.pause()}}):(0,o.jsx)(c.wfm,{onClick:()=>{var e;null==P||null===(e=P.current)||void 0===e||e.play(),null==b||b(),F({playStatus:!0})}})}),(0,o.jsxs)("div",{className:"action-currentTime",children:[(0,o.jsx)("div",{className:"current-time",children:m(G)}),(0,o.jsx)(s.Z,{className:"current-time-divider",type:"vertical"}),(0,o.jsx)("div",{className:"current-time-duration",children:m(D)})]})]}),(0,o.jsxs)("div",{className:"action-right",children:[(0,o.jsx)(h.Z,{setVolume:e=>{(null==P?void 0:P.current)&&(P.current.volume=e,F({volume:e}))},volume:I.volume,onVolume:x}),(0,o.jsx)("div",{className:"action-fullscreen",children:I.isFullScreen?(0,o.jsx)(c.A2U,{onClick:()=>{var e,t;null===(e=P.current)||void 0===e||e.exitFullscreen(null!==(t=L.current)&&void 0!==t?t:void 0)}}):(0,o.jsx)(c.xMo,{onClick:()=>{var e,t;null===(e=P.current)||void 0===e||e.getFullscreen(null!==(t=L.current)&&void 0!==t?t:void 0),null==E||E()}})})]})]})]})]})}},778881:function(e,t,n){"use strict";n.d(t,{E:function(){return h}});var r=n(772322),i=n(218571),o=n(123951),s=n(384918),a=n(611519),c=n(562190),l=n(235137),u=n(722169),d=n(761575),h=e=>{var{onChange:t,downloadManager:n}=e,h=e=>{t([e])},{isDownloadEnable:p,isAutoDownloading:f}=(0,l.k)(n,e=>({isDownloadEnable:e.observableData.isDownloadEnable,isAutoDownloading:e.observableData.isAutoDownloading})),m=(0,i.useCallback)(()=>{f||n.autoDownloadVideo()},[n,f]),v=(0,u.debounce)(m,500);return(0,r.jsxs)("div",{className:s.Z.settings,children:[(0,r.jsx)("div",{className:a.Z.header,children:o.ZP.t("web_embedcode_text_upload_video_to",{},"Upload to Social Media")}),(0,r.jsx)(c.Wi,{navToNext:e=>{var t=d.P0[e];"Download"!==t?h(t):v()}})]})}},804510:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var r=n(772322),i=()=>(0,r.jsxs)("svg",{width:"108",height:"108",viewBox:"0 0 108 108",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M66.2 31.8008C54.6021 31.8008 45.2002 41.2027 45.2002 52.8006C45.2002 53.9065 45.2857 54.9925 45.4504 56.0522C38.4794 57.3437 33.2002 63.4557 33.2002 70.8006C33.2002 79.0848 39.9159 85.8005 48.2001 85.8005H84.1997C92.4839 85.8005 99.1996 79.0848 99.1996 70.8006C99.1996 63.4557 93.9204 57.3438 86.9496 56.0523C87.1143 54.9925 87.1998 53.9065 87.1998 52.8006C87.1998 41.2027 77.7979 31.8008 66.2 31.8008Z",fill:"var(--lvv-color-main-default)","fill-opacity":"0.2"}),(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M37.1422 49.122L32.639 50.3929C28.2257 51.6384 25.0002 55.7002 25.0002 60.4998C25.0002 66.2988 29.7013 70.9998 35.5004 70.9998H42.9989L41.3912 76.9998H35.5004C26.3875 76.9998 19 69.6125 19 60.4998C19 52.9439 24.079 46.5743 31.0092 44.6185C31.0033 44.413 31.0003 44.2068 31.0003 43.9999C31.0003 32.402 40.4026 23 52.0008 23C63.5991 23 73.0014 32.402 73.0014 43.9999C73.0014 44.2068 72.9984 44.413 72.9924 44.6185C79.9227 46.5743 85.0017 52.9439 85.0017 60.4998C85.0017 69.6125 77.6142 76.9998 68.5012 76.9998H62.6102L61.0025 70.9998H68.5012C74.3004 70.9998 79.0015 66.2988 79.0015 60.4998C79.0015 55.7002 75.776 51.6384 71.3627 50.3929L66.8594 49.122L66.9948 44.4449C66.9991 44.2973 67.0012 44.1489 67.0012 43.9999C67.0012 35.7157 60.2853 29 52.0008 29C43.7164 29 37.0005 35.7157 37.0005 43.9999C37.0005 44.1489 37.0026 44.2973 37.0069 44.445L37.1422 49.122ZM49.4046 47.7581L48.9112 49.485C47.6666 53.8412 44.0256 57.0918 39.5566 57.8366L40.4444 63.1631C43.828 62.5992 46.8865 61.0515 49.3008 58.8051V73.9998H54.7009V58.8051C57.1151 61.0515 60.1737 62.5992 63.5572 63.1631L64.445 57.8366C59.9761 57.0918 56.3351 53.8412 55.0904 49.485L54.597 47.7581H49.4046Z",fill:"var(--lvv-color-text-icon-default-primary)"})]})},968331:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var r=n(963730),i=n(810381),o=n(257023);function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0,a=e.createInstance(new r.M(t,n)),c=a.getEventParams();e.invokeFunction(e=>{e.get(i.m).reportBusinessEvent(a.eventName,c,s)}),e.invokeFunction(e=>{var t=e.get(o.x);null==t||t.reportBySlardar(a.eventName,c)})}},642506:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r,i=n(772322);n(529114);var o=n(293793),s=n(173006),a=n(947406),c=n(595051),l=n(813727),u=n(218571),d=n(105789),h=n.n(d),p=n(744152),f=n(763470),m=n(987969),v=n(103436),g=n(741995);(r=new Image).src=globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(f,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),[].push(r);var _=[{ticksPerPercent:1,totalPercent:50},{ticksPerPercent:10,totalPercent:30},{ticksPerPercent:20,totalPercent:15},{ticksPerPercent:30,totalPercent:4}].reduce((e,t,n)=>{var{ticksPerPercent:r,totalPercent:i}=t;return e.concat({ticksPerPercent:r,totalPercent:i,endTick:r*i+(0===n?0:e[n-1].endTick),endPercent:i+(0===n?0:e[n-1].endPercent)})},[]);let y=function(e){var{status:t,onCancel:n,onRetry:r,errorCode:d,onBackToEdit:y}=e,{i18n:S}=(0,l.$)(),b=(0,u.useMemo)(()=>[S.t("web_textvideo_toast_loading_1",{},"Generating video may take some time."),S.t("web_textvideo_toast_loading_2",{}," You can edit the video after it is generated."),S.t("web_textvideo_toast_loading_3",{},"You may replace the media afterward.")],[S]),[T,E]=(0,u.useState)(0),x=b[T],w=(0,o.default)(()=>E((T+1)%b.length)),{run:k,cancel:C}=(0,a.default)(w,3e3),R=(0,s.default)(0);(0,a.default)(R.inc,100);var I=(0,u.useMemo)(()=>{var e=R.state,t=_.findIndex(t=>e<t.endTick);if(t<0)return 99;var n=_[t];return Math.min(99,Math.floor(n.endPercent+(e-n.endTick)/n.ticksPerPercent))},[R.state]),N=()=>{r()};return((0,u.useEffect)(()=>{"loading"!==t?C():k()},[C,k,t]),(0,u.useEffect)(()=>{"loading"!==t&&R.set(0)},[t,R]),"failed"===t)?(0,i.jsxs)("div",{className:g.Z["automatic-generation"],children:[(0,i.jsx)("div",{className:g.Z["failed-icon"],children:(0,i.jsx)(m.r,{})}),(0,i.jsx)("div",{className:g.Z["failed-text"],children:S.t("web_textvideo_toast_generate_failure",{},"Failed to generate")}),(0,i.jsx)("div",{className:g.Z["tip-text"],children:S.t("web_textvideo_toast_unstable_network",{},"Poor internet connection")}),(0,i.jsx)("div",{className:g.Z["failed-button-container"],children:(0,i.jsx)(c.Z,{type:"secondary",size:"large",onClick:N,children:S.t("web_textvideo_button_retry",{},"Retry")})})]}):"failedServer"===t?(0,i.jsxs)("div",{className:g.Z["automatic-generation"],children:[(0,i.jsx)("div",{className:g.Z["failed-icon"],children:(0,i.jsx)(v.r,{})}),(0,i.jsx)("div",{className:g.Z["failed-text"],children:S.t("web_textvideo_toast_generate_failure",{},"Failed to generate")}),(0,i.jsx)("div",{className:g.Z["tip-text"],children:d===p.a6.InvalidInput?S.t("web_textvideo_desc_english_script_required",{},"Currently the video can only be generated from English scripts."):d===p.a6.SensitiveInput?S.t("web_textvideo_desc_no_sensitive_content",{},"Your script may contain content that violate our Community Guidelines."):S.t("web_textvideo_toast_exception_occurred",{},"Something went wrong")}),(0,i.jsx)("div",{className:g.Z["failed-button-container"],children:d&&[p.a6.InvalidInput,p.a6.SensitiveInput].includes(d)?(0,i.jsx)(c.Z,{type:"secondary",size:"large",onClick:y,children:S.t("web_textvideo_button_no_sensitive_content",{},"Edit script")}):(0,i.jsx)(c.Z,{type:"secondary",size:"large",onClick:N,children:S.t("web_textvideo_button_retry",{},"Retry")})})]}):(0,i.jsxs)("div",{className:g.Z["automatic-generation"],children:[(0,i.jsx)("div",{className:g.Z["generating-ball"],style:{backgroundImage:"url(".concat(f,")")},children:(0,i.jsxs)("div",{className:g.Z["generating-progress"],children:[(0,i.jsx)("div",{className:h()(g.Z["progress-text"],{[g.Z["one-digit"]]:I<10}),children:I}),(0,i.jsx)("div",{className:g.Z["percent-text"],children:"%"})]})}),(0,i.jsx)("div",{className:g.Z["generating-text"],children:S.t("web_autocut_toast_generating_now",{},"Generating...")}),(0,i.jsx)("div",{className:g.Z["tip-text"],children:x}),(0,i.jsx)(c.Z,{className:g.Z["cancel-button"],type:"secondary",size:"large",onClick:()=>{n()},children:S.t("web_pwa_button_cancel",{},"Cancel")})]})}},396594:function(e,t,n){"use strict";n.d(t,{S:function(){return d}});var r=n(461228),i=n(218571),o=n(123951),s=n(247093),a=n(565523),c=n(860884),l=n(192894),u=n(657893),d=(e,t)=>{var n,[d,h]=(0,i.useState)(!1),p=(0,a.G)(l.cF);return{isExporting:d,handleExport:(n=(0,r._)(function*(n,r){try{h(!0);var{task_id:i}=yield e(r),a=(0,c.Lj)(u.o1),d=(0,c.Lj)(u.Lc),f={fromPosition:"video_export",subTab:d,tabName:a,materialSource:"export",editType:"text_to_video"};switch(n){case l.Bv.TikTok:case l.Bv.FacebookPage:case l.Bv.Instagram:p.publishVideoFromDraft({operationType:l.P0[n],reportData:f,exportManager:p.createExportManager({exportTaskId:i})});break;case l.Bv.Download:p.downloadVideo({exportManager:p.createExportManager({exportTaskId:i}),reportData:f})}}catch(e){s.Z.error(o.ZP.t("cc_ecom_create_video_export_download_fail",{},"Couldn\u2019t download. Try again later."))}finally{t(),h(!1)}}),function(e,t){return n.apply(this,arguments)})}}},736326:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(772322);n(529114);var i=n(595051),o=n(429188),s=n(218571),a=n(659179),c=n(41723),l=n.n(c),u=n(193703),d=n(135692),h=n(905141),p=n(813727),f=n(970029),m=n(105789),v=n.n(m),g=n(28726),_=n(565523),y=n(909599),S=n(125343),b=n(886656),T=n(461644),{DEFINITION:E,QUALITY:x,FORMAT:w,FPS:k}=h.JY;let C=(0,o.Pi)(e=>{var{onExport:t}=e,{i18n:n}=(0,p.$)(),o=(0,_.G)(T.t),c=(0,_.G)(y.Y),{exportManager:h}=c,m=(0,s.useRef)(null),C=(0,u.X)(),R=h.exportPrepareLoading,[I]=(0,s.useState)({video_name:"Script_to_video_".concat(l()().format("YYYYMMDD")),duration:0,definition:E[2].value,quality:x[1].value,fps:k[2].value,format:w[0].value}),N=(0,s.useMemo)(()=>{var e,t,r=null!==(t=null===(e=h.exportWorkspace)||void 0===e?void 0:e.name)&&void 0!==t?t:"my cloud";return n.t("editor_export_willsaved",{placeholder1:r},"Will be saved to {placeholder1}")},[h.exportWorkspace,n]),{generatedResult:O}=c;return(0,r.jsxs)("div",{className:v()(S.Z["material-export-modal-container"]),children:[(0,r.jsxs)("div",{className:S.Z["material-export-modal-title"],children:[(0,r.jsx)("span",{children:n.t("export_web_vid_eo",{},"\u5BFC\u51FA")}),(0,r.jsx)(a.BdS,{onClick:()=>{(0,b.I)(o,{actionType:"close"}),h.setExportModalVisible(!1),h.setExportWorkspace(void 0)},className:S.Z["close-icon"]})]}),(0,r.jsxs)("div",{className:S.Z["material-export-modal-content"],children:[(null==O?void 0:O.cover_url)&&(0,r.jsx)("div",{className:S.Z["material-export-modal-content-cover"],children:(0,r.jsxs)("div",{className:S.Z["material-export-modal-content-cover-wrapper"],children:[(0,r.jsx)("span",{className:S.Z.duration,children:"".concat((0,d.ci)(1e3*((null==O?void 0:O.duration)||0)))}),(0,r.jsx)("img",{className:S.Z["cover-wrapper"],src:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(null==O?void 0:O.cover_url,null,{logType:"js.href/src",mode:"black",reportOnly:"all"}),crossOrigin:"anonymous",draggable:"false"})]})}),(0,r.jsx)("div",{className:S.Z["material-export-modal-content-form"],children:(0,r.jsx)(f.Z,{formData:I,ref:m})})]}),(0,r.jsxs)("div",{className:S.Z["material-export-modal-footer"],children:[(0,r.jsx)("div",{className:S.Z["material-export-modal-footer-btns"],children:(0,r.jsx)(i.Z,{id:"export-confirm-button",type:"primary",long:!0,onClick:()=>{var e,n,r,i,o=Number(null!==(i=null===(e=m.current)||void 0===e?void 0:e.expandAdvancedSwitch)&&void 0!==i?i:0);h.handleExport(null===(r=m.current)||void 0===r?void 0:null===(n=r.getFields)||void 0===n?void 0:n.call(r),{isAdvancedOption:o}),null==t||t()},loading:R,children:n.t("export_web_vid_eo",{},"\u5BFC\u51FA")},"export")}),(0,r.jsxs)("div",{className:S.Z["material-export-modal-footer-tips"],children:["* ",N,C?null:(0,r.jsx)(g.f,{})]})]})]})})},28726:function(e,t,n){"use strict";n.d(t,{f:function(){return h}});var r=n(772322),i=n(105789),o=n.n(i),s=n(813727),a=n(429188),c=n(565057),l=n(909599),u=n(565523),d=n(400840),h=(0,a.Pi)(()=>{var e,{i18n:t}=(0,s.$)(),{exportManager:n}=(0,u.G)(l.Y),i=(null===(e=n.currentWorkspace)||void 0===e?void 0:e.role)!==d.eB.visitor;return(0,r.jsx)("div",{className:c.Z["move-workspace-wrapper"],children:(0,r.jsx)("div",{className:o()("move-workspace-set",{[c.Z.active]:i}),onClick:()=>{n.setMoveSpaceModalVisible(!0)},children:t.t("editor_save_set",{},"Set")})})})},416379:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(772322);n(936039);var i=n(802406),o=n(218571),s=n(123951),a=n(565523),c=n(909599),l=n(614003),u=n(583741),d=n(591075),h=n(208916),p=e=>{var{data:t,index:n,visible:p,onClick:f}=e,m=(0,u.B)(),{smartWriterManager:v}=(0,a.G)(c.Y);function g(e){(0,l.q)(m,{action:e,rank:n+1,aiWriterTemplateName:t.tea_template_name,aiWriterTemplateTitle:t.name,aiWriterTemplateDesc:t.description})}return(0,o.useEffect)(()=>{p&&g("show")},[p]),(0,r.jsx)("div",{className:h.Z.card,onClick:function(){v.currentTemplate=t.type,g("click"),null==f||f()},children:(0,r.jsxs)("div",{className:h.Z.children,children:[(0,r.jsx)("img",{className:h.Z.icon,src:globalThis.xssNamespace["lvweb/smart-tools"].filterUrl(t.icon_url,null,{logType:"js.href/src",mode:"black",reportOnly:"all"})}),(0,r.jsx)("div",{className:h.Z.name,children:s.oc.t(t.name)}),(0,r.jsx)(i.Z.Paragraph,{className:h.Z.description,ellipsis:{rows:2},children:s.oc.t(t.description)}),(0,r.jsx)("div",{className:h.Z.icon_next,children:(0,r.jsx)(d.r,{})})]})})}},70937:function(e,t,n){"use strict";n.d(t,{F:function(){return f}});var r=n(772322);n(218571);var i=n(813727),o=n(917761),s=n(565523),a=n(429188),c=n(910009),l=n(405859),u=n(909599),d=n(635202),h=n(384065),p=n(314337),f=(0,a.Pi)(e=>{var{onGotIt:t}=e,{i18n:n}=(0,i.$)(),a=(0,s.G)(l.J),f=(0,s.G)(u.Y),{theme:m}=a,{smartWriterManager:v}=f;return(0,r.jsxs)("div",{className:p.Z.container,children:[(0,r.jsx)("div",{className:p.Z.left,children:m===o.h.Light?(0,r.jsx)(d.r,{className:p.Z.icon}):(0,r.jsx)(h.r,{className:p.Z.icon})}),(0,r.jsxs)("div",{className:p.Z.body,children:[(0,r.jsx)("div",{className:p.Z.title,children:n.t("web_textvideo_toast_lost_internet_connection",{},"Something went wrong")}),(0,r.jsx)("div",{className:p.Z.content,children:n.t("web_textvideo_toast_check_your_internet",{},"Connect to your internet and try again.")})]}),(0,r.jsx)("div",{className:p.Z.right,children:(0,r.jsx)(c.H,{type:"info",onClick:function(){v.retryFetchResultsError(),null==t||t()},children:n.t("web_textvideo_button_go_back",{},"Go Back")})})]})})},201711:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(980014),i=n(164837);function o(e,t){var n=!1,o=!1,s=!1,a=!1,c=!1,l=!1,u=!1,d=!1,h=!1;if(t)o=!0;else switch(e){case i.jp.DefaultEmpty:case i.jp.RewriteProcessFailed:n=!0;break;case i.jp.AiProcessing:o=!0;break;case i.jp.AiProcessFailed:s=!0;break;case i.jp.Generating:a=!0;break;case i.jp.GenerateFailed:c=!0;break;case i.jp.ViewProduction:l=!0;break;case i.jp.PreparingExport:l=!0,u=!0;break;case i.jp.Exporting:d=!0;break;case i.jp.Exported:h=!0;break;default:(0,r.Y2)("should not be here!")}return{showExported:h,showPreparingExport:u,showExporting:d,showScript:n,showFailed:s,showGenerating:a,showGenerateFailed:c,showResult:l,showLoading:o}}},395903:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var r=n(772322),i=n(659179),o=n(105789),s=n.n(o),a=n(73824),c=n(123951),l=e=>{var{name:t,isGrid:n=!0,itemCount:o,onDirectorySelect:l,assetId:u,sourcePath:d=[]}=e;return n?(0,r.jsxs)("div",{className:s()(a.Z.cardSelectGridItem),onClick:()=>{l({assetId:u||"",sourcePath:d,name:t})},children:[(0,r.jsxs)("div",{className:a.Z["item-top"],children:[(0,r.jsx)(i.vHl,{size:44}),void 0!==o&&(0,r.jsx)("div",{className:a.Z["item-time"],children:c.oc.t("web_folder_item_number",{num:o,number0:o},"{num, plural, =1 {# item} other {# items}}")})]}),(0,r.jsx)("div",{className:a.Z.itemFooter,children:(0,r.jsx)("p",{children:t})})]}):(0,r.jsxs)("div",{className:s()(a.Z.cardSelectListItem),onClick:()=>{l({assetId:u||"",sourcePath:d,name:t})},children:[(0,r.jsx)("div",{className:a.Z.cover,children:(0,r.jsx)(i.vHl,{size:28})}),(0,r.jsx)("div",{className:a.Z.name,children:t}),(0,r.jsx)("div",{className:a.Z.desc,children:c.oc.t("web_folder_item_number",{num:o,number0:o},"{num, plural, =1 {# item} other {# items}}")})]})}},966254:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var r=n(123951);function i(e){return new Date(e).toLocaleString(r.ZP.language,{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}},253874:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(462407),i=n(459737);class o extends r.ZP{afterCreate(){this.on(i.PLAY,()=>{this.setStyle("display","none")}),this.on(i.ENDED,()=>{this.setStyle("display","block")})}render(){return"<img class='xgplayer-poster' src='".concat(this.playerConfig.poster,"' crossOrigin='anonymous' style='object-fit: contain;' />")}constructor(...e){super(...e),this.pluginName="PosterPlugin"}}},794124:function(e,t,n){"use strict";n.d(t,{L:function(){return r},e:function(){return l}});var r,i=n(789786),o=n(543544),s=n(248176),a=n(386527),c=n(254845);(r||(r={})).initOnTextToVideoService="AIToolBarManager";class l{get isLike(){return!!this.isLikeMap[this.current]}get isDisLike(){return!!this.isDislikeMap[this.current]}restore(){this._persistanceService.restore(this,["isLikeMap","isDislikeMap","current"],{shouldRestore:!!this._capcutAccountService.userProfile.uid,storeId:this._storeId,uid:this._capcutAccountService.userProfile.uid})}setLike(e){(0,a.Z)(this.isLikeMap,this.current,e)}setDislike(e){(0,a.Z)(this.isDislikeMap,this.current,e)}destroy(){this.isLikeMap={},this.isDislikeMap={},this.current=0}constructor(e,t,n){this._capcutAccountService=t,this._persistanceService=n,this.isLikeMap={},this.isDislikeMap={},this.current=0,this._storeId="",(0,c.rC)(this),this._storeId=e}}(0,i.gn)([c.LO,(0,i.w6)("design:type","undefined"==typeof Record?Object:Record)],l.prototype,"isLikeMap",void 0),(0,i.gn)([c.LO,(0,i.w6)("design:type","undefined"==typeof Record?Object:Record)],l.prototype,"isDislikeMap",void 0),(0,i.gn)([c.LO,(0,i.w6)("design:type",Number)],l.prototype,"current",void 0),(0,i.gn)([c.Fl,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[]),(0,i.w6)("design:returntype",void 0)],l.prototype,"isLike",null),(0,i.gn)([c.Fl,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[]),(0,i.w6)("design:returntype",void 0)],l.prototype,"isDisLike",null),(0,i.gn)([c.aD,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[]),(0,i.w6)("design:returntype",void 0)],l.prototype,"restore",null),(0,i.gn)([c.aD,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[Boolean]),(0,i.w6)("design:returntype",void 0)],l.prototype,"setLike",null),(0,i.gn)([c.aD,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[Boolean]),(0,i.w6)("design:returntype",void 0)],l.prototype,"setDislike",null),(0,i.gn)([c.aD,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[]),(0,i.w6)("design:returntype",void 0)],l.prototype,"destroy",null),l=(0,i.gn)([(0,i.fM)(1,s.Gw),(0,i.fM)(2,o.t),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===r?Object:r,void 0===s.Gw?Object:s.Gw,void 0===o.t?Object:o.t])],l)},499663:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(526599),i="cancel_sub_popup";class o{getEventParams(){return this._params}constructor(e){this._params=e,this.eventName=i}}function s(e,t,n){i===n&&(0,r.K)(e,o,[t])}},60341:function(e,t,n){"use strict";n.d(t,{b:function(){return s}});var r=n(526599),i="click_cloud_entrance";class o{getEventParams(){return this._params}constructor(e){this._params=e,this.eventName=i}}function s(e,t,n){i===n&&(0,r.K)(e,o,[t])}},775411:function(e,t,n){"use strict";n.d(t,{F:function(){return c}});var r=n(978232),i=n(950544),o=n(105789),s=n.n(o),a=n(22508);class c extends r.S{match(e,t){return e===i.Lv&&"true"===t}render(e){return e.class=s()(e.class,a.Z.mark),e.children}}},647071:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(978232),i=n(113944);class o extends r.S{renderLine(e){var{children:t}=e;return e.lineClass+=" ".concat(i.Z.cc_ttv_basic_editor_line),t}editorDidMount(){this.appendWrapperCls()}constructor(e){super(),this.editor=e,this.name="linePlaceholder",this.appendWrapperCls=()=>{var e=this.editor.getOuterContainer();e&&e.classList.add(i.Z.cc_ttv_base_text_editor_wrapper)}}}o.KEY="typeSetting"},361617:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var r=n(386527),i=n(716913);class o{store(e){if(!this._shouldStopStore){for(var[t,n]of this._needStoreTargetMap.entries())if(this._needStoreKeysMap.has(n)){var o,s=this._needStoreKeysMap.get(n),a=this._storeIdMap.get(t),c={};for(var l of s)(0,r.Z)(c,l,(0,i.Z)(t,l,void 0));null===(o=sessionStorage)||void 0===o||o.setItem("".concat(this._getUIDPrefix(e)).concat(a),JSON.stringify(c))}}}restore(e,t,n){if(!n.shouldRestore)return!1;var i=e.constructor.name;for(var o of t)this._needStoreKeysMap.has(i)?this._needStoreKeysMap.get(i).push(o):this._needStoreKeysMap.set(i,[o]);this._needStoreTargetMap.set(e,i),this._storeIdMap.set(e,n.storeId);try{var s,a=JSON.parse((null===(s=sessionStorage)||void 0===s?void 0:s.getItem("".concat(this._getUIDPrefix(null==n?void 0:n.uid)).concat(n.storeId)))||"{}");for(var[c,l]of Object.entries(a))(0,r.Z)(e,c,l);return!0}catch(e){return!1}}setStopSaving(e){this._shouldStopStore=null==e||e}_getUIDPrefix(e){return e?"".concat(e,"_"):""}constructor(){this._serviceBrand=void 0,this._needStoreKeysMap=new Map,this._needStoreTargetMap=new Map,this._storeIdMap=new Map,this._shouldStopStore=!1}}},478705:function(e,t,n){"use strict";n.d(t,{a:function(){return c}});var r=n(789786),i=n(806797),o=n(226134),s=n(358902),a=n(453111);class c extends i.aU{constructor(e,t){super(),this._teaAdapterService=t,this.disableRequestCache=!1,this.disableSidebarResourcePreload=!1,this.editorCategory="smart_tools",this.isSupportMultiWorkSpace=!0,this.resourcePanel=a.n,this.sideMenuShowBrandTypes=[],this.disableUserBrand=!0,this.abTestManager=new s.Z(this._teaAdapterService),e.appConfiguration&&this.initAppConfiguration(e.appConfiguration)}}c=(0,r.gn)([(0,r.fM)(1,o.w),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof SmartToolsConfigurationServiceOptions?Object:SmartToolsConfigurationServiceOptions,void 0===o.w?Object:o.w])],c)},591584:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var r=n(789786),i=n(332132),o=n(890255),s=n(37011);class a{constructor(e,t){this.keyValue=new o.T,this.database=t.createInstance(i.v,e)}}a=(0,r.gn)([(0,r.fM)(1,s.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Array,void 0===s.T?Object:s.T])],a)},724499:function(e,t,n){"use strict";n.d(t,{DP:function(){return o},HI:function(){return i},bl:function(){return r}});var r={GET_CATEGORY_BY_PANEL:"/artist/v1/panel/get_panel_info",GET_RECOMMENDS:"/artist/v1/effect/ccweb/feed",GET_CATEGORY_RESOURCE:"/artist/v1/effect/get_resources_by_category_id",GET_SEARCH_WORDS:"/artist/v1/effect/get_search_words",GET_SUGGEST_WORDS:"/artist/v1/effect/get_suggest_words",SEARCH:"/artist/v1/effect/search",SEARCH_FROM_TUCHONG:"/artist/v1/library/tuchong/search",BATCH_GET_RESOURCES_BY_ID:"/artist/v1/effect/mget_artist_item",BATCH_GET_TUCHONG_RESOURCES_BY_ID:"/artist/v1/effect/mget_item",GET_ADOBE_PHOTO_BY_ID:"/artist/v1/effect/mget_item",GET_THIRD_PARTY_RESOURCES_BY_ID:"/artist/v1/effect/mget_item",ORDER:"/artist/v1/library/tuchong/order",GET_COLLECTIONS:"/artist/v1/effect/user_favorite_list",BATCH_FAVORITE:"/artist/v1/effect/batch_favorite",BATCH_UNFAVORITE:"/artist/v1/effect/batch_unfavorite",GET_SIMILARITIES:"/artist/v1/effect/get_recommend_items",COPYRIGHT_TIPS:"/artist/v1/effect/copyright_tips",GET_HOMEPAGE_EFFECT_LIST:"/artist/v1/homepage/get_effect_list",POST_EFFECT:"/artist/v1/post/effect"},i="11.0.0",o="web"},868874:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});var r=n(816752),i={get domain(){return r._L.getVar("web_domain")},baseURL:"/lv/v1",urlMap:{GET_COLLECTIONS:"/music/get_collections",GET_MUSIC_EFFECT_COLLECTIONS:"/music/get_music_effect_collections",GET_COLLECTION_SONGS:"/music/get_collection_songs",SEARCH_SONGS:"/music/search/songs",MULTI_GET_SONGS:"/music/multi_get_songs",GET_MY_DOUYIN_SONGS:"/get_tiktok_songs",TEXT_TO_AUDIO:"/text_to_audio",RENDER_TASK_CREATE:"/render_task/create",CAPTION_SUBMIT:"/caption/submit",CAPTION_QUERY:"/caption/query",CAPTION_SUBMIT_TRANSCRIBE:"/caption/sami/submit",CAPTION_QUERY_TRANSCRIBE:"/caption/sami/query",SUBTITLE_TRANSLATE:"/language/translate",RECENT_TRANSLATE_LAN_LIST:"/language/list_recent_translate",DETECT_LANGUAGE:"/language/detect",CREATE_INTELLIGENT_TASK:"/intelligence/create",GET_INTELLIGENT_TASK:"/intelligence/query",CREATE_MATTING_TASK:"/keying/create_task",CREATE_REVERSE_TASK:"/reverse/create_task",GET_REVERSE_TASK:"/reverse/get_task",GET_MATTING_TASK:"/keying/get_task",TRANSFER_MATTING_TASK:"/ever_photo/sync_asset",GET_TRANSFER_MATTING_TASK:"/ever_photo/get_sync_state",GET_PACKAGE_INFO:"/draft/get_package_info",SAVE_DRAFT:"/editor/video_draft/save",VOICE_RECOGNITION:"/intelligence/man_voice_recognition",GET_DRAFT_FRAME_INFO:"/draft/frame_info",RENDER_DRAFT_FRAME_INFO:"/draft/frame_info/render",CCWEB_FEED:"/ccweb/feed",GET_USER_PERMISSION:"/user/web/user_permissions",MUSIC_BEAT:"/music/music_beat",MUSIC_BEAT_AGREE:"/music/check_agree_info",UPDATE_USER_AGREEMENT:"/user/update",GET_MATERIAL_LIST:"/asset/list",GET_ASSETS_BY_ASSET_IDS:"/asset/detail",DELETE_MATERIALS:"/asset/delete",COPY_MATERIAL:"/asset/copy",SYNC_UPLOAD_INFO:"/asset/sync_upload_info",QUERY_PROCESS:"/asset/query_process",EVENT_REPORT:"/event/report",GET_SAMI_TOKEN:"/common/tts/token",GET_USER_INFO:"/user/web/user_info",GET_TEXT_TO_VIDEO_DRAFT:"/draft/text_to_video",CREATE_TEXT_TO_VIDEO_DRAFT:"/draft/text_to_video/create",GET_EFFECT_AB_PARAM:"/effect/get_ab_param",GET_EFFECT_SETTINGS:"/service/settings/v3/",COMMIT_USERCHANGE:"/editor/video_draft/delta_update",QUERY_VC_TASK:"/intelligence/query",CREATE_VC_TASK:"/intelligence/create",COMMIT_ACTION:"/draft/commit_action"},webmssdk:!0}},243307:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var r=n(69984),i=n(764112);function o(e){var t,n,o=(t=document.cookie.match(RegExp("(^| )_tea_web_id=([^;]+)")),(n=window.GATEWAY_INJECTED_WEB_ID||"")||null===t||(n=t[2]),n);e.interceptors.request.use(e=>(0,i._)((0,r._)({},e),{params:(0,i._)((0,r._)({},e.params||{}),{aid:"348188",device_platform:"web",region:window.__locationCountryCode||"us",web_id:o})}))}},660023:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var r=(0,n(30276).yh)("brand-data-service")},181487:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(47533),i=n(704626),o=n(51522);class s{getWithCache(e,t,n){var{maxAge:i,cacheError:s=!1}=this._options,a=this._cache.get(e),c=this._timestampCache.get(e);if(a&&!(i&&c&&Date.now()-c>i))return a;var l=t();if(0===i||(this._cache.put(e,l),this._timestampCache.set(e,Date.now()),!i))return l;if((0,r.D)(i).then(()=>{this._removeIfNeeded(e,l)}),!s&&(l.catch(()=>{this._removeIfNeeded(e,l)}),l.then(t=>{(function(e){if(!(0,o.Z)(e))return!1;var{ok:t,code:n,msg:r}=e;return!1===t&&"number"==typeof n&&"string"==typeof r})(t)&&this._removeIfNeeded(e,l)}),n||this._options.cacheCondition)){var u,d=null!==(u=this._options.cacheCondition)&&void 0!==u?u:()=>!0,h=null!=n?n:()=>!0;l.then(t=>{d(t)&&h(t)||this._removeIfNeeded(e,l)})}return l}_removeIfNeeded(e,t){this._cache.get(e)===t&&(this._cache.remove(e),this._timestampCache.delete(e))}constructor(e){var t;this._options=e,this._cache=new i.z(null!==(t=this._options.size)&&void 0!==t?t:1/0),this._timestampCache=new Map}}},586342:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var r,i,o=n(30276);(r=i||(i={})).Loki="loki",r.Heycan="heycan";var s=(0,o.yh)("effect-data-service")},121859:function(e,t,n){"use strict";n.d(t,{T:function(){return m}});var r=n(461228),i=n(618230),o=n(963473),s=n(327736),a=n(669403),c=n(89772),l=n(816752),u=n(295542),d=n(723394),h=n(976478),p=n(530487),f=n(97825);class m{getAppInfo(){var e=this;return(0,r._)(function*(){var{did:t,os:n}=e.appInfo;if(!t||!n){var r=(yield d.S4.getAppInfo()).data;e.appInfo={did:r.data.did,os:r.data.os}}return e.appInfo})()}get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new s.yk().build(s.kk),(0,a.i3)(e),(0,c.mH)(e),(0,i.V)(e),e)}return this._networkClientInstance}callNativeRequest(e){var t=this;return(0,r._)(function*(){var{url:n,data:r}=e,{did:i,os:o}=yield t.getAppInfo();return new Promise((e,t)=>{d.S4.request({url:n,data:JSON.stringify(r),header:(0,c.rN)({url:n,tdid:i,pf:"mac"===o?"3":"4"}),method:"POST",needCommonParams:!0}).then(t=>{var{data:n}=t,{response:r}=JSON.parse(decodeURIComponent(null==n?void 0:n.encodeData));e(r)}).catch(e=>{t(e)})})})()}_getApi(e){return"".concat(l._L.getVar("web_domain")).concat(e)}detectLanguage(e){var t=this;return(0,r._)(function*(){try{var n,r=yield t.callNativeRequest({url:t._getApi(u.b.DETECT_LANGUAGE),data:{detect_text:e.text}});if("0"!==r.ret)return(0,o.wf)(Number(r.ret),null!==(n=r.errmsg)&&void 0!==n?n:"");return(0,o.oW)({code:r.data.language_code,name:r.data.language_name,languageCode:f.G[r.data.language_code]})}catch(e){return(0,p.m)(e,-1,"detectLanguage api error")}})()}translateLanguage(e){var t=this;return(0,r._)(function*(){try{var n,r=yield t.callNativeRequest({url:t._getApi(u.b.TRANSLATE_LANGUAGE),data:{target_language:e.targetLanguage,source_language:e.sourceLanguage,tmp_id:e.tmpId,subtitles:e.subTitles.map(e=>({start_time:e.startTime,end_time:e.endTime,text:e.text}))}});if("0"!==r.ret&&"200703"!==r.ret)return(0,o.wf)(Number(r.ret),null!==(n=r.errmsg)&&void 0!==n?n:"");return(0,o.oW)((0,h.N)(r))}catch(e){return(0,p.m)(e,-1,"translateLanguage api error")}})()}constructor(){this.appInfo={did:"",os:""}}}},656322:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var r=(0,n(30276).yh)("permission-data-service")},602766:function(e,t,n){"use strict";n.d(t,{P:function(){return c}});var r=n(789786),i=n(37011),o=n(74616),s=n(340777),a=n(474585);class c{getDraftShareInfo(e){return this._getDraftShareInfoRepository.getDraftShareInfo(e)}getWorkspaceInfoExternal(e){return this._getWorkspaceInfoExternalRepository.getWorkspaceInfoExternal(e)}applyToDraft(e){return this._applyToDraftRepository.applyToDraft(e)}constructor(e){this._instantiationService=e,this._getDraftShareInfoRepository=this._instantiationService.createInstance(o.r),this._getWorkspaceInfoExternalRepository=this._instantiationService.createInstance(s.v),this._applyToDraftRepository=this._instantiationService.createInstance(a.S)}}c=(0,r.gn)([(0,r.fM)(0,i.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===i.T?Object:i.T])],c)},287067:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(461228),i=n(327736),o=n(669403),s=n(89772),a=n(816752),c=n(618230),l=n(213741);class u{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new i.yk().build({headers:{"Content-Type":"application/json"}}),(0,o.i3)(e),(0,s.mH)(e),(0,c.V)(e),e)}return this._networkClientInstance}getIsBindShopify(){var e=this;return(0,r._)(function*(){try{var t,n=yield e._networkClient.post(e._api,{platform:"Shopify"},{withCredentials:!0});return{isBind:!!(null==n?void 0:null===(t=n.data.user_infos)||void 0===t?void 0:t.length)}}catch(e){return{isBind:!1}}})()}get _api(){return"".concat(a._L.getVar("web_domain")).concat(l.b.GET_SHOPIFY_BIND)}}},747865:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(619398),i=n(815767),o=n(285921);class s extends i.r{get resourceType(){return r._g.Tone}parseEffectsToResources(e){return e.map(e=>(0,o.t)(e))}}},607482:function(e,t,n){"use strict";function r(e){var t;if(e&&null!==e.detail_infos&&(null==e?void 0:null===(t=e.common_info)||void 0===t?void 0:t.single_frame_height)!==0)return{common:{singleFrameHeight:e.common_info.single_frame_height,singleFrameWidth:e.common_info.single_frame_width,totalSetNum:e.common_info.total_set_num},details:e.detail_infos.map(e=>({frameCount:e.frame_count,imageWidth:e.width,imageHeight:e.height,url:e.url,encryptedBucketKey:e.encrypted_bucket_key,encryptedKey:e.encrypted_key}))}}n.d(t,{J:function(){return r}})},595231:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});var r=(0,n(30276).yh)("video-motion-data-service")},156216:function(e,t,n){"use strict";n.d(t,{w:function(){return m}});var r=n(461228),i=n(69984),o=n(963473),s=n(392174),a=n(980014),c=n(791647),l=n(80217),u=n(882526),d=n(28328),h=n(977e3),p=n(211928),f=n(17116);class m extends c.y{startImmediately(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return(0,r._)(function*(){yield t.start(!0,e)})()}cancel(){var e;return!!super.cancel()&&(null===(e=this._downloadTask)||void 0===e||e.cancel(),this._downloadTask=void 0,!0)}loadResource(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,r._)(function*(){try{return yield n._doLoadPersistentResource({downloadType:e?p._5.Eager:p._5.Idle,disableTokenHeaders:t})}catch(r){if((0,o.oi)(r)&&1e3===r.code)return yield n._loadResourceWithoutCache(e,t);throw r}})()}_loadResourceWithoutCache(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._doLoadPersistentResource({downloadType:e?p._5.Eager:p._5.Idle,clearCacheIfExist:!0,databaseFirst:!1,disableTokenHeaders:t})}_makeDownloadTask(e){var t=(0,f.Y)({tokenKey:this._metadata.key,decryptKey:(0,l.d)(this._metadata)?this._metadata.decryptKey:void 0}),n=(0,l.d)(this._metadata)?(0,s.Cv)(this._metadata.decryptKey).toString():"";return this._downloadService.download({key:t,url:this._metadata.url,decryptHash:n,uniqueId:this._metadata.md5||t},(0,i._)({},this.config,e))}_doLoadPersistentResource(e){return new Promise((t,n)=>{var i=this._makeDownloadTask(e);this._downloadTask=i;var s=this;i.onSuccess((0,r._)(function*(){(0,a.ZB)(i.value);try{yield s.doParseArrayBuffer(i.value),t(s.value)}catch(e){n((0,o.Mx)(1e3,"parse arraybuffer error",e))}})),i.onFail(e=>{n(e)})})}doParseArrayBuffer(e){var t=this;return(0,r._)(function*(){var{buffer:n}=e;n=yield t.decryptResourceIfNeeded(n),t.value.buffer=n,t.value.contentType=e.contentType})()}decryptResourceIfNeeded(e){var t=this;return(0,r._)(function*(){if((0,l.d)(t._metadata)&&t._metadata.shouldAutoDecrypt){if(t._metadata.encryptType===h.PS.AES_CBC)return yield(0,u.Z)(e,t._metadata.decryptKey);if(t._metadata.encryptType===h.PS.AES_GCM)return yield(0,d.y)(e,t._metadata.decryptKey)}return e})()}constructor(e,t,n){super(),this._metadata=e,this._downloadService=t,this.config=n,this.value=(0,i._)({},this._metadata)}}},57568:function(e,t,n){"use strict";n.d(t,{Q:function(){return c}});var r=n(789786),i=n(251164),o=n(963730),s=n(37011),a=n(993206);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new o.M(a.S,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,r.gn)([(0,r.fM)(0,s.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===s.T?Object:s.T])],c)},866121:function(e,t,n){"use strict";n.d(t,{x:function(){return h}});var r=n(461228),i=n(69984),o=n(789786),s=n(211928),a=n(980014),c=n(466477),l=n(597193),u=n(806797),d=n(998803);class h extends d.m{getContentUrl(e){return e.package.urlList[0]}doFetch(){var e=this;return(0,r._)(function*(){(0,a.Y2)(!(0,c.R)(e.value));var[t,n]=(yield e._emojiDataService.batchGetEmojisByIds({enterFrom:e._configurationService.editorCategory,ids:[e.value.resourceId]})).pair();if(t)throw Error("doFetch error-".concat(t.code,"-").concat(t.msg));return(0,i._)({type:e.value.type},n.list[0])})()}constructor(e,t,n,r,i){super(e,t,n),this.key=e,this._downloadService=n,this._emojiDataService=r,this._configurationService=i}}h=(0,o.gn)([(0,o.fM)(2,s.tx),(0,o.fM)(3,l.l),(0,o.fM)(4,u.Ui),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IEmojiMeta?Object:IEmojiMeta,void 0===s.tx?Object:s.tx,void 0===l.l?Object:l.l,void 0===u.Ui?Object:u.Ui])],h)},520484:function(e,t,n){"use strict";n.d(t,{j:function(){return h}});var r=n(461228),i=n(69984),o=n(789786),s=n(762484),a=n(211928),c=n(980014),l=n(466477),u=n(49978),d=n(806797);class h extends u.${getCover(e){return e.icon.urlList[0]}getContentUrl(e){return e.package.urlList[0]}get contentFileFilter(){return e=>e.endsWith(".json")}doFetch(){var e=this;return(0,r._)(function*(){(0,c.Y2)(!(0,l.R)(e.value));var[t,n]=(yield e._filterDataService.batchGetFiltersByIds({enterFrom:e._configurationService.editorCategory,ids:[e.value.resourceId]})).pair();if(t)throw Error("doFetch error-".concat(t.code,"-").concat(t.msg));return(0,i._)({type:e.value.type},n.list[0])})()}constructor(e,t,n,r,i){super(e,t,n),this.key=e,this._downloadService=n,this._filterDataService=r,this._configurationService=i}}h=(0,o.gn)([(0,o.fM)(2,a.tx),(0,o.fM)(3,s.E),(0,o.fM)(4,d.Ui),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IFilterMeta?Object:IFilterMeta,void 0===a.tx?Object:a.tx,void 0===s.E?Object:s.E,void 0===d.Ui?Object:d.Ui])],h)},93838:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(461228),i=n(69984),o=n(789786),s=n(736212),a=n(211928),c=n(980014),l=n(466477),u=n(49978),d=n(806797);class h extends u.${getCover(e){return e.icon.urlList[0]}getContentUrl(e){return e.package.urlList[0]}_getDownloadConfig(e){return{withCredentials:e.isFromBrand}}doFetch(){var e=this;return(0,r._)(function*(){(0,c.Y2)(!(0,l.R)(e.value)),"dreamina"===e.value.sourceFrom&&(0,c.ss)("");var[t,n]=(yield e._fontDataService.batchGetFontsByIds({enterFrom:e._configurationService.editorCategory,ids:[e.value.resourceId]})).pair();if(t)throw Error("doFetch error-".concat(t.code,"-").concat(t.msg));return(0,i._)({type:e.value.type},n.list[0])})()}constructor(e,t,n,r,i){super(e,t,n),this.key=e,this._downloadService=n,this._fontDataService=r,this._configurationService=i}}h=(0,o.gn)([(0,o.fM)(2,a.tx),(0,o.fM)(3,s.H),(0,o.fM)(4,d.Ui),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IFontMeta?Object:IFontMeta,void 0===a.tx?Object:a.tx,void 0===s.H?Object:s.H,void 0===d.Ui?Object:d.Ui])],h)},255171:function(e,t,n){"use strict";n.d(t,{k:()=>f});let r=n("789786"),i=n("251164"),o=n("461228"),s=n("69984"),a=n("104753"),c=n("211928"),l=n("250047"),u=n("762134");class d extends u.B{getCover(e){return e.coverUrl}getGifResourceToken(){return this._getResourceTokenSync(this._createGifResourceToken.bind(this),()=>this._gifResourceToken,e=>this._gifResourceToken=e)}_createGifResourceToken(e){var{animatedUrl:t,key:n}=e;return(0,l.MZ)({key:n,url:t},this._downloadService)}doFetch(){var e=this;return(0,o._)(function*(){var[t,n]=(yield e._gifDataService.getGifsByIds({ids:[e.value.key]})).pair();if(t)throw Error("doFetch error-".concat(t.code,"-").concat(t.msg));return(0,s._)({type:e.value.type},n.list[0])})()}constructor(e,t,n,r){super(e,t,n),this.key=e,this._downloadService=n,this._gifDataService=r}}d=(0,r.gn)([(0,r.fM)(2,c.tx),(0,r.fM)(3,a.N),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IGifMeta?Object:IGifMeta,void 0===c.tx?Object:c.tx,void 0===a.N?Object:a.N])],d);let h=n("963730"),p=n("37011");class f extends i.e{createResource(e,t){return this._instantiationService.createInstance(new h.M(d,[e,t]))}constructor(e){super(e),this._instantiationService=e}}f=(0,r.gn)([(0,r.fM)(0,p.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===p.T?Object:p.T])],f)},815281:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(789786),i=n(251164),o=n(618961),s=n(963730),a=n(37011);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new s.M(o.i,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,r.gn)([(0,r.fM)(0,a.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===a.T?Object:a.T])],c)},186112:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var r=n(789786),i=n(251164),o=n(502524),s=n(963730),a=n(37011);class c extends i.e{createResource(e,t){return this._instantiationService.createInstance(new s.M(o.q,[e,t]))}constructor(e){super(e),this._instantiationService=e}}c=(0,r.gn)([(0,r.fM)(0,a.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===a.T?Object:a.T])],c)},893342:function(e,t,n){"use strict";n.d(t,{C:function(){return p}});var r=n(461228),i=n(69984),o=n(789786),s=n(211928),a=n(980014),c=n(466477),l=n(49978),u=n(336103),d=n(806797),h=n(250047);class p extends l.${getPresetSchemaResourceToken(){return this._getResourceTokenSync(this._createPresetSchemaToken.bind(this),()=>this._presetSchemaResourceToken,e=>this._presetSchemaResourceToken=e)}getCover(e){return e.icon.urlList[0]}getContentUrl(e){return e.package.urlList[0]}_getDownloadConfig(e){return{withCredentials:e.isFromBrand}}doFetch(){var e=this;return(0,r._)(function*(){(0,a.Y2)(!(0,c.R)(e.value)),(0,a.Y2)(e.value.resourceId,"text preset should have an resource id");var[t,n]=(yield e._textPresetDataService.getTextByIds({enterFrom:e._configurationService.editorCategory,ids:[e.value.resourceId],source:e.value.source})).pair();if(t)throw Error("doFetch error-".concat(t.code,"-").concat(t.msg));return(0,i._)({type:e.value.type},n.list[0])})()}_createPresetSchemaToken(e){(0,a.ZB)(e.presetSchemaUrl);var t=this._getPresetSchemaResourceKey();return(0,h.MZ)({key:t,url:e.presetSchemaUrl},this._downloadService,{withCredentials:!0})}_getPresetSchemaResourceKey(){return"".concat(this.key,"_preset_schema")}constructor(e,t,n,r,i){super(e,t,n),this.key=e,this._downloadService=n,this._textPresetDataService=r,this._configurationService=i}}p=(0,o.gn)([(0,o.fM)(2,s.tx),(0,o.fM)(3,u.J),(0,o.fM)(4,d.Ui),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof ITextPresetMeta?Object:ITextPresetMeta,void 0===s.tx?Object:s.tx,void 0===u.J?Object:u.J,void 0===d.Ui?Object:d.Ui])],p)},721476:function(e,t,n){"use strict";n.d(t,{r:function(){return g}});var r=n(461228),i=n(69984),o=n(789786),s=n(977e3),a=n(939051),c=n(804e3),l=n(211928),u=n(250047),d=n(980014),h=n(442317),p=n(466477),f=n(963875),m=n(271846),v=n(610306);class g extends m.k{isSupportFastImport(){return this._onFastImportDefer.promise}getOriginResourceToken(){return this._getResourceTokenSync(this._createOriginResourceToken.bind(this),()=>this._userVideoOriginResourceToken,e=>this._userVideoOriginResourceToken=e)}getPreviewResourceToken(){return this._getResourceTokenSyncWithCondition(e=>{if(e)return this._createPreviewResourceToken()},()=>this._userVideoPreviewResourceToken,e=>this._userVideoPreviewResourceToken=e,this._onFastImportDefer)}_doResourceReady(e){var t=this,n=()=>super._doResourceReady;return(0,r._)(function*(){if((0,d.Y2)((0,f.Y)(t.value)),t._isOriginUserFile(t.value.url)){var[r,i]=(yield t._evercloudTokenDataService.getEvercloudToken()).pair();r||(t._liveRequestToken=i.token)}n().call(t,e)})()}getCover(e){(0,d.Y2)(e.cover);var t=e.cover.key;return{url:e.cover.url,decryptKey:t,shouldAutoDecrypt:!!t,encryptType:s.PS.AES_CBC}}getUserVideoResourceToken(){return this._getResourceTokenSync(this._createEncryptedUserVideoResourceToken.bind(this),()=>this._userVideoEncryptedResourceToken,e=>this._userVideoEncryptedResourceToken=e)}getUserVideoDecryptedResourceToken(){return this._getResourceTokenSync(this._createDecryptedUserVideoResourceToken.bind(this),()=>this._userVideoResourceToken,e=>this._userVideoResourceToken=e)}getCoverResourceToken(){var e,t,n=this.value;return n.cover||null===(t=n.uploading)||void 0===t||null===(e=t.generateCoverTrigger)||void 0===e||e.call(t),this._getResourceTokenSyncWithCondition(this._createCoverToken.bind(this),()=>this._coverResourceToken,e=>this._coverResourceToken=e,this._onCoverDefer)}getThumbResourceTokens(){var e=this;return(0,r._)(function*(){if(!e._userVideoThumbResourceTokens){var t,n,r;null===(r=e.value)||void 0===r||null===(n=r.uploading)||void 0===n||null===(t=n.generateThumbTrigger)||void 0===t||t.call(n)}return yield e._onThumbDefer.promise,e._userVideoThumbResourceTokens||(e._userVideoThumbResourceTokens=e._createUserVideoThumbTokens(e.value)),e._userVideoThumbResourceTokens})()}_createDecryptedUserVideoResourceToken(e){(0,d.Y2)((0,f.Y)(this.value));var t=this._environmentService.isAutoTest||this._environmentService.forceHighQuality?["720p","540p","480p","360p"]:["480p","360p","540p","720p"];for(var n of((0,d.Y2)(e.videoTranscodeInfo,"videoTranscodeInfo should not be undefined!"),t)){var r=e.videoTranscodeInfo[n],{url:i,key:o}=null!=r?r:{};if(i){var a=this._getResolutionResourceKey(n);return(0,u.MZ)({key:a,url:i,decryptKey:o,shouldAutoDecrypt:!!o,encryptType:s.PS.AES_CBC},this._downloadService)}}(0,d.ss)()}_createEncryptedUserVideoResourceToken(e){(0,d.Y2)((0,f.Y)(this.value));var t=this._environmentService.isAutoTest||this._environmentService.forceHighQuality?["720p","480p","360p","540p"]:["480p","360p","540p","720p"];for(var n of((0,d.Y2)(e.videoTranscodeInfo,"videoTranscodeInfo should not be undefined!"),t)){var r=e.videoTranscodeInfo[n],{url:i,key:o}=null!=r?r:{};if(i){var a=this._getResolutionResourceKey(n);return(0,u.MZ)({key:a,url:i,decryptKey:o,shouldAutoDecrypt:!1,encryptType:s.PS.AES_CBC},this._downloadService)}}(0,d.ss)()}_createUserVideoThumbTokens(e){(0,d.Y2)(e.thumb);var{singleFrameWidth:t,singleFrameHeight:n}=e.thumb.common;return this._userVideoThumbResourceTokens=e.thumb.details.map(e=>{var r=this._getThumbResourceKey(e.url),o={frameCount:e.frameCount,singleFrameWidth:t,singleFrameHeight:n,imageWidth:e.imageWidth,imageHeight:e.imageHeight};return(0,u.MZ)((0,i._)({key:r,url:e.url,decryptKey:e.encryptedKey,shouldAutoDecrypt:!!e.encryptedKey,encryptType:s.PS.AES_CBC},o),this._downloadService)}),this._userVideoThumbResourceTokens}_createPreviewResourceToken(){var e,t=this.value;(0,d.Y2)(null===(e=t.uploading)||void 0===e?void 0:e.blobUrl);var n="".concat(this.key,"_fast_import"),r=t.uploading.blobUrl;return(0,u.MZ)({key:n,url:r},this._downloadService)}_createOriginResourceToken(e){(0,d.Y2)((0,f.Y)(e));var t="".concat(this.key,"_origin");return(0,u.MZ)({key:t,url:e.url},this._downloadService,this.downloadConfig)}_createCoverToken(){var e,t=this.value;return(0,d.Y2)(t.cover),(0,u.MZ)({key:this._getCoverResourceKey(),url:t.cover.url,decryptKey:null!==(e=t.cover.key)&&void 0!==e?e:"",shouldAutoDecrypt:!!t.cover.key,encryptType:s.PS.AES_CBC},this._downloadService)}_getResolutionResourceKey(e){return"".concat(this.key,"_resolution_").concat(e)}_getThumbResourceKey(e){return"".concat(this.key?"".concat(this.key,"_"):"","thumb_").concat(e)}doFetch(){return new Promise(e=>{(0,d.Y2)(!(0,f.Y)(this.value)),this.value.onProgress(e=>{Object.assign(this.value,e),this._checkAndMarkResourceToken()}),this.value.onReady(t=>{Object.assign(this.value,t),(0,f.Y)(this.value)||((0,p.K)(this.value),this._checkAndMarkResourceToken(),(0,d.Y2)((0,f.Y)(this.value)),e(this.value))})})}get downloadConfig(){if(this._liveRequestToken)return{headers:{"x-everphoto-global-session-token":this._liveRequestToken,"x-everphoto-token":this._liveRequestToken}}}_isOriginUserFile(e){return(0,d.Y2)((0,f.Y)(this.value)),!!e&&!!e.match(/origin/)}_checkAndMarkResourceToken(){var e,t,n,r=this.value;(null===(e=r.uploading)||void 0===e?void 0:e.isSupportFastImport)&&(null===(t=r.uploading)||void 0===t?void 0:t.file)&&this._onFastImportDefer.resolve(!0),(r.status===a.a.Success||(null===(n=r.uploading)||void 0===n?void 0:n.isSupportFastImport)===!1)&&this._onFastImportDefer.resolve(!1),r.thumb&&!this._userVideoThumbResourceTokens&&this._onThumbDefer.resolve(),r.cover&&this._onCoverDefer.resolve()}constructor(e,t,n,r,i){super(e,t,n),this.key=e,this._downloadService=n,this._evercloudTokenDataService=r,this._environmentService=i,this._onFastImportDefer=(0,h.PQ)(),this._onThumbDefer=(0,h.PQ)(),this._onCoverDefer=(0,h.PQ)(),this._checkAndMarkResourceToken()}}g=(0,o.gn)([(0,o.fM)(2,l.tx),(0,o.fM)(3,c.o),(0,o.fM)(4,v.Y),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IUserVideoMeta?Object:IUserVideoMeta,void 0===l.tx?Object:l.tx,void 0===c.o?Object:c.o,void 0===v.Y?Object:v.Y])],g)},443062:function(e,t,n){"use strict";n.d(t,{e:function(){return v}});var r=n(461228),i=n(69984),o=n(789786),s=n(977e3),a=n(949743),c=n(211928),l=n(250047),u=n(980014),d=n(963473),h=n(466477),p=n(762134),f=n(171127),m=n(610306);class v extends p.B{getCover(e){return e.coverUrl}getVideoResourceToken(){return this._getResourceTokenSync(this._createVideoResourceToken.bind(this),()=>this._videoResourceToken,e=>this._videoResourceToken=e)}getVideoOrderedResourceToken(){var e=this;return(0,r._)(function*(){if(yield e._onResourceReadyDefer.promise,(0,u.Y2)((0,h.R)(e.value)),e._videoOrderedResourceToken)return(0,d.oW)(e._videoOrderedResourceToken);if(!(0,f.uS)(e.value))return(0,d.oW)(e.getVideoResourceToken());if((0,f.ko)(e.value))return(0,d.oW)(e._createVideoOrderedResourceToken(e.value));var t=yield e._orderTuchongVideo();return t.ok?(0,d.oW)(e._createVideoOrderedResourceToken(e.value)):t})()}getThumbResourceTokens(){return this._getResourceTokenAsync(this._createVideoThumbTokens.bind(this),()=>this._thumbResourceTokens,e=>this._thumbResourceTokens=e)}getVideoResolutionInfo(){for(var e of((0,u.Y2)((0,h.R)(this.value)),this._environmentService.isAutoTest?["720p","1080p","540p","480p","360p"]:["480p","360p","540p","720p","1080p"])){var t=this.value.transcode[e];if(null==t?void 0:t.url)return{url:t.url,resolution:e,decryptKey:t.decryptKey}}var{url:n}=this.value.originVideo;return{url:n,resolution:"origin"}}getVideoOrderedResolutionInfo(){return((0,u.Y2)((0,h.R)(this.value)),this.value.order)?((0,u.Y2)(this.value.order.url),{url:this.value.order.url,resolution:"origin"}):this.getVideoResolutionInfo()}getVideoStreamInfo(){var e=this;return(0,r._)(function*(){if(yield e._onResourceReadyDefer.promise,(0,u.Y2)((0,h.R)(e.value)),!(0,f.uS)(e.value)){var t,{url:n,decryptKey:r}=e.getVideoResolutionInfo();return(0,d.oW)({url:n,decryptKey:r,encryptType:s.PS.AES_CBC,withCredentials:null!==(t=e.value.isFromBrand)&&void 0!==t&&t})}if((0,f.ko)(e.value)){var{url:i}=e.getVideoOrderedResolutionInfo();return(0,d.oW)({url:i})}var o=yield e._orderTuchongVideo();return o.ok?(0,d.oW)({url:o.value.url}):o})()}_createCoverToken(e){var t=this._getCoverResourceKey(),n=this.getCover(e);return(0,l.MZ)({key:t,url:n},this._downloadService,this._getDownloadConfig(e))}_orderTuchongVideo(){var e=this;return(0,r._)(function*(){(0,u.Y2)((0,h.R)(e.value));var t=e.value.order,n=yield e._videoDataService.order({id:t.id});if(!n.ok)return n;var{url:r}=n.value;return e.value.order.url=r,n})()}_getDownloadConfig(e){return{withCredentials:e.isFromBrand}}_createVideoResourceToken(e){(0,u.Y2)((0,h.R)(this.value));var{url:t,decryptKey:n,resolution:r}=this.getVideoResolutionInfo(),i=this._getResolutionResourceKey(r);return this._videoResourceToken=(0,l.MZ)({key:i,url:t,decryptKey:n,shouldAutoDecrypt:!1},this._downloadService,this._getDownloadConfig(e)),this._videoResourceToken}_createVideoOrderedResourceToken(e){(0,u.Y2)((0,h.R)(this.value));var{url:t}=this.getVideoOrderedResolutionInfo(),n=this._getOrderedResolutionResourceKey();return this._videoResourceToken=(0,l.MZ)({key:n,url:t},this._downloadService,this._getDownloadConfig(e)),this._videoResourceToken}_createVideoThumbTokens(e){return e.thumb.details.map(t=>{var n=this._getThumbResourceKey(t.url),{singleFrameWidth:r,singleFrameHeight:o}=e.thumb.common,s={frameCount:t.frameCount,singleFrameWidth:r,singleFrameHeight:o,imageWidth:t.imageWidth,imageHeight:t.imageHeight};return(0,l.MZ)((0,i._)({key:n,url:t.url},s),this._downloadService)})}_getResolutionResourceKey(e){return"".concat(this.key,"_resolution_").concat(e)}_getOrderedResolutionResourceKey(){return"".concat(this.key,"_ordered")}_getThumbResourceKey(e){return"".concat(this.key,"_thumb_").concat(e)}doFetch(){var e=this;return(0,r._)(function*(){var[t,n]=(yield e._videoDataService.getVideos({})).pair();if(t)throw Error("doFetch error-".concat(t.code,"-").concat(t.msg));return(0,i._)({type:e.value.type},n.value.list[0])})()}constructor(e,t,n,r,i){super(e,t,n),this.key=e,this._downloadService=n,this._videoDataService=r,this._environmentService=i}}v=(0,o.gn)([(0,o.fM)(2,c.tx),(0,o.fM)(3,a.u),(0,o.fM)(4,m.Y),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",["undefined"==typeof IResourceKey?Object:IResourceKey,"undefined"==typeof IVideoMeta?Object:IVideoMeta,void 0===c.tx?Object:c.tx,void 0===a.u?Object:a.u,void 0===m.Y?Object:m.Y])],v)},395842:function(e,t,n){"use strict";var r=n(246513),i=n(719613),o=n(122579);e.exports=function(e){if(void 0===e)return!1;if(!o(e))throw new r("Assertion failed: `Desc` must be a Property Descriptor");return!!(i(e,"[[Value]]")||i(e,"[[Writable]]"))}},367359:function(e){"use strict";e.exports=function(e){if(void 0===e)return e;var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=!!e["[[Configurable]]"]),t}},733461:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(498989);let i=r.NB.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}})},765737:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(498989),i=n(135611),o=n(496418);let s=r.hj.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("placeholder"),props:{decorations:({doc:e,selection:t})=>{var n;let r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=t,s=[];if(!r)return null;let{firstChild:a}=e.content,c=a&&a.type.isLeaf,l=a&&a.isAtom,u=!!this.options.considerAnyAsEmpty||a&&a.type.name===(null===(n=e.type.contentMatch.defaultType)||void 0===n?void 0:n.name),d=e.content.childCount<=1&&a&&u&&a.nodeSize<=2&&(!c||!l);return e.descendants((e,t)=>{let n=i>=t&&i<=t+e.nodeSize,r=!e.isLeaf&&!e.childCount;if((n||!this.options.showOnlyCurrent)&&r){let r=[this.options.emptyNodeClass];d&&r.push(this.options.emptyEditorClass);let i=o.p.node(t,t+e.nodeSize,{class:r.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});s.push(i)}return this.options.includeChildren}),o.EH.create(e,s)}}})]}})},285357:function(e,t,n){"use strict";n.d(t,{d7:function(){return i}});let{Axios:r,AxiosError:i,CanceledError:o,isCancel:s,CancelToken:a,VERSION:c,all:l,Cancel:u,isAxiosError:d,spread:h,toFormData:p,AxiosHeaders:f,HttpStatusCode:m,formToJSON:v,getAdapter:g,mergeConfig:_}=n(676113).Z},204442:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(535591),i=n(571848);let o=Symbol("internals");function s(e){return e&&String(e).trim().toLowerCase()}function a(e){return!1===e||null==e?e:r.Z.isArray(e)?e.map(a):String(e)}let c=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function l(e,t,n,i,o){if(r.Z.isFunction(i))return i.call(this,t,n);if(o&&(t=n),r.Z.isString(t)){if(r.Z.isString(i))return -1!==t.indexOf(i);if(r.Z.isRegExp(i))return i.test(t)}}class u{constructor(e){e&&this.set(e)}set(e,t,n){let o=this;function l(e,t,n){let i=s(t);if(!i)throw Error("header name must be a non-empty string");let c=r.Z.findKey(o,i);c&&void 0!==o[c]&&!0!==n&&(void 0!==n||!1===o[c])||(o[c||t]=a(e))}let u=(e,t)=>r.Z.forEach(e,(e,n)=>l(e,n,t));return r.Z.isPlainObject(e)||e instanceof this.constructor?u(e,t):r.Z.isString(e)&&(e=e.trim())&&!c(e)?u((0,i.Z)(e),t):null!=e&&l(t,e,n),this}get(e,t){if(e=s(e)){let n=r.Z.findKey(this,e);if(n){let e=this[n];if(!t)return e;if(!0===t)return function(e){let t;let n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=r.exec(e);)n[t[1]]=t[2];return n}(e);if(r.Z.isFunction(t))return t.call(this,e,n);if(r.Z.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=s(e)){let n=r.Z.findKey(this,e);return!!(n&&void 0!==this[n]&&(!t||l(this,this[n],n,t)))}return!1}delete(e,t){let n=this,i=!1;function o(e){if(e=s(e)){let o=r.Z.findKey(n,e);o&&(!t||l(n,n[o],o,t))&&(delete n[o],i=!0)}}return r.Z.isArray(e)?e.forEach(o):o(e),i}clear(e){let t=Object.keys(this),n=t.length,r=!1;for(;n--;){let i=t[n];(!e||l(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){let t=this,n={};return r.Z.forEach(this,(i,o)=>{let s=r.Z.findKey(n,o);if(s){t[s]=a(i),delete t[o];return}let c=e?o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n):String(o).trim();c!==o&&delete t[o],t[c]=a(i),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return r.Z.forEach(this,(n,i)=>{null!=n&&!1!==n&&(t[i]=e&&r.Z.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){let t=(this[o]=this[o]={accessors:{}}).accessors,n=this.prototype;function i(e){let i=s(e);t[i]||(function(e,t){let n=r.Z.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[i]=!0)}return r.Z.isArray(e)?e.forEach(i):i(e),this}}u.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),r.Z.reduceDescriptors(u.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),r.Z.freezeMethods(u);let d=u},973115:function(e,t,n){"use strict";let r;function i(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function o(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=i(n);return(e,n)=>r.then(r=>n(r.transaction(t,e).objectStore(t)))}function s(){return r||(r=o("keyval-store","keyval")),r}function a(e,t=s()){return t("readonly",t=>i(t.get(e)))}function c(e,t,n=s()){return n("readwrite",n=>(n.put(t,e),i(n.transaction)))}function l(e,t=s()){return t("readwrite",t=>(t.delete(e),i(t.transaction)))}n.d(t,{IV:function(){return l},MT:function(){return o},U2:function(){return a},t8:function(){return c}})},204528:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r,i,o,s,a,c,l,u,d,h,p,f,m,v,g,_,y,S,b,T,E,x,w,k,C,R,I=n(733730),N=n(636668),O=n(368819),A=function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},M=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class L extends Error{}class P extends I.v{constructor(e){var t,n,_,y;if(super(),r.add(this),i.set(this,void 0),o.set(this,void 0),s.set(this,0),a.set(this,void 0),c.set(this,void 0),l.set(this,0),u.set(this,void 0),d.set(this,void 0),h.set(this,void 0),p.set(this,void 0),f.set(this,0),m.set(this,void 0),v.set(this,void 0),g.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:O.Z,...e}).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(y=null===(_=e.interval)||void 0===_?void 0:_.toString())&&void 0!==y?y:""}\` (${typeof e.interval})`);A(this,i,e.carryoverConcurrencyCount,"f"),A(this,o,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),A(this,a,e.intervalCap,"f"),A(this,c,e.interval,"f"),A(this,h,new e.queueClass,"f"),A(this,p,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,A(this,g,!0===e.throwOnTimeout,"f"),A(this,v,!1===e.autoStart,"f")}get concurrency(){return M(this,m,"f")}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);A(this,m,e,"f"),M(this,r,"m",k).call(this)}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:M(this,g,"f"),...t},new Promise((n,i)=>{M(this,h,"f").enqueue(async()=>{var o,a,c;A(this,f,(a=M(this,f,"f"),++a),"f"),A(this,s,(c=M(this,s,"f"),++c),"f");try{if(null===(o=t.signal)||void 0===o?void 0:o.aborted)throw new L("The task was aborted.");let i=e({signal:t.signal});t.timeout&&(i=(0,N.ZP)(Promise.resolve(i),t.timeout)),t.signal&&(i=Promise.race([i,M(this,r,"m",C).call(this,t.signal)]));let s=await i;n(s),this.emit("completed",s)}catch(e){if(e instanceof N.W5&&!t.throwOnTimeout){n();return}i(e),this.emit("error",e)}finally{M(this,r,"m",S).call(this)}},t),this.emit("add"),M(this,r,"m",E).call(this)})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return M(this,v,"f")&&(A(this,v,!1,"f"),M(this,r,"m",k).call(this)),this}pause(){A(this,v,!0,"f")}clear(){A(this,h,new(M(this,p,"f")),"f")}async onEmpty(){0!==M(this,h,"f").size&&await M(this,r,"m",R).call(this,"empty")}async onSizeLessThan(e){M(this,h,"f").size<e||await M(this,r,"m",R).call(this,"next",()=>M(this,h,"f").size<e)}async onIdle(){(0!==M(this,f,"f")||0!==M(this,h,"f").size)&&await M(this,r,"m",R).call(this,"idle")}get size(){return M(this,h,"f").size}sizeBy(e){return M(this,h,"f").filter(e).length}get pending(){return M(this,f,"f")}get isPaused(){return M(this,v,"f")}}i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap,r=new WeakSet,_=function(){return M(this,o,"f")||M(this,s,"f")<M(this,a,"f")},y=function(){return M(this,f,"f")<M(this,m,"f")},S=function(){var e;A(this,f,(e=M(this,f,"f"),--e),"f"),M(this,r,"m",E).call(this),this.emit("next")},b=function(){M(this,r,"m",w).call(this),M(this,r,"m",x).call(this),A(this,d,void 0,"f")},T=function(){let e=Date.now();if(void 0===M(this,u,"f")){let t=M(this,l,"f")-e;if(!(t<0))return void 0===M(this,d,"f")&&A(this,d,setTimeout(()=>{M(this,r,"m",b).call(this)},t),"f"),!0;A(this,s,M(this,i,"f")?M(this,f,"f"):0,"f")}return!1},E=function(){if(0===M(this,h,"f").size)return M(this,u,"f")&&clearInterval(M(this,u,"f")),A(this,u,void 0,"f"),this.emit("empty"),0===M(this,f,"f")&&this.emit("idle"),!1;if(!M(this,v,"f")){let e=!M(this,r,"a",T);if(M(this,r,"a",_)&&M(this,r,"a",y)){let t=M(this,h,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&M(this,r,"m",x).call(this),!0)}}return!1},x=function(){M(this,o,"f")||void 0!==M(this,u,"f")||(A(this,u,setInterval(()=>{M(this,r,"m",w).call(this)},M(this,c,"f")),"f"),A(this,l,Date.now()+M(this,c,"f"),"f"))},w=function(){0===M(this,s,"f")&&0===M(this,f,"f")&&M(this,u,"f")&&(clearInterval(M(this,u,"f")),A(this,u,void 0,"f")),A(this,s,M(this,i,"f")?M(this,f,"f"):0,"f"),M(this,r,"m",k).call(this)},k=function(){for(;M(this,r,"m",E).call(this););},C=async function(e){return new Promise((t,n)=>{e.addEventListener("abort",()=>{n(new L("The task was aborted."))},{once:!0})})},R=async function(e,t){return new Promise(n=>{let r=()=>{(!t||t())&&(this.off(e,r),n())};this.on(e,r)})};let Z=P},881714:function(e,t,n){"use strict";n.d(t,{HY:function(){return i},NB:function(){return E},PW:function(){return Y},Ts:function(){return b},V_:function(){return j},ZU:function(){return Z},aw:function(){return U},e4:function(){return l},p2:function(){return u},vc:function(){return c}});var r=n(537565);class i{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,i){for(let o=0,s=0;s<t;o++){let a=this.content[o],c=s+a.nodeSize;if(c>e&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}s=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,(s,a)=>{let c=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?r?"function"==typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&c||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new i(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new i(n,r)}cutByIndex(e,t){return e==t?i.empty:0==e&&t==this.content.length?this:new i(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new i(r,o)}addToStart(e){return new i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return function e(t,n,r){for(let i=0;;i++){if(i==t.childCount||i==n.childCount)return t.childCount==n.childCount?null:r;let o=t.child(i),s=n.child(i);if(o==s){r+=o.nodeSize;continue}if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(let e=0;o.text[e]==s.text[e];e++)r++;return r}if(o.content.size||s.content.size){let t=e(o.content,s.content,r+1);if(null!=t)return t}r+=o.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return function e(t,n,r,i){for(let o=t.childCount,s=n.childCount;;){if(0==o||0==s)return o==s?null:{a:r,b:i};let a=t.child(--o),c=n.child(--s),l=a.nodeSize;if(a==c){r-=l,i-=l;continue}if(!a.sameMarkup(c))return{a:r,b:i};if(a.isText&&a.text!=c.text){let e=0,t=Math.min(a.text.length,c.text.length);for(;e<t&&a.text[a.text.length-e-1]==c.text[c.text.length-e-1];)e++,r--,i--;return{a:r,b:i}}if(a.content.size||c.content.size){let t=e(a.content,c.content,r-1,i-1);if(t)return t}r-=l,i-=l}}(this,e,t,n)}findIndex(e,t=-1){if(0==e)return s(0,e);if(e==this.size)return s(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e){if(i==e||t>0)return s(n+1,i);return s(n,r)}r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return i.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new i(t||e,n)}static from(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}i.empty=new i([],0);let o={index:0,offset:0};function s(e,t){return o.index=e,o.offset=t,o}function a(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!a(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class c{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&a(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return c.none;if(e instanceof c)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}c.none=[];class l extends Error{}class u{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,r,i){let{index:o,offset:s}=t.findIndex(n),a=t.maybeChild(o);if(s==n||a.isText)return i&&!i.canReplace(o,o,r)?null:t.cut(0,n).append(r).append(t.cut(n));let c=e(a.content,n-s-1,r);return c&&t.replaceChild(o,a.copy(c))}(this.content,e+this.openStart,t);return n&&new u(n,this.openStart,this.openEnd)}removeBetween(e,t){return new u(function e(t,n,r){let{index:i,offset:o}=t.findIndex(n),s=t.maybeChild(i),{index:a,offset:c}=t.findIndex(r);if(o==n||s.isText){if(c!=r&&!t.child(a).isText)throw RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=a)throw RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(e(s.content,n-o-1,r-o-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return u.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw RangeError("Invalid input for Slice.fromJSON");return new u(i.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new u(e,n,r)}}function d(e,t){if(!t.type.compatibleContent(e.type))throw new l("Cannot join "+t.type.name+" onto "+e.type.name)}function h(e,t,n){let r=e.node(n);return d(r,t.node(n)),r}function p(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function f(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(p(e.nodeAfter,r),o++));for(let e=o;e<s;e++)p(i.child(e),r);t&&t.depth==n&&t.textOffset&&p(t.nodeBefore,r)}function m(e,t){return e.type.checkContent(t),e.copy(t)}function v(e,t,n){let r=[];return f(null,e,n,r),e.depth>n&&p(m(h(e,t,n+1),v(e,t,n+1)),r),f(t,null,n,r),new i(r)}u.empty=new u(i.empty,0,0);class g{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return c.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new b(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:o}=t.content.findIndex(i),s=i-o;if(n.push(t,e,r+o),!s||(t=t.child(e)).isText)break;i=s-1,r+=o+1}return new g(t,n,i)}static resolveCached(e,t){let n=S.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else S.set(e,n=new _);let r=n.elts[n.i]=g.resolve(e,t);return n.i=(n.i+1)%y,r}}class _{constructor(){this.elts=[],this.i=0}}let y=12,S=new WeakMap;class b{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let T=Object.create(null);class E{constructor(e,t,n,r=c.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||i.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&a(this.attrs,t||e.defaultAttrs||T)&&c.sameSet(this.marks,n||c.none)}copy(e=null){return e==this.content?this:new E(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new E(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return u.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o);return new u(r.node(o).content.cut(r.pos-s,i.pos-s),r.depth-o,i.depth-o)}replace(e,t,n){return function(e,t,n){if(n.openStart>e.depth)throw new l("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new l("Inconsistent open depths");return function e(t,n,r,o){let s=t.index(o),a=t.node(o);if(s==n.index(o)&&o<t.depth-r.openStart){let i=e(t,n,r,o+1);return a.copy(a.content.replaceChild(s,i))}if(!r.content.size)return m(a,v(t,n,o));if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){let{start:e,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(i.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t);return m(a,function e(t,n,r,o,s){let a=t.depth>s&&h(t,n,s+1),c=o.depth>s&&h(r,o,s+1),l=[];return f(null,t,s,l),a&&c&&n.index(s)==r.index(s)?(d(a,c),p(m(a,e(t,n,r,o,s+1)),l)):(a&&p(m(a,v(t,n,s+1)),l),f(n,r,s,l),c&&p(m(c,v(r,o,s+1)),l)),f(o,null,s,l),new i(l)}(t,e,s,n,o))}{let e=t.parent,i=e.content;return m(e,i.cut(0,t.parentOffset).append(r.content).append(i.cut(n.parentOffset)))}}(e,t,n,0)}(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return g.resolveCached(this,e)}resolveNoCache(e){return g.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),w(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=i.empty,r=0,o=n.childCount){let s=this.contentMatchAt(e).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let e=r;e<o;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=c.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!c.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let n;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=i.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}E.prototype.text=void 0;class x extends E{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):w(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new x(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new x(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function w(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class k{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var n;let r,i=new C(e,t);if(null==i.next)return k.empty;let o=function e(t){let n=[];do n.push(function(t){let n=[];do n.push(function(t){let n=function(t){if(t.eat("(")){let n=e(t);return t.eat(")")||t.err("Missing closing paren"),n}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.groups.indexOf(t)>-1&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=function(e,t){let n=R(e),r=n;return e.eat(",")&&(r="}"!=e.next?R(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}(t,n);else break;return n}(t));while(t.next&&")"!=t.next&&"|"!=t.next);return 1==n.length?n[0]:{type:"seq",exprs:n}}(t));while(t.eat("|"));return 1==n.length?n[0]:{type:"choice",exprs:n}}(i);i.next&&i.err("Unexpected trailing text");let s=(n=function(e){let t=[[]];return i(function e(t,o){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,o)),[]);if("seq"==t.type)for(let r=0;;r++){let s=e(t.exprs[r],o);if(r==t.exprs.length-1)return s;i(s,o=n())}else if("star"==t.type){let s=n();return r(o,s),i(e(t.expr,s),s),[r(s)]}else if("plus"==t.type){let s=n();return i(e(t.expr,o),s),i(e(t.expr,s),s),[r(s)]}else if("opt"==t.type)return[r(o)].concat(e(t.expr,o));else if("range"==t.type){let s=o;for(let r=0;r<t.min;r++){let r=n();i(e(t.expr,s),r),s=r}if(-1==t.max)i(e(t.expr,s),s);else for(let o=t.min;o<t.max;o++){let o=n();r(s,o),i(e(t.expr,s),o),s=o}return[r(s)]}else if("name"==t.type)return[r(o,void 0,t.value)];else throw Error("Unknown expr type")}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(o),r=Object.create(null),function e(t){let i=[];t.forEach(e=>{n[e].forEach(({term:e,to:t})=>{let r;if(e){for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);N(n,t).forEach(t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)})}})});let o=r[t.join(",")]=new k(t.indexOf(n.length-1)>-1);for(let t=0;t<i.length;t++){let n=i[t][1].sort(I);o.next.push({type:i[t][0],next:r[n.join(",")]||e(n)})}return o}(N(n,0)));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];o.push(n.name),i&&!(n.isText||n.hasRequiredAttrs())&&(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,i),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function o(s,a){let c=s.matchFragment(e,n);if(c&&(!t||c.validEnd))return i.from(a.map(e=>e.createAndFill()));for(let e=0;e<s.next.length;e++){let{type:t,next:n}=s.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==r.indexOf(n)){r.push(n);let e=o(n,a.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}}k.empty=new k(!0);class C{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function R(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function I(e,t){return t-e}function N(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:o}=i[e];r||-1!=n.indexOf(o)||t(o)}}(t),n.sort(I)}function O(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function A(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function M(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new P(e[n]);return t}class L{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=M(n.attrs),this.defaultAttrs=O(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==k.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:A(this.attrs,e)}create(e=null,t,n){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new E(this,this.computeAttrs(e),i.from(t),c.setFrom(n))}createChecked(e=null,t,n){return t=i.from(t),this.checkContent(t),new E(this,this.computeAttrs(e),t,c.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=i.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(i.empty,!0);return o?new E(this,e,t.append(o),c.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:c.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new L(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}}class P{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Z{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=M(r.attrs),this.excluded=null;let i=O(this.attrs);this.instance=i?new c(this,i):null}create(e=null){return!e&&this.instance?this.instance:new c(this,A(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new Z(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class j{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=r.Z.from(e.nodes),t.marks=r.Z.from(e.marks||{}),this.nodes=L.compile(this.spec.nodes,this),this.marks=Z.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[r]||(n[r]=k.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?D(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:D(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof L){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new x(n,n.defaultAttrs,e,c.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return E.fromJSON(this,e)}markFromJSON(e){return c.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function D(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class U{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new H(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new H(this,t,!0);return n.addAll(e,t.from,t.to),u.maxOpen(n.finish())}matchTag(e,t,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){var r;let n=this.tags[i];if(r=n.tag,(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,r)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(0==o.indexOf(e)&&(!r.context||n.matchesContext(r.context))&&(!(o.length>e.length)||61==o.charCodeAt(e.length)&&o.slice(e.length+1)==t)){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=z(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=z(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new U(e,U.schemaRules(e)))}}let G={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},F={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},V={ol:!0,ul:!0};function W(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class B{constructor(e,t,n,r,i,o,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=c.none,this.stashMarks=[],this.match=o||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(i.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=i.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let r=n[t];(this.type?this.type.allowsMarkType(r.type):function(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t||0>o.indexOf(i)&&s(i))return!0}};if(s(i.contentMatch))return!0}}(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!G.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class H{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r=t.topNode,i,o=W(null,t.preserveWhitespace,0)|(n?4:0);i=r?new B(r.type,r.attrs,c.none,c.none,!0,t.topMatch||r.type.contentMatch,o):n?new B(null,null,c.none,c.none,!0,null,o):new B(e.schema.topNodeType,null,c.none,c.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){3==e.nodeType?this.addTextNode(e):1==e.nodeType&&this.addElement(e)}withStyleRules(e,t){let n=e.style;if(!n||!n.length)return t();let r=this.readStyles(e.style);if(!r)return;let[i,o]=r,s=this.top;for(let e=0;e<o.length;e++)this.removePendingMark(o[e],s);for(let e=0;e<i.length;e++)this.addPendingMark(i[e]);t();for(let e=0;e<i.length;e++)this.removePendingMark(i[e],s);for(let e=0;e<o.length;e++)this.addPendingMark(o[e])}addTextNode(e){let t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n=e.nodeName.toLowerCase(),r;V.hasOwnProperty(n)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&V.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,t));if(i?i.ignore:F.hasOwnProperty(n))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);let t,r=this.top,o=this.needsBlock;if(G.hasOwnProperty(n))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),t=!0,r.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}i&&i.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),t&&this.sync(r),this.needsBlock=o}else this.withStyleRules(e,()=>{this.addElementByRule(e,i,!1===i.consuming?r:void 0)})}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=c.none,n=c.none;if(e.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let i=this.parser.matchedStyles[r],o=e.getPropertyValue(i);if(o)for(let e;;){let r=this.parser.matchStyle(i,o,this,e);if(!r)break;if(r.ignore)return null;if(r.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(e=>{r.clearMark(e)&&(n=e.addToSet(n))}):t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1===r.consuming)e=r;else break}}return[t,n]}addElementByRule(e,t,n){let r,i,o;t.node?(i=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):r=this.enter(i,t.attrs||null,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let s=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(e,t,n){let r=t||0;for(let i=t?e.childNodes[t]:e.firstChild,o=null==n?null:e.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(i);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length)||i.solid)break}if(!t)return!1;this.sync(n);for(let e=0;e<t.length;e++)this.enterInner(t[e],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)(!t.type||t.type.allowsMarkType(e.marks[r].type))&&(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e);let o=W(e,r,i.options);4&i.options&&0==i.content.length&&(o|=4),this.nodes.push(new B(e,t,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function z(e){let t={};for(let n in e)t[n]=e[n];return t}class Y{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=K(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(!this.marks[t.type.name]){o++;continue}if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=Y.renderSpec(K(t),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&Y.renderSpec(K(n),r(e,t))}static renderSpec(e,t,n=null){let r;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i=t[0],o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let s=n?e.createElementNS(n,i):e.createElement(i),a=t[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){for(let e in c=2,a)if(null!=a[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):s.setAttribute(e,a[e])}}for(let i=c;i<t.length;i++){let o=t[i];if(0===o){if(i<t.length-1||i>c)throw RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:i}=Y.renderSpec(e,o,n);if(s.appendChild(t),i){if(r)throw RangeError("Multiple content holes");r=i}}}return{dom:s,contentDOM:r}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Y(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=X(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return X(e.marks)}}function X(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function K(e){return e.document||window.document}},935010:function(e,t,n){"use strict";n.d(t,{IB:function(){return s},KI:function(){return o},bw:function(){return a}});var r=n(187457),i=n(881714);function o(e,t=null){return function(n,o){let{$from:s,$to:a}=n.selection,c=s.blockRange(a),l=!1,u=c;if(!c)return!1;if(c.depth>=2&&s.node(c.depth-1).type.compatibleContent(e)&&0==c.startIndex){if(0==s.index(c.depth-1))return!1;let e=n.doc.resolve(c.start-2);u=new i.Ts(e,e,c.depth),c.endIndex<c.parent.childCount&&(c=new i.Ts(s,n.doc.resolve(a.end(c.depth)),c.depth)),l=!0}let d=(0,r.nd)(u,e,t,c);return!!d&&(o&&o((function(e,t,n,o,s){let a=i.HY.empty;for(let e=n.length-1;e>=0;e--)a=i.HY.from(n[e].type.create(n[e].attrs,a));e.step(new r.FC(t.start-(o?2:0),t.end,t.start,t.end,new i.p2(a,0,0),n.length,!0));let c=0;for(let e=0;e<n.length;e++)n[e].type==s&&(c=e+1);let l=n.length-c,u=t.start+n.length-(o?2:0),d=t.parent;for(let n=t.startIndex,i=t.endIndex,o=!0;n<i;n++,o=!1)!o&&(0,r.Ax)(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(n).nodeSize;return e})(n.tr,c,d,l,e).scrollIntoView()),!0)}}function s(e){return function(t,n){let{$from:o,$to:s}=t.selection,a=o.blockRange(s,t=>t.childCount>0&&t.firstChild.type==e);return!!a&&(!n||(o.node(a.depth-1).type==e?function(e,t,n,o){let s=e.tr,a=o.end,c=o.$to.end(o.depth);a<c&&(s.step(new r.FC(a-1,c,a,c,new i.p2(i.HY.from(n.create(null,o.parent.copy())),1,0),1,!0)),o=new i.Ts(s.doc.resolve(o.$from.pos),s.doc.resolve(c),o.depth));let l=(0,r.k9)(o);if(null==l)return!1;s.lift(o,l);let u=s.mapping.map(a,-1)-1;return(0,r.Mn)(s.doc,u)&&s.join(u),t(s.scrollIntoView()),!0}(t,n,e,a):function(e,t,n){let o=e.tr,s=n.parent;for(let e=n.end,t=n.endIndex-1,r=n.startIndex;t>r;t--)e-=s.child(t).nodeSize,o.delete(e-1,e+1);let a=o.doc.resolve(n.start),c=a.nodeAfter;if(o.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let l=0==n.startIndex,u=n.endIndex==s.childCount,d=a.node(-1),h=a.index(-1);if(!d.canReplace(h+(l?0:1),h+1,c.content.append(u?i.HY.empty:i.HY.from(s))))return!1;let p=a.pos,f=p+c.nodeSize;return o.step(new r.FC(p-(l?1:0),f+(u?1:0),p+1,f-1,new i.p2((l?i.HY.empty:i.HY.from(s.copy(i.HY.empty))).append(u?i.HY.empty:i.HY.from(s.copy(i.HY.empty))),l?0:1,u?0:1),l?0:1)),t(o.scrollIntoView()),!0}(t,n,a)))}}function a(e){return function(t,n){let{$from:o,$to:s}=t.selection,a=o.blockRange(s,t=>t.childCount>0&&t.firstChild.type==e);if(!a)return!1;let c=a.startIndex;if(0==c)return!1;let l=a.parent,u=l.child(c-1);if(u.type!=e)return!1;if(n){let o=u.lastChild&&u.lastChild.type==l.type,s=i.HY.from(o?e.create():null),c=new i.p2(i.HY.from(e.create(null,i.HY.from(l.type.create(null,s)))),o?3:1,0),d=a.start,h=a.end;n(t.tr.step(new r.FC(d-(o?3:1),h,d,h,c,1,!0)).scrollIntoView())}return!0}}},979107:function(e,t,n){"use strict";function r(e,t,n){let r=t.reduce((t,n)=>t||e.getData(n),"");return null!=r?r:n}n.d(t,{R:function(){return r}})},838239:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});class r{get window(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}},526722:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(218571);function i(e){return(0,r.useMemo)(()=>e.hooks.dropTarget(),[e])}}}]);