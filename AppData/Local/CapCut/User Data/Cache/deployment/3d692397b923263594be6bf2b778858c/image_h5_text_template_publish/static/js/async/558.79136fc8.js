"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[558],{15843:(e,t,n)=>{n.d(t,{S:()=>v,w:()=>g});var r=n(50959),s=n(44478),i=n(26800),o=n(84875),a=n.n(o),c=n(84736),l=n(45599),d=n(20468),u=n(2555),h=n(76896);const m={root:"root-wurvCd",point:"point-E_OjHv",tooltipWrapper:"tooltipWrapper-f4Ku2I","fade-in":"fade-in-CYzcgC",fadeIn:"fade-in-CYzcgC",fadingOut:"fadingOut-WkHWF7","fade-out":"fade-out-S__jW6",fadeOut:"fade-out-S__jW6"};var p=n(11527);const f=(0,r.forwardRef)(((e,t)=>{const{tooltipProps:n,getPopupContainer:s,onClosePopover:o,position:l,cursor:d="default"}=e,[f,g]=(0,r.useState)(!0),[v,x]=(0,r.useState)(!1),{top:w}=l,_=l.left-10,y=(0,r.useRef)(null),C=(0,r.useRef)(null),b=(0,i.Z)((()=>{var e;null===(e=C.current)||void 0===e||e.destroy(),x(!1),g(!1)})),j=(0,i.Z)((()=>{var e;const t=s().querySelector(`.${m.tooltipWrapper}`);if(!t||(null===(e=C.current)||void 0===e?void 0:e.tooltipWrapper)===t)return;t.addEventListener("animationend",b);const n=new u.B;n.timeout(500).then(b),C.current={tooltipWrapper:t,destroy:()=>{t.removeEventListener("animationend",b),n.cancel(),C.current=null}}}));(0,r.useImperativeHandle)(t,(()=>({hide:()=>{j(),x(!0)}})));const k=(0,r.useMemo)((()=>({default:{height:18,width:12},"not-allowed":{height:(0,h.c)()?30:15,width:15}})),[]),S=k[d]||k.default;return(0,p.jsx)(c.u,{autoAdjustOverflow:!0,position:"bottomLeft",motion:!1,...n,className:a()(n.className,m.tooltipWrapper,v&&m.fadingOut),trigger:"custom",visible:f,showArrow:!1,rePosKey:`${w}-${_}`,getPopupContainer:s,onVisibleChange:e=>{var t;!e&&o(),null===(t=n.onVisibleChange)||void 0===t||t.call(n,e)},children:(0,p.jsx)("div",{className:m.point,tabIndex:-1,ref:y,style:{top:w,left:_,...S}})})}));function g(e){const{zIndex:t=1060,cursor:n="default",checkIsTarget:o,getEllipsisDOM:a,...c}=e,u=(0,r.useRef)(null),h=(0,r.useRef)(null),[g,v]=(0,r.useState)(null),{i18n:x}=(0,l.$)(),w=()=>{const{content:e}=c;if("function"!=typeof e)return e;if(!u.current)return null;const{targetElement:t}=u.current;return n=>e({...n,target:t})},_=(0,i.Z)((()=>{u.current&&(u.current.destroy(),u.current=null,v(null))})),y=(0,i.Z)((()=>{var e;null===(e=u.current)||void 0===e||e.destroy(),u.current=null})),C=(0,i.Z)(((e,n)=>{const r=null==a?void 0:a(n);if(r&&r.offsetWidth>=r.scrollWidth)return;if(u.current){if(!u.current.hasLeaved&&u.current.targetElement===n)return;_()}const i=document.createElement("div");i.className=m.root,i.style.zIndex=`${t}`;const o=e=>{v({left:e.clientX,top:e.clientY})},c=e=>{n===e.target&&(u.current&&(u.current.hasLeaved=!0),h.current?h.current.hide():_())};n.addEventListener("mousemove",o),n.addEventListener("mouseleave",c),document.body.appendChild(i);const l=(0,s.createRoot)(i);u.current={container:i,targetElement:n,hasLeaved:!1,reactRoot:l,destroy:()=>{i.remove(),Promise.resolve().then((()=>l.unmount())),n.removeEventListener("mousemove",o),n.removeEventListener("mouseleave",c)}},v({left:e.clientX,top:e.clientY})})),b=(0,i.Z)((e=>{const t=e.currentTarget;C(e,t)})),j=(0,i.Z)((e=>{var t;const n=e.target;(null!==(t=null==o?void 0:o(n))&&void 0!==t?t:e.currentTarget===n)&&C(e,n)}));return(0,r.useLayoutEffect)((()=>y),[]),(0,r.useLayoutEffect)((()=>{(()=>{if(!u.current||!g)return;const{reactRoot:e,container:r}=u.current;r.style.zIndex=`${t}`,e.render((0,p.jsx)(d.a,{i18n:x,children:(0,p.jsx)(f,{ref:h,tooltipProps:{...c,content:w()},getPopupContainer:()=>r,onClosePopover:_,position:g,cursor:n})}))})()})),{handleMouseEnter:b,handleMouseOver:j}}function v(e={}){const{getEllipsisDOM:t=(e=>e),content:n=(({target:e})=>e.textContent),...r}=e;return g({...r,getEllipsisDOM:t,content:n})}},73768:(e,t,n)=>{n.d(t,{c:()=>w});var r=n(59787),s=n(84875),i=n.n(s);const o=new class{constructor(){(0,r.Z)(this,"documentLoadPromise",this.initDocumentLoadPromise())}initDocumentLoadPromise(){return new Promise((e=>{if("complete"===document.readyState)return void e();const t=()=>{e(),document.removeEventListener("load",t)};document.addEventListener("load",t)}))}async preloadImagesOnIdle(e){await this.documentLoadPromise;const t=window.requestIdleCallback||window.setTimeout;for(const n of e)await new Promise((e=>{t((()=>{const t=new Image;t.src=n.src,t.onload=()=>e(),t.onerror=()=>e(),window.setTimeout(e,3e3)}))}))}},a="root-VcsGtp";var c=n(11527);const l=e=>{const{className:t,size:n=64}=e;return(0,c.jsx)("img",{src:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/lm_shpylaht_cs/ljhwZthlaukjlkulzlp/pc-heycan/images/LoadingScissorsCapCut.d9f5d23b.gif",className:i()(t,a),style:{height:n,width:n}})};o.preloadImagesOnIdle([{src:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/lm_shpylaht_cs/ljhwZthlaukjlkulzlp/pc-heycan/images/LoadingScissorsCapCut.d9f5d23b.gif"}]);var d=n(45599),u=n(20468),h=n(73224),m=n(44478);const p="root-LGkvBj",f="panel-fE_gjU",g="icon-jLOlfC",v="text-qnYZsw",x=()=>{const{t:e}=(0,d.$)();return(0,c.jsxs)("div",{className:f,children:[(0,c.jsx)(l,{className:g}),(0,c.jsx)("div",{className:v,children:e("pc_sticker_load_web")})]})};const w=new class{constructor(){(0,r.Z)(this,"destroyLoading",null)}async show(e){try{const t=e();this.showImpl(),await t}finally{this.hide()}}hide(){var e;null===(e=this.destroyLoading)||void 0===e||e.call(this),this.destroyLoading=null}showImpl(){if(this.destroyLoading)return;const e=document.createElement("div");e.className=p,document.body.appendChild(e);const t=(0,m.createRoot)(e);this.destroyLoading=()=>{e.remove(),Promise.resolve().then((()=>t.unmount()))},t.render((0,c.jsx)(u.a,{i18n:h.I18n.i18nInstance.instance,children:(0,c.jsx)(x,{})}))}}},83714:(e,t,n)=>{n.d(t,{Y:()=>l});var r=n(84875),s=n.n(r),i=n(87842);const o="card-f4fcSb",a="text-RGDuHx";var c=n(11527);const l=e=>{const{className:t,status:n,children:r}=e;return(0,c.jsxs)("div",{className:s()(t,o),children:["loading"===n?(0,c.jsx)(i.a,{size:18},n):(0,c.jsx)(i.a,{size:18,circleColor:"#c30000",animated:!1},n),r&&(0,c.jsx)("div",{className:a,children:r})]})}},87842:(e,t,n)=>{n.d(t,{a:()=>m});var r,s,i=n(50959),o=n(84875),a=n.n(o);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}const l=e=>i.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},e),r||(r=i.createElement("rect",{width:18,height:18,fill:"#29292D",opacity:.5,rx:9})),s||(s=i.createElement("path",{stroke:"#FAFAFA",strokeWidth:1.35,d:"M13.925 9a4.924 4.924 0 1 0-1.443 3.482"}))),d="root-yumxDJ",u="animated-IHczOy";var h=n(11527);const m=(0,i.memo)((e=>{const{className:t,size:n,circleColor:r="var(--black-4)",arcColor:s="var(--white-0)",animated:i=!0}=e;return(0,h.jsx)(l,{className:a()(t,d,i&&u),width:n,height:n,style:{"--heycan-loading-circle-color":r,"--heycan-loading-arc-color":s}})}))},2237:(e,t,n)=>{n.d(t,{t:()=>u});var r,s=n(84875),i=n.n(s),o=n(50959);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const c=e=>o.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:34,height:28,fill:"none",viewBox:"0 0 34 28"},e),r||(r=o.createElement("path",{fill:"#fff",fillOpacity:.09,d:"M33.71 6.32V1.11l-6.268 3.291v-.196c0-2.076-1.489-3.33-3.643-3.33H3.935C1.662.875.292 2.129.292 4.205v5.25L9.067 14 .291 18.584v5.25c0 2.037 1.371 3.291 3.643 3.291H23.8c2.154 0 3.643-1.254 3.643-3.291v-.274l6.269 3.33V21.6L19.136 14l14.575-7.68ZM14.083 16.587l10.774 5.642H3.27l10.813-5.642ZM24.778 5.773l-10.695 5.602L3.268 5.773h21.51Z"}))),l="root-I5KeTG";var d=n(11527);const u=e=>{const{className:t,iconWidth:n}=e,r=Math.round(.785*n);return(0,d.jsx)("div",{className:i()(t,l),children:(0,d.jsx)(c,{height:r,width:n})})}},40699:(e,t,n)=>{n.d(t,{J:()=>c});var r=n(50959);const s="running-h0Lfzw";var i=n(11527);const o=26,a=e=>{const{text:t,gap:n,speed:a=o}=e,c=(0,r.useRef)(null),l=(0,r.useRef)(null),[d,u]=(0,r.useState)(0);(0,r.useEffect)((()=>{const e=c.current,t=l.current;if(!e||!t)return;const n=e.getBoundingClientRect().left,r=t.getBoundingClientRect().left;u(r-n)}),[]);const h={"--heycan-marquee-loop-text-animation-transform-to":`translateX(${-d}px)`,"--heycan-marquee-loop-text-animation-duration":`${(d/a).toFixed(2)}s`};return(0,i.jsxs)("span",{ref:c,className:d?s:"",style:h,children:[(0,i.jsx)("span",{children:t}),(0,i.jsx)("span",{ref:l,style:{marginInlineStart:n},children:t})]})},c=e=>{const{text:t,getEllipsisDOM:n}=e,[s,o]=(0,r.useState)(!1);return{isMarqueeLoopRunning:s,setIsMarqueeLoopRunning:e=>{const t=null==n?void 0:n();t&&t.offsetWidth>=t.scrollWidth||o(e)},reactNode:s?(0,i.jsx)(a,{...e}):(0,i.jsx)("span",{children:t})}}},33556:(e,t,n)=>{n.d(t,{YW:()=>S,rr:()=>T,ZP:()=>F});var r=n(50959),s=n(23479),i=n(84875),o=n.n(i),a=n(73224),c=n(45599),l=n(20468),d=n(84736),u=n(41750);var h=n(8129),m=n(15843);const p="protocol-VspS8l",f="content-OyCrKs",g="withBorder-jbe4Zm",v="flexHeight-OlM20e",x="footer-PL68kt",w="btn-az9uHG",_="confirmArea-HME5C1",y="confirmCheckbox-lf6E1b",C="confirmCheckboxText-Tkueuw",b="confirmCheckboxProtocolTitle-WvrrOC";var j=n(68212),k=n(11527);let S=function(e){return e.Origin="originUserAuthProtocol",e.OriginalForSubscription="originalWorkProtocolForSubscription",e.OriginalForCommercial="originalWorkProtocolForCommercial",e.Creator="createProtocol",e}({});const E={[S.Origin]:"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/faceu/db84e32a-66a5-425a-afb2-0f32186f3cce_en.html",[S.OriginalForSubscription]:"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/faceu/db84e32a-66a5-425a-afb2-0f32186f3cce_en.html",[S.OriginalForCommercial]:"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/capcut/original_work_notice_for_commercial_material_en.html",[S.Creator]:(e=>{switch(e){case"tr-TR":return"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/capcut/new_via_clause_creator_agreement_tr-TR.html?theme=lv_material_pc_front";case"ko-KR":return"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/capcut/new_via_clause_creator_agreement_ko-KR.html?theme=lv_material_pc_front";default:return"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/capcut/new_via_clause_creator_agreement_en.html?theme=lv_material_pc_front"}})()},T={[S.Origin]:"Original Work Notice",[S.OriginalForSubscription]:"Original Work Notice",[S.OriginalForCommercial]:"Original Work Notice",[S.Creator]:a.I18n.t("pc_capcut_creator_agreement_web")},N=(0,s.Pi)((({onCancel:e,onOk:t,protocol:n,handleBtnText:s,closeIcon:i=!1,needReview:a=!0,renderConfirmExtra:l,getCanConfirmExtra:S})=>{const{t:N}=(0,c.$)(),[F,P]=(0,r.useState)(!1),[R,I]=(0,r.useState)(!1),L=()=>!a||F&&R&&(!S||S()),{handleMouseEnter:Z}=(0,m.w)({content:N("pc_template_authorize_read_all_web"),cursor:"not-allowed"}),M={disabled:!F,handleMouseEnter:!a||F?void 0:Z},O=()=>{L()&&(null==t||t())};return(0,r.useEffect)((()=>{const e=e=>{const t=e.data;try{const e=JSON.parse(t);"protocal"!==e.from&&"protocol"!==e.from||"bottom"!==e.event||P(!0)}catch(n){P(!0),(0,h.RF)("[Protocol] handle protocol message",n,{text:t})}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]),(0,k.jsxs)("div",{className:p,children:[(0,k.jsxs)("div",{className:j.Z.root,children:[(0,k.jsx)("div",{className:j.Z.title,children:T[n]}),(0,k.jsx)("div",{className:j.Z.right,children:i&&(0,k.jsx)(u.r,{className:j.Z.closeIcon,onClick:()=>{null==e||e("close")}})})]}),(0,k.jsx)("div",{className:o()(f,!a&&g,a&&v),children:(0,k.jsx)("iframe",{id:"frame",src:E[n]})}),s&&a?(0,k.jsxs)("div",{className:_,children:[(0,k.jsx)(d.XZ,{className:y,checked:R,disabled:M.disabled,onMouseEnter:M.handleMouseEnter,onChange:e=>I(Boolean(e.target.checked)),children:(0,k.jsx)("span",{className:C,children:N("pc_template_authorize_read_agree_web",{X:(0,k.jsx)("span",{className:b,children:T[n]},"X")})})}),null==l?void 0:l()]}):null,(()=>{const e=s;return e?(0,k.jsx)("div",{className:o()(x,a&&g),children:(0,k.jsx)(d.zx,{className:w,type:"primary",theme:"solid",disabled:!L(),onClick:O,children:e})}):null})()]})})),F=e=>{const{onCancel:t,onOk:n}=e,[s,i]=(0,r.useState)(!1),[o,a]=(0,r.useState)({}),u=(0,r.useRef)({}),{i18n:h,t:m}=(0,c.$)(),p=e=>{null==t||t(e),i(!1)},f=()=>{o.withoutReview||null==n||n(),i(!1)};return(0,r.useEffect)((()=>()=>{var e,t;return null==u||null===(e=u.current)||void 0===e||null===(t=e.destroy)||void 0===t?void 0:t.call(e)}),[]),(0,r.useEffect)((()=>{var t,n;s?(()=>{const t={...e,...o.withoutReview&&{handleBtnText:m("pc_i_see_web"),needReview:!1,closeIcon:!0}},{destroy:n}=d.u_.info({width:376,height:e.needReview?"auto":564,maskClosable:!1,header:null,title:null,icon:null,centered:!0,content:(0,k.jsx)(l.a,{i18n:h,children:(0,k.jsx)(N,{...t,onCancel:p,onOk:f})}),footer:null});u.current.destroy=n})():null==u||null===(t=u.current)||void 0===t||null===(n=t.destroy)||void 0===n||n.call(t)}),[s]),{visible:s,showModal:()=>{i(!0),a({})},showModalWithoutReview:()=>{i(!0),a({withoutReview:!0})}}}},28747:(e,t,n)=>{n.d(t,{u:()=>Z});var r=n(50959),s=n(10422),i=n(84736),o=n(26800),a=n(68277),c=n(45599),l=n(23479),d=n(25807),u=n(69905),h=n(60251),m=n(8129),p=n(86439),f=n(94435),g=n(16743),v=n(84875),x=n.n(v);const w="tag-ZaY7YS",_="selected-umR1Vs",y="disabled-A37DzB";var C=n(11527);const b=({className:e,value:t,selected:n,disabled:r,onClick:s})=>(0,C.jsx)(i.Vp,{className:x()(e,w,n&&_,r&&y),color:n?"cyan":void 0,onClick:()=>null==s?void 0:s(t),children:t},t),j="block-smxiey",k="title-aqS4Cg",S="content-IyBLdN",E="loading-QuFv_G",T="text-ukrQOj",N=({className:e,title:t,loading:n,loadingText:s,value:o,options:a,onSelect:c})=>{const l=(0,r.useCallback)((e=>o.includes(e)),[o]),d=(0,r.useMemo)((()=>a.filter((e=>!o.includes(e)))),[o,a]);return 0===d.length?null:(0,C.jsxs)("div",{className:x()([j,e]),children:[(0,C.jsx)("p",{className:k,children:t}),(0,C.jsx)("div",{className:S,children:n?(0,C.jsxs)("div",{className:E,children:[(0,C.jsx)("span",{className:T,children:s}),(0,C.jsx)(i.yC,{size:"small"})]}):d.map((e=>(0,C.jsx)(b,{selected:l(e),value:e,onClick:()=>c(e)},e)))})]})},F=(0,l.Pi)((({value:e,onSelect:t})=>{const[n,s]=(0,r.useState)([]),{t:i}=(0,c.$)();return(0,r.useEffect)((()=>{const e=(0,u.cF)(u.Qt.TagEachUser,d.$.userInfo.uid).get();s(e)}),[d.$.userInfo.uid,e]),(0,C.jsx)(N,{title:i("pc_recently_used_web"),value:e,options:n,onSelect:t})})),P=((0,l.Pi)((({title:e,uri:t,value:n,itemType:s,onSelect:i})=>{const[l,d]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)(!1),g=(0,r.useRef)({}),{t:v}=(0,c.$)(),x=(0,r.useMemo)((()=>[...u,...l]),[l,u]),w=(0,o.Z)((e=>{const{title:t,uri:n}=e;return t?g.current.cvid&&g.current.uri===n?{cvid:g.current.cvid,title:t}:n?{image_uri:n,title:t}:null:null})),_=(0,r.useCallback)((async()=>{try{p(!0);const n=w({title:e,uri:t});await Promise.all([n&&(0,f.Uz)(n).then((e=>{h(e.cv_tags),g.current.cvid=e.cvid,n.image_uri&&(g.current.uri=n.image_uri)})),!g.current.selfConfigTagsReady&&(0,f.On)({effect_type:s}).then((e=>{d(e.rec_tags),g.current.selfConfigTagsReady=!0}))])}finally{p(!1)}}),[e,t,s]);return(0,a.Z)(_,500,[_]),(0,r.useEffect)((()=>{_()}),[]),(0,C.jsx)(N,{title:v("recommend_signature_web"),loading:m,loadingText:v("loading_web"),value:n,options:x,onSelect:i})})),"tagSelect-KEPqcU"),R="dropItem-bpnHuZ",I="suggestListDropdown-fV0lMc",L=(0,l.Pi)((({recommendConfig:e,value:t=[],itemType:n,disabled:l,disableRecommend:v,disableLatest:x,onChange:w,placeholder:_,max:y=15,temporaryId:j,ignoreAddTagOnBlurSelector:k})=>{const S=(0,r.useRef)(!1),[E,T]=(0,r.useState)(""),[N,L]=(0,r.useState)(""),Z=(0,r.useRef)(!1),M=Z.current?N:E,[O,A]=(0,r.useState)([]),[D,U]=(0,r.useState)([]),{t:W}=(0,c.$)(),z=e=>(0,u.cF)(u.Qt.TagEachUser,d.$.userInfo.uid).set("add",[e]),B=(0,o.Z)((e=>{U(E?e:[])}));(0,a.Z)((async()=>{if(!n||!E)return;const e=await(0,f.EO)({query:E,count:10}),t=(null==e?void 0:e.sug_tags)||[];B(t)}),500,[E,n]),(0,r.useEffect)((()=>{E||U([])}),[E]);const $=(0,r.useCallback)((e=>{if(y&&e.length>y)return i.FN.error(W("pc_stickers_release_max_tag_web",{X:y})),void(null==w||w(e.slice(0,y)));null==w||w(e)}),[w]),K=(0,o.Z)((e=>{t.includes(e)||$([...t,e])})),q=(0,r.useMemo)((()=>new h.l),[]),V=(0,o.Z)((async e=>{const n=await q.lock("",(async()=>{if(t.includes(e))return!0;let n=!1;try{const t=await(0,f._K)({words:e,scene:f.Xb.Tag});n=!1===(null==t?void 0:t.is_hit)}catch(r){return(0,m.RF)("[TagSelect] call checkAntiDirt failed",r,{tag:e}),i.FN.error(W("pc_tag_retry_web")),!1}return n?(K(e),!0):((0,m.c6)("[TagSelect] checkAntiDirt not passed",{tag:e}),i.FN.error(W("pc_tag_illegal_fail_web")),!1)}));return null!=n&&n})),H=(0,o.Z)((e=>{if(0===e.length)return;const n=t.filter((t=>!e.includes(t)));$(n)})),Y=(0,r.useRef)(null),{saveSelectionIfNeeded:G}=(0,g.u)({getInputElem:()=>{var e;return null===(e=Y.current)||void 0===e?void 0:e.inputRef.current}}),X=e=>{const t=(0,p.aF)(e,30);G(t),T(t)},J=(0,o.Z)((e=>{X(""),t.includes(e)?H([e]):(K(e),z(e))})),Q=e=>{const t=O.includes(e);A(t?O.filter((t=>t!==e)):[...O,e])},ee=(0,o.Z)((()=>{H(O),A([])})),te=(0,o.Z)((()=>Y.current&&Y.current.inputRef.current&&Y.current.tagInputRef.current?{tagInput:Y.current,tagInputElem:Y.current.tagInputRef.current,inputElem:Y.current.inputRef.current}:null)),ne=(0,o.Z)((e=>{const t=te();return!!(t&&e&&e instanceof Element)&&e.closest(".semi-tagInput")===t.tagInputElem})),re=(0,o.Z)((e=>!!(e&&e instanceof Element)&&null!==e.closest(".semi-tag"))),se=(0,o.Z)((e=>{const t=e.target,n=te();if(!n||!ne(t))return;const{tagInput:r,tagInputElem:s,inputElem:i}=n,{selectionStart:o,selectionEnd:a}=i;return O.length>0&&re(t)?(ee(),null==i||i.setSelectionRange(0,0),void r.focus()):void 0})),ie=(0,o.Z)((e=>{const t=e.target;te()&&ne(t)&&re(t)&&(ne(e.relatedTarget)&&re(e.relatedTarget)||A([]))}));(0,r.useEffect)((()=>{const e=e=>{"Delete"===e.code||"Backspace"===e.code?(S.current=!0,se(e)):S.current=!1};return window.addEventListener("keydown",e,!0),window.addEventListener("blur",ie,!0),()=>{window.removeEventListener("keydown",e,!0),window.removeEventListener("blur",ie,!0)}}),[]);const oe=(0,o.Z)((e=>{e.replace(/ {1,}/g,"")===E.replace(/ {1,}/g,"")&&X("")})),ae=async e=>{const[t]=e;Promise.resolve().then((()=>X(E)));const n=t.replace(/ {1,}/g,"");if(0===n.length)return;await V(n)&&(z(n),oe(E))},ce=async e=>{if(Z.current)return void L(e);const t=e.replace(/ {1,}$/,""),n=t.replace(/ {1,}/g,"");if(X(t),t===e||!t||S.current)return;await V(n)&&(z(n),oe(E))};(0,r.useEffect)((()=>{var e;const t=null===(e=Y.current)||void 0===e?void 0:e.inputRef.current;if(!t)return;const n=()=>{Z.current=!0,L(t.value)},r=()=>(0,s.unstable_batchedUpdates)((()=>{Z.current=!1,L(""),ce(t.value)}));return t.addEventListener("compositionstart",n),t.addEventListener("compositionend",r),()=>{t.removeEventListener("compositionstart",n),t.removeEventListener("compositionend",r)}}),[]);(0,r.useEffect)((()=>{j&&T("")}),[j]);return(0,C.jsxs)("div",{className:P,children:[(0,C.jsx)(i.Lt,{position:"bottomLeft",trigger:"focus",className:I,style:{maxHeight:200,overflow:"scroll"},render:(0,C.jsx)(i.Lt.Menu,{children:D.map((e=>(0,C.jsx)(i.Lt.Item,{className:R,onClick:()=>J(e),children:e},e)))}),children:(0,C.jsx)(i.EG,{ref:Y,inputValue:M,onInputChange:ce,value:t,placeholder:_,renderTagItem:(e,t,n)=>(0,C.jsx)(b,{value:e,selected:O.includes(e),disabled:l,onClick:Q},e),onAdd:ae,onBlur:e=>{if(e.relatedTarget&&e.relatedTarget instanceof Element){const t=[`.${I}`,k].filter((e=>e)).join(",");if(null!==e.relatedTarget.closest(t)||re(e.relatedTarget))return}ae([E])},disabled:l})}),!1,!l&&!x&&(0,C.jsx)(F,{value:t,onSelect:J})]})})),Z=(0,i.Q2)(L)},91285:(e,t,n)=>{n.d(t,{l:()=>m});var r=n(50959),s=n(84875),i=n.n(s),o=n(84736),a=n(26800),c=n(86439),l=n(16743);const d="textarea-LCPYTj";var u=n(11527);const h=e=>{var t;const n=(0,r.useRef)(!1),[s,h]=(0,r.useState)(""),{allowEnter:m=!0,value:p,...f}=e,{className:g,maxLength:v,onChange:x,onCompositionEnd:w,onCompositionStart:_}=f,y=n.current?s:p,C=(0,a.Z)((e=>{const t=e||"";return m?t:t.replace(/\n/g,"")})),b=(0,a.Z)((e=>{const t=C(e);return void 0!==v?(0,c.aF)(t,v):t})),j=(0,a.Z)((e=>{n.current=!0,h(e.currentTarget.value),null==_||_(e)})),k=(0,r.useRef)(null),{saveSelectionIfNeeded:S}=(0,l.u)({getInputElem:()=>k.current}),E=(0,a.Z)(((e,t)=>{S(e),null==x||x(e,t)})),T=(0,a.Z)((e=>{const t=b(e.currentTarget.value);n.current=!1,h(t),E(t,e),null==w||w(e)})),N=(0,a.Z)(((e,t)=>{const r=C(e);if(n.current)return void h(r);if(void 0===v)return void E(r,t);const s=b(r);E(s,t)})),F=(0,r.useMemo)((()=>({maxRows:3})),[]);return(0,u.jsx)(o.Kx,{autoComplete:"off",...f,ref:k,value:y,className:i()(g,d),maxLength:void 0,autosize:null!==(t=f.autosize)&&void 0!==t?t:F,rows:1,onChange:N,onCompositionStart:j,onCompositionEnd:T})},m=(0,o.Q2)(h)},42983:(e,t,n)=>{n.d(t,{Ab:()=>r});let r=function(e){return e[e.WordArt=1]="WordArt",e[e.Sticker=2]="Sticker",e[e.AudioEffect=3]="AudioEffect",e[e.Video=4]="Video",e[e.Music=5]="Music",e[e.TextTemplate=6]="TextTemplate",e[e.Special=7]="Special",e[e.FaceSpecial=8]="FaceSpecial",e[e.Image=9]="Image",e[e.Font=10]="Font",e[e.Timbre=11]="Timbre",e[e.Filter=12]="Filter",e[e.SubtitleTemplate=48]="SubtitleTemplate",e[e.Formula=50]="Formula",e[e.WordArtCollection=101]="WordArtCollection",e[e.StickerCollection=102]="StickerCollection",e[e.AudioEffectCollection=103]="AudioEffectCollection",e[e.VideoCollection=104]="VideoCollection",e[e.Emoticons=105]="Emoticons",e[e.TextTemplateCollection=106]="TextTemplateCollection",e[e.FilterCollection=112]="FilterCollection",e[e.MultiLanguageTextTemplate=207]="MultiLanguageTextTemplate",e}({})},3718:(e,t,n)=>{n.d(t,{Z:()=>r,d:()=>s});let r=function(e){return e[e.Unsigned=0]="Unsigned",e[e.Signing=1]="Signing",e[e.Signed=2]="Signed",e}({}),s=function(e){return e.BusinessArtist="business_artist",e}({})},2514:(e,t,n)=>{n.d(t,{r:()=>h});var r=n(59787),s=n(66589),i=n(84736),o=n(73224),a=n(1946),c=n(29755),l=n(8129),d=n(2555);class u{constructor(){(0,r.Z)(this,"fileList",[]),(0,s.ky)(this)}addFiles(e){e.some((e=>e.size>10485760))?i.FN.error(o.I18n.t("pc_template_authorize_exceed_size_web")):(e.forEach((e=>{this.fileList.push({id:(0,a.V)(),file:e,uri:"",progress:0})})),this.fileList.slice(-e.length).forEach((e=>this.uploadOneFile(e))))}async uploadOneFile(e){try{const{uploadResult:t}=await(0,c.ws)({file:e.file,onProgress:(0,s.aD)((({total:t,loaded:n})=>{e.progress=n/t||0}))});await(new d.B).timeout(500),(0,s.z)((()=>{e.uri=t.Uri}))}catch(t){i.FN.error(o.I18n.t("pc_template_authorize_upload_failed_web")),this.deleteFile(e.id),(0,l.RF)("[ThirdPartyAuthFileUploadService] file upload failed",t,{id:e.id,fileName:e.file.name})}}deleteFile(e){this.fileList=this.fileList.filter((t=>t.id!==e))}get isAllUploaded(){return this.fileList.every((e=>e.uri))}addOnlineFiles(e){e.forEach((e=>this.fileList.push({id:(0,a.V)(),file:e.file,uri:e.uri,progress:100})))}}class h{constructor(e){this.props=e,(0,r.Z)(this,"map",new Map)}getKey(e){var t,n,r;return null!==(t=null===(n=(r=this.props).getKey)||void 0===n?void 0:n.call(r,e))&&void 0!==t?t:String(e)}get(e){const t=this.getKey(e);return this.map.get(t)}ensure(e){const t=this.getKey(e);let n=this.map.get(t);return n||(n=new u,this.map.set(t,n)),n}getUploadedFiles(e){const t=this.getKey(e),n=this.map.get(t);return(null==n?void 0:n.fileList.filter((e=>e.uri)))||[]}}},74502:(e,t,n)=>{n.d(t,{P:()=>w});var r=n(84875),s=n.n(r),i=n(84736),o=n(26800),a=n(45599),c=n(46309),l=n(3767),d=n(33556);const u="root-EgNFDI",h="left-E5g9si",m="right-rFTuHS",p="remind-yX4spY",f="protocol-M9K9e5",g="buttonContainer-pqhOLs",v="button-G4gKq0";var x=n(11527);const w=({className:e,leftText:t,isPublishDisabled:n,isPublishing:r,needConfirmModalOnClose:w,onPublish:_,beforeCancel:y,onCancel:C})=>{const{t:b}=(0,a.$)(),j=(0,o.Z)((async()=>{if(y&&y(),w){if(await l.Z.warn({mainText:b("pc_sticker_cancel_web"),subText:b("pc_sticker_click_unrecoverable_web"),confirmBtnText:b("pc_stickers_release_confirm_quit_web"),cancelBtnText:b("pc_stickers_release_cancel_web")})!==l.L.Confirm)return}C?C():(0,c.Nt)()})),k=d.YW.Creator,{showModalWithoutReview:S}=(0,d.ZP)({protocol:k});return(0,x.jsxs)("div",{className:s()(e,u),children:[(0,x.jsx)("div",{className:h,onClick:undefined,children:t}),(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)("span",{className:p,onClick:S,children:b("pc_sticker_release_agree_{X}_web",{X:(0,x.jsx)("span",{className:f,children:d.rr[k]},"protocol")})}),(0,x.jsxs)("div",{className:g,children:[(0,x.jsx)(i.zx,{className:v,type:"primary",theme:"solid",disabled:n,loading:r,onClick:_,children:b("pc_stickers_release_web")}),(0,x.jsx)(i.zx,{className:v,type:"secondary",theme:"solid",onClick:j,children:b("pc_stickers_release_cancel_web")})]})]})]})}},9608:(e,t,n)=>{n.d(t,{v:()=>Z});var r=n(50959),s=n(23479),i=n(84875),o=n.n(i),a=n(41232);const c="root-uLKAXM",l="title-zTU1ta",d="titleText-IBFt9m",u="icon-_YRcF7",h="rotate-biqGJK",m="bottom-line-nHX1wW",p="contentWrapper-Nsy6v8",f="content-nUJ6jp";var g=n(11527);const v=({visible:e,className:t,contentClassName:n,onChange:s,title:i,children:v})=>{const[x,w]=(0,r.useState)(e),[_,y]=(0,r.useState)(e?null:0),C=(0,r.useRef)(null),b=e=>{if(e!==x){var t,n;const e=null!==(t=null===(n=C.current)||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==t?t:null;y(e)}w(e)};(0,r.useLayoutEffect)((()=>{x||requestAnimationFrame((()=>y(0)))}),[x]);return(0,r.useLayoutEffect)((()=>{b(e)}),[e]),(0,g.jsxs)("div",{className:o()(t,c),children:[(0,g.jsxs)("div",{className:l,onClick:()=>{b(!x),null==s||s(!e)},children:[(0,g.jsx)(a.Z,{className:o()(u,{[h]:x})}),(0,g.jsx)("div",{className:d,children:i})]}),(0,g.jsxs)("div",{className:p,style:{height:null!=_?_:"auto"},onTransitionEnd:()=>x&&y(null),children:[(0,g.jsx)("div",{className:m}),(0,g.jsx)("div",{ref:C,className:o()(n,f),children:v})]})]})};var x;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}const _=e=>r.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:8,height:6,fill:"none",viewBox:"0 0 8 6"},e),x||(x=r.createElement("path",{stroke:"#00C1CD",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 3 2.143 2L7 1"})));var y;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}const b=e=>r.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",width:6,height:6,fill:"none",viewBox:"0 0 6 6"},e),y||(y=r.createElement("path",{stroke:"#AE1C1C",strokeLinecap:"round",strokeWidth:1.5,d:"m1 1 4 4M5 1 1 5"}))),j="root-ZH_C8Z",k="icon-box-FdFonZ",S="dot-VyF22G",E="word-oYDchC",T="error-NPw70q",N=({className:e,status:t,text:n})=>{const r=o()(j,e);return"init"===t?(0,g.jsxs)("div",{className:r,children:[(0,g.jsx)("div",{className:k,children:(0,g.jsx)("span",{className:S})}),(0,g.jsx)("div",{className:E,children:n})]}):"error"===t?(0,g.jsxs)("div",{className:r,children:[(0,g.jsx)("div",{className:k,children:(0,g.jsx)(b,{className:T})}),(0,g.jsx)("div",{className:o()([E,T]),children:n})]}):(0,g.jsxs)("div",{className:r,children:[(0,g.jsx)("div",{className:k,children:(0,g.jsx)(_,{})}),(0,g.jsx)("div",{className:E,children:n})]})};var F=n(46309);const P="root-peWMdc",R="wrapper-W8rapW",I="download-MCE7pb",L="instruction-SvWEjU",Z=(0,s.Pi)((e=>{const{className:t,groups:n,initGroup:s,activeGroup:i,resetExpandedGroupKey:a,getStatus:c}=e,[l,d]=(0,r.useState)([s]),u=(0,r.useRef)(!1);(0,r.useLayoutEffect)((()=>{a&&u.current&&d([i])}),[a]),(0,r.useEffect)((()=>{u.current=!0}),[]);return(0,g.jsx)("div",{className:o()(t,P),children:(0,g.jsx)("div",{className:R,children:n.map((e=>(0,g.jsxs)(v,{title:e.title,visible:l.includes(e.key),onChange:()=>{return t=e.key,void(l.includes(t)?d(l.filter((e=>e!==t))):d([...l,t]));var t},children:[e.link&&(0,g.jsx)("div",{className:I,onClick:()=>{var t,n;(n=null===(t=e.link)||void 0===t?void 0:t.src)&&(0,F.Yo)({url:n})},children:e.link.text}),e.instructions.map((t=>{var n;return(0,g.jsx)(N,{className:L,status:null!==(n=t.status)&&void 0!==n?n:c(t,e),text:t.title},t.key)}))]},e.key)))})})}))},36983:(e,t,n)=>{n.d(t,{Y:()=>f});var r=n(84875),s=n.n(r),i=n(45599),o=n(2237);const a="root-QyKpzG",c="border-igpdqP",l="content-i0g8M8",d="invalid-E06Qru",u="selected-vCvIxt",h="icon-uXwoK2",m="isUpdatingHint-TmA7x3";var p=n(11527);const f=({src:e,className:t,onClick:n,onContextMenu:r,isSelected:f,isInvalid:g,isUpdating:v=!1,size:x})=>{const{t:w}=(0,i.$)();return(0,p.jsxs)("div",{className:s()(t,a,g&&d,f&&u),style:{width:x,height:x},onClick:n,onContextMenu:r,children:[(0,p.jsxs)("div",{className:l,children:[e?(0,p.jsx)("img",{className:h,src:e}):(0,p.jsx)(o.t,{className:h,iconWidth:Math.round(.41*x)}),v&&(0,p.jsx)("div",{className:m,children:w("pc_sticker_upgrading_web")})]}),(0,p.jsx)("div",{className:c})]})}},72328:(e,t,n)=>{n.d(t,{S:()=>a});var r=n(84875),s=n.n(r);const i={root:"root-Jdq72k",title:"title-x8UGgH",line:"line-HKnXMT"};var o=n(11527);function a(e){const{className:t,title:n}=e;return(0,o.jsxs)("div",{className:s()(i.root,t),children:[(0,o.jsx)("div",{className:i.title,children:n}),(0,o.jsx)("div",{className:i.line})]})}},12390:(e,t,n)=>{n.d(t,{O:()=>w});var r,s,i=n(23479),o=n(84875),a=n.n(o),c=n(84736),l=n(45599),d=n(83714),u=n(50959);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}const m=e=>u.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none",viewBox:"0 0 30 30"},e),r||(r=u.createElement("rect",{width:30,height:30,fill:"#00C1CD",rx:15})),s||(s=u.createElement("path",{stroke:"#FAFAFA",strokeLinecap:"square",strokeWidth:1.875,d:"M9.001 15h12M15.001 21.001v-12"})));var p=n(15843);const f={root:"root-rylHEj","root--small":"root--small-aQdS7l",rootSmall:"root--small-aQdS7l",disabled:"disabled-UDlazI",box:"box-ZWa78Y",dragging:"dragging-vqbsIa",largeBox:"largeBox-WcUW_R",addIcon:"addIcon-qWe0Z9",titleContainer:"titleContainer-h3CoYT",title:"title-vs2_SI",subTitle:"subTitle-cCG07G",smallBox:"smallBox-gFzkvY"};var g=n(11527);const v=(0,u.memo)((({className:e,size:t,title:n,draggingTitle:r="",draggingDisabled:s,subTitle:i="",disabled:o,disabledTooltip:c="",onDrop:l,onClick:d})=>{const[h,v]=(0,u.useState)(!1),x=h?r:n,w=e=>{s||v(e)},{handleMouseEnter:_}=(0,p.w)({content:c,cursor:"not-allowed"}),y=e=>t=>{o||(t.preventDefault(),t.stopPropagation(),null==e||e(t))};return(0,g.jsx)("div",{className:a()(e,f.root,f[`root--${t}`],o&&f.disabled,h&&f.dragging),onDragEnter:y((()=>!h&&w(!0))),onDragOver:y(),onDragLeave:y((e=>{e.currentTarget===e.target&&h&&w(!1)})),onDrop:y((e=>{w(!1),l(e)})),onMouseEnter:o&&null!=c&&c.length?_:void 0,children:"large"===t?(0,g.jsxs)("div",{className:a()(f.box,f.largeBox),onClick:o?void 0:d,children:[(0,g.jsx)(m,{className:f.addIcon}),(0,g.jsxs)("div",{className:f.titleContainer,children:[(0,g.jsx)("div",{className:f.title,children:x}),(0,g.jsx)("div",{className:f.subTitle,children:i})]})]}):(0,g.jsxs)("div",{className:a()(f.box,f.smallBox),onClick:o?void 0:d,children:[(0,g.jsx)(m,{className:f.addIcon}),(0,g.jsx)("span",{className:f.title,children:x})]})})})),x={root:"root-qiLomF",uploadArea:"uploadArea-CUnzAK",uploadAreaWithoutStickers:"uploadAreaWithoutStickers-lupETK",retryText:"retryText-CmFKf2",mainForm:"mainForm-QtsMBI",importArea:"importArea-t3T7nf",formArea:"formArea-cY23J0"};function w(e){const{className:t,layout:n,setFormApi:r,renderImportArea:s,renderFormArea:i,onRetry:o,importLoadingText:u,scrollAreaRef:h,uploadAreaProps:m}=e,{titleForUploadArea:p,titleForMainForm:f,...w}=m,{t:_}=(0,l.$)();return(0,g.jsx)(c.l0,{className:a()(t,x.root),getFormApi:r,children:"loading"===n?(0,g.jsx)(d.Y,{status:"loading",children:u||_("pc_filter_material_loading")}):"error"===n?(0,g.jsx)(d.Y,{status:"error",children:_("pc_sticker_abnormal_{X}_web",{X:(0,g.jsx)("span",{className:x.retryText,onClick:o,children:_("pc_sticker_retry_web")},"X")})}):"mainForm"===n?(0,g.jsxs)("div",{className:x.mainForm,children:[(0,g.jsx)("div",{className:x.importArea,ref:h,children:s((0,g.jsx)(v,{className:x.uploadArea,size:"small",title:f,...w}))}),(0,g.jsx)("div",{className:x.formArea,children:i()})]}):(0,g.jsx)(v,{className:x.uploadAreaWithoutStickers,size:"large",title:p,...w})})}(0,i.Pi)((e=>w(e)))},36775:(e,t,n)=>{n.d(t,{q:()=>f});var r=n(50959),s=n(84736),i=n(26800),o=n(45599),a=n(3767);const c="modal-uSGTo3",l="title-h7CfEL",d="detail-JFW1Vi",u="retryText-b6tno6",h="progress-WRObzP",m="cancelButton-zcznQe";var p=n(11527);const f=(0,r.forwardRef)(((e,t)=>{const{uploadStats:n,onRetryUpload:f,onCancel:g,onShowUploadFail:v,onPromptConfirmToCancel:x}=e,{pending:w,succeeded:_,failed:y,uninited:C=0}=n,b=w+_+y,j=Math.floor(_/b*100)||0,{t:k}=(0,o.$)(),[S,E]=(0,r.useState)(!1),T=w<=C&&y>0,N=(0,i.Z)((async()=>{try{return await a.Z.warn({mainText:k("pc_stickers_release_confirm_delete_web"),subText:k("pc_stickers_release_uploading_web"),confirmBtnText:k("pc_stickers_release_confirm_quit_web"),cancelBtnText:k("pc_stickers_release_cancel_web")})===a.L.Confirm}catch{return!1}})),F=(0,i.Z)((async()=>{if(!T){const e=N();x(e);if(!await e)return}g(),E(!1)})),P=()=>(0,p.jsx)(s.zx,{className:m,theme:"solid",type:"secondary",onClick:F,children:k("pc_stickers_release_cancel_web")});return(0,r.useImperativeHandle)(t,(()=>({show:()=>E(!0),hide:()=>E(!1)}))),(0,r.useEffect)((()=>{S&&T&&v()}),[S&&T]),(0,p.jsx)(s.u_,{visible:S,className:c,header:null,footer:null,width:"auto",centered:!0,maskClosable:!1,closable:!1,children:T?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:l,children:k("pc_stickers_release_network_anomaly_web")}),(0,p.jsx)("div",{className:d,children:(0,p.jsx)("span",{children:k("pc_stickers_release_upload_error_again_web",{X:(0,p.jsx)("span",{className:u,onClick:f,children:k("pc_sticker_retry_web")},"X")})})}),(0,p.jsx)(s.Ex,{className:h,percent:100,size:"small",stroke:"var(--yellow-0)"}),P()]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:l,children:k("pc_stickers_release_uploading_material_web")}),(0,p.jsx)("div",{className:d,children:k("pc_stickers_release_upload details_web",{X:_,Y:b,Z:j})}),(0,p.jsx)(s.Ex,{className:h,percent:j,size:"small",stroke:"var(--cyan-2)"}),P()]})})}))},58546:(e,t,n)=>{n.d(t,{r:()=>s});var r=n(59787);class s{constructor(e){this.props=e,(0,r.Z)(this,"fileMap",new Map)}ensureFile(e){let t=this.fileMap.get(e);return t||(t={data:this.props.initData(),events:{}},this.fileMap.set(e,t)),t}getFile(e){return this.fileMap.get(e)}register(e,t,n){this.ensureFile(t).events[e]=n}dispatch(e){var t,n;const r=this.fileMap.get(e.id);r&&(null===(t=(n=r.events)[e.type])||void 0===t||t.call(n,e,r))}removeFile(e){this.fileMap.delete(e)}}},539:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(66589),s=n(52918),i=n(74575);function o(e){const t=(0,i.e)({watch:()=>e.watch()&&!n.isPromptingConfirmToCancel}),n=(0,s.fv)((()=>({start:()=>t.start(),stop:()=>t.stop(),isPromptingConfirmToCancel:!1,handlePromptConfirmToCancel:async e=>{n.isPromptingConfirmToCancel=!0;const s=await e;(0,r.z)((()=>{s&&t.stop(),n.isPromptingConfirmToCancel=!1}))}})));return n}},57609:(e,t,n)=>{n.d(t,{I:()=>c});var r=n(59787),s=n(8129),i=n(76706),o=n(3718),a=n(94435);class c{constructor(e){this.props=e,(0,r.Z)(this,"signCode",null),(0,r.Z)(this,"isRefreshing",!1),(0,r.Z)(this,"fetchRegionDataPromise",null),(0,r.Z)(this,"fetchRegionDataImpl",(async()=>{const[{country_code_list:e},{doc_type_info:t},n]=await Promise.all([(0,i.Jr)({sign_scene:this.props.signScene}),(0,i.Yg)(),(0,a.vW)()]);return{country_code_list:e,doc_type_info:t,region:n}}))}async init(){this.refreshSignInfo().catch((()=>{})),this.fetchRegionData().catch((()=>{}))}async refreshSignInfo(){const{signScene:e}=this.props;try{this.isRefreshing=!0;const{sign_status_infos:t=[]}=await(0,i.x3)(),n=t.find((t=>t.sign_scene===e)),r=(null==n?void 0:n.sign_code)||o.Z.Unsigned;return this.signCode=r,r}catch(t){throw(0,s.RF)("[AuthorSignService] refreshSignInfo failed",t,{signScene:e}),t}finally{this.isRefreshing=!1}}async checkAuthorHasSigned(){if(this.signCode===o.Z.Signed)return!0;return await this.refreshSignInfo()===o.Z.Signed}fetchRegionData(){return this.fetchRegionDataPromise||(this.fetchRegionDataPromise=this.fetchRegionDataImpl().catch((e=>{throw this.fetchRegionDataPromise=null,e}))),this.fetchRegionDataPromise}async createContract(e){const t=await(0,i.OP)({...e,sign_scene:this.props.signScene});return this.signCode=o.Z.Signing,this.refreshSignInfo(),t}}},18370:(e,t,n)=>{n.d(t,{Pk:()=>l,uY:()=>h,md:()=>m});var r=n(59787),s=n(91550),i=n(11449),o=n(72100);var a=n(8129),c=n(17095);const l="fmp";class d extends((()=>o.EventEmitter)()){constructor(){super(),(0,r.Z)(this,"category",{}),(0,r.Z)(this,"customTiming",{}),(0,r.Z)(this,"hasReportedFmp",!1),(0,r.Z)(this,"messageChannel",new MessageChannel),(0,r.Z)(this,"afterFramePromise",null),this.messageChannel.port2.onmessage=()=>this.emit("_messagechannel")}updateCategory(e){this.category={...e,...this.category}}getCategoryToReport(){return{scene:"success",...this.category}}addTiming(e,t=performance.now()){this.customTiming[e]||(this.customTiming[e]=t)}addSetStateTiming(e,t){this.customTiming[e]||(this.addTiming(`${e}-setState`),this.addRenderTiming(e),t&&this.updateCategory(t))}afterFrame(){return this.afterFramePromise||(this.afterFramePromise=new Promise((e=>{window.requestAnimationFrame((()=>{this.once("_messagechannel",(()=>{this.afterFramePromise=null,e()})),this.messageChannel.port1.postMessage(null)}))}))),this.afterFramePromise}async addRenderTiming(e,t){this.customTiming[e]||("visible"===document.visibilityState&&await this.afterFrame(),this.addTiming(e),t&&this.updateCategory(t),e!==l||this.hasReportedFmp||this.report())}report(){var e;const t=(0,s.Z)(performance.timing,["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"]),n=t.navigationStart,r=this.getMetrics(n,t);Object.assign(r,this.customTiming);const o=this.getCategoryToReport();(0,a.hC)({module:"fmp",scene:o.scene,categories:o,metrics:r}),(0,c.g)({eventName:"heycan_performance_timing",params:{pid:null===(e=i.Z.config)||void 0===e||null===(e=e.call(i.Z))||void 0===e?void 0:e.pid,...o,...r}}),this.hasReportedFmp=!0,this.emit("fmp",{startTime:n,category:o})}getMetrics(e,t){const n={};return Object.keys(t).forEach((r=>{t[r]&&(n[r]=t[r]-e)})),n}}let u=null;function h(){return u||(u=new d),u}function m(){return u}},50366:(e,t,n)=>{n.d(t,{w:()=>u});var r=n(59787),s=n(73224),i=n(84736),o=n(73768),a=n(8129);class c{constructor(e){var t;this.options=e,(0,r.Z)(this,"cacheData",null),this.cacheData=null!==(t=this.options.initCacheData)&&void 0!==t?t:null}async get(){if(this.cacheData&&!this.isExpired()){const{data:e}=this.cacheData;return this.silentRefreshIfNeeded(),e}return this.update()}getSync(){var e,t;return null!==(e=null===(t=this.cacheData)||void 0===t?void 0:t.data)&&void 0!==e?e:null}isExpired(){if(!this.cacheData)return!0;const{expireTime:e,refreshTime:t}=this.cacheData,n=Date.now();return n<t||e<=n}needSilentRefresh(){if(!this.cacheData)return!0;const{silentRefreshTime:e}=this.cacheData;return e<=Date.now()}async silentRefreshIfNeeded(){this.needSilentRefresh()&&await this.update()}async update(){var e,t;const{data:n,expireTime:r,silentRefreshTime:s}=await this.options.refresh(null!==(e=null===(t=this.cacheData)||void 0===t?void 0:t.data)&&void 0!==e?e:null);return this.cacheData={data:n,expireTime:r,silentRefreshTime:s,refreshTime:Date.now()},n}}var l=n(94435),d=n(62262);class u{constructor(){(0,r.Z)(this,"objectUploadType",l.AJ.Object),(0,r.Z)(this,"uploadConfigsCache",new c({refresh:async()=>{const[e,t,n]=await Promise.all([this.getUploadConfigByScene(l.AJ.Video),this.getUploadConfigByScene(l.AJ.Image),this.getUploadConfigByScene(this.objectUploadType)]),r={videoUploadConfig:e,imageUploadConfig:t,objectUploadConfig:n},s=new Date(t.currentTime).getTime();return{data:r,refreshTime:s,expireTime:Math.min(new Date(t.expiredTime).getTime(),s+18e5),silentRefreshTime:s+6e5}}}))}useVodObject(){this.objectUploadType=l.AJ.VodObject}async getUploadConfigs(e){try{return await this.uploadConfigsCache.get()}catch(t){throw(0,a.RF)(`[UploadConfigService] getUploadConfigs failed for ${e}`,t,{action:e}),t}}updateCache(){return this.uploadConfigsCache.update()}async refreshUploadConfigsIfNeeded({when:e,logPrefix:t,errorMsg:n=s.I18n.t("pc_sticker_failed_retry_web")}){if(this.uploadConfigsCache.isExpired())return o.c.show((async()=>{try{await this.uploadConfigsCache.update()}catch(r){throw i.FN.error(n),(0,a.RF)(`${t} refreshUploadConfigs failed when ${e}`,r,{action:e}),r}}))}async getUploadConfigByScene(e){const t=await(0,l._M)({scene:e});if(!t.upload_domain)throw new d.w("upload_domain is empty",{scene:e});return{currentTime:t.current_time,expiredTime:t.expired_time,accessKey:t.access_key_id,secretKey:t.secret_access_key,sessionToken:t.session_token,hostDomain:t.upload_domain,nameSpace:2===t.space_type?"":t.space_name,serviceId:2===t.space_type?t.space_name:"",region:t.region}}}},17095:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(46309);function s(e){console.log("[sendLog]",e.eventName,e.params),(0,r.qx)(e)}},60251:(e,t,n)=>{n.d(t,{l:()=>s});var r=n(59787);class s{constructor(){(0,r.Z)(this,"lockedKey",new Set)}async lock(e,t){if(this.lockedKey.has(e))return null;this.lockedKey.add(e);try{return await t()}finally{this.lockedKey.delete(e)}}}},86156:(e,t,n)=>{n.d(t,{q:()=>i});var r=n(59787),s=n(66589);class i{constructor(e){this.props=e,(0,r.Z)(this,"fetchStatus",{isPending:!1,isFailed:!1,hasFetched:!1,fetchVersion:0,hasMore:!1}),(0,r.Z)(this,"nextCursor",null),(0,r.Z)(this,"fetchContext",null),(0,s.ky)(this,{fetchContext:!1})}async fetchFirstPage(e){const t=this.fetchStatus.isFailed;try{e.isRefresh||this.runStartAction();const t=await this.props.fetchFirstPage(this.fetchContext),{action:n,hasMore:r,nextCursor:s}=this.normalizeFetchResult(t);this.runSuccessAction((()=>{this.fetchStatus.fetchVersion+=1,this.fetchStatus.hasMore=null!=r&&r,this.nextCursor=null!=s?s:null,n()}))}catch(n){this.runFailureAction({isFirstPage:!0,isRefresh:e.isRefresh});const r=e.isRefresh&&"refresh_first_page"||t&&"retry_fetch_first_page"||"init_fetch_first_page";throw this.props.slardarErrorLog(r,n,{}),n}}async fetchMorePage(){if(!this.props.fetchMorePage)throw new Error("props.fetchMorePage not implemented");const e=this.fetchStatus.isFailed,t=this.nextCursor;try{this.runStartAction();const e=await this.props.fetchMorePage(t,this.fetchContext),{action:n,hasMore:r,nextCursor:s}=this.normalizeFetchResult(e);this.runSuccessAction((()=>{this.fetchStatus.hasMore=null!=r&&r,this.nextCursor=null!=s?s:null,n()}))}catch(n){this.runFailureAction({isFirstPage:!1,isRefresh:!1});const r=e?"retry_fetch_more_page":"fetch_more_page";throw this.props.slardarErrorLog(r,n,{cursor:t}),n}}normalizeFetchResult(e){return"function"==typeof e?{action:e,hasMore:!1,nextCursor:null}:e}runStartAction(){this.fetchStatus.isPending=!0,this.fetchStatus.isFailed=!1}runSuccessAction(e){this.fetchStatus.isPending=!1,this.fetchStatus.isFailed=!1,this.fetchStatus.hasFetched=!0,e()}runFailureAction(e){var t,n;this.fetchStatus.isPending=!1,this.fetchStatus.isFailed=!0,null===(t=(n=this.props).actionOnFailure)||void 0===t||t.call(n,e,this.fetchContext)}async initFetchFirstPage(e){this.fetchContext=e;const{isPending:t,hasFetched:n}=this.fetchStatus;if(!t&&!n)return this.fetchFirstPage({isRefresh:!1})}async retryFetchFirstPage(){const{isPending:e}=this.fetchStatus;if(!e)return this.fetchFirstPage({isRefresh:!1})}async refreshFirstPage(){const{isPending:e}=this.fetchStatus;if(!e)return this.fetchFirstPage({isRefresh:!0})}async retryFetchMorePage(){const{isPending:e,hasMore:t}=this.fetchStatus;if(!e&&t)return this.fetchMorePage()}async fetchMorePageOnScrollToEnd(){const{isPending:e,hasMore:t,isFailed:n}=this.fetchStatus;if(!e&&t&&!n)return this.fetchMorePage()}reduceToFirstPageStatus(e){this.nextCursor=e,this.fetchStatus.hasMore=!0}}},3767:(e,t,n)=>{n.d(t,{L:()=>a,Z:()=>c});var r=n(98052);let s=function(e){return e[e.Succeed=1]="Succeed",e[e.Fail=0]="Fail",e[e.NotAuthroized=-1]="NotAuthroized",e[e.NoHandler=-2]="NoHandler",e[e.ParameterError=-3]="ParameterError",e[e.UnknownError=-1e3]="UnknownError",e}({});var i=n(8129);var o=function(e){return e[e.Unknown=0]="Unknown",e[e.InfoDialog=1]="InfoDialog",e[e.AlertDialog=2]="AlertDialog",e}(o||{});let a=function(e){return e.Unknown="Unknown",e.Confirm="confirm",e.Cancel="cancel",e.Optional="optional",e.CheckboxClick="checkboxClick",e}({});class c{static async callDialog(e,t){const{onConfirm:n,onCancel:o,...c}=t,l={id:"pc_heycan",type:e,...c},d=await r.Jn.call("showDialog",l);if(d.code!==s.Succeed)throw(0,i.RF)("[ConfirmModal] jsb error",null,{type:e,...t,...d}),d;return d.data.actionType===a.Confirm&&(null==n||n()),d.data.actionType===a.Cancel&&(null==o||o()),d.data.actionType}static async confirm(e){return this.callDialog(o.InfoDialog,e)}static async warn(e){return this.callDialog(o.AlertDialog,e)}}},45033:(e,t,n)=>{n.d(t,{_:()=>o});var r=n(74235),s=n(26800),i=n(45599);const o=()=>{const{i18n:e}=(0,i.$)();return{getDisplayLength:(0,s.Z)((t=>(0,r.xB)({len:t,i18n:e})))}}},74575:(e,t,n)=>{n.d(t,{e:()=>o});var r=n(66589),s=n(52918),i=n(50959);const o=e=>{const t=(0,s.fv)((()=>({disposer:null,resolve:null,get watchResult(){return e.watch()},start:()=>(t.stop(),new Promise((e=>{t.resolve=e,t.disposer=(0,r.EH)((()=>{t.watchResult&&(e(),t.stop())}))}))),stop(){var e;null===(e=t.disposer)||void 0===e||e.call(t),t.disposer=null,t.resolve=null}})));return(0,i.useEffect)((()=>()=>t.stop()),[]),t}},65546:(e,t,n)=>{n.d(t,{d:()=>i});var r=n(50959),s=n(18370);function i(){const e=(0,r.useRef)(!1);var t;e.current||(e.current=!0,null===(t=(0,s.md)())||void 0===t||t.addRenderTiming("renderInitPage"))}},12904:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(50959),s=n(46309),i=n(8129);const o=e=>{(0,r.useEffect)((()=>{(0,s.Td)({title:e.title}),(0,i.$G)({pid:e.pid})}),[])}},16743:(e,t,n)=>{n.d(t,{u:()=>i});var r=n(26800),s=n(50959);function i(e){const t=(0,r.Z)((()=>e.getInputElem())),n=(0,s.useRef)(null);return(0,s.useLayoutEffect)((()=>{const e=t();n.current&&e&&([e.selectionStart,e.selectionEnd]=n.current,n.current=null)})),{saveSelectionIfNeeded:e=>{const r=t();null!=(null==r?void 0:r.selectionStart)&&null!=r.selectionEnd&&e!==r.value&&(n.current=[Math.min(e.length,r.selectionStart),Math.min(e.length,r.selectionEnd)])}}}},86439:(e,t,n)=>{function r(e,t){return t[0]<=e&&e<=t[1]}n.d(t,{aF:()=>u});const s=[[8960,9215],[9728,55215],[65280,65519]];function i(e){const t=e.charCodeAt(0);return e.length>1||s.some((e=>r(t,e)))}const o=8205,a=[127462,127487],c=[[8419,8419],[65024,65039],[127995,127999],[917536,917631],[768,879],[3633,3633],[3636,3642],[3655,3662]];function l(e,t){const n=e.normalize(),s=[];let i=0,l=0,d="";for(;i<n.length;){const e=n.codePointAt(i),u=e>65535?2:1,h=n.slice(i,i+u),m=s.length-1,p=m>=0?s[m]:null;if(m>=0&&(e===o||l===o||r(e,a)&&r(l,a)&&p===d||c.some((t=>r(e,t))))&&(s[m]+=h),(m<0||p===s[m])&&h){if(null!=t&&t.maxLength&&s.length>=t.maxLength)return s;s.push(h)}l=e,d=h,i+=u}return s}function d(e,t,n){let r=0,s=0;for(;s<e.length;){const o=e[s],a=i(o)?2:1;if(r+=a,r>t&&s>0){s-=1,r-=a;break}if(n(o),r>=t)break;s+=1}return{segIndex:s,count:r}}function u(e,t){if(2*e.length<=t)return e;const n=l(e,{maxLength:t});let r="";return d(n,t,(e=>r=`${r}${e}`)),r}},29755:(e,t,n)=>{n.d(t,{ws:()=>h});var r=n(27049),s=n.n(r),i=n(73224),o=n(54847),a=n(25807),c=n(62262),l=n(94435);let d=function(e){return e[e.Video=1]="Video",e[e.Image=2]="Image",e[e.Object=9]="Object",e}({});const u={[d.Video]:"video",[d.Image]:"image",[d.Object]:"object"};const h=e=>new Promise((async(t,n)=>{const{file:r,onProgress:h,onSuccess:m,onError:p,getUploadToken:f}=e,g=(v=r.type).includes("image")?d.Image:v.includes("video")?d.Video:d.Object;var v;const x=new Error("").stack,w=i.I18n.t("pc_upload_fail_web");let _=new c.w("upload failed: getUploadConfig error",{displayMessage:w,uploadType:g,uploadStack:x});const y=await async function(e){var t;const{uploadType:n,getUploadToken:r}=e,s=await(null!==(t=null==r?void 0:r())&&void 0!==t?t:(0,l._M)({scene:n})),i={CurrentTime:s.current_time,ExpiredTime:s.expired_time,SessionToken:s.session_token,AccessKeyId:s.access_key_id,SecretAccessKey:s.secret_access_key};return{config:{userId:a.$.userInfo.uid,appId:Number(o.appModel.appInfo.appID),region:s.region,videoHost:`https://${s.upload_domain}`,imageHost:`https://${s.upload_domain}`,useServerCurrentTime:!0,imageConfig:{serviceId:s.space_name},videoConfig:{spaceName:s.space_name,processAction:[{name:"GetMeta"},{name:"Snapshot",input:{SkipBlackDetect:!1,SnapshotTime:0}}]},objectConfig:{spaceName:1===s.space_type?s.space_name:void 0,serviceId:2===s.space_type?s.space_name:void 0}},stsToken:i}}({uploadType:g,getUploadToken:f}).catch((e=>{_=e||_}));if(!y)return null==p||p({status:-1,statusText:w}),void n(_);null==h||h({total:100,loaded:20});const{config:C,stsToken:b}=y,j=new(s())(C);j.on("complete",(e=>{null==h||h({total:100,loaded:100}),null==m||m(e),t(e)})),j.on("progress",(e=>{null==h||h({total:100,loaded:20+e.percent/100*80})})),j.on("error",(e=>{var t,r;null==p||p({status:(null===(t=e.extra)||void 0===t?void 0:t.errorCode)||-1,statusText:w});const s=new c.w("upload failed",{code:String((null===(r=e.extra)||void 0===r?void 0:r.errorCode)||-1),displayMessage:w,uploadStack:x});n(s)}));const k=j.addFile({file:r,stsToken:b,type:u[g]});j.start(k),null==h||h({total:100,loaded:20})}))},1946:(e,t,n)=>{function r(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return e?`${e}-${t}`:t}n.d(t,{V:()=>r})},85083:(e,t,n)=>{n.d(t,{r:()=>o});var r,s=n(50959);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=s.createElement("path",{fill:"#6C6C6C",fillRule:"evenodd",d:"M6.875 6.154a.218.218 0 0 0 0-.308L4.447 3.418A.783.783 0 1 1 5.554 2.31l3.415 3.415a.387.387 0 0 1 0 .548L5.554 9.689a.783.783 0 1 1-1.107-1.107l2.428-2.428Z",clipRule:"evenodd"})))},88623:(e,t,n)=>{n.d(t,{r:()=>o});var r,s=n(50959);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=s.createElement("path",{stroke:"#00C1CD",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m3 6 2.143 2L9 4"})))},41750:(e,t,n)=>{n.d(t,{r:()=>o});var r,s=n(50959);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=s.createElement("path",{fill:"#D4D4D4",d:"M6.708 6 11 10.292l-.708.708L6 6.708 1.708 11 1 10.292 5.292 6 1 1.708 1.708 1 6 5.292 10.292 1l.708.708L6.708 6Z"})))},96426:(e,t,n)=>{n.d(t,{r:()=>o});var r,s=n(50959);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=s.createElement("path",{stroke:"#AE1C1C",strokeLinecap:"round",strokeWidth:1.5,d:"m4 4 4 4M8 4 4 8"})))},96305:(e,t,n)=>{n.d(t,{Z:()=>r});const r={root:"root-vUjaY_",icon:"icon-Rvn8cb",yellowIcon:"yellowIcon-ZUE7YW",yellowPoint:"yellowPoint-D92cGf",text:"text-FIGDkp",error:"error-CX16ns",checked:"checked-ot4aGx",tooltip:"tooltip-CeFJfC",errorTooltip:"errorTooltip-VmBB_H"}},73008:(e,t,n)=>{n.d(t,{Z:()=>r});const r={root:"root-LbkeWz",container:"container-jnsvSx",card:"card-yURKE_"}},89100:(e,t,n)=>{n.d(t,{Z:()=>r});const r={page:"page-HRk3ka",content:"content-LGuZmP",requirement:"requirement-sURfql",instruction:"instruction-eUXPJ0",mainForm:"mainForm-PzQVLp",footer:"footer-t1kXBF"}},68212:(e,t,n)=>{n.d(t,{Z:()=>r});const r={root:"root-QktMQ3",title:"title-QI6laf",right:"right-vx9IoL",closeIcon:"closeIcon-Z6vdI8"}}}]);