"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[740],{98994:function(e,n,t){t.d(n,{Z:function(){return u}});t(50959);var r=t(35273),a="yvNsh",i=t(11527),u=function(e){var n=e.position,t=e.content,u=e.children;return(0,i.jsx)(i.Fragment,{children:t?(0,i.jsx)(r.J2,{style:{backgroundColor:"#fff",borderColor:"#fff"},position:n,showArrow:!0,content:(0,i.jsx)("div",{className:a,children:t}),children:u}):u})}},58745:function(e,n,t){t.d(n,{Z:function(){return C}});var r,a,i,u=t(261),o=t(50959),c=t(84875),s=t.n(c);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},l.apply(this,arguments)}var f=function(e){return o.createElement("svg",l({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.786 10.7444C22.9115 6.88301 19.4591 4 15.3333 4C10.5468 4 6.66658 7.8802 6.66658 12.6667C6.66658 13.3605 6.74811 14.0353 6.90211 14.6819C3.78964 14.9029 1.33325 17.4979 1.33325 20.6667C1.33325 23.9804 4.01951 26.6666 7.33319 26.6667H22.6666C27.0849 26.6667 30.6666 23.0849 30.6666 18.6667C30.6666 14.6283 27.6743 11.2888 23.786 10.7444ZM16.4267 11.0223C16.1795 10.8163 15.8204 10.8163 15.5731 11.0223L8.70721 16.7439C8.4677 16.9435 8.60884 17.3333 8.9206 17.3333H13.3333V23.3333C13.3333 23.7015 13.6317 24 13.9999 24H17.9999C18.3681 24 18.6666 23.7015 18.6666 23.3333V17.3333H23.0792C23.391 17.3333 23.5321 16.9435 23.2926 16.7439L16.4267 11.0223Z",fill:"#00C1CD"})),a||(a=o.createElement("rect",{x:8,y:9,width:15,height:15,fill:"#fff"})),i||(i=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.3333 4C19.4592 4 22.9116 6.88301 23.7861 10.7444C27.6744 11.2888 30.6667 14.6283 30.6667 18.6667C30.6667 19.7375 30.4563 20.7593 30.0745 21.6928C29.1774 25.13 26.0516 27.6667 22.3333 27.6667H6.99993C3.68626 27.6666 1 24.9804 1 21.6667C1 20.8167 1.17674 20.008 1.49548 19.2753C2.05264 16.9288 3.98788 15.116 6.39902 14.739C6.35566 14.3876 6.33333 14.0298 6.33333 13.6667C6.33333 12.5221 6.55519 11.4294 6.95825 10.4292C7.94474 6.72718 11.3206 4 15.3333 4ZM22.4667 17.3333L16.0935 12.0223C15.8462 11.8163 15.4871 11.8163 15.2399 12.0223L8.8708 17.3299C8.88689 17.3322 8.90353 17.3333 8.92068 17.3333H13.3333V23.3333C13.3333 23.7015 13.6318 24 14 24H18C18.1214 24 18.2353 23.9675 18.3333 23.9108V18.3333H18.6667V17.3333H22.4667Z",fill:"#00C1CD"})))},d="UQWmQ",p="UsCjm",v="vdRja",h="Jcx5m",m="VAMKn",g=t(11527),C=function(e){var n,t=e.mainText,r=e.subText,a=e.btnClassName,i=e.error,c=e.disableDragEffect,l=(0,o.useState)(!1),C=(0,u.Z)(l,2),x=C[0],b=C[1],w=function(e){c||b(e)};return(0,g.jsxs)("div",{onDragEnter:function(){return w(!0)},onDragLeave:function(){return w(!1)},onDrop:function(){return w(!1)},className:s()([d,a,i&&p,x&&v]),children:[(0,g.jsx)(f,{}),t&&(0,g.jsx)("p",{className:h,children:t}),r&&(0,g.jsx)("div",{className:m,children:(n=r,"string"==typeof n&&(n=[n]),n.map((function(e){return(0,g.jsx)("div",{children:e},e)})))})]})}},46922:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(19058),a=t(30001),i=t(261),u=t(56873),o=t(39427),c=t(58054),s=t(41255),l=t.n(s),f=t(50959),d=t(35273),p=t(78794),v=t(84875),h=t.n(v),m=t(97554),g=t(85349),C=t(33673),x="Hhax8",b=t(11527),w=["maxFps","minFps"],Z=function(e){var n=e.isGenGif,t=void 0===n||n,s=e.className,v=e.children,Z=e.disabled,k=e.prompt,y=e.iconSetting,j=e.accept,_=e.fileValidate,R=e.limit,F=e.fileList,L=void 0===F?[]:F,N=e.onChange,E=e.onSuccess,U=e.onError,P=(0,f.useRef)({});P.current.onChange=N,P.current.onSuccess=E,P.current.onError=U;var I=y||{},M=I.fps,V=void 0===M?C.UG:M,H=I.loop,S=void 0===H?C.v4:H,T=I.width,D=void 0===T?C.$7:T,O=I.height,z=void 0===O?C.R$:O,B=I.bgColor,A=void 0===B?C.N3:B,W=(0,p.$)().t,G=(0,f.useCallback)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c,s,l,f,d,p,v,h,C,x,b,Z,k,y,R;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return",[!0]);case 2:if(t=_.maxFps,c=_.minFps,s=(0,o.Z)(_,w),!(void 0!==t&&n.length>t)){e.next=5;break}return e.abrupt("return",[!1,"\u6587\u4ef6\u5939\u5185\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc7 ".concat(t," \u5f20")]);case 5:if(!(void 0!==c&&n.length<c)){e.next=7;break}return e.abrupt("return",[!1,"\u6587\u4ef6\u5939\u5185\u81f3\u5c11\u9700\u8981 ".concat(c," \u5f20\u56fe\u7247")]);case 7:l=(0,u.Z)(n.entries()),e.prev=8,l.s();case 10:if((f=l.n()).done){e.next=34;break}return d=(0,i.Z)(f.value,2),p=d[0],v=d[1],h=v.file,C=v.order,e.next=14,(0,g.D0)(h,(0,a.Z)({accept:j},s));case 14:if(e.sent.shouldUpload){e.next=17;break}return e.abrupt("return",[!1,"\u6587\u4ef6 ".concat(h.name," \u5c3a\u5bf8\u4e0d\u7b26\u5408\u89c4\u8303")]);case 17:if(C===p||C===p+1){e.next=19;break}return e.abrupt("return",[!1,"\u6587\u4ef6 ".concat(h.name," \u547d\u540d\u4e0d\u7b26\u5408\u89c4\u8303")]);case 19:if(!(p>0)){e.next=32;break}return e.next=22,(0,m.FI)(h);case 22:return x=e.sent,b=x.width,Z=x.height,e.next=27,(0,m.FI)(n[p-1].file);case 27:if(k=e.sent,y=k.width,R=k.height,b===y&&Z===R){e.next=32;break}return e.abrupt("return",[!1,"\u6587\u4ef6 ".concat(h.name," \u957f\u5bbd\u4e0d\u7b26\u5408\u89c4\u8303")]);case 32:e.next=10;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(8),l.e(e.t0);case 39:return e.prev=39,l.f(),e.finish(39);case 42:return e.abrupt("return",[!0]);case 43:case"end":return e.stop()}}),e,null,[[8,36,39,42]])})));return function(n){return e.apply(this,arguments)}}(),[_,j]),$=(0,f.useCallback)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.rJ)({uri:n,fps:V,loop:S,bgColor:A,width:D,height:z});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[V,S,A,D,z]),K=(0,f.useCallback)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var a,o,s,f,p,v,h,m,C,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.rp)(n);case 3:f=e.sent,null!==(a=f)&&void 0!==a&&a.length||d.FN.error(W("pc_stickers_review_upload")),R&&((!(v=R-(null==L?void 0:L.length))||(null===(p=f)||void 0===p?void 0:p.length)>v)&&d.FN.error(W("up_to_{X}",{X:R})),f=v?f.slice(0,R-(null==L?void 0:L.length)):[]),null===(o=(s=P.current).onChange)||void 0===o||o.call(s,f),h=l()(f,5),m=(0,u.Z)(h),e.prev=9,m.s();case 11:if((C=m.n()).done){e.next=17;break}return x=C.value,e.next=15,Promise.all(x.map(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var a,u,o,c,s,l,f,d,p,v,h,m,C,x,b,w,Z,k,y,j,_,R,F,L,N,E;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,t){var r,a,i,u;n.status=e,n.validateMessage=W("pc_stickers_review_upload"),null===(r=(a=P.current).onChange)||void 0===r||r.call(a,[n]),null===(i=(u=P.current).onError)||void 0===i||i.call(u,[n])},c=n.fileList,s=void 0===c?[]:c,n.name,l=s.map((function(e){return{file:e,order:(0,g.Wp)(e.name)}})).sort((function(e,n){return e.order-n.order})),e.next=5,G(l);case 5:if(f=e.sent,d=(0,i.Z)(f,2),p=d[0],v=d[1],p){e.next=12;break}return o("validateFail",v),e.abrupt("return");case 12:return n.fileList=l.map((function(e){return e.file})),n.status="uploading",n.percent=30,null===(a=(u=P.current).onChange)||void 0===a||a.call(u,[n]),e.prev=16,e.next=19,(0,g.g1)(n);case 19:return _=e.sent,R=_.instanse,n.percent=40,n.fileInstance=R,null===(h=(m=P.current).onChange)||void 0===h||h.call(m,[n]),e.next=26,(0,g.Vr)(R);case 26:if(F=e.sent,L=F.uri,N=F.response,n.percent=70,n.response=N,n.zip={uri:L,md5:(null===(C=N.uploadResult)||void 0===C||null===(x=C.ObjectMeta)||void 0===x?void 0:x.Md5)||"",size:N.fileSize},null===(b=(w=P.current).onChange)||void 0===b||b.call(w,[n]),!t){e.next=40;break}return e.next=36,$(L);case 36:E=e.sent,n.url=E.gif_infos[0].url,n.uri=E.gif_infos[0].uri,n.extraFileList=E.gif_infos;case 40:n.percent=100,n.status="success",null===(Z=(k=P.current).onChange)||void 0===Z||Z.call(k,[n]),null===(y=(j=P.current).onSuccess)||void 0===y||y.call(j,[n]),e.next=49;break;case 46:e.prev=46,e.t0=e.catch(16),o("uploadFail",e.t0.message);case 49:case"end":return e.stop()}}),e,null,[[16,46]])})));return function(n){return e.apply(this,arguments)}}()));case 15:e.next=11;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),m.e(e.t0);case 22:return e.prev=22,m.f(),e.finish(22);case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(0),d.FN.error(e.t1.message);case 30:case"end":return e.stop()}}),e,null,[[0,27],[9,19,22,25]])})));return function(n){return e.apply(this,arguments)}}(),[N,U,E,G,$]);return(0,b.jsx)(d.gq,{multiple:!0,directory:!0,action:"/",accept:j,fileList:[],customRequest:function(e){return e.onSuccess()},disabled:Z,onFileChange:K,prompt:k,className:h()([s,x]),children:v})}},33673:function(e,n,t){t.d(n,{$7:function(){return i},N3:function(){return o},R$:function(){return u},UG:function(){return r},v4:function(){return a}});var r=16,a=!0,i=200,u=200,o="#242424"},90740:function(e,n,t){t.d(n,{b6:function(){return O},tM:function(){return H},pF:function(){return x.Z},g6:function(){return S.Z},ZP:function(){return g}});var r,a,i=t(30001),u=t(19058),o=t(58054),c=t(39427),s=t(50959),l=t(35273),f=t(78794),d=t(76285),p=t(85349),v=t(11527),h=["customRequest","accept","fileValidate","autoRemove","beforeUpload","onChange","onError"],m=function(e){var n=e.customRequest,t=e.accept,r=e.fileValidate,a=void 0===r?{}:r,m=e.autoRemove,g=void 0===m||m,C=e.beforeUpload,x=e.onChange,b=e.onError,w=(0,c.Z)(e,h),Z=(0,f.$)().t,k=(0,s.useRef)({onChange:x});k.current.onChange=x;var y=(0,s.useCallback)(function(){var e=(0,o.Z)((0,u.Z)().mark((function e(t){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==n?void 0:n(t);case 2:return e.next=4,(0,d.ws)({file:t.file.fileInstance,onProgress:t.onProgress,onSuccess:t.onSuccess,onError:t.onError});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]),j=(0,s.useCallback)(function(){var e=(0,o.Z)((0,u.Z)().mark((function e(n){var r,o;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.file).doneValidate=!1,r.fileInstance){e.next=5;break}return r.doneValidate=!0,e.abrupt("return",{shouldUpload:!1});case 5:return e.next=7,(0,p.D0)(r.fileInstance,(0,i.Z)({accept:t},a));case 7:if(o=e.sent,r.doneValidate=!0,!0!==o.shouldUpload){e.next=11;break}return e.abrupt("return",o);case 11:return e.abrupt("return",(0,i.Z)((0,i.Z)({},o),{},{autoRemove:g}));case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,a,C,g]),_=(0,s.useCallback)((function(e){var n,t,r=e.currentFile,a=e.fileList,i=r,u=a;if("success"===i.status){var o=i.response;i.uri=o.uploadResult.Uri,i.md5=o.uploadResult.ImageMd5,i.sizeNum=o.fileSize;var c=u.findIndex((function(e){return e.uid===i.uid}));-1!==c&&u.splice(c,1,i)}null===(n=(t=k.current).onChange)||void 0===n||n.call(t,{currentFile:i,fileList:u})}),[]),R=(0,s.useCallback)((function(){for(var e,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];l.FN.error((null===(e=t[3])||void 0===e?void 0:e.statusText)||Z("pc_upload_fail")),null==b||b.apply(void 0,t)}),[b]);return(0,v.jsx)(l.gq,(0,i.Z)((0,i.Z)({},w),{},{action:"/",customRequest:y,beforeUpload:j,onChange:_,onError:R}))},g=m,C=((0,l.Q2)(m,{valueKey:"fileList",valuePath:"fileList",onKeyChangeFnName:"onChange"}),t(261)),x=t(58745),b=t(53644),w=t(84875),Z=t.n(w);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},k.apply(this,arguments)}var y=function(e){return s.createElement("svg",k({width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=s.createElement("path",{d:"M15.0433 18.4607V7.06157L20.2182 12.2364C20.6265 12.6448 21.2853 12.6448 21.6937 12.2364C22.1021 11.828 22.1021 11.1693 21.6937 10.7609L14.7393 3.80643C14.7273 3.79451 14.7154 3.78258 14.7005 3.77066C14.6946 3.7647 14.6886 3.75874 14.6826 3.75575C14.6767 3.74979 14.6707 3.74383 14.6618 3.73787C14.6528 3.73191 14.6469 3.72594 14.6379 3.71998C14.632 3.717 14.626 3.71104 14.623 3.70806L14.5962 3.69017C14.5902 3.68719 14.5872 3.68421 14.5813 3.68123C14.5723 3.67527 14.5634 3.66931 14.5515 3.66335C14.5455 3.66037 14.5425 3.65738 14.5366 3.6544C14.5276 3.64844 14.5187 3.64248 14.5068 3.6395C14.5008 3.63652 14.4948 3.63354 14.4918 3.63056C14.4829 3.62459 14.474 3.62161 14.465 3.61565L14.4471 3.60671C14.4382 3.60373 14.4292 3.59777 14.4233 3.59479C14.4173 3.5918 14.4084 3.58882 14.4024 3.58584C14.3935 3.58286 14.3875 3.57988 14.3786 3.5769L14.3517 3.56796C14.3458 3.56498 14.3398 3.562 14.3309 3.562C14.3219 3.55901 14.313 3.55603 14.3011 3.55305C14.2951 3.55007 14.2891 3.55007 14.2832 3.54709C14.2713 3.54411 14.2623 3.54113 14.2504 3.53815C14.2444 3.53815 14.2385 3.53517 14.2325 3.53517C14.2206 3.53219 14.2116 3.52921 14.1997 3.52921C14.1938 3.52921 14.1878 3.52622 14.1818 3.52622C14.1699 3.52324 14.161 3.52324 14.149 3.52026C14.1431 3.52026 14.1371 3.51728 14.1282 3.51728C14.1192 3.51728 14.1073 3.5143 14.0984 3.5143C14.0894 3.5143 14.0805 3.5143 14.0715 3.51132C14.0626 3.51132 14.0566 3.51132 14.0477 3.50834C14.0119 3.50536 13.9791 3.50536 13.9434 3.50834C13.9344 3.50834 13.9285 3.50834 13.9195 3.51132C13.9106 3.51132 13.9016 3.51132 13.8927 3.5143C13.8837 3.5143 13.8718 3.51728 13.8629 3.51728C13.8569 3.51728 13.851 3.52026 13.842 3.52026C13.8301 3.52324 13.8211 3.52324 13.8092 3.52622C13.8033 3.52622 13.7973 3.52921 13.7913 3.52921C13.7794 3.53219 13.7705 3.53517 13.7585 3.53517C13.7526 3.53517 13.7466 3.53815 13.7407 3.53815C13.7287 3.54113 13.7198 3.54411 13.7079 3.54709C13.7019 3.55007 13.6959 3.55007 13.69 3.55305C13.681 3.55603 13.6721 3.55901 13.6602 3.562C13.6542 3.56498 13.6453 3.56498 13.6393 3.56796L13.6125 3.5769C13.6035 3.57988 13.5976 3.58286 13.5886 3.58584C13.5827 3.58882 13.5737 3.5918 13.5678 3.59479C13.5588 3.59777 13.5499 3.60373 13.5439 3.60671L13.526 3.61565C13.5171 3.62161 13.5082 3.62459 13.4992 3.63056C13.4932 3.63354 13.4873 3.63652 13.4843 3.6395C13.4754 3.64546 13.4664 3.65142 13.4545 3.65738C13.4485 3.66037 13.4456 3.66335 13.4396 3.66633C13.4306 3.67229 13.4217 3.67825 13.4098 3.68421C13.4038 3.68719 13.4008 3.69017 13.3949 3.69316C13.3859 3.69912 13.377 3.70508 13.368 3.71402C13.3621 3.717 13.3591 3.72296 13.3531 3.72595C13.3442 3.73191 13.3382 3.73787 13.3293 3.74383C13.3233 3.74979 13.3174 3.75575 13.3084 3.76172C13.3025 3.76768 13.2965 3.77364 13.2905 3.77662L13.2548 3.81239L6.30629 10.7609C5.8979 11.1693 5.8979 11.828 6.30629 12.2364C6.71467 12.6448 7.37345 12.6448 7.78184 12.2364L12.9567 7.06157V18.4607C12.9567 19.036 13.4247 19.504 14 19.504C14.5753 19.504 15.0433 19.036 15.0433 18.4607Z",fill:"white"})),a||(a=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 21C5 20.4477 5.44772 20 6 20C6.55228 20 7 20.4477 7 21V23H21V21C21 20.4477 21.4477 20 22 20C22.5523 20 23 20.4477 23 21V24C23 24.5523 22.5523 25 22 25H6C5.44772 25 5 24.5523 5 24V21Z",fill:"white"})))},j=t(98994),_="NmUDU",R="goJQO",F="C6sM6",L="TUsXD",N="gKkx7",E="i4cOW",U="EWnGt",P="byaCe",I=function(e){var n=e.fileItem,t=e.className,r=e.bgColor,a=void 0===r?"transparent":r,i=e.objectFit,u=void 0===i?"cover":i,o=e.border,c=e.onClick,f=e.onClose,d=(0,s.useMemo)((function(){return[(0,p.Bw)(n),"uploading"===(null==n?void 0:n.status)||"validating"===(null==n?void 0:n.status)]}),[null==n?void 0:n.status]),h=(0,C.Z)(d,2),m=h[0],g=h[1];return(0,v.jsxs)("div",{className:Z()([_,t,o&&F,m&&E,g&&N]),style:{backgroundColor:a},onClick:function(){return null==c?void 0:c()},children:[(0,v.jsx)("img",{style:{objectFit:u},src:n.url}),f&&(0,v.jsx)("div",{className:U,onClick:function(e){e.stopPropagation(),f()},children:(0,v.jsx)(b.bMz,{className:P})}),(0,v.jsxs)("div",{className:R,children:[g?(0,v.jsx)(l.Ex,{percent:n.percent,type:"circle",size:"small"}):(0,v.jsx)(y,{}),(0,v.jsx)(j.Z,{content:n.validateMessage,children:(0,v.jsx)(b.Ldj,{className:L})})]})]})},M=["mainText","subText","btnClassName","className","previewProps","value","disabled","onChange"],V=function(e){var n=e.mainText,t=e.subText,r=e.btnClassName,a=e.className,u=e.previewProps,o=e.value,l=e.disabled,f=e.onChange,d=(0,c.Z)(e,M),p=(0,s.useState)(),h=(0,C.Z)(p,2),m=h[0],b=h[1];return(0,v.jsx)(g,(0,i.Z)((0,i.Z)({},d),{},{disabled:l||"uploading"===(null==o?void 0:o.status),className:a,fileList:m,limit:1,draggable:!0,showUploadList:!1,autoRemove:!1,onChange:function(e){var n=e.currentFile,t=e.fileList;console.log("yoyoyo",n),n.doneValidate&&"validateFail"!==n.status&&(null==f||f(n)),b(t)},children:o?(0,v.jsx)(I,(0,i.Z)((0,i.Z)({},u),{},{fileItem:o})):(0,v.jsx)(x.Z,{error:"error"===d.validateStatus,mainText:n,subText:t,btnClassName:r})}))},H=(0,l.Q2)(V),S=t(46922),T=["className","previewProps","buttonProps","value","onChange"],D=function(e){var n=e.className,t=e.previewProps,r=e.buttonProps,a=e.value,u=e.onChange,o=(0,c.Z)(e,T);return(0,v.jsx)(S.Z,(0,i.Z)((0,i.Z)({},o),{},{className:n,onChange:function(e){var n=(0,C.Z)(e,1)[0];return null==u?void 0:u(n)},children:a?(0,v.jsx)(I,(0,i.Z)((0,i.Z)({},t),{},{fileItem:a})):(0,v.jsx)(x.Z,(0,i.Z)({},r))}))},O=(0,l.Q2)(D)},85349:function(e,n,t){t.d(n,{rJ:function(){return j},Wp:function(){return Z},Bw:function(){return x},g1:function(){return _},rp:function(){return y},Vr:function(){return R},D0:function(){return b}});var r=t(56873),a=t(19058),i=t(261),u=t(58054),o=t(35273),c=t(34210),s=t.n(c),l=t(82581),f=t(97554),d=t(82921),p=function(e,n,t){return!(void 0!==n&&e.size<1024*n||void 0!==t&&e.size>1024*t)},v=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(n,t){var r,i,u,o,c,s,l,d,p,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.FI)(n);case 2:if(r=e.sent,i=r.width,u=r.height,o=t.needSame,c=t.minWidth,s=t.maxWidth,l=t.fixedWidth,d=t.minHeight,p=t.maxHeight,v=t.fixedHeight,!(void 0!==c&&i<c||void 0!==s&&i>s||void 0!==l&&i!==l||void 0!==d&&u<d||void 0!==p&&u>p||void 0!==v&&u!==v||o&&i!==u)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(n,t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=t)&&"*"!==r||(r="image/jpg,image/png,image/gif"),r.includes("image/jpg")&&!r.includes("image/jpeg")&&(r+=",image/jpeg"),r.split(",").includes(n.type)){e.next=6;break}return e.abrupt("return",!1);case 6:if("image/png"!==n.type){e.next=12;break}return e.next=9,(0,d.FJ)(n);case 9:if(!e.sent){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=t(98069),g=t(76285),C=t(33673),x=function(e){return!!e&&("uploadFail"===e.status||"validateFail"===e.status)};function b(e,n){return w.apply(this,arguments)}function w(){return(w=(0,u.Z)((0,a.Z)().mark((function e(n,t){var r,i,u,c,s,f,d,m,g,C,x,b,w,Z,k;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.accept,i=t.minSize,u=t.maxSize,c=t.minHeight,s=t.maxHeight,f=t.minWidth,d=t.maxWidth,m=t.fixedHeight,g=t.fixedWidth,C=t.sameWidthHeight,n){e.next=5;break}x=!0,e.next=19;break;case 5:return e.prev=5,b=p(n,i,u),e.next=9,v(n,{needSame:C,minWidth:f,maxWidth:d,minHeight:c,maxHeight:s,fixedHeight:m,fixedWidth:g});case 9:return w=e.sent,e.next=12,h(n,r);case 12:Z=e.sent,x=b&&w&&Z,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),x=!1;case 19:if(x){e.next=23;break}return k=l.oc.t("pc_stickers_review_upload"),o.FN.error(k),e.abrupt("return",{shouldUpload:!1,autoRemove:!0,status:"validateFail",validateMessage:k});case 23:return e.abrupt("return",{shouldUpload:!0});case 24:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}function Z(e){var n=e.split(".")[0].match(/\d+$/);return n?Number(n[0]):0}var k=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(e){var r,a=new Image;a.addEventListener("error",(function(){t()})),a.src=null==e||null===(r=e.target)||void 0===r?void 0:r.result,n(a.src)},r.readAsDataURL(e)}))},y=function(e){var n=e.filter((function(e){return"image/png"===e.type})),t=e.filter((function(e){return"image/png"!==e.type&&e.type})),r=l.oc.t("pc_stickers_review_upload");if(null==n||!n.length||null!=t&&t.length)throw new Error(r);var o=function(e){return e.every((function(e){return 2===e.webkitRelativePath.split("/").length}))}(n),c=function(e){return e.every((function(e){return 3===e.webkitRelativePath.split("/").length}))}(n);if(!o&&!c)throw new Error(r);var s=new Map;return n.forEach((function(e){var n=e.webkitRelativePath.split("/"),t=c?n[1]:n[0];if(s.get(t)){var r,a=(null===(r=s.get(t))||void 0===r?void 0:r.concat(e))||[];s.set(t,a)}else s.set(t,[e])})),Promise.all(Array.from(s).map(function(){var e=(0,u.Z)((0,a.Z)().mark((function e(n){var t,r,u,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,i.Z)(n,2),r=t[0],u=t[1],e.next=3,k(u[0]);case 3:return o=e.sent,c=u.reduce((function(e,n){return e+n.size}),0),e.abrupt("return",{uid:(a="frame","".concat(a,"-").concat((new Date).getTime(),"-").concat(Math.random())),name:r,size:(0,d.RD)(c),status:"validating",percent:0,fileList:u,url:o});case 6:case"end":return e.stop()}var a}),e)})));return function(n){return e.apply(this,arguments)}}()))},j=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(n){var t,r,i,u,o,c,s,l,f,d,p,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.uri,r=n.fps,i=void 0===r?C.UG:r,u=n.loop,o=void 0===u?C.v4:u,c=n.bgColor,s=void 0===c?C.N3:c,l=n.width,f=void 0===l?C.$7:l,d=n.height,p=void 0===d?C.R$:d,e.next=3,(0,m.PU)({file_uri:t,fps:i,loop:o,gen_size:0,gif_gen_opts:[{bg_color:s||"",width:f,height:p,padding:0},{bg_color:"",width:0,height:0,padding:0}]});case 3:return v=e.sent,e.abrupt("return",v);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(n){var t,u,o,c,l,f,d,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new(s()),u=n.fileList||[],o=(0,r.Z)(u.entries());try{for(o.s();!(c=o.n()).done;)l=(0,i.Z)(c.value,2),f=l[0],d=l[1],t.file("".concat(f+1,".png"),d)}catch(a){o.e(a)}finally{o.f()}return e.next=6,t.generateAsync({type:"blob",compression:"DEFLATE"});case 6:return p=e.sent,e.abrupt("return",{instanse:new File([p],n.name,{type:"application/zip"})});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(n){var t,r,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.ws)({file:n});case 2:if(i=e.sent,u=(null===(t=i.uploadResult.ObjectMeta)||void 0===t?void 0:t.Uri)||(null===(r=i.uploadResult)||void 0===r?void 0:r.Uri)){e.next=6;break}throw new Error(l.oc.t("pc_upload_failed"));case 6:return e.abrupt("return",{uri:u,response:i});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},82921:function(e,n,t){t.d(n,{FJ:function(){return f},RD:function(){return l},hl:function(){return o},sT:function(){return i},w8:function(){return s},y8:function(){return u}});var r=t(19058),a=t(58054),i=function(e){return new Promise((function(n,t){try{var r=new FileReader;r.onload=function(e){var t;n(null===(t=e.target)||void 0===t?void 0:t.result)},r.readAsDataURL(e)}catch(a){console.log(a),t(a)}}))},u=function(e){return URL.createObjectURL(e)},o=function(e,n,t){return new File([e],n,t)},c=function(e){return new Promise((function(n,t){try{var r=new FileReader;r.onload=function(t){n({buffer:this.result,bufferSize:e.size})},r.readAsArrayBuffer(e)}catch(a){console.log(a),t(a)}}))};function s(e){return new Promise((function(n,t){var r=new FileReader;r.onloadend=function(){return n(r.result)},r.readAsDataURL(e)}))}var l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===e)return"".concat(parseFloat("0").toFixed(n),"B");var t=n<0?0:n,r=Math.floor(Math.log(e)/Math.log(1024)),a=parseFloat((e/Math.pow(1024,r)).toFixed(t));return"".concat(a).concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][r])},f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n);case 2:return a=e.sent,i=a.buffer,e.abrupt("return",t.e(220).then(t.t.bind(t,78220,23)).then((function(e){var n=e.isNotAPNG,t=e.isNotPNG,r=(0,e.default)(i),a=!t(r),u=!n(r);return a&&u})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},97554:function(e,n,t){t.d(n,{FI:function(){return r},UO:function(){return i},iE:function(){return a}});var r=function(e){return new Promise((function(n,t){var r="string"==typeof e,a=r?e:URL.createObjectURL(e),i=new Image;i.onload=function(){!r&&URL.revokeObjectURL(a);var e=i.width,t=i.height;n({width:e,height:t})},i.onerror=function(e){return t(e)},i.src=a}))},a=function(e){return new Promise((function(n,t){try{var r=new Image;r.addEventListener("load",(function(){var e=this.width,t=this.height;n({width:e,height:t})})),r.addEventListener("error",(function(){t()})),r.src=e}catch(a){t()}}))},i=function(e){return e.split(".")[0]||""}},76285:function(e,n,t){t.d(n,{ws:function(){return g}});var r,a=t(19058),i=t(58054),u=t(96164),o=t(27049),c=t.n(o),s=t(82581),l=t(98069),f=t(80368),d=t(74505),p=function(e){return e[e.Video=1]="Video",e[e.Image=2]="Image",e[e.Object=7]="Object",e}({}),v=(r={},(0,u.Z)(r,p.Video,"video"),(0,u.Z)(r,p.Image,"image"),(0,u.Z)(r,p.Object,"object"),r);function h(e){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)((0,a.Z)().mark((function e(n){var t,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l._M)({scene:n});case 2:return t=e.sent,r={CurrentTime:t.current_time,ExpiredTime:t.expired_time,SessionToken:t.session_token,AccessKeyId:t.access_key_id,SecretAccessKey:t.secret_access_key},i={userId:d.$.userInfo.uid,appId:Number(f.K.appInfo.appID),region:t.region,videoHost:"https://".concat(t.upload_domain),imageHost:"https://".concat(t.upload_domain),useServerCurrentTime:!0,imageConfig:{serviceId:t.space_name},videoConfig:{spaceName:t.space_name,processAction:[{name:"GetMeta"},{name:"Snapshot",input:{SkipBlackDetect:!1,SnapshotTime:0}}]},objectConfig:{spaceName:1===t.space_type?t.space_name:void 0,serviceId:2===t.space_type?t.space_name:void 0}},e.abrupt("return",{config:i,stsToken:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){return new Promise(function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t,r){var i,u,o,l,f,d,m,g,C,x,b;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.file,u=e.onProgress,o=e.onSuccess,l=e.onError,a=i.type,f=a.includes("image")?p.Image:a.includes("video")?p.Video:p.Object,n.next=4,h(f).catch((function(){}));case 4:if(d=n.sent){n.next=10;break}return m=s.oc.t("pc_upload_fail"),null==l||l({status:-1,statusText:m}),r(m),n.abrupt("return");case 10:20,null==u||u({total:100,loaded:20}),g=d.config,C=d.stsToken,(x=new(c())(g)).on("complete",(function(e){null==u||u({total:100,loaded:100}),null==o||o(e),t(e)})),x.on("progress",(function(e){null==u||u({total:100,loaded:e.percent>20?e.percent:20})})),x.on("error",(function(e){var n,t=s.oc.t("pc_upload_fail");null==l||l({status:(null===(n=e.extra)||void 0===n?void 0:n.errorCode)||-1,statusText:t}),r(t)})),b=x.addFile({file:i,stsToken:C,type:v[f]}),x.start(b),null==u||u({total:100,loaded:20});case 20:case"end":return n.stop()}var a}),n)})));return function(e,t){return n.apply(this,arguments)}}())}}}]);