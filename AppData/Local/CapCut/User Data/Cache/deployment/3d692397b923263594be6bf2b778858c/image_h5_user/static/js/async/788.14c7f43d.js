"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[788],{49314:function(e,t,i){i.d(t,{y:function(){return o}});var n=i(30001),r=i(50959),a=i(35273),s=i(70995),c=i(11527),l=function(e){var t=(0,r.useRef)(!1),i=e.id,l=e.placeholder,o=e.maxLength,u=e.value,d=e.onChange,f=e.onCompositionEnd,m=e.onCompositionStart,p=(0,r.useCallback)((function(e){t.current=!0,null==m||m(e)}),[m]),x=(0,r.useCallback)((function(e){if(null==f||f(e),"string"==typeof u&&void 0!==o){var i="";u.split("").forEach((function(e){(0,s.O1)(i)+(0,s.O1)(e)<=2*o&&(i="".concat(i).concat(e))})),null==d||d(i,e)}t.current=!1}),[f,d,o,u]),v=(0,r.useCallback)((function(e,i){if(void 0!==d)if(void 0!==o)if(t.current)d(e,i);else{var n="";e.split("").forEach((function(e){(0,s.O1)(n)+(0,s.O1)(e)<=2*o&&(n="".concat(n).concat(e))})),d(n,i)}else d(e,i)}),[d,o]),_=(0,r.useMemo)((function(){if(void 0===o||"number"==typeof u)return null;var e=u||"";return(0,c.jsx)("span",{style:{marginRight:6,color:"var(--color-text-2)"},children:Math.max(0,o-(0,s.VO)(e))})}),[o,u]),g=(0,a.tL)(i).error,h=(0,r.useMemo)((function(){return void 0===i||void 0===g?l:g}),[g,i,l]);return(0,c.jsx)(a.II,(0,n.Z)((0,n.Z)({},e),{},{autoComplete:"off",maxLength:void 0,suffix:_,placeholder:h,onChange:v,onCompositionStart:p,onCompositionEnd:x}))},o=(0,a.Q2)(l)},30036:function(e,t,i){i.d(t,{V:function(){return j}});var n=i(30001),r=i(261),a=i(50959),s=i(35273),c=i(53644),l=i(78794),o=i(84875),u=i.n(o),d=i(32662),f=i(74505),m=i(64721),p=i(70311),x="sSvgw",v="ki3E1",_="wfojK",g=i(11527),h=function(e){var t=(0,a.useState)([]),i=(0,r.Z)(t,2),o=i[0],h=i[1],j=(0,l.$)().t,A=e.itemType,k=e.className,N=e.checkboxCls,y=(0,m.ZP)(m.Qt.UseHasAgree,f.$.userInfo.uid),C=y.get,S=y.set,w=(0,p.ZP)({handleBtnText:j("pc_i_see"),needReview:!1,protocal:p.MO.Origin,onOk:function(){if(f.$.userInfo.uid){S("add",[p.MO.Origin]);var e=C();h(e)}}}).showModal;return(0,a.useEffect)((function(){if(f.$.userInfo.uid){var e=C();h(e)}}),[f.$.userInfo.uid]),(0,g.jsx)("div",{className:u()([x,k]),children:(0,g.jsxs)("div",{className:v,children:[(0,g.jsx)(s.XZ,(0,n.Z)((0,n.Z)({},e),{},{className:N,onChange:function(t){var i;t.target.checked&&(o.includes(p.MO.Origin)||w()),null==e||null===(i=e.onChange)||void 0===i||i.call(e,t.target.checked)},children:d.XH[A]})),(0,g.jsx)(c.Sus,{className:_,onClick:w})]})})},j=(0,s.Q2)(h)},23339:function(e,t,i){i.d(t,{u:function(){return I}});var n=i(85770),r=i(19058),a=i(58054),s=i(261),c=i(50959),l=i(35273),o=i(15547),u=i(78794),d=i(21551),f=i(98069),m=i(74505),p=i(64721),x=i(70995),v=i(84875),_=i.n(v),g="smxie",h="aqS4C",j="IyBLd",A="QuFv_",k="ukrQO",N="YUHwh",y=i(11527),C=function(e){var t=e.className,i=e.title,n=e.loading,r=e.loadingText,a=e.value,s=e.options,o=e.onSelect,u=(0,c.useCallback)((function(e){return a.includes(e)}),[a]);return(0,y.jsxs)("div",{className:_()([g,t]),children:[(0,y.jsx)("p",{className:h,children:i}),(0,y.jsx)("div",{className:j,children:n?(0,y.jsxs)("div",{className:A,children:[(0,y.jsx)("span",{className:k,children:r}),(0,y.jsx)(l.yC,{size:"small"})]}):s.map((function(e){return(0,y.jsx)(l.Vp,{className:N,color:u(e)?"cyan":void 0,onClick:function(){return o(e)},children:e},e)}))})]})},S=(0,d.Pi)((function(e){var t=e.value,i=e.onSelect,n=(0,c.useState)([]),r=(0,s.Z)(n,2),a=r[0],l=r[1],o=(0,p.ZP)(p.Qt.TagEachUser,m.$.userInfo.uid).get,d=(0,u.$)().t;return(0,c.useEffect)((function(){var e=o();l(e)}),[m.$.userInfo.uid]),(0,y.jsx)(C,{title:d("pc_recently_used"),value:t,options:a,onSelect:i})})),w=((0,d.Pi)((function(e){var t=e.title,i=e.uri,l=e.value,d=e.itemType,m=e.onSelect,p=(0,c.useState)([]),x=(0,s.Z)(p,2),v=x[0],_=x[1],g=(0,c.useState)([]),h=(0,s.Z)(g,2),j=h[0],A=h[1],k=(0,c.useState)(!1),N=(0,s.Z)(k,2),S=N[0],w=N[1],b=(0,c.useRef)({}),I=(0,u.$)().t,L=(0,c.useMemo)((function(){return[].concat((0,n.Z)(j),(0,n.Z)(v))}),[v,j]),V=(0,c.useCallback)((0,a.Z)((0,r.Z)().mark((function e(){var n,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,Promise.all([((null===(n=b.current)||void 0===n?void 0:n.cvid)&&t||i&&t)&&(0,f.Uz)(null!==(a=b.current)&&void 0!==a&&a.cvid?{cvid:null===(s=b.current)||void 0===s?void 0:s.cvid,title:t}:{image_uri:i,title:t}).then((function(e){A(e.cv_tags),b.current.cvid=e.cvid})),!b.current.selfConfigTagsReady&&(0,f.On)({effect_type:d}).then((function(e){_(e.rec_tags),b.current.selfConfigTagsReady=!0}))]);case 4:return e.prev=4,w(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[0,,4,7]])}))),[t,i,d]);return(0,o.Z)(V,500,[V]),(0,c.useEffect)((function(){V()}),[]),(0,y.jsx)(C,{title:I("recommend_signature"),loading:S,loadingText:I("loading"),value:l,options:L,onSelect:m})})),"KEPqc"),b=(0,d.Pi)((function(e){e.recommendConfig;var t=e.value,i=e.itemType,d=(e.disableRecommend,e.disableLatest),v=e.onChange,_=(0,c.useMemo)((function(){return t||[]}),[t]),g=(0,c.useState)(""),h=(0,s.Z)(g,2),j=h[0],A=h[1],k=(0,c.useState)([]),N=(0,s.Z)(k,2),C=N[0],b=N[1],I=(0,u.$)().t,L=(0,p.ZP)(p.Qt.TagEachUser,m.$.userInfo.uid).set;(0,o.Z)((0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:if(j){e.next=5;break}return b([]),e.abrupt("return");case 5:return e.next=7,(0,f.je)({query:j,count:10,effect_type:i});case 7:t=e.sent,n=((null==t?void 0:t.sug_words)||[]).map((function(e){return e.words})),b(n);case 10:case"end":return e.stop()}}),e)}))),500,[j,i]);var V=(0,c.useCallback)((function(e){if(_&&v){var t=_.indexOf(e);if(-1===t)return v([].concat((0,n.Z)(_),[e])),void A("");var i=(0,n.Z)(_);i.splice(t,1),v(i),A("")}}),[_,v]);return(0,y.jsxs)("div",{className:w,children:[(0,y.jsx)(l.Lt,{position:"topLeft",render:(0,y.jsx)(l.Lt.Menu,{children:C.map((function(e){return(0,y.jsx)(l.Lt.Item,{onClick:function(){return V(e)},children:e},e)}))}),children:(0,y.jsx)(l.EG,{inputValue:j,onInputChange:function(e){return function(e){(0,x.O1)(e)<=30&&A(e)}(e)},value:t,placeholder:I("please_enter_the_label_enter_key_to_confirm_the_input"),onChange:v,onAdd:function(e){return L("add",e)}})}),!1,!d&&(0,y.jsx)(S,{value:_,onSelect:V})]})})),I=(0,l.Q2)(b)},22788:function(e,t,i){i.r(t),i.d(t,{default:function(){return ut}});var n=i(50959),r=i(35273),a=i(21551),s=i(78794),c=i(49726),l=i(19058),o=i(261),u=i(58054),d=i(49765),f=i(18513),m=i(24738),p=i(573),x=i(98069),v=i(51949),_=i(47662),g=i(85349);var h=(0,n.createContext)(null),j=function(){return(0,n.useContext)(h)},A=i(85770),k=i(53644),N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIJSURBVHgB7ZnrSsNAEIVPUtumtUIpin/0/d9NNAja+yXOaWZlGys0mbBJIAdGm92WfLOZncywEQrKsmwq/2ZiI7EYzeoodhBLoyja+xOR+yDAhHxEDrxBu5SIbcU+xIETB84rqtAvyB1pGzRFJjK+Kmu+4nLxpBNHtFsDsUxW/S0W6KFcjNF+aIqMI+7DSP48oxvQvmKGxwDd04jgd+ie4qbzdGX14KHVg4dWDx5anQW3vHwmYvfwSuMbxNr6UywTY43EcvULFWQBn6G8eD86yydtKuysr3uu3K31O+/FVZ4Ufl9JVnCGCTumFf53gN+ZXrnXWmyJirKA8zEP1B6Qw/kOOOAJLvcBW7AljKW0BTxFvrkIV3Rgp3M+MMfo2B41yBoqG7WiA34c1wrsFCKPl0mXN8u64kxpTG9+F7VTm+g4M8lcx75RU5toAZ8rlBOB/M1JUDrGMKIDzD4LnV+hwc3poIvAKIwzizD+Ex1P1EwO1NFv8sZDXK7+Ne0L30n0OkUFWcD51nMvoDJa6+8SGGQB52OeolzWYNwT3IXRGBVlBV+huhx8JfWNRGj14KHVg4dWDx5aBD+hezoSfIvu6UBwNq6mgiewyJrGcvTmauYunAWRccNTZrc5XcfeZniysZo81+/+kTgnFjrZxiNxlsTv7kj8Ty2tB7Z0gI40fSJHyHOTrSH9qx+6FIGaaI5KYQAAAABJRU5ErkJggg==",y=i(74505),C=i(98994),S="BOVQ0",w="lxqny",b="pd20j",I="rNfyh",L="Bk9Lr",V="TEvra",Z="Imy8f",F="Uhsfv",P="Q6Lha",T="TY6SD",E="GMuoo",O="z4q4V",X=i(11527),B=(0,a.Pi)((function(){var e,t=(0,r.cl)().values,i=(0,s.$)().t;return(0,X.jsxs)("div",{className:S,children:[(0,X.jsxs)("p",{className:w,children:[i("interface_preview_pc"),(0,X.jsx)(C.Z,{content:i("pc_stickers_picture_used"),children:(0,X.jsx)(k.Sus,{className:b})})]}),(0,X.jsxs)("div",{className:I,children:[(0,X.jsx)("div",{className:L,children:(null==t?void 0:t.title)||i("collection_title_pc")}),(0,X.jsxs)("div",{className:F,children:[(0,X.jsx)("img",{className:P,src:y.$.userInfo.avatar||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATGSURBVHgBnVdJS2RJEA6f+4KWK4LbE72o6NQIyqCHnhbEgyKOt7nNVS+2ICpeevoXNH3zNs7Jg4itJ8FD1SCKiKBzEZdDFXpQXMt9Nzu+pLI66/mq6pUBUe9Vvsj4YsmMjEwghySEcN3c3PQkJiZ+4Hc3s5mQkOAKfgvww28YxgY/vWlpabP8LeBEb0Isgbu7O/P19fUzv/YowL29PZqfn6ednR26uLiQXFZWRi0tLdTZ2UmpqanExkyw6Jf09HQ/vYfg8e3t7VdmoXhra0sMDg6KvLw8ARE2KPQEc3REeXm5mJycFNq8r9AVFzi85ok+pYT/i+npaVFSUhIC04F1xnhNTY0IBAK6ET7odAR+fX3t1sHBa2trIiMjQypXwBziiFxUVCROT08Fr5kwIx4fH91WPMPqOSuY4VczJGAYNDY2hm/EwJJjEdbE0tKSddh8fn6eiRiJYM7DPAfzQpNeWUMdLQLguro6cXx8LKz6gKGvCUPz/rPuuaLd3d0wr3myoyj4fD5aXFy0+2QGsX4aEAzLJzvpq6ursP9IiRO6v7+n9fV1abANfVKpkNqC+9yWAOgUVCfe/zQ1NSUNsYuYwjTOz89dLPCXnRJY73K5KCkpSf53EnplNIpRdna2nMNgb2R4vAdrwUhOTu6JpoiLD2VmZjoGBxUXF9PT0xPV1tYSbz3a3t62E5OlPYkVf4ikaG5ujoaGhujl5YXioaOjI+JiJLeuMsQuCjhXkFy3nRJ4fHh4SO8h3u90cnIia0FKSkpEB9goNwww7T4i/729vTKP8RKMRzFiD6UBkdLH46ahTjg7ys/PlymIJ/8gGM8FhyorK4mP5miiLiOWooGBAfJ6vdTV1UWFhYVxGVNfX2+be52MYDNhSwCDEY2NjdTX1ye3JLaXU2ptbY1lcAAR8JMDqqqqooODA8rNzSXeujHlYTifB7Fk/DDgf3JAWIxY3SjNqAuIRDTv3G43VVdXR9WJFg4p8JIDwn4GIPcLdHl5Kd9RboPt1xv50dHRmPnnXeI1WPH3aOtAESqi2s9QjBqPQoOooFSDVUTgeXd3d8wFy6mcNTinAJ+NJghFOFgAphPyDKNQbvENkRgeHqbl5eVIp6CucwKds4wdT/w7mjCKyurqagg0kpGIDLdukh3QF4mNH7TOPPmbVQJgYI/HQ/v7+7KywUs1bpVFGnDw8AkbFRlYql0PJQnHMi+odX41lTcrKys0Pj4uu5vNzc1QChB26wIDOIyrqKighoYGam9vp7a2NiotLbUa62fwX9XFJWyVoEvhcHsWFhZM7u0lMFY8+OHhIVSY8IQxMATv+gLkOwPl5OTI7YpxlOP+/n7q6OjAueBnuY/6ZeXNMm1qanKfnZ3NsIcmQgkgbEHVlMBzBYx3GKRvQ2xNFCoYgnk4jAoKCtAj+EdGRv5obm7e0PFs9wkLm3yx8OC0UqB67lX49QZVPSEHA3CQoUbgWGZDcG/8yDr9VqxEOwO42ASysrL+hUPs7W8qhwpEea7/V70jxhAhFCzWgf/f2IA/Gfx9zQUfpyaHcYJZcHgFp0LeAfHEGBjvuAuwrGQeO+fnP5gbS7/js5VPQhcvLPSPv7NXvyA9+vWcvcYC2+Dw/8fA39ljR9fzHzUtDwkBF8nBAAAAAElFTkSuQmCC",alt:"Avatar"}),(0,X.jsx)("div",{className:Z,children:y.$.userInfo.nickname})]}),(0,X.jsx)("div",{className:V,children:(null==t?void 0:t.description)||i("collection_introduction_pc")}),(0,X.jsx)("div",{className:T,children:function(){var e=((null==t?void 0:t.stickerType)===x.Ic.Static?null==t?void 0:t.stickerList:null==t?void 0:t.frameList)||[],i=e.length,n=e.map((function(e){return e.fileItem.url||N}));if(i>=20)return n;var r=Math.max(20-i,0),a=Array(r).fill(N);return[].concat((0,A.Z)(n),(0,A.Z)(a))}().map((function(e,t){return(0,X.jsx)("div",{className:E,children:(0,X.jsx)("img",{src:e,alt:""})},e+t)}))}),null==t||null===(e=t.exampleList)||void 0===e?void 0:e.map((function(e){return(0,X.jsx)("img",{className:O,src:e.url,alt:""},e.uid)}))]})]})})),D=i(49314),M=i(23339),U=i(90740),R=i(84875),Y=i.n(R),G="dY0Sc",z="AGHWK",Q="j9ob_",K="D79ce",q="g4kRt",W=function(e){var t=e.className,i=e.rules;return(0,X.jsx)("div",{className:Y()([G,t]),children:i.map((function(e,t){return(0,X.jsxs)("div",{className:z,children:[(void 0===e.status||"normal"===e.status)&&(0,X.jsx)("div",{className:Q}),"success"===e.status&&(0,X.jsx)(k.CDR,{className:K}),(0,X.jsx)("p",{className:q,children:e.content})]},t)}))})},J=i(70995),H="VjUOm",$="KkSmC",ee="zJZKg",te="w0GdN",ie=(0,a.Pi)((function(){var e=(0,r.tL)("title").value,t=(0,r.tL)("cover").value,i=(0,s.$)().t;return(0,X.jsxs)("div",{className:H,children:[(0,X.jsx)(U.tM,{className:$,btnClassName:ee,previewProps:{className:te},field:"cover",label:i("pc_stickers_title_upload_cover"),noErrorMessage:!0,extraTextPosition:"middle",extraText:(0,X.jsx)(W,{rules:[{content:"".concat(i("file_format_pc"),"\uff1aPNG/GIF")},{content:i("size_stickers",{X:"360x360",Y:"1000x1000"})},{content:i("file_size_limit",{X:"20MB"})}]}),mainText:i("click_to_upload_or_drag_and_drop_files_here"),accept:"image/png,image/gif",fileValidate:{maxSize:20480,minHeight:360,minWidth:360,maxHeight:1e3,maxWidth:1e3},rules:[{required:!0,message:i("pc_stickers_prompt_cover_need")},{validator:function(e,t){return"success"===t.status},message:i("upload_failed")}]}),(0,X.jsx)(D.y,{label:i("collection_name_setting"),field:"title",maxLength:6,noErrorMessage:!0,placeholder:i("please_enter_a_collection_name"),rules:[{required:!0,message:i("please_enter_a_collection_name")},{validator:function(e,t){return(0,J.VO)(t)<=6},message:i("word_count_too_long")}]}),(0,X.jsx)(D.y,{label:i("collection_profile_settings"),field:"description",maxLength:26,noErrorMessage:!0,placeholder:i("please_enter_a_collection_profile"),rules:[{validator:function(e,t){return(0,J.VO)(t)<=26},message:i("word_count_too_long")}]}),(0,X.jsx)(M.u,{label:i("label_settings_sticker"),field:"tagList",itemType:m.qG.StickerCollection,noErrorMessage:!0,recommendConfig:{title:e,uri:null==t?void 0:t.uri}})]})})),ne=i(30036),re="V9xCT",ae="Wcp3N",se="_GfXy",ce="aVTaN",le=function(){var e=(0,s.$)().t;return(0,X.jsx)(C.Z,{content:(0,X.jsxs)("div",{className:re,children:[(0,X.jsx)("div",{className:ae,children:(0,X.jsx)("img",{src:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/lm_shpylaht_cs/ljhwZthlaukjlkulzlp/pc-heycan/images/example.png",alt:""})}),(0,X.jsx)("ul",{className:se,children:(0,X.jsxs)("li",{children:[e("pc_stickers_effect_app"),(0,X.jsx)("br",{})]})})]}),children:(0,X.jsx)(k.Sus,{className:ce})})},oe="K4XpW",ue="tNARh",de="BF1oW",fe="VPzlc",me={maxSize:5120,fixedWidth:1e3},pe=(0,a.Pi)((function(){var e=(0,r.tL)("exampleList").value,t=void 0===e?[]:e,i=(0,n.useState)([]),a=(0,o.Z)(i,2),c=a[0],l=a[1],u=j(),d=(0,s.$)().t,f=function(){r.FN.error(d("pc_stickers_prompt_{X}_upload_max",{X:3}))};return(0,X.jsx)(r.OF,{field:"exampleList",initValue:[],children:function(e){var i=e.arrayFields;e.addWithInitValue;return(0,X.jsx)(r.l0.Slot,{label:{text:d("sample_image_upload"),extra:(0,X.jsx)(le,{})},children:(0,X.jsxs)("div",{className:oe,children:[(0,X.jsx)(W,{rules:[{content:"".concat(d("file_format_pc"),"\uff1aPNG/GIF")},{content:d("pc_stickers_prompt_w_{X}_h_{Y}",{X:"1000px",Y:"1250px"})},{content:d("file_size_limit",{X:"5MB"})}]}),(0,X.jsx)(U.ZP,{accept:"image/png,image/gif",fileList:c,draggable:!0,multiple:!0,showUploadList:!1,prompt:d("pc_stickers_prompt_max_{X}_min_{Y}",{X:t.length,Y:0,Z:3}),fileValidate:me,limit:3,onExceed:f,onChange:function(e){return function(e){var t=e.filter((function(e){return e.doneValidate&&"validateFail"!==e.status}));u.formApi.setValue("exampleList",t),l(e)}(e.fileList)},children:(0,X.jsx)(U.pF,{btnClassName:ue,mainText:d("click_to_upload_or_drag_and_drop_files_here")})}),(0,X.jsx)("div",{className:de,children:i.map((function(e,t){return(0,X.jsx)(U.tM,{pure:!0,field:e.field,previewProps:{className:fe,bgColor:"var(--heycan-pro-black-0)",objectFit:"cover",onClose:function(){e.remove(),function(e){l((function(t){return t.splice(e,1),t}))}(t)}}},e.key)}))})]})})}})})),xe=i(56873),ve=i(97554),_e=i(30001),ge=i(89931),he="eXBab",je="oxZuS",Ae="iMmqn",ke="NPM47",Ne="Duq5V",ye="m6PwA",Ce="pkiI2",Se="hnDFD",we="CBd3e",be="khD2R",Ie="dn7Wi",Le="nVXqo",Ve=function(e){var t=e.sorting,i=e.isFrame,r=e.order,a=e.accept,c=e.field,l=e.fileValidate,o=e.onRemove,u=(0,s.$)().t,d=(0,n.useMemo)((function(){return i?U.b6:U.tM}),[i]);return(0,X.jsxs)("div",{className:Y()([he,t&&je]),children:[(0,X.jsxs)("div",{className:Ae,children:[(0,X.jsx)("span",{className:ke,children:r}),(0,X.jsx)(k.bMz,{onClick:o,className:Ne})]}),(0,X.jsxs)("div",{className:ye,children:[(0,X.jsx)(d,{pure:!0,field:"".concat(c,".fileItem"),className:Ce,fileValidate:l,accept:a,previewProps:{border:!0,className:Se}}),(0,X.jsxs)("div",{className:we,children:[(0,X.jsxs)("div",{className:be,children:[(0,X.jsx)("span",{className:Ie,children:u("item_name_sticker")}),(0,X.jsx)(D.y,{pure:!0,placeholder:u("pc_stickers_playholder_one"),field:"".concat(c,".title"),maxLength:6,rules:[{required:!0,message:u("pc_stickers_playholder_one")},{validator:function(e,t){return(0,J.VO)(t)<=6},message:u("pc_stickers_review_too_long")}]})]}),(0,X.jsxs)("div",{className:be,children:[(0,X.jsx)("span",{className:Ie,children:u("label_settings_sticker")}),(0,X.jsx)(M.u,{pure:!0,itemType:m.qG.Sticker,field:"".concat(c,".tagList"),disableLatest:!0,disableRecommend:!0})]})]})]})]})},Ze=(0,ge.W8)((function(e){return(0,X.jsx)(Ve,(0,_e.Z)({},e))})),Fe=(0,ge.JN)((function(e){var t=e.isFrame,i=e.arrayFields,a=e.accept,c=e.fileValidate,l=e.extra,u=e.onRemove,d=(0,n.useState)(!1),f=(0,o.Z)(d,2),m=f[0],p=f[1],x=(0,n.useCallback)((function(){p(!m)}),[m]),v=(0,s.$)().t;return(0,X.jsxs)("div",{className:Le,children:[Boolean(i.length)&&(0,X.jsxs)("div",{className:Ae,children:[(0,X.jsx)(r.l0.Label,{text:v("sticker_edit"),required:!0}),(0,X.jsx)(r.zx,{theme:m?"solid":"light",onClick:x,children:v(m?"done_pc":"pc_sort")})]}),l,i.map((function(e,i){var n=e.key,r=e.remove,s=e.field;return(0,X.jsx)(Ze,{isFrame:t,disabled:!m,index:i,order:i+1,field:s,accept:a,fileValidate:c,onRemove:function(){r(),null==u||u(i)}},n)}))]})})),Pe=Fe,Te="rk0MS",Ee="M_lnf",Oe="rg2Pd",Xe="image/png",Be={maxSize:20480,minHeight:360,minWidth:360,maxHeight:800,maxWidth:800},De=(0,a.Pi)((function(){var e=(0,r.tL)("stickerList").value,t=void 0===e?[]:e,i=(0,n.useState)([]),a=(0,o.Z)(i,2),c=a[0],l=a[1],u=j(),d=(0,s.$)().t,f=function(){r.FN.error(d("pc_stickers_review_{X}_max",{X:u.config.maxStaticCount}))},m=(0,n.useCallback)((function(e){var t=e.oldIndex,i=e.newIndex,n=u.formApi.getValue("stickerList"),r=(0,J.Rp)(n,t,i);u.formApi.setValue("stickerList",r)}),[u.formApi]),p=function(e){l((function(t){return t.splice(e,1),t}))};return(0,X.jsx)(r.OF,{field:"stickerList",initValue:[],children:function(e){var i=e.arrayFields;return(0,X.jsxs)("div",{className:Te,children:[(0,X.jsx)(W,{rules:[{content:"".concat(d("file_format_pc"),": PNG")},{content:d("size_stickers",{X:"360x360",Y:"800x800"})},{content:d("file_size_limit",{X:"20MB"})}]}),(0,X.jsx)(U.ZP,{accept:Xe,multiple:!0,draggable:!0,showUploadList:!1,fileList:c,prompt:d("pc_stickers_prompt_max_{X}_min_{Y}",{X:t.length,Y:u.config.minStaticCount,Z:u.config.maxStaticCount}),limit:u.config.maxStaticCount,fileValidate:Be,onExceed:f,onChange:function(e){return function(e){var t,i=u.formApi.getValue("stickerList")||[],n=new Map,r=(0,xe.Z)(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.set(a.fileItem.uid,a)}}catch(c){r.e(c)}finally{r.f()}var s=e.filter((function(e){return e.doneValidate&&"validateFail"!==e.status})).map((function(e){var t=n.get(e.uid);return{fileItem:e,title:t?t.title:(0,ve.UO)(e.name),tags:t?t.tags:[]}}));u.formApi.setValue("stickerList",s),l(e)}(e.fileList)},children:(0,X.jsx)(U.pF,{btnClassName:Ee,mainText:d("click_to_upload_or_drag_and_drop_files_here")})}),(0,X.jsx)(Pe,{accept:Xe,fileValidate:Be,helperClass:Oe,lockAxis:"y",pressDelay:100,arrayFields:i,onSortEnd:m,onRemove:p})]})}})})),Me="Jjdo5",Ue="IvG54",Re="GQW0h",Ye="FD2D9",Ge="HfJnV",ze="pLPZA",Qe="image/png",Ke={maxSize:20480,minHeight:360,minWidth:360,maxHeight:1080,maxWidth:1080,maxFps:49,minFps:2},qe=(0,a.Pi)((function(){var e=(0,r.tL)("frameList").value,t=void 0===e?[]:e,i=j(),a=(0,s.$)().t,c=(0,n.useCallback)((function(e,t){if(e){var n=(i.formApi.getValue("frameList")||[]).findIndex((function(t){return t.fileItem.uid===e.uid}));if(!(-1!==n)){if("validating"===e.status)return;return"validateFail"===e.status?void r.FN.error(e.validateMessage):void t({fileItem:e,title:e.name,tagList:[]})}i.formApi.setValue("frameList[".concat(n,"].fileItem"),e)}}),[t,i.formApi]),l=(0,n.useCallback)((function(e){var t=e.oldIndex,n=e.newIndex,r=i.formApi.getValue("frameList"),a=(0,J.Rp)(r,t,n);i.formApi.setValue("frameList",a)}),[i.formApi]);return(0,X.jsx)(r.OF,{field:"frameList",initValue:[],children:function(e){var n=e.arrayFields,s=e.addWithInitValue;return(0,X.jsxs)("div",{className:Me,children:[(0,X.jsx)(W,{rules:[{content:a("sequence_frame_stickers_will_be_uploaded_in_groups_of_picture_folders")},{content:a("pc_stickers_prompt_max_{X}_min_{Y}_only_{Z}_format",{X:49,Y:"1080x1080",Z:"PNG"})}]}),(0,X.jsx)(U.g6,{fileList:t.map((function(e){return e.fileItem})),accept:Qe,prompt:a("pc_stickers_prompt_max_{X}_min_{Y}",{X:t.length,Y:i.config.minDynamicCount,Z:i.config.maxDynamicCount}),fileValidate:Ke,limit:i.config.maxDynamicCount,onChange:function(e){c(e[0],s)},children:(0,X.jsx)(U.pF,{disableDragEffect:!0,btnClassName:Ue,mainText:a("click_to_upload_or_drag_and_drop_files_here")})}),(0,X.jsx)(Pe,{isFrame:!0,accept:Qe,fileValidate:Ke,helperClass:Re,lockAxis:"y",arrayFields:n,extra:(0,X.jsxs)("div",{className:Ye,children:[(0,X.jsx)("span",{children:a("pc_default_frame_rate")}),(0,X.jsx)(r.l0.InputNumber,{className:Ge,hideButtons:!0,field:"fpsSetting",pure:!0,initValue:16,min:1,max:49,rules:[{type:"number",required:!0,min:1,max:49}]}),(0,X.jsx)("span",{children:"FPS"}),(0,X.jsxs)("span",{className:ze,children:["\uff08",a("web_apply_to_all"),"\uff09"]})]}),onSortEnd:l})]})}})})),We="ioc6N",Je="l7p5E",He=function(){var e=(0,r.tL)("stickerType").value,t=(0,s.$)().t,i=(0,n.useCallback)((function(t){return t===e?void 0:We}),[e]);return(0,X.jsxs)("div",{children:[(0,X.jsxs)(r.l0.Slot,{label:{text:t("sticker_upload_ing"),required:!0},children:[(0,X.jsx)(r.l0.RadioGroup,{field:"stickerType",pure:!0,initValue:x.Ic.Static,options:[{label:t("static_stickers_pc"),value:x.Ic.Static},{label:t("dynamic_stickers_pc"),value:x.Ic.Dynamic}]}),(0,X.jsx)("div",{className:i(x.Ic.Static),children:(0,X.jsx)(De,{})}),(0,X.jsx)("div",{className:i(x.Ic.Dynamic),children:(0,X.jsx)(qe,{})})]}),(0,X.jsx)(ne.V,{pure:!0,className:Je,initValue:!1,field:"isOriginal",itemType:m.qG.Sticker}),(0,X.jsx)(pe,{})]})},$e=i(14261),et=(0,a.Pi)((function(){var e=j(),t=(0,s.$)().t,i=(0,v.Z)().jumpUser,a=(0,r.cl)().values,c=(0,n.useMemo)((function(){return 0===e.step?[t("pc_cancel"),t("next_step_stickers")]:[t("previous_step_stickers"),t("publish_tt_pc")]}),[e.step]),d=(0,o.Z)(c,2),f=d[0],m=d[1],p=function(){var i=(0,u.Z)((0,l.Z)().mark((function i(){var n,a,s;return(0,l.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,n=0===e.step,a=["cover","title","description","tags"],!n){i.next=8;break}return i.next=6,e.formApi.validate(a);case 6:return e.goToStep(1),i.abrupt("return");case 8:return s=e.formApi.getValue("stickerType"),i.next=11,e.formApi.validate([].concat(a,[s===x.Ic.Static?"stickerList":"frameList"]));case 11:e.publish(),i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),r.FN.error(t("pc_parameter_validation_failed"));case 17:case"end":return i.stop()}}),i,null,[[0,14]])})));return function(){return i.apply(this,arguments)}}();return(0,X.jsx)($e.Z,{prevText:f,nextText:m,hideProtocal:!1,checkProtocal:1===e.step,onPrev:function(){0!==e.step?e.goToStep(0):i()},onNext:p,disabledNext:function(){try{var t,i="success"===(null==a||null===(t=a.cover)||void 0===t?void 0:t.status),n=Boolean(null==a?void 0:a.title);if(0===e.step)return!i||!n;var r=(null==a?void 0:a.stickerType)===x.Ic.Static,s=(r?null==a?void 0:a.stickerList:null==a?void 0:a.frameList)||[],c=r?[e.config.minStaticCount,e.config.maxStaticCount]:[e.config.minDynamicCount,e.config.maxDynamicCount],l=(0,o.Z)(c,2),u=l[0],d=l[1],f=s.length>=u&&s.length<=d,m=s.reduce((function(e,t){var i="success"===t.fileItem.status,n=Boolean(t.title);return e&&i&&n}),f),p=((null==a?void 0:a.exampleList)||[]).reduce((function(e,t){return e&&"success"===t.status}),!0);return!(i&&n&&m&&p)}catch(v){return console.error(v),!1}}()})})),tt="n4LAx",it="X66ze",nt="ukWSa",rt="hde0P",at="n7BSg",st="hF3V_",ct="ZUUzx",lt="bj6Av",ot=(0,a.Pi)((function(){var e=function(){var e=(0,s.$)().t,t=(0,v.Z)().jumpUser,i=(0,d.hN)((function(){return{step:0,loading:!1,formApi:null,get config(){return{minStaticCount:20,maxStaticCount:80,minDynamicCount:20,maxDynamicCount:80}},goToStep:(0,f.aD)((function(e){i.step=e})),setLoading:(0,f.aD)((function(e){return i.loading=e})),setFormApi:(0,f.aD)((function(e){return i.formApi=e})),publish:function(){return(0,u.Z)((0,l.Z)().mark((function n(){var a,s,c,d,f,v,h,j,A,k,N;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,i.setLoading(!0),(a=i.formApi.getValues()).cover.uri){n.next=5;break}throw new Error(e("upload_failed"));case 5:if(s=a.stickerType===x.Ic.Dynamic?[a.frameList,x.r0.UserPostPcSequenceCollection]:[a.stickerList,x.r0.UserPostPcCollection],c=(0,o.Z)(s,2),d=c[0],f=c[1],!(d.length<i.config.minStaticCount)){n.next=8;break}throw new Error(e("pc_stickers_review_{X}_min",{X:i.config.minStaticCount}));case 8:if(!(d.length>i.config.maxStaticCount)){n.next=10;break}throw new Error(e("pc_stickers_review_{X}_max",{X:i.config.maxStaticCount}));case 10:if(v={effect_type:m.qG.StickerCollection,is_vip:!1,common_data:{title:a.title,description:a.description,icon:{image_uri:a.cover.uri},source:f,tags:a.tags,is_original:a.isOriginal,web_extra:JSON.stringify({tab_detail_images:(a.exampleList||[]).map((function(e){return e.uri}))})},collection_info:void 0},h=a.stickerType===x.Ic.Dynamic,j=a.stickerType===x.Ic.Static,A=new Map,!h){n.next=17;break}return n.next=17,Promise.all(d.map(function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){var i,n,r,s,c;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.g1)(t.fileItem);case 2:return i=e.sent,e.next=5,(0,g.Vr)(i.instanse);case 5:return n=e.sent,r=n.uri,e.next=9,(0,g.rJ)({uri:r,fps:a.fpsSetting});case 9:s=e.sent,c={uri:s.file_uri,md5:s.file_md5,size:s.file_size,largeImageUri:s.gif_infos[1].uri,iconUri:s.gif_infos[0].uri},A.set(t.fileItem.uid,c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 17:return k=d.map((function(t){if(!t.fileItem.uri)throw new Error(e("upload_failed"));var i={effect_type:m.qG.Sticker,is_vip:!1,common_data:{title:t.title,description:t.title,icon:{image_uri:""},file:void 0,source:f,tags:t.tags,is_original:a.isOriginal},sticker:void 0};if(j)i.common_data.icon.image_uri=t.fileItem.uri,i.sticker={large_image:{image_uri:t.fileItem.uri},sticker_type:a.stickerType};else if(h){var n=A.get(t.fileItem.uid);if(!n)throw new Error(e("upload_failed"));i.common_data.icon.image_uri=n.iconUri,i.common_data.file={file_uri:n.uri,file_md5:n.md5,size:n.size},i.sticker={large_image:{image_uri:n.largeImageUri},sticker_type:a.stickerType}}return i})),n.next=20,Promise.all(k.map((function(e){return(0,x.TT)(e)})));case 20:return N=n.sent,v.collection_info={resource_id_list:N.map((function(e){return e.resource_id}))},n.next=24,(0,x.TT)(v);case 24:r.FN.success(e("published_successfully_jump_to_the_personal_homepage")),(0,_.ZM)({effect_type:v.effect_type}),setTimeout((function(){t()}),1e3),n.next=34;break;case 29:n.prev=29,n.t0=n.catch(0),console.log("err err",n.t0),(0,p.Z)("captureException",n.t0),r.FN.error(e("something_went_wrong,_please_try_again"));case 34:return n.prev=34,i.setLoading(!1),n.finish(34);case 37:case"end":return n.stop()}}),n,null,[[0,29,34,37]])})))()}}}));return i}(),t=(0,s.$)().t,i=(0,n.useMemo)((function(){return[{step:0,text:t("information_settings_pc")},{step:1,text:t("upload_stickers_pc")}]}),[]),a=(0,n.useCallback)((function(t){return t===e.step?void 0:lt}),[e.step]);return(0,c.Z)(t("sticker_collection")),(0,X.jsx)(h.Provider,{value:e,children:(0,X.jsx)(r.l0,{getFormApi:e.setFormApi,layout:"vertical",labelPosition:"top",children:(0,X.jsx)(r.yC,{spinning:e.loading,children:(0,X.jsxs)("div",{className:tt,children:[(0,X.jsxs)("div",{className:it,children:[(0,X.jsx)("div",{className:nt,children:(0,X.jsx)(B,{})}),(0,X.jsxs)("div",{className:rt,children:[(0,X.jsx)(r.Rg,{className:at,type:"basic",current:e.step,size:"small",onChange:function(t){t<e.step&&e.goToStep(t)},children:i.map((function(e){var t=e.step,i=e.text;return(0,X.jsx)(r.Rg.Step,{className:st,icon:(0,X.jsx)("span",{className:"semi-steps-item-number-icon",children:t+1}),title:i},t)}))}),(0,X.jsxs)("div",{className:ct,children:[(0,X.jsx)("div",{className:a(0),children:(0,X.jsx)(ie,{})}),(0,X.jsx)("div",{className:a(1),children:(0,X.jsx)(He,{})})]})]})]}),(0,X.jsx)(et,{})]})})})})})),ut=ot},70995:function(e,t,i){i.d(t,{O1:function(){return r},Rp:function(){return a},VO:function(){return n}});i(38023);var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Math.ceil(e.split("").reduce((function(e,t){return e+(/^[\u4e00-\u9fa5]$/.test(t)?2:1)}),0)/2)},r=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("").reduce((function(e,t){return e+(/^[\u4e00-\u9fa5]$/.test(t)?2:1)}),0)};function a(e,t,i){var n=e.slice();return n.splice(i<0?n.length+i:i,0,n.splice(t,1)[0]),n}}}]);